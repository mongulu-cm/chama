define("shoutOut/utils/shoutOutUtils",["jquery"],function(a){"use strict";function e(a){return c+a+"/direct#/messages-list"}function f(a){return c+a+"/direct#/template-choose"}function g(a){var c=encodeURIComponent("?dl=message&referralInfo=editorSoPanel&tags=so-template-site-promotion");return"https://www.wix.com/my-account/sites/"+a+"/app/"+b+"?referralInfo=editorSoPanel&appState="+c}function h(b,c){var e=d+"services/instance?metaSiteId="+b;a.get(e).done(function(b){var e=b?b.instance:null;if(e){var f=d+"messages/counts?instance="+e;a.get(f).done(function(a){c(a&&a.total>0?{isReturning:!0}:{isReturning:!1})}).fail(function(){c({isReturning:!1})})}else c({isReturning:!1})}).fail(function(){c({isReturning:!1})})}var b="135c3d92-0fea-1f9d-2ba5-2a1dfb04297e",c="https://editor.wix.com/shoutout/",d="//editor.wix.com/shoutout/api/";return{appDefId:b,getReturningUserIframeUrl:e,getDirectTemplatesUrl:f,getShoutOutNewMessageUrl:g,getUserState:h}}),define("shoutOut/panels/soMenuPanel.rt",["react/addons","lodash","superAppMenuInfra"],function(a,b,c){"use strict";return function(){return a.createElement(c.superAppPanel,b.assign({},{superApp:this.getSuperApp(),panelClass:"shoutout-panel"},this.filteredProps()))}}),define("shoutOut/utils/bi/shoutOutEvents",[],function(){"use strict";var a={SHOUTOUT_NEW_MESSAGE:{evid:77,src:36,endpoint:"shout",sampleRatio:0,fields:{context:"string",msid:"guid",origin:"string",package_group:"string",package_id:"string"}},SHOUTOUT_EDITOR_PANEL_OPEN:{evid:89,src:36,endpoint:"shout",sampleRatio:0,fields:{is_first:"bool",msid:"guid"}},SHOUTOUT_EDITOR_PANEL_CLOSE:{evid:90,src:36,endpoint:"shout",sampleRatio:0,fields:{is_first:"bool",msid:"guid"}}},b=function(b){b.bi.register("components","event",a)};return{biEvents:a,registerEvents:b}}),define("shoutOut/utils/bi/shoutOutBi",["shoutOut/utils/bi/shoutOutEvents"],function(a){"use strict";return{events:a.biEvents,registerEvents:a.registerEvents}}),define("shoutOut/panels/shoutOutPanel/shoutOutPanel.rt",["react/addons","lodash","util","baseUI","symbols"],function(a,b,c,d,e){"use strict";return function(){return a.createElement("div",{className:"welcome-slide shoutout-add-panel"},this.state.userState==this.userStates.loading?a.createElement("div",{key:"shoutOutLoadingState",className:"shoutout-loading shoutout-panel-loading"}):null,this.state.userState==this.userStates.firstTime?a.createElement("div",{key:"shoutOutFirstTimeState",className:"shoutout-panel-first-time"},a.createElement("div",{className:"close",onClick:this.onClose},a.createElement(e.symbol,{name:"headerCloseButton",className:"headerCloseButton"})),a.createElement("div",{className:"shoutout-first-time-image",src:this.promotionalImage,alt:"shoutout"},a.createElement("img",{src:this.promotionalImage,alt:"shoutout"})),a.createElement("h1",{className:"title shoutout-first-time-title"},c.translate("SiteApp_ShoutOut_Panel_Title")),a.createElement("div",{className:"sub-title shoutout-first-time-sub-title"},a.createElement("div",{className:"shoutout-first-time-sub-title-line"},c.translate("SiteApp_ShoutOut_Panel_Sub_Title_Get_The_Word")),a.createElement("div",{className:"shoutout-first-time-sub-title-line"},c.translate("SiteApp_ShoutOut_Panel_Sub_Title_Market_Your")," ",c.translate("SiteApp_ShoutOut_Panel_Sub_Title_Send_NewsLetter"))),a.createElement(d.button,{label:"SiteApp_ShoutOut_Panel_Next_button_Label",onClick:this.startNowClick,className:"shoutout-returning-create-new"})):null,this.state.userState==this.userStates.returning?a.createElement("div",{key:"shoutOutReturningState",className:"shoutout-panel-returning"},a.createElement("header",{className:"panel-header light shoutout-returning-header"},a.createElement("span",{className:"panel-header-title"},c.translate("SiteApp_ShoutOut_Common_My_ShoutOuts")),a.createElement("div",{className:"close",onClick:this.onClose},a.createElement(e.symbol,{name:"headerCloseButton",className:"headerCloseButton"}))),a.createElement("iframe",{className:"shoutout-returning-user-iframe",src:this.returningUserIframeUrl(),width:"100%"}),a.createElement("div",{className:"shoutout-returning-footer"},a.createElement(d.button,{label:"SiteApp_ShoutOut_Panel_Returning_New",onClick:this.createNewClick,className:"shoutout-returning-create-new"}))):null)}}),define("shoutOut/panels/shoutOutPanel/shoutOutPanel",["react","core","util","panels","shoutOut/utils/shoutOutUtils","shoutOut/utils/bi/shoutOutBi","shoutOut/panels/shoutOutPanel/shoutOutPanel.rt","tpa"],function(a,b,c,d,e,f,g){"use strict";return a.createClass({displayName:"shoutOutPanel",mixins:[b.mixins.editorAPIMixin,c.propTypesFilterMixin,c.postMessageMixin],propTypes:{},promotionalImage:c.media.getMediaUrl("shoutOut/shoutOutPromotional.png"),userStates:{loading:"loading",firstTime:"firstTime",returning:"returning"},returningUserIframeUrl:function(){var a=this.getEditorAPI().site.getMetaSiteId();return e.getReturningUserIframeUrl(a)},getInitialState:function(){return{userState:"none"}},componentDidMount:function(){this._updatedState()},startNowClick:function(){var a="",b=this.getEditorAPI().site.getMetaSiteId();this._newMessageEvent(),a=e.getShoutOutNewMessageUrl(b),window.open(a)},createNewClick:function(){this._newMessageEvent();var a=this.getEditorAPI().site.getMetaSiteId();d.panelManager.openPanel("panels.focusPanels.shoutOutTemplatesPanel",{frameUrl:e.getDirectTemplatesUrl(a)},!0)},onClose:function(){var a={is_first:this.state.userState===this.userStates.firstTime};this.getEditorAPI().bi.event(f.events.SHOUTOUT_EDITOR_PANEL_CLOSE,a),this.props.onClose()},_newMessageEvent:function(){var a={context:"editor",msid:"guid",origin:"editorShotoutPanel",package_group:"",package_id:""};this.getEditorAPI().bi.event(f.events.SHOUTOUT_NEW_MESSAGE,a)},_updatedState:function(){var a=this.getEditorAPI().site.getMetaSiteId();this.setState({userState:this.userStates.loading}),e.getUserState(a,this._onDone.bind(this))},_onDone:function(a){var b=a.isReturning?this.userStates.returning:this.userStates.firstTime,c={is_first:!a.isReturning};this.getEditorAPI().bi.event(f.events.SHOUTOUT_EDITOR_PANEL_OPEN,c),this.setState({userState:b})},render:g})}),define("shoutOut/panels/soMenuPanel",["react","lodash","util","shoutOut/utils/shoutOutUtils","shoutOut/panels/soMenuPanel.rt","shoutOut/panels/shoutOutPanel/shoutOutPanel"],function(a,b,c,d,e,f){"use strict";return a.createClass({displayName:"soMenuPanel",mixins:[c.propTypesFilterMixin],getSuperApp:function(){return{id:"shoutout",appDefId:d.appDefId,appName:"shoutout",firstTimeTour:{templateFlow:[f],manuallyInstalledFlow:[f],promotionalFlow:[f]},panel:{name:"shoutOut.menuPanel",manage:{title:"no_title",helpId:"1",template:f},pages:{title:"no_title",helpId:"1",template:f},addElements:{title:"no_title",helpId:"1",template:f},learnMore:{title:"no_title",helpId:"1",template:f}},upgradeLinkText:"superAppTranslationKeys.upgradeLinkText",isAppInstalled:function(){return!1}}},render:e})}),define("shoutOut",["core","superAppMenuInfra","shoutOut/panels/soMenuPanel"],function(a,b,c){"use strict";return{onPreviewReady:function(c){function n(a){b.button.registerButton(c,d,e,f,g,h,i,j,a),m=!0}var d="shoutout",e=!0,f=a.constants.SUPER_APPS.SHOUTOUT_PANEL_NAME,g="SiteApp_ShoutOut_Button_Hover_Caption",h="SiteApp_ShoutOut_Button_Hover_Caption",i="shoutout-panel",j="shoutOutLeftBarIcon",k=c.generalInfo.isSitePublished(),l=function(){m||n(!0)},m=!1;k?n(!1):c.registerSitePublishedCallbacks(l)},menuPanel:c}});