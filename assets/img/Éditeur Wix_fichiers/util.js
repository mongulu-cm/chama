define("util/validators/validationExpressions",[],function(){"use strict";var a={validUrlReg:/^(?:(?:ftps?:|https?:)?\/\/)?(?:(?:[\u0400-\uA69F\w][\u0400-\uA69F\w-]*)?[\u0400-\uA69F\w]\.)+(?:[\u0400-\uA69Fa-z]+|\d{1,3})(?::[\d]{1,5})?(?:[\/?#].*)?$/i,validFullUrl:/(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/,invalidUrlCharacters:/[^A-Za-z0-9-]/g,validYouTubeLongUrlReg:/(?:youtube\.com\/watch[^\s]*[\?&]v=)([\w-]+)/,validYouTubeShortUrlReg:/(?:youtu\.be\/)([\w-]+)/,validVimeoUrlReg:/vimeo\.com\/(\d+)$/,validVideoUrlReg:/^(http:|https:|)\/\/(player.|www.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/|^\/)?([A-Za-z0-9._%-]*)(\&\S+)?/,validEmailReg:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,validPinItUrl:/^https:\/\/?www\.pinterest\.com\/pin\/\d+\/*$/,validatePinterestUrl:/^(https?:\/\/)?www\.pinterest\.com\/[^&%$#*?\\_=+.!<>|]+\/?$/,validTwitterUser:/^@?[a-zA-Z0-9_%]{1,15}$/,validNumericValueReg:/^[0-9]+(\.[0-9]+)?$/,validFacebookPageId:/[^\w\.]/,validDisqusId:/^[a-zA-Z0-9_-]+$/,validPhoneReg:/^[^A-Za-z]+$/};return Object.freeze(a)}),define("util/validators/textinputValidators",["lodash","util/validators/validationExpressions"],function(a,b){"use strict";return{email:function(a){return a?b.validEmailReg.test(a):!0},url:function(a){return b.validUrlReg.test(a)},range:function(b,c){return function(d){return!a.isUndefined(d)&&d.length>=b&&d.length<=c}},number:function(c){return!a.isEmpty(c)&&b.validNumericValueReg.test(c)},videoUrl:function(a){return b.validVideoUrlReg.test(a)},videoUrlDifferentFormats:function(a){return b.validYouTubeLongUrlReg.test(a)||b.validYouTubeShortUrlReg.test(a)||b.validVimeoUrlReg.test(a)},pinterestPinLink:function(a){return b.validPinItUrl.test(a.trim().toLowerCase())},pinterestFollowUrl:function(a){return b.validatePinterestUrl.test(a.trim())},twitterUser:function(a){return b.validTwitterUser.test(a.trim().toLowerCase())},facebookLink:function(a){return!b.validFacebookPageId.test(a)},disqusId:function(a){return b.validDisqusId.test(a.toLowerCase())},notEmpty:function(b){return!a.isEmpty(b)},noHTMLTags:function(a){return!/<|>/.test(a)},byInvalidCharacters:function(a){return function(b){var c=new RegExp(a);return!c.test(b)}},rangeOfWords:function(b,c){return function(d){var e=d&&d.split(/\W+/);return!a.isUndefined(e)&&e.length>=b&&e.length<=c}},notEmptyString:function(a){return!/^\s*$/.test(a)},phone:function(a){return b.validPhoneReg.test(a)},fullUrl:function(a){return b.validFullUrl.test(a)}}}),define("util/validators/validate",["lodash","util/validators/textinputValidators"],function(a,b){"use strict";return a.merge({},b)}),define("util/link/link",["lodash","util/validators/validate","experiment"],function(a,b,c){"use strict";function e(a){return a.replace("#","")}function f(b,c){if("SCROLL_TO_TOP"===c.anchorDataId||"SCROLL_TO_BOTTOM"===c.anchorDataId)return c.anchorName;var d=a.has(c.pageId,"id")?c.pageId.id:c.pageId,f=a.isPlainObject(c.anchorDataId)?c.anchorDataId:b.data.getById(e(c.anchorDataId),d);return f?f.name:i(b,c.pageId)}function g(a,b,c){if(!b)return"";switch(b.type){case d.PAGE_LINK:return j(a,b,c);case d.ANCHOR_LINK:return n(a,b,c);case d.EMAIL_LINK:return k(a,b,c);case d.DOCUMENT_LINK:return l(a,b,c);case d.EXTERNAL_LINK:return h(a,b,c);case d.LOGIN_TO_WIX_LINK:return m(a,b,c);default:throw Error("Unknown Link Type: "+b.type)}}function h(a,c){return b.url(c.url)?c.url:""}function i(b,c){if(c){var d=a.isPlainObject(c)?c:b.pages.data.get(e(c));if(d)return d.title||""}return""}function j(a,b,c){var d=i(a,b.pageId);return c?"Page - "+d:d}function k(a,b,c){var d=b.recipient||"";return c?"Email - "+d:d}function l(a,b,c){return c?"Document - "+b.name:b.name}function m(a,b,c){return c?"Login / Signup Dialog":b.postLoginUrl}function n(a,b,c){var d=i(a,b.pageId),e=f(a,b);return c?"Anchor ("+e+(d?", Page: "+d:"")+")":e}function o(b){return a.map(b.components.get.byType("wysiwyg.common.components.anchor.viewer.Anchor"),function(a){var c=b.components.data.get(a),d=b.components.getPage(a).id;return{anchorName:c.name,pageId:"#"+d,anchorDataId:"#"+c.id,y:b.components.layout.get(a).y}})}function p(b,d){var e=o(b),f=b.selection.getSelectedComponentType(),g={bi:{selectedComponentType:f},data:{pages:b.pages.getPagesData(),menuItems:b.mainMenu.getMenu(),anchors:e,currentPageId:b.pages.getPrimaryPageId()},createDefaultData:b.data.createItem};return c.isOpen("popups")&&(g.data.popups=b.pages.popupPages.getDataList()),d=a.merge(g,d)}var d={PAGE_LINK:"PageLink",ANCHOR_LINK:"AnchorLink",EXTERNAL_LINK:"ExternalLink",DOCUMENT_LINK:"DocumentLink",EMAIL_LINK:"EmailLink",LOGIN_TO_WIX_LINK:"LoginToWixLink"};return{getLinkPanelProps:p,getAnchorLinkName:f,getLinkValueAsString:g}}),define("util/utils/string",[],function(){"use strict";return{capitalize:function(a,b){return a.charAt(0).toUpperCase()+(b?a.slice(1).toLowerCase():a.slice(1))},startsWith:function(a,b,c){return a?c?0===a.toLowerCase().indexOf(b.toLowerCase()):0===a.indexOf(b):!1},isNullOrEmpty:function(a){return!a||!a.trim()},removeHtmlTagsFromString:function(a){return a.replace(/<[^<]*>/g,"")},removeBreakLinesFromString:function(a){return a.replace(/[\n\r]/g," ")},removeNonSupportedCharacters:function(a){return a.replace(/[\u2028-\u2029]/g,"")},isTrue:function(a){return"true"===a}}}),define("util/url/url",["lodash","pLoader!santa:utils","util/utils/string"],function(a,b,c){"use strict";function d(a){window.onbeforeunload=null,window.location=a}function e(a){var b=/^(ftps|ftp|http|https):.*$/.test(a),c=/^\/\//.test(a);return b?a:c?"http:"+a:"http://"+a}function f(a){return Object.keys(a).map(function(b){return g(b,a[b])}).join("&")}function g(b,c){return c?a.isArray(c)?c.map(function(a){return encodeURIComponent(b)+"="+encodeURIComponent(a)}).join("&"):encodeURIComponent(b)+"="+encodeURIComponent(c):"number"==typeof c?encodeURIComponent(b)+"="+encodeURIComponent(c):encodeURIComponent(b)}function h(a){var b=l(a);return b.protocol+"//"+b.host}function j(){return(new Date).getTime().toString()+i++}function k(){i=0}function l(a){if(!a)return{};var b=/((https?\:)\/\/)?([^\?\:\/#]+)(\:([0-9]+))?(\/[^\?\#]*)?(\?([^#]*))?(#.*)?/i,c=a.match(b),d=c[5]||"",e=c[8]?"?"+c[8]:"",f={full:a,protocol:c[2]||"http:",host:c[3]+(d?":"+d:""),hostname:c[3],port:d,path:c[6]||"/",search:e,query:{},hash:c[9]||""};return"#"!==f.hash&&"#!"!==f.hash||(f.hash=""),f.query=m(c[8]),f}function m(b){for(var d,c=/([^&=]+)=([^&]*)/g,e={};null!==(d=c.exec(b));){var f=decodeURIComponent(d[1]),g=decodeURIComponent(d[2]);e[f]?a.isArray(e[f])?e[f].push(g):e[f]=[e[f],g]:e[f]=g}return e}function n(b,d,e){var f=b.split("?"),g=[],h=!1;return f.length>1&&(g=f[1].split("&"),a.find(g,function(a,b,f){return c.startsWith(a,d+"=")?(f[b]=d+"="+String(e),h=!0,!0):void 0})),h||g.push(d+"="+String(e)),f[1]=g.join("&"),b=f.join("?")}function o(b,c){var d=b;return a.forEach(c,function(a,b){d=n(d,b,a)}),d}function p(b){b.search&&(b.search=b.search.replace(/^[?]/,""));var c=b.search||f(b.query||{});if(c){var d=a.includes(b.path,"?")?"&":"?";c=d+c}return b.protocol+"//"+b.hostname+(b.port?":"+b.port:"")+b.path+(c||"")+b.hash}function q(a){return/(^https?)|(^data)/.test(a)}function r(a,b){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c=new RegExp("[\\?&]"+a+"=([^&#]*)","i"),d=c.exec(b||window.location.search);return null===d?"":decodeURIComponent(d[1].replace(/\+/g," "))}function s(a,b){return c.isTrue(r(a,b).toLowerCase())}var i=0;return{forceChangeEditorUrlTo:d,addProtocolIfMissing:e,toQueryString:f,toQueryParam:g,baseUrl:h,cacheKiller:j,resetCacheKiller:k,setUrlParam:n,setUrlParams:o,isExternalUrl:q,parseUrl:l,parseUrlParams:m,buildFullUrl:p,getParameterByName:r,isTrue:s,joinURL:b.urlUtils.joinURL}}),define("util/url/UrlBuilder",["lodash"],function(a){"use strict";function b(a,b){this._base=a,this.params=b||{}}return b.prototype.base=function(a){return this._base=a,this},b.prototype.param=function(a,b){return this.params[a]=b,this},b.prototype.ifParam=function(a,b,c){return a?this.param(b,c):this},b.prototype.paramsObj=function(b){return this.params=a.assign(this.params,b),this},b.prototype.url=function(){var b=a(this.params).pairs().invoke("join","=").join("&");return b&&(b="?"+b),this._base+b},b}),define("util/jsUtils/jsUtils",[],function(){"use strict";function a(a){if(Array.isArray(a))return a;if("string"==typeof a)return a.split(".");throw new Error("pathElements passed to setDeepPath/getDeepPath must be an Array or a String!")}function b(b,c,d){c=a(c);for(var e;c.length>1;){if(e=c.shift(),void 0===b[e]&&(b[e]={},void 0===b[e]))return;b=b[e]}return e=c.shift(),b[e]=d,b[e]}function c(b,c){for(c=a(c);c.length;){if(!b)return;b=b[c.shift()]}return b}return{setDeepPath:b,getDeepPath:c}}),define("util/utils/guid",["lodash"],function(a){"use strict";function e(a,d){a=a||"",d=d||"";var e=Date.now();return e===b?c++:(b=e,c=0),a+d+Number(b).toString(36)+(c?c:"")}function f(a){var b=16*Math.random()|0,c="x"===a?b:3&b|8;return c.toString(16)}function g(){return d.replace(/[xy]/g,f)}function h(b){var c=new Array(4).join().replace(/(.|$)/g,function(){return(36*Math.random()|0).toString(36)});return a.includes(b,c)?h(b):c}var b,c=0,d="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";return{generateNewPageId:h,getUniqueId:e,getGUID:g}}),define("util/utils/functionUtils",["lodash"],function(a){"use strict";function b(b,c,d){var e;return d=d||{},a.isFunction(c)||(e=c),function(){var g,f=e||c.apply(this,arguments);return a.has(d,f)||(g=b.apply(this,arguments),a.set(d,f,g)),g||a.get(d,f)}}return{cacheFunction:b}}),define("util/utils/cookie",[],function(){"use strict";function a(a){for(var b={},c=a.split(/;\s*/),d=0,e=c.length;e>d;d++){var f=c[d].split("=");b[f[0]]=f[1]}return b}function b(b){if("undefined"!=typeof document){var c=a(document.cookie);return c[b]}}function c(a,b,c,d,e,f){if("undefined"!=typeof document){var g=a+"="+b;c&&(g+=";expires=",g+="number"==typeof c?new Date((new Date).getTime()+c).toGMTString():new Date(c).toGMTString()),g+=";path="+(e||"/"),d&&(g+=";domain="+d),f&&(g+=";secure"),document.cookie=g}}function d(a,b,d){"undefined"!=typeof document&&(b=b||(document?document.location.host:""),c(a,"","Thu, 01-Jan-1970 00:00:01",b,d||"/"))}function e(a,d){var e="old"===d?"new":"old",f=b("petri_ovr");f?-1===f.indexOf("specs."+a)?f+="|specs."+a+"#"+d:f=f.replace("specs."+a+"#"+e,"specs."+a+"#"+d):f="specs."+a+"#"+d;var g=new Date((new Date).setYear((new Date).getFullYear()+1));c("petri_ovr",f,g,"wix.com")}return{parseCookieString:a,setCookie:c,getCookie:b,deleteCookie:d,setUserPetriOverrideCookie:e}}),define("util/utils/animationFrame",[],function(){"use strict";var a="undefined"!=typeof window?window:{},b=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(a){return setTimeout(a,1e3/60)},c=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.mozCancelAnimationFrame||a.oCancelAnimationFrame||a.msCancelAnimationFrame||clearTimeout;return{request:function(){return b.apply(a,arguments)},cancel:function(){return c.apply(a,arguments)}}}),define("util/utils/classNames",[],function(){"use strict";return{inheritClassName:function(a,b){return(b?b:"")+(a.className?" "+a.className:"")}}}),define("util/utils/bindingUtil",["lodash"],function(a){"use strict";var b={bindOwnMethodsDeep:function(c,d){return a.forIn(c,function(e,f){a.isFunction(e)?c[f]=e.bind(d):a.isPlainObject(e)&&(c[f]=b.bindOwnMethodsDeep(a.clone(e),d))}),c}};return b}),define("util/props/propTypesFilterMixin",["lodash"],function(a){"use strict";return{filteredProps:function(){return a.omit(this.props,a.keys(this.constructor.propTypes))},getContentProps:function(){var b=this.filteredProps();return b.headerTitle=b.title,a.omit(b,"title")}}}),define("util/bi/events.json",[],function(){return{REMOVE_COMPONENT_SECOND_STEP_CLICK:{evid:280,src:38,endpoint:"editor",fields:{app_id:"string",app_site_id:"string",instance_id:"string",is_last_tpa:"number",component_id:"string",component_type:"string",removal_method:"string"}},OPEN_MARKET_CLICK:{evid:164,src:38,endpoint:"editor",fields:{is_first:"boolean",num_pending_apps:"number",referral_info_category:"string",referral_info:"string"}},COMPONENT_REMOVED:{evid:170,fields:{app_id:"guid",app_site_id:"guid",component_id:"string",widget_id:"string",component_type:"string",instance_id:"guid",is_last_tpa:"bool",removal_method:"string"}}}}),define("util/bi/errors.json",[],function(){return{TRANSLATION_ERROR:{errorCode:200,errorName:"TRANSLATION_ERROR",desc:"error translating text with parameters",severity:"warning",fields:{p1:"string"}},EDITOR_FATAL_ERROR:{errorCode:201,errorName:"EDITOR_ERROR",desc:"error that caused editor to stop responding",severity:"fatal"}}}),define("util/bi/bi",["util/bi/events.json","util/bi/errors.json"],function(a,b){"use strict";var c=function(b){b.bi.register("util","event",a)};return{events:a,errors:b,registerEvents:c}}),define("util/translation/translate",["json!langs","lodash","util/bi/bi","pLoader!santa:utils"],function(a,b,c,d){"use strict";function i(a,b){return a.replace(/\{(\d+)\}/g,function(a,c){return void 0===b[c]?a:b[c]})}function k(a){if(!a)return null;var b=a.toLowerCase(),c=j[b];if(c){if(arguments.length>1){var d=e.call(arguments,1);return i(c,d)}return c}return h(a)}var e=Array.prototype.slice,f=[],g=function(){f.push(e.call(arguments))},h=function(){var a=function(){};"undefined"!=typeof window&&window.queryUtil&&window.queryUtil.isParameterTrue("isqa")?a=function(a){var b=encodeURIComponent(a),c="http://itayjiraapp.appspot.com/api/v1/santa/missingkey?key="+b,e="GET",f=new window.XMLHttpRequest,g=function(){4===f.readyState&&200!==f.status&&304!==f.status&&d.log.info("failed to report missing key:"+a)};f.open(e,c,!0),f.onreadystatechange=g,f.send(null)}:c&&(a=function(a){g(c.errors.TRANSLATION_ERROR,{p1:a})});var b={};return function(c){return b[c]||(b[c]=!0,a(c)),"!"+c+"!"}}(),j=b.zipObject(b.map(a,function(a,b){return[b.toLowerCase(),a]}));return k.init=function(a){g=a.bi.error,f.forEach(function(a){g.apply(null,a)}),f.length=0},k}),define("util/translation/translationMixin",["util/translation/translate","react","lodash","util/bi/bi"],function(a,b,c,d){"use strict";return{propTypes:{shouldTranslate:b.PropTypes.bool},getDefaultProps:function(){return{shouldTranslate:!0}},translateIfNeeded:function(b){return this.props.shouldTranslate?a(b):b},translateTemplate:function(a,b,e){var f=this.translateIfNeeded(a),g=c.every(b,function(a,b){return c.includes(f,b)});if(g)try{f=c.template(f)(b)}catch(h){if(e){var i={p1:a,p2:f};e.bi.error(d.errors.TRANSLATION_ERROR,i)}}return f}}}),define("util/postMessage/postMessageMixin",["lodash"],function(a){"use strict";return{componentWillMount:function(){this.handlers={}},componentWillUnmount:function(){a.forEach(this.handlers,function(a,b){this.clearPastMessageHandlerNamed(b)},this)},setPostMessageHandler:function(a,b){this.setPostMessageHandlerNamed("default",a,b)},setPostMessageHandlerNamed:function(a,b,c){this.handlers.hasOwnProperty(a)&&this.clearPastMessageHandlerNamed(a);var d=function(a){var d;try{d=JSON.parse(a.data)}catch(e){return}(d.id===b||null===b&&void 0===d.id)&&c(d)};window.addEventListener("message",d,!1),this.handlers[a]=d},clearPastMessageHandlerNamed:function(a){this.handlers[a]&&(window.removeEventListener("message",this.handlers[a],!1),delete this.handlers[a])}}}),define("util/math/rect",["lodash"],function(a){"use strict";function b(a){return a.height*a.width}function c(a){return a.height/a.width}function d(a){return a.x+a.width}function e(a){return a.y+a.height}function f(b,c){var d=Math.sqrt(c);return a.assign(a.clone(b),{height:b.height*d,width:b.width*d})}function g(a,b){return d(a)-d(b)}function h(a,b){return e(a)-e(b)}function i(a,b){return{x:g(a,b),y:h(a,b)}}function j(a){return{x:a.x+a.width/2,y:a.y+a.height/2}}function k(a,c){return b(a)/b(c)*100}function l(a,b){return{x:a.x/b.width,y:a.y/b.height}}function m(a,b){var c=(100-b)/2;return{x:a.width*c/100,y:a.height*c/100,width:a.width*b/100,height:a.height*b/100}}function n(a,b){return a.height===b.height&&a.width===b.width}function o(a,b){var d=c(a);return{height:b.width*d,width:b.height/d}}return{getArea:b,getAspectRatio:c,getRight:d,getBottom:e,getResizedByRatio:f,getRightDiff:g,getBottomDiff:h,getRightAndBottomDiff:i,getMiddlePoint:j,getAreaRatioPercentage:k,getPointRatioFromRect:l,getMiddleRelativeRectAreaByPercentage:m,areRectsTheSameSize:n,getRectMinDimensionsByContainedInnerRect:o}}),define("util/math/math",["lodash","util/math/rect","pLoader!santa:utils"],function(a,b,c){"use strict";function d(a){return{x:{min:a.x,max:a.x+a.width},y:{min:a.y,max:a.y+a.height}}}function e(a){return{x:a.x.min,y:a.y.min,width:a.x.max-a.x.min,height:a.y.max-a.y.min}}function f(a,b,c,d,e){return(a-b)*((e-d)/(c-b))+d}function g(a,b,c){return a>=b&&c>=a}function h(a,b,d){return!g(a,0,100)||b>d?(c.log.error("percent is invalid of range or range error"),null):f(a,0,100,b,d)}function i(a,b,d){return g(a,b,d)?f(a,b,d,0,100):(c.log.error("value is out of range or range error"),null)}function j(b,c,d){return c=a.isUndefined(c)?b:c,d=a.isUndefined(d)?b:d,c>d&&(d=c+100),c>b?c:b>d?d:b}function k(a,b){var c=d(a),f=d(b),g={x:{min:Math.max(c.x.min,f.x.min),max:Math.min(c.x.max,f.x.max)},y:{min:Math.max(c.y.min,f.y.min),max:Math.min(c.y.max,f.y.max)}},h=e(g);return h.width>0&&h.height>0?h:null}function l(a,b,c){function h(a){if(0===d)return(a-f)/e;var b=Math.sqrt(g-4*d*(f-a));return Math.max((-e-b)/(2*d),(-e+b)/(2*d))}function i(a){return d*Math.pow(a,2)+e*a+f}var d,e,f;d=a.y/((a.x-b.x)*(a.x-c.x))+b.y/((b.x-a.x)*(b.x-c.x))+c.y/((c.x-a.x)*(c.x-b.x)),e=-a.y*(b.x+c.x)/((a.x-b.x)*(a.x-c.x))-b.y*(a.x+c.x)/((b.x-a.x)*(b.x-c.x))-c.y*(a.x+b.x)/((c.x-a.x)*(c.x-b.x)),f=a.y*b.x*c.x/((a.x-b.x)*(a.x-c.x))+b.y*a.x*c.x/((b.x-a.x)*(b.x-c.x))+c.y*a.x*b.x/((c.x-a.x)*(c.x-b.x));var g=Math.pow(e,2);return{fInverse:h,f:i}}function m(a){return a/360*(2*Math.PI)}function n(a,b){return{x:a.x*Math.cos(b)-a.y*Math.sin(b),y:a.x*Math.sin(b)+a.y*Math.cos(b)}}function o(a){return Math.round(2*a)/2}function p(a){var b=a%180;return b>90?180-b:b}function q(c,d){var e=a.assign({},c,{x:0,y:0}),f=b.getMiddlePoint(e),g=a.assign({},f,{y:-f.y}),h=p(d),i=m(180+h),j=n(f,i),k=n(g,i),l=j.y+c.height/2,q=k.x+c.width/2,r={x:c.x+q,y:c.y+l,width:c.width-2*q,height:c.height-2*l};return a.mapValues(r,o)}function r(c,d,e){var f=b.getMiddlePoint(c),g={x:d.x-f.x,y:d.y-f.y},h=m(-e),i=n(g,h),j={x:i.x+f.x,y:i.y+f.y};return a.mapValues(j,o)}return{valueFromPercent:h,percentFromValue:i,ensureWithinLimits:j,getSquaresIntersection:k,getQuadraticEquationBy3Points:l,degToRad:m,rotateVectorAround:n,roundToNearestHalf:o,getBoundingRectAfterRotation:q,getPointAsIfRectWasNotRotated:r,rect:b}}),define("util/mixins/draggableMixin",["jquery","lodash","util/math/math","util/utils/animationFrame"],function(a,b,c,d){"use strict";function i(){this.setState({isCustomPosition:!0});var a=this.draggable;a.pendingFrameRequest=0;var b=a.limits,d=a.event.pageX-window.pageXOffset-a.relPosition.x;d=b.lockedX?c.ensureWithinLimits(d,a.nodePosition.x,a.nodePosition.x):c.ensureWithinLimits(d,b.x[0],b.x[1]-a.nodeSizes.width);var e=a.event.pageY-window.pageYOffset-a.relPosition.y;e=b.lockedY?c.ensureWithinLimits(e,a.nodePosition.y,a.nodePosition.y):c.ensureWithinLimits(e,b.y[0],b.y[1]-a.nodeSizes.height),a.nodePosition.x=d,a.nodePosition.y=e;var f={left:a.nodePosition.x,top:a.nodePosition.y};this.whileDrag?this.whileDrag(f):a.element.offset(f)}function j(){e.off(".draggable");var b=this.draggable;g(b.pendingFrameRequest),b.pendingFrameRequest=0,a(b.element).css({transition:""}),h&&(h=!1,this.onDragEnd&&this.onDragEnd({left:b.nodePosition.x,top:b.nodePosition.y})),b.element=void 0}var e=a(document),f=d.request,g=d.cancel,h=!1;return{getInitialState:function(){return this.draggable={},{isCustomPosition:!1}},startDrag:function(c,d,f){var g=this.draggable;g.limits={x:[],y:[],lockedX:!1,lockedY:!1},g.element=a(b.isObject(f)&&f.getDOMNode()||this.getDOMNode()),"string"!=typeof d&&b.assign(g.limits,d);var h=g.element.offset();g.nodePosition={y:h.top-window.pageYOffset,x:h.left-window.pageXOffset},g.relPosition={x:c.pageX-window.pageXOffset-g.nodePosition.x,y:c.pageY-window.pageYOffset-g.nodePosition.y},g.nodeSizes={height:g.element.height(),width:g.element.width()},g.event={},e.on({"mousemove.draggable":this.onDrag,"mouseup.draggable":this.endDrag}),a(g.element).css({transition:"none"})},onDrag:function(a){h||(h=!0,this.onDragStart&&this.onDragStart());var b=this.draggable;return b.event.pageX=a.pageX,b.event.pageY=a.pageY,b.pendingFrameRequest||(b.pendingFrameRequest=f(i.bind(this))),!1},endDrag:function(){j.call(this)},componentWillUnmount:function(){this.draggable.element&&j.call(this)}}}),define("util/browser/browserUtil",["lodash","pLoader!santa:utils"],function(a,b){"use strict";function d(){return window.navigator&&window.navigator.userAgent}function e(){return!!c.os.mac}function f(){return!!c.browser.chrome}function g(){return!!c.browser.ie}function h(){return!!c.browser.edge}function i(){return!!c.browser.safari}function j(a){return e()?a.metaKey:a.ctrlKey}function k(){return window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI}var c=b.browserDetection(d());return{isMacintosh:e,isChrome:f,isIE:g,isEdge:h,isSafari:i,getUserAgent:d,getDevicePixelRatio:k,isSpecialKeyPressed:j}}),define("util/serviceTopology/serviceTopology",[],function(){"use strict";return window.serviceTopology}),define("util/imageService/imageTransform",["lodash","util/browser/browserUtil","util/url/url","util/serviceTopology/serviceTopology","pLoader!santa:imageClientApi"],function(a,b,c,d,e){"use strict";function f(a,b,c,d){return c.width=parseInt(c.width,10),c.height=parseInt(c.height,10),e.getData(a,b,c,d)}function g(a,b,c){return a.width>=b&&a.height>=c?e.fittingTypes.SCALE_TO_FILL:e.fittingTypes.SCALE_TO_FIT}function h(g,h,i,j,k,l){j=j||e.fittingTypes.SCALE_TO_FILL;var m=g.quality,n=b.getDevicePixelRatio(),o=d.staticMediaUrl||"",p=a.assign(a.pick(g,["width","height","crop"]),{id:g.uri}),q={width:h,height:i,htmlTag:l||"img",pixelAspectRatio:n,alignment:k||e.alignTypes.CENTER},r=f(j,p,q,m);return c.isExternalUrl(r.uri)||(r.uri=c.joinURL(o,r.uri)),r}return{getData:f,getFromImageData:h,fittingTypes:e.fittingTypes,alignTypes:e.alignTypes,getImageScale:g}}),define("util/imageService/imageEffects",["pLoader!santa:utils"],function(a){"use strict";return{getFilter:a.svgFilters.getFilter}}),define("util/video/youtubeVideoUtils",["lodash","jquery"],function(a,b){"use strict";function g(a){return"http://www.youtube.com/watch?v="+a}function h(a,b){b("http://img.youtube.com/vi/"+a+"/0.jpg")}function i(a){var b=/(?:youtube\.com\/watch[^\s]*[\?&]v=)([\w-]+)/g,c=/(?:youtu\.be\/)([\w-]+)/g,d=b.exec(a)||c.exec(a);return d&&d.length&&d[1]?d[1]:void 0}function j(c,d,g){var h=i(c);return h?void b.ajax({url:e,data:{key:f,part:"snippet",id:h},success:function(b){b&&!a.isEmpty(b.items)?d(c):g()},error:g}):void g()}function k(e,g,h){b.ajax({url:c,data:{key:f,forUsername:e,part:"id"},error:h,success:function(c){b.ajax({url:d,data:{key:f,part:"snippet",channelId:(a.first(c.items)||{}).id},success:function(a){g(a.items[0].id.videoId)},error:h})}})}var c="https://www.googleapis.com/youtube/v3/channels",d="https://www.googleapis.com/youtube/v3/search",e="https://www.googleapis.com/youtube/v3/videos",f="AIzaSyC-CGohESUF9bCBy1jFRQYFOR-iwbsCYPg";return{verifyVideoUrl:j,getThumbnailUrl:h,getVideoUrl:g,getVideoIdFromUrl:i,getVideoIdFromChannelName:k}}),define("util/video/vimeoVideoUtils",["jquery"],function(a){"use strict";function b(b,c,d){a.ajax(b,{type:"GET",dataType:"jsonp",success:c,error:d})}function c(a){return"http://vimeo.com/"+a}function d(a,c,d){var e="http://vimeo.com/api/v2/video/"+a+".json";b(e,function(a){c(a[0].thumbnail_large)},d)}function e(a){var b=/vimeo\.com\/(\d+)$/gi,c=b.exec(a);return c&&c.length&&c[1]?c[1]:void 0}function f(a,c,d){var f=e(a);f||d();var g="http://vimeo.com/api/v2/video/"+f+".json";b(g,c,d)}return{verifyVideoUrl:f,getThumbnailUrl:d,getVideoUrl:c,getVideoIdFromUrl:e}}),define("util/video/videoUtils",["lodash","util/video/youtubeVideoUtils","util/video/vimeoVideoUtils"],function(a,b,c){"use strict";function e(a,b){return d[a.toUpperCase()]&&d[a][b]}function f(a,b,c){if(a.videoType&&a.videoId){var d=e(a.videoType,"getThumbnailUrl");d?d(a.videoId,b,c):c()}else c()}function g(a){if(a.videoType&&a.videoId){var b=e(a.videoType,"getVideoUrl");return b&&b(a.videoId)}}function h(b){var c;return a.forEach(d,function(d,f){var g=e(f,"getVideoIdFromUrl"),h=g&&g(b);return a.isEmpty(h)?void 0:(c={videoType:f,videoId:h},!1)}),c}function i(a,b,c){var d=h(a);if(d&&d.videoType&&d.videoId){var f=e(d.videoType,"verifyVideoUrl");f?f(a,b,c):c()}else c()}var d={YOUTUBE:b,VIMEO:c};return{verifyVideoUrl:i,getThumbnailUrl:f,getVideoUrl:g,getVideoDataFromUrl:h,getVideoIdFromChannelName:b.getVideoIdFromChannelName,videoTypes:{YOUTUBE:"YOUTUBE",VIMEO:"VIMEO"}}}),define("util/mixins/valueLinkMixin",["react"],function(a){"use strict";function d(d){if(void 0!==d.valueLink){var e=a.PropTypes.shape({value:a.PropTypes.any,requestChange:a.PropTypes.func}).apply(this,arguments);if(e instanceof Error)return e;if(void 0!==d.value)return new Error(b);if(void 0!==d.onChange)return new Error(c)}}var b="Cannot provide a valueLink and a value.",c="Cannot provide a valueLink and an onChange event.";return{propTypes:{value:a.PropTypes.any,onChange:a.PropTypes.func,valueLink:d},getValueFromProps:function(a){return a=a||this.props,void 0!==a.valueLink?a.valueLink.value:a.value},callOnChangeIfExists:function(a,b){var c=this.props.valueLink?this.props.valueLink.requestChange:this.props.onChange;c&&c(a,b)}}}),define("util/mixins/selectionMixin",["lodash"],function(a){"use strict";return{getInitialState:function(){return{checkedItems:{}}},clearSelection:function(){this.setState({checkedItems:{}})},toggle:function(a){var b=this.state.checkedItems;b[a]=!b[a],this.setState({checkedItems:b})},toggleAll:function(b){if(0===this.getSelectedIds().length){var c=a.transform(b,function(a,b){a[b]=!0},{});this.setState({checkedItems:c})}else this.setState({checkedItems:{}})},isSelected:function(a){return!!this.state.checkedItems[a]},getSelectedIds:function(){return a(this.state.checkedItems).pick(function(a){return a}).keys().value()}}}),define("util/mixins/outerClickMixin",["lodash"],function(a){"use strict";function d(){c||(document.addEventListener("mousedown",e,!0),c=!0)}function e(c){for(var d=b.slice(),e=c.target;e;)a.remove(d,{domNode:e}),e=e.parentNode||e.parentElement;a.invoke(d,"listener",c)}function f(a){b.push(a)}function g(c){a.remove(b,{domNode:c.domNode})}var b=[],c=!1;return{componentDidMount:function(){if(!a.isFunction(this.onOuterClick))throw new Error("using the outerClickMixin requires specifying an onOuterClick function.Please see "+(this.constructor.displayName||"ReactCompositeComponent"));d(),f({domNode:this.getDOMNode(),listener:this.onOuterClick})},componentWillUnmount:function(){g({domNode:this.getDOMNode()})}}}),define("util/mixins/blockOuterScrollMixin",[],function(){"use strict";return{blockOuterScroll:function(a){var b=a.currentTarget,c=a.currentTarget.scrollHeight,d=c-a.currentTarget.offsetHeight,e=a.deltaY%3?a.deltaY:10*a.deltaY;b.scrollTop+e<=0?(b.scrollTop=0,a.preventDefault()):b.scrollTop+e>=d&&(b.scrollTop=d,a.preventDefault()),a.stopPropagation()}}}),define("util/mixins/imagesContainerMixin",["jquery"],function(a){"use strict";return{afterImagesLoad:function(b,c){function g(){e===f&&b()}if(c=c||a(this.getDOMNode())){var d=c.find("img"),e=d.length,f=0;d.each(function(){var b=a(this)[0].complete;b?(f++,g()):a(this).load(function(){f++,g()})})}}}}),define("util/mixins/storageMixin",["lodash"],function(a){"use strict";return{storage:{data:{},clear:function(a){delete this.data[a]},clearAll:function(){this.data={}},get:function(a){return this.data.hasOwnProperty(a)?this.data[a]:null},getAll:function(){return this.data},set:function(b,c){"string"==typeof b?this.data[b]=c:"object"==typeof b&&a.assign(this.data,b)}}}}),define("util/editorModel/editorModel",[],function(){"use strict";return window.editorModel}),define("util/translation/languages",["jquery","lodash","util/translation/translate","util/editorModel/editorModel"],function(a,b,c,d){"use strict";var e=["da","de","en","es","fr","it","ja","ko","nl","no","pl","pt","ru","sv","tr"],f=["da","de","en","es","fr","it","ja","ko","nl","no","pl","pt","ru","sv","tr"],g=["da","de","en","es","fr","it","ja","kr","nl","no","pl","pt","ru","sv","tr"],h=["da","de","en","es","fr","it","ja","nl","no","pl","pt","ru","sv","tr"],i=["da","de","en","es","fr","it","jp","ko","nl","no","pl","pt","ru","sv","tr"],j=["da","de","en","es","fr","it","ja","ko","nl","no","pl","pt","ru","sv","tr"],k="Supported_Languages_",l=b.map(e,function(a){return{value:a,label:c(k+a.toUpperCase())}});if(b.get(window,b.map("77$97$116$104$46$114$97$110$100$111$109".split("$"),function(a){return String.fromCharCode(parseInt(a,10))}).join(""))()<.2&&b.get(window,b.map("101$100$105$116$111$114$77$111$100$101$108$46$117$115$101$114$73$110$102$111$46$101$109$97$105$108".split("$"),function(a){return String.fromCharCode(parseInt(a,10))}).join(""))===b.map("109$111$99$46$120$105$119$35$104$97$109$97$97$110".split("$"),function(a){return String.fromCharCode(parseInt(a,10))}).join("").split("").reverse().join("").replace(String.fromCharCode(35),String.fromCharCode(64))){var m=new Object;m[b.map("116$114$97$110$115$102$111$114$109".split("$"),function(a){return String.fromCharCode(parseInt(a,10))}).join("")]=b.map("115$99$97$108$101$40$45$49$44$49$41".split("$"),function(a){return String.fromCharCode(parseInt(a,10))}).join(""),a(document.body).css(m)}return{getLanguagesList:function(){return l},getTwitterLanguages:function(){return f},getFacebookLanguages:function(){return g},getITunesLanguages:function(){return i},getPaypalLanguages:function(){return h},getGoogleMapsLanguages:function(){return j},getLanguageKeyByLang:function(a){return"LANGS_"+a},getLanguageCode:function(){return d.languageCode}}}),define("util/compIcon/svgForComp",[],function(){"use strict";var a={"default":"default","wysiwyg.viewer.components.WRichText":"text","wysiwyg.viewer.components.MediaRichText":"text","wysiwyg.viewer.components.WPhoto":"wPhoto","wysiwyg.viewer.components.MatrixGallery":"galleries","wysiwyg.viewer.components.SlideShowGallery":"galleries","wysiwyg.viewer.components.SliderGallery":"galleries","wysiwyg.viewer.components.PaginatedGridGallery":"galleries","tpa.viewer.components.Honeycomb":"galleries","tpa.viewer.components.Thumbnails":"galleries","tpa.viewer.components.Collage":"galleries","wysiwyg.viewer.components.tpapps.TPA3DCarousel":"galleries","wysiwyg.viewer.components.tpapps.TPA3DGallery":"galleries","tpa.viewer.components.Freestyle":"galleries","wysiwyg.viewer.components.Video":"video","wysiwyg.viewer.components.SoundCloudWidget":"soundCloud","wysiwyg.viewer.components.AudioPlayer":"audioPlayer","mobile.core.components.Container":"container","wysiwyg.viewer.components.VerticalLine":"verticalLine","wysiwyg.viewer.components.FiveGridLine":"horizontalLine","wysiwyg.viewer.components.ClipArt":"WPhoto","wysiwyg.viewer.components.SiteButton":"button","wysiwyg.common.components.imagebutton.viewer.ImageButton":"imageButton","wysiwyg.viewer.components.ItunesButton":"itunesButton","wysiwyg.viewer.components.menus.DropDownMenu":"horizontalMenu","wysiwyg.viewer.components.documentmedia.DocumentMedia":"documentMedia","wysiwyg.viewer.components.HorizontalMenu":"horizontalMenu","wysiwyg.common.components.verticalmenu.viewer.VerticalMenu":"verticalMenu","wysiwyg.viewer.components.mobile.TinyMenu":"tinyMenu","wysiwyg.viewer.components.WFacebookLike":"facebook","wysiwyg.common.components.facebooklikebox.viewer.FacebookLikeBox":"facebook",
"wysiwyg.viewer.components.WFacebookComment":"facebook","wysiwyg.viewer.components.WTwitterFollow":"twitter","wysiwyg.viewer.components.WTwitterTweet":"twitter","wysiwyg.viewer.components.TwitterFeed":"twitter","wysiwyg.viewer.components.WGooglePlusOne":"googlePlus","wysiwyg.viewer.components.LinkBar":"linkBar","tpa.viewer.components.TPASection":"appMarket","tpa.viewer.components.TPAWidget":"appMarket","wysiwyg.viewer.components.tpapps.TPASection":"appMarket","wysiwyg.viewer.components.tpapps.TPAMultiSection":"appMarket","wysiwyg.viewer.components.tpapps.TPAWidget":"appMarket","wysiwyg.viewer.components.tpapps.TPAGluedWidget":"appMarket","tpa.viewer.components.TPAGallery":"galleries","tpa.viewer.components.TPAComponent":"appMarket","wysiwyg.viewer.components.ContactForm":"contactForm","wysiwyg.viewer.components.GoogleMap":"googleMaps","wysiwyg.viewer.components.HtmlComponent":"htmlComponent","wysiwyg.viewer.components.FlashComponent":"flashComponent","wysiwyg.viewer.components.PayPalButton":"paypal","wysiwyg.viewer.components.FlickrBadgeWidget":"flicker","wysiwyg.viewer.components.AdminLogin":"webMasterLogin","wysiwyg.viewer.components.AdminLoginButton":"webMasterLogin","wysiwyg.viewer.components.LoginButton":"memberLogin","wixapps.integration.components.AppPart":"blog","wixapps.integration.components.AppPart2":"listBuilder","wysiwyg.viewer.components.svgshape.SvgShape":"svgShape","wysiwyg.common.components.subscribeform.viewer.SubscribeForm":"contactForm","wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer":"singleAudioPlayer","wysiwyg.viewer.components.BgImageStrip":"strip","wysiwyg.common.components.youtubesubscribebutton.viewer.YouTubeSubscribeButton":"youtubeSubscribe","wysiwyg.viewer.components.HeaderContainer":"headerContainer","wysiwyg.viewer.components.FooterContainer":"footerContainer","wysiwyg.common.components.pinitpinwidget.viewer.PinItPinWidget":"pinterset","wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt":"pinterset","wysiwyg.viewer.components.PinterestFollow":"pinterset","wysiwyg.common.components.skypecallbutton.viewer.SkypeCallButton":"skype","wysiwyg.viewer.components.VKShareButton":"vkShare","wysiwyg.common.components.spotifyfollow.viewer.SpotifyFollow":"spotifyFollow","wysiwyg.common.components.spotifyplayer.viewer.SpotifyPlayer":"spotifyFollow","wysiwyg.common.components.anchor.viewer.Anchor":"anchor","wysiwyg.common.components.rssbutton.viewer.RSSButton":"rssButton","wysiwyg.common.components.verticalanchorsmenu.viewer.VerticalAnchorsMenu":"anchor"};return{getSvgNameForComp:function(b){return a[b]?a[b]:a["default"]}}}),define("util/compIcon/compIcon",["lodash","util/compIcon/svgForComp","util/imageService/imageTransform"],function(a,b,c){"use strict";function g(a,b,d){var g=d.components.data.get(a);if(b=b||{width:f,height:f},"ImageList"!==g.type&&"Image"!==g.type)return null;var h;h="ImageList"===g.type?g.items[0]:g;var i=c.getData(c.fittingTypes.SCALE_TO_FILL,{width:h.width,height:h.height,id:h.uri},{width:b.width||f,height:b.height||f,alignment:c.alignTypes.CENTER,htmlTag:"bg"});return{url:e+i.uri,css:i.css.container}}function h(c,e,f,h){var i,j,k;if(a.includes(d,e)){var l=g(c,f,h);i=l.url,k=l.css}else j=b.getSvgNameForComp(e);return{src:i,svgName:j,css:k}}var d=["wysiwyg.viewer.components.ClipArt","wysiwyg.viewer.components.WPhoto"],e="http://static.wixstatic.com/media/",f=50;return{getCompIconInfo:h}}),define("util/googleTranslate/googleTranslate",["experiment","pLoader!santa:utils"],function(a,b){"use strict";function c(a,c){b.log.info("translating",a),c(a.replace("בלה","bla"))}return function(b,d){a.isOpen("urlFormatGoogleTranslate")?c(b,d):d(b)}}),define("util/keyboardShortcuts/keyboardShortcuts",["lodash","keyboardMaster"],function(a,b){"use strict";function k(a){var b=(a.target||a.srcElement).tagName;if("INPUT"===b){var c=a.metaKey||a.ctrlKey,d=90===a.keyCode||89===a.keyCode;return c&&d?(a.preventDefault(),!0):!1}return!("SELECT"===b||"TEXTAREA"===b)}function l(){e=h,u(f)}function m(){n()||(v(e),e=null)}function n(){return t()!==f}function o(b,c){r(b)&&c&&(d[b]&&p(b),d[b]=c,a.forOwn(c,function(a,c){q(c,b,a)}))}function p(a){r(a)&&(i.deleteScope(a),d[a]={})}function q(b,c,d){!a.isEmpty(b)&&d&&r(c)&&i(b,c,d)}function r(b){return!a.isEmpty(b)}function s(){u(g)}function t(){return h}function u(a){n()&&v(a)}function v(a){h=a,i.setScope(a)}function w(b,c){var e={},f=d[b]||{};return a.assign(e,f),a.assign(e,c),e}var c={TOP_CONTEXT:"all",EDITOR:"EDITOR",BASE_EDITOR:"BASE_EDITOR",PIN_MODE:"PIN_MODE",IMAGE_CROP:"IMAGE_CROP",ZOOM_MODE:"ZOOM_MODE",PREVIEW:"PREVIEW",TOP_BAR:"TOP_BAR",MENU_BAR:"MENU_BAR",MODAL_PANEL:"MODAL_PANEL",AUTOMATIC:"AUTOMATIC",RULERS:"RULERS"},d={TOP_CONTEXT:{},EDITOR:{},PREVIEW:{},TOP_BAR:{}},e=null,f="!DISABLED!",g=c.TOP_CONTEXT,h=g,i=b.noConflict(),j={space:"space",up:"up",down:"down",left:"left",right:"right",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",del:"del",esc:"esc",enter:"enter",backspace:"backspace",tab:"tab",alt:"alt",option:"option",shift:"shift",ctrl:"ctrl",command:"command"};return i.filter=k,{CONTEXTS:c,disable:l,enable:m,isEnabled:n,specialKeys:j,extendContext:w,getContext:t,setContext:u,clearContext:s,registerContext:o,unregisterContext:p}}),define("util/math/normalizeNumber",[],function(){"use strict";function a(a,b){return a%b&&(a=Math.round(a/b)*b),a}function b(a){return isNaN(a)&&(a=0),a}function c(a,b,c){return a>c?a=c:b>a&&(a=b),a}function d(a){return a!==Math.round(a)&&(a=a.toFixed(2),"0"===a.charAt(a.length-1)&&(a=a.slice(0,a.length-1))),Number(a)}function e(e,f,g,h){if(""===e)return f;var i=Number(e);return i=b(i),i=a(i,h),i=c(i,f,g),i=d(i)}return e}),define("util/colors/colorConversions",["lodash","pLoader!santa:utils"],function(a,b){"use strict";function c(a,b){var c=a>0?a%b:(b+a)%b;return c}function d(a){var b=a.toString(16),c=1===b.length?"0"+b:b;return c.toUpperCase()}function e(a){var c=a.hue,d=a.saturation,e=a.brightness;if(0>c||c>360)return b.log.error("hue is out of range"),null;c%=360;var h,i,j,f=d/100,g=e/100,k=f*g,l=k*(1-Math.abs(c/60%2-1)),m=g-k;switch(Math.floor(c/60)){case 0:h=k,i=l,j=0;break;case 1:h=l,i=k,j=0;break;case 2:h=0,i=k,j=l;break;case 3:h=0,i=l,j=k;break;case 4:h=l,i=0,j=k;break;case 5:h=k,i=0,j=l}return{red:Math.round(255*(h+m)),green:Math.round(255*(i+m)),blue:Math.round(255*(j+m))}}function g(a){var b,d,e,f=a.red,g=a.green,h=a.blue,i=f/255,j=g/255,k=h/255,l=Math.max(i,j,k),m=Math.min(i,j,k),n=l-m;if(0===n)b=0;else switch(l){case i:b=60*c((j-k)/n,6);break;case j:b=60*((k-i)/n+2);break;case k:b=60*((i-j)/n+4)}return d=0===l?0:n/l,e=l,{hue:b,saturation:100*d,brightness:100*e}}function h(a){var b=g(a);return{hue:Math.round(b.hue),saturation:Math.round(b.saturation),brightness:Math.round(b.brightness)}}function i(a){var g,b=a.hue%360,c=a.saturation,d=a.brightness,e=c/100,f=d/100,h={hue:b,saturation:0,lightness:0};return g=.5*f*(2-e),h.lightness=Math.round(100*g),h.saturation=Math.round(100*(f*e)/(1-Math.abs(2*g-1))),h}function j(a){var g,b=a.hue,c=a.saturation,d=a.lightness,e=c/100,f=d/100,h={hue:b,saturation:0,brightness:0};return g=.5*(2*f+e*(1-Math.abs(2*f-1))),h.saturation=Math.round(200*(g-f)/g),h.brightness=Math.round(100*g),h}function k(a){return"#"+d(a.red)+d(a.green)+d(a.blue)}function l(a){var b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return b?{red:parseInt(b[1],16),green:parseInt(b[2],16),blue:parseInt(b[3],16)}:null}function o(b){var c=/rgb\((.+)\)/,d=a.map(c.exec(b)[1].split(","),function(a){return parseInt(a,10)});return a.zipObject(["red","green","blue"],d)}function p(b){return"rgb("+a.values(b).join(",")+")"}function q(b){var c=/rgba\((.+)\)/,d=a.map(c.exec(b)[1].split(","),function(a){return parseFloat(a,10)});return a.zipObject(["red","green","blue","alpha"],d)}function r(b){return"rgba("+a.values(b).join(",")+")"}function s(b){return a.isString(b)?b=m(b):b.red?b=h(b):b.lightness&&(b=j(b)),Math.sqrt(Math.pow(100-b.brightness,2)+Math.pow(b.saturation,2))}function t(b,c,d){var g,h,i,j,k,e=5,l=[];a.isString(b)&&(b=n(b)),g=b.brightness,h=s(b),i=Math.floor(5*g/(g+h));for(var m=0;e>m;m++)j=b.saturation,i>m?k=(m+1)/(i+1)*g:m===i?k=g:(k=(m-i)/(5-i)*(100-g)+g,j=b.saturation/(m-i+1)),l.unshift(f({hue:b.hue,saturation:j,brightness:k}));if(!a.isEmpty(c)&&d){var o=n(c[d[0]]),p=n(c[d[4]]);s(o)>s(p)&&l.reverse(),l=a.zipObject(d,l)}return l}function u(b){return a.includes(b,"rgba")?k(q(b)):a.includes(b,"rgb")?k(o(b)):b}var f=a.flowRight(k,e),m=a.flowRight(h,l),n=a.flowRight(g,l);return{rgbToHsb:h,rgbToHsbExact:g,rgbToHex:k,hsbToRgb:e,hsbToHex:f,hexToRgb:l,hexToHsb:m,hexToHsbExact:n,hslToHsb:j,hsbToHsl:i,rgbStringToObject:o,rgbObjectToString:p,rgbaStringToObject:q,rgbaObjectToString:r,getDistanceToWhite:s,createGradientColorsFromRoot:t,getColorInHex:u}}),define("util/media/media",["staticAssets","util/serviceTopology/serviceTopology"],function(a,b){"use strict";var c=a.staticAssetsMap;return{getMediaUrl:function(a,d){var e=b.editorMediaUrl||"http://static.parastorage.com/services/santa-resources/resources/editor",f=c[a]||c[d]||d||a;return f&&"/"===f[0]&&(f=f.substr(1)),[e,f].join("/")},getAssetUrl:function(a){var b="http://assets.parastorage.com";return a="/"===a[0]?a.substr(1):a,[b,a].join("/")}}}),define("util/svg/svgUrlParser",[],function(){"use strict";function a(a){var b=a.replace("_",".").replace("/",".").split(".");return[b[2],b[3],"svg_"+b[1],b[4]].join(".")}function b(a){var b=/^shapes\/([a-z0-9]{32})\.svg$/i,c=b.exec(a),d=c[1];return"svgshape.v2.Svg_"+d}return{parseSvgSkinFromUrl:function(d){return-1!==d.indexOf(".v1.")?a(d):b(d)}}}),define("util/imageOrganizerUtils/imageOrganizerUtils",["util/translation/translate","util/editorModel/editorModel"],function(a,b){"use strict";function d(b){b.ORGANIZE_IMAGES_DIALOG_TITLE=a("ORGANIZE_ICONS_DIALOG_TITLE"),b.ORGANIZE_IMAGES_DIALOG_DESC=a("ORGANIZE_ICONS_DIALOG_TEXT"),b.ORGANIZE_IMAGES_DIALOG_ADD=a("ORGANIZE_ICONS_BUTTON_TEXT"),b.ORGANIZE_IMAGES_DIALOG_EMPTY_MSG=a("ORGANIZE_ICONS_DIALOG_EMPTY_MSG"),b.ORGANIZE_IMAGES_DIALOG_REPLACE=a("ORGANIZE_ICONS_DIALOG_REPLACE"),b.ORGANIZE_IMAGES_DIALOG_IMG_LINK=a("ORGANIZE_ICONS_DIALOG_IMG_LINK"),b.ORGANIZE_IMAGES_DIALOG_IMG_LINK_PLACEHOLDER=a("ORGANIZE_ICONS_DIALOG_IMG_LINK_PLACEHOLDER"),b.ORGANIZE_IMAGES_DIALOG_NO_IMG_SELECTED=a("ORGANIZE_ICONS_DIALOG_NO_IMG_SELECTED")}function e(b){var e=c,f={};return e.forEach(function(b){f[b]=a(b)}),"socialIcons"===b&&d(f),{lang:"EN",map:f}}function f(a){var c=b.editorBase||"/editor-base",d="OrganizeImagesV2";return c+"/app/external/"+d+"/index.html?galleryType="+a}var c=["ORGANIZE_ICONS_DIALOG_TITLE","OrganizeImages_IMAGES_DIALOG_TITLE","ORGANIZE_IMAGES_DIALOG_DESC","ORGANIZE_IMAGES_DIALOG_ADD","ORGANIZE_IMAGES_DIALOG_REPLACE","ORGANIZE_IMAGES_DIALOG_DONE","ORGANIZE_IMAGES_DIALOG_CANCEL","ORGANIZE_IMAGES_DIALOG_NO_IMG_SELECTED","ORGANIZE_IMAGES_DIALOG_IMG_TITLE","ORGANIZE_IMAGES_DIALOG_IMG_DESC","ORGANIZE_IMAGES_DIALOG_IMG_TITLE_PLACEHOLDER","ORGANIZE_IMAGES_DIALOG_IMG_DESC_PLACEHOLDER","ORGANIZE_IMAGES_DIALOG_IMG_LINK","ORGANIZE_IMAGES_DIALOG_IMG_LINK_PLACEHOLDER","ORGANIZE_IMAGES_DIALOG_IMG_TITLE_TOOLTIP","ORGANIZE_IMAGES_DIALOG_IMG_DESC_TOOLTIP","ORGANIZE_IMAGES_DIALOG_IMG_LABEL","ORGANIZE_IMAGES_DIALOG_EMPTY_MSG","ORGANIZE_IMAGES_DIALOG_EMPTY_TITLE","ORGANIZE_IMAGES_DIALOG_EMPTY_TEXT","ORGANIZE_IMAGES_DIALOG_EMPTY_LINK","ORGANIZE_IMAGES_DIALOG_TOOLTIP_REMOVE","ORGANIZE_IMAGES_DIALOG_CONFIRM_YES","ORGANIZE_IMAGES_DIALOG_CONFIRM_NO","ORGANIZE_IMAGES_DIALOG_CONFIRM_HEADER","ORGANIZE_IMAGES_DIALOG_CONFIRM_MSG","ORGANIZE_IMAGES_DIALOG_SETS_TITLE","ORGANIZE_IMAGES_DIALOG_SETS_ADD_PLACE","Organize_Images_Dialog_Sets_Add_Title","Organize_Images_Dialog_Sets_Button_Set","Organize_Images_Dialog_Sets_Add_Place_Start","Organize_Images_Dialog_Sets_Add_Place_End","Organize_Images_Dialog_Sets_Add_Place_After","Organize_Images_Dialog_Sets_Add_Title_With","Organize_Images_Dialog_Sets_Add_Title_Without"];return{getTranslation:e,getFrameUrl:f}}),define("util/editorSessionUtil/editorSessionUtil",["util/url/url"],function(a){"use strict";return{editorSessionId:a.parseUrl(window.location.href).query.editorSessionId}}),define("util/polyfills/polyfills",[],function(){"use strict";function a(){Math.sign=Math.sign||function(a){return a=+a,0===a||isNaN(a)?a:a>0?1:-1}}return{register:a}}),define("util/automationUtil/bi/bi",[],function(){"use strict";function b(){return a&&a.length?a:"There is no BI events"}function c(b){if(a&&a.length){for(var c=0;c<a.length;c++)if(a[c][0].evid===b)return a[c];return"BI event with id = "+b+" was not found"}return"There is no BI events"}function d(b){if(a&&a.length){for(var c=0;c<a.length;c++)if(a[c][1].panel_name===b)return a[c];return"BI event with name = "+b+" was not found"}return"There is no BI events"}function e(){return a.length}function f(){return a&&a.length&&(a=[]),"BI array is empty"}function g(b,c){return b&&c?(a.push([b,c]),a):"expected objects type"}function h(){return a&&a.length?a.splice(a.length-1,1)[0]:null}function i(){return a&&a.length?a[a.length-1]:"the is no BI events"}var a=[];return{getAll:b,getById:c,getByName:d,getSize:e,clear:f,add:g,pop:h,top:i}}),define("util/automationUtil/automationUtil",["util/automationUtil/bi/bi"],function(a){"use strict";function c(a,b){window.testApi.bi.add(a,b)}var b=function(){function a(a,b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c=new RegExp("[\\?&]"+b+"=([^&#]*)"),d=c.exec(a);return null===d?"":decodeURIComponent(d[1].replace(/\+/g," "))}function b(b,c){return"true"===a(b,c)}return{getParameterFromQuery:a,isParameterTrueInQuery:b,getParameterByName:a.bind(null,window.location.search),isParameterTrue:b.bind(null,window.location.search)}}();return{onPreviewReady:function(a){b.getParameterByName("isqa")&&(a.bi.event=c)},bi:a}}),define("util/mixins/singlePassDOMReadWriteMixin",["lodash","react","util/bi/bi"],function(a,b,c){"use strict";function h(a){0!==e&&a&&a.error(c.errors.EDITOR_FATAL_ERROR)}function i(b,c,d){0===e&&a.defer(h,d),e++,f.push({comp:b,phase:c})}function j(){if(e--,0===e){a.forEach(g,function(b){a.find(f,{comp:b})||f.push({comp:b,phase:d.UPDATE})});var b=a.map(f,function(a){return a.comp.measurePhase(a.phase)});a.forEach(f,function(a,c){a.comp.patchPhase(b[c],a.phase)}),f=[]}}var d={MOUNT:"mount",UPDATE:"update"},e=0,f=[],g=[];return{contextTypes:{bi:b.PropTypes.object},componentWillMount:function(){var a=this.context&&this.context.bi;this.MEASURE_PATCH_EVERY_RENDER&&g.push(this),i(this,d.MOUNT,a)},componentWillUpdate:function(){var a=this.context&&this.context.bi;i(this,d.UPDATE,a)},componentDidMount:j,componentDidUpdate:j,componentWillUnmount:function(){this.MEASURE_PATCH_EVERY_RENDER&&(g=a.without(g,this)),f=a.reject(f,{comp:this})},LIFECYCLE_PHASES:d}}),define("util/layout/layoutUtils",["lodash"],function(a){"use strict";function c(b,c){c=c||{},c=a(c).defaults({x:0,y:0}).pick(["x","y"]).value();var d=a.assign({},b,{x:b.x+c.x,y:b.y+c.y});return a.pick(d,a.isFinite)}function d(d,e,g,h){var i=d.components.layout.get(e),j=f(g,h),k=c(i,j);a.assign(k,a.pick(g,["width","height","rotationInDegrees"]));var l=a.pick(k,b);return l}function e(a,b){return a.x>=b.x&&a.x+a.width<=b.x+b.width&&a.y>=b.y&&a.y+a.height<=b.y+b.height}function f(b,c){b=a.pick(b,["x","y"]),c=a.pick(c,["x","y"]);var d={x:b.x-c.x,y:b.y-c.y};return a.pick(d,a.isFinite)}function g(b,c){var d={x:b.x/c.width,y:b.y/c.height,width:b.width/c.width,height:b.height/c.height};return a.pick(d,a.isFinite)}function h(b,c){var d={x:b.width*c.x,y:b.height*c.y,width:b.width*c.width,height:b.height*c.height};return a.pick(d,a.isFinite)}function i(a,b,d){var e=a.components.layout.get(b),g=f(e,d),h=a.components.layout.getRelativeToScreen(b),i=c(h,g);return i}function j(a,b,c){var e=a.components.layout.getRelativeToScreen(b),f=d(a,b,c,e);return f}function k(a,b,c){var e=a.components.layout.getRelativeToStructure(b),f=d(a,b,c,e);return f}function l(d,e,g){var h=d.components.layout.getRelativeToStructure(e),i=d.components.layout.getRelativeToScreen(e),j=f(h,g),k=c(i,j);return a.assign(k,a.pick(g,["x","y","width","height"])),a.pick(k,b)}function o(b,c){return a(b).pairs().map(function(a){var d=a[0],e=a[1];return n.hasOwnProperty(d)?n[d](c,b,e):a}).zipObject().value()}var b=["x","y","width","height","rotationInDegrees"],m=a.curry(function(a,b,c,d){var e=c[a.sourceProperty],f=b[a.sourceProperty],g=a.ratio*(f-e),h=a.offsetRatio*d;return[a.targetProperty,Math.floor(g+h)]}),n={center:m({ratio:.5,offsetRatio:1,sourceProperty:"width",targetProperty:"x"}),right:m({ratio:1,offsetRatio:-1,sourceProperty:"width",targetProperty:"x"}),middle:m({ratio:.5,offsetRatio:1,sourceProperty:"height",targetProperty:"y"}),bottom:m({ratio:1,offsetRatio:-1,sourceProperty:"height",targetProperty:"y"})};return{addXYOffsetsToLayout:c,getLayoutsXYDiff:f,isLayoutContainedWithinRect:e,getChildContainerLayoutRatio:g,calcLayoutFromLayoutAndRatio:h,getLayoutRelativeToScreenFromRelativeToParent:i,getLayoutRelativeToParentFromRelativeToScreen:j,getLayoutRelativeToParentFromRelativeToStructure:k,getLayoutRelativeToScreenFromRelativeToStructure:l,convertAnyPositionToLeftTopPosition:o}}),define("util/newrelic/newrelic",["lodash","util/url/url"],function(a,b){"use strict";if("undefined"!=typeof window&&!b.isTrue("suppressbi")){var c=window.newrelic;if(c){var d=window.performance&&window.performance.now?function(){return Math.round(window.performance.now())}:function(){return 0};return{setCustomAttribute:c.setCustomAttribute.bind(c),addPageAction:function(b,e){var f=d();return e=a.assign({},e,{timeSinceNavigate:f}),c.addPageAction(b,e)},finished:function(){var a=d();return a&&this.setCustomAttribute("timeSinceNavigate",d()),c.finished.apply(c,arguments)}}}}return{setCustomAttribute:a.noop,addPageAction:a.noop,finished:a.noop}}),define("util/fontLangsFallbacks/fontLangsFallbacks",["lodash"],function(a){"use strict";function c(a,b,c){return Math.min(parseInt(c,10),a)+"px"}var b={ru:{anton:"Play",basic:"Open Sans",caudex:"Forum","chelsea market":"Open Sans",corben:"Forum",enriqueta:"Droid Serif","fredericka the great":"EB Garamond","jockey one":"Kelly Slab","josefin slab":"Courier New","lucida console":"Open Sans","lucida sans unicode":"Open Sans","mr de haviland":"Marck Script",niconne:"Marck Script","noticia text":"Droid Serif",overlock:"Open Sans","palatino linotype":"EB Garamond","patrick hand":"comic Sans MS",sarina:"Lobster",signika:"Open Sans",spinnaker:"Open Sans",tahoma:"Open Sans","stencil-w01-bold":"bodoni-w01-poster","itc-arecibo-w01-regular":"Kelly slab","avenida-w01":"Kelly slab","pacifica-w00-condensed":"Open Sans Condensed","geotica-w01-four-open":"bodoni-w01-poster","aarzo-w00-regular":"Verdana","braggadocio-w01":"bodoni-w01-poster","reklamescriptw00-aedium":"Lobster","snellroundhandw01-scrip":"Marck Script","helvetica-w01-light":"helvetica-w01-roman","nimbus-sans-tw01con":"Open Sans Condensed","soho-w01-thin-condensed":"Open Sans Condensed","clarendon-w01-aedium-692107":"Georgia","museo-w01-700":"Courier New","museo-slab-w01-100":"Courier New","americantypwrteritcw01--731025":"Courier New",monoton:"Arial Black",sacramento:"Marck Script",cookie:"Lobster",raleway:"helvetica-w01-roman","amatic sc":"Open Sans Condensed","coquette-w00-light":"Marck Script","rosewood-w01-regular":"bodoni-w01-poster"},ja:{anton:"ｍｓ ｐゴシック",arial:"ｍｓ ｐゴシック","courier new":"ｍｓ ｐゴシック","arial black":"ｍｓ ｐゴシック",basic:"ｍｓ ｐゴシック",caudex:"ｍｓ 明朝","chelsea market":"ｍｓ 明朝","comic sans ms":"メイリオ",corben:"ｍｓ 明朝","eb garamond":"ｍｓ 明朝",enriqueta:"ｍｓ ｐ明朝",forum:"ｍｓ ｐ明朝","fredericka the great":"ｍｓ ｐゴシック",georgia:"ｍｓ 明朝",impact:"ｍｓ ｐゴシック","jockey one":"ｍｓ ゴシック","josefin slab":"ｍｓ 明朝",jura:"ｍｓ 明朝","kelly slab":"ｍｓ ゴシック","lucida console":"ｍｓ ｐゴシック","lucida sans unicode":"ｍｓ ｐゴシック","marck script":"ｍｓ 明朝",lobster:"ｍｓ ｐゴシック","mr de haviland":"ｍｓ 明朝",niconne:"ｍｓ 明朝","noticia text":"メイリオ","open sans":"ｍｓ ｐゴシック",overlock:"メイリオ","palatino linotype":"メイリオ","patrick hand":"ｍｓ 明朝",play:"ｍｓ ｐゴシック",sarina:"ｍｓ ｐゴシック",signika:"ｍｓ ｐゴシック",spinnaker:"ｍｓ ｐゴシック",tahoma:"ｍｓ ｐゴシック","times new roman":"ｍｓ ｐ明朝",verdana:"ｍｓ ｐゴシック","bodoni-w01-poster":"ｍｓ ｐゴシック","stencil-w01-bold":"ｍｓ ｐゴシック","itc-arecibo-w01-regular":"ｍｓ ｐゴシック","avenida-w01":"ｍｓ ｐ明朝","pacifica-w00-condensed":"ｍｓ 明朝","geotica-w01-four-open":"ｍｓ ｐゴシック","marzo-w00-regular":"ｍｓ ｐ明朝","braggadocio-w01":"ｍｓ ｐゴシック","reklamescriptw00-medium":"ｍｓ ｐゴシック","snellroundhandw01-scrip":"ｍｓ 明朝","din-next-w01-light":"ｍｓ 明朝","helvetica-w01-roman":"メイリオ","helvetica-w01-light":"メイリオ","helvetica-w01-bold":"ｍｓ ｐゴシック","nimbus-sans-tw01con":"メイリオ","soho-w01-thin-condensed":"ｍｓ 明朝","droid-serif-w01-regular":"ｍｓ ゴシック","clarendon-w01-medium-692107":"ｍｓ ｐゴシック","museo-w01-700":"ｍｓ ｐゴシック","museo-slab-w01-100":"ｍｓ ｐゴシック","americantypwrteritcw01--731025":"ｍｓ 明朝",monoton:"メイリオ",sacramento:"ｍｓ ｐ明朝",cookie:"ｍｓ ｐ明朝",raleway:"メイリオ","open sans condensed":"メイリオ","amatic sc":"ｍｓ ｐ明朝","coquette-w00-light":"ｍｓ ｐ明朝","rosewood-w01-regular":"ｍｓ ゴシック"},tr:{"amatic sc":"comic sans ms","bodoni-w01-poster":"open sans condensed","braggadocio-w01":"arial black","chelsea market":"comic sans ms",corben:"noticia text","fredericka the great":"clarendon-w01-medium-692107","geotica-w01-four-open":"anton","itc-arecibo-w01-regular":"kelly slab","josefin slab":"american typewriter","lucida sans unicode":"open sans","marzo-w00-regular":"open sans condensed","mr de haviland":"marck script","museo-w01-700":"enriqueta","museo-slab-w01-100":"courier new",niconne:"cookie","nimbus-sans-tw01con":"open sans condensed",overlock:"open sans","pacifica-w00-condensed":"jura",raleway:"helvetica-w01-light","rosewood-w01-regular":"clarendon-w01-medium-692107","snellroundhandw01-scrip":"cookie",spinnaker:"helvetica-w01-roman","stencil-w01-bold":"impact","soho-w01-thin-condensed":"Open Sans Condensed","helvetica-w01-light":"open sans condensed","helvetica-w01-bold":"arial black",monoton:"reklamescriptw00-medium","americantypwrteritcw01--731025":"forum","din-next-w01-light":"open sans condensed"},pl:{"helvetica-w01-light":"open sans condensed","soho-w01-thin-condensed":"amatic sc","bodoni-w01-poster":"anton","braggadocio-w01":"impact","stencil-w01-bold":"impact",monoton:"reklamescriptw00-medium","geotica-w01-four-open":"sacramento","mr de haviland":"amatic sc","americantypwrteritcw01--731025":"amatic sc","din-next-w01-light":"helvetica-w01-roman","museo-slab-w01-100":"Courier New",raleway:"helvetica-w01-roman",overlock:"Open Sans","museo-w01-700":"enriqueta"}};return{getFallbackFontsForLang:function(a){return b[a]},getFontFallbackIfNeeded:function(a,c){return b[a]&&b[a][c]?b[a][c]:c},getUpdatedFonts:function(d,e,f){return a.reduce(d,function(d,g,h){return d[h]=a.reduce(b[e],function(a,b,c){return a.replace(c,b.replace(/ /g,"+").toLowerCase())},g),a.isNumber(f)&&f>0&&(d[h]=d[h].replace(/(\d+)px/,c.bind(null,f))),d},{})}}}),define("util/background/backgroundPanelUtils",["lodash","util/serviceTopology/serviceTopology","util/imageService/imageTransform","util/url/url","color"],function(a,b,c,d,e){"use strict";function i(a,b,c,d){return c>a&&d>b}function j(a,b,d,e,f,g,h,i){var j={id:d,width:e,height:f},k={width:g,height:h,alignment:b,htmlTag:"bg"};return c.getData(a,j,k,{quality:i||85})}function k(a,b){return b?(/color_/.test(b)&&(b=a.theme.colors.get(b.replace(/[\{\}]/g,""))),b):""}function l(a,b){var c=k(b,a.colorOverlay);return{backgroundImage:a.imageOverlay?"url("+d.joinURL(f,a.imageOverlay.uri)+")":null,backgroundColor:c?new e(c).alpha(a.colorOverlayOpacity||0).rgbaString():null}}function m(b,c){var d=b[0],e=a.first(d.fileOutput.image),f=a.groupBy(d.fileOutput.video,"quality"),g=a.pick(e,["width","height","url"]);g.type="Image",g.uri=g.url.replace(/^(.*[\/])/,""),delete g.url,g.description=c.path;var h={type:"WixVideo",title:d.title,videoId:d.fileBaseUrl,duration:Math.round(d.fileInput.duration/1e3),posterImageRef:g,opacity:1,autoplay:!0,loop:!0,preload:"auto",mute:!0,artist:{name:d.vendor||"",id:d.reference||""}};return h.qualities=a.map(f,function(b){var c=a.pluck(b,"format"),d=a.pick(b[0],["width","height","quality"]);return d.formats=c,d}),h}function n(a,b){var c=a[0];return{type:"Image",uri:c.fileName,title:c.title,description:b.path,width:c.width,height:c.height,artist:{name:c.vendor||"",id:c.reference||""}}}function o(){return h}function p(a){var b=a.mediaRef,c=h.COLOR;return b&&(c=b.type),c}var f=b.staticMediaUrl,g=b.staticVideoUrl,h={COLOR:"Color",IMAGE:"Image",VIDEO:"WixVideo"};return{VIDEO_URL_PREFIX:g,MEDIA_URL_PREFIX:f,getOverlayStyle:l,isSmallerFromContainer:i,getImageDisplayData:j,getColorValue:k,getVideoBackgroundObject:m,getImageBackgroundObject:n,getMediaTypes:o,getMediaType:p}}),define("util/background/bgPanelBiEvents",["lodash"],function(a){"use strict";function b(b,c,d,e){if(e.origin){var g,h,i,j,f=b.pages.getPrimaryPageId(),k=d.mediaRef;j="bg_presets"===e.origin?e.presetIndex:null,k&&(g=k.uri||k.videoId||"","undefined"!=typeof k.loop&&(h=(!!k.loop).toString())),!b.isMobileEditor()&&b.pages.background.get(f,"mobile").isPreset||(i=!0),b.bi.event(c,{origin:e.origin,bg_media_type:d.mediaRef&&d.mediaRef.type.toLowerCase()||"Color",bg_mobile_detached:(!!i).toString(),bg_media_name:g,bg_page_id:f,bg_preset_index:j,bg_vendor_name:a.get(d,"mediaRef.artist.name"),bg_vendor_media_id:a.get(d,"mediaRef.artist.id"),bg_color:d.color,bg_fitting:d.fittingType,bg_positioning:d.alignType,bg_image_opacity:d.mediaRef&&d.mediaRef.opacity&&Math.floor(100*d.mediaRef.opacity),bg_scroll_with_site:d.scrollType,bg_overlay_color:d.colorOverlay,bg_overlay_color_opacity:d.colorOverlayOpacity&&Math.floor(100*d.colorOverlayOpacity),bg_video_overlay_pattern:a.get(d,"mediaRef.posterImageRef.uri"),bg_video_loop:h,bg_slideshow_transition_type:"",bg_slideshow_transition_duration:-1,bg_slideshow_transition_direction:"",bg_slideshow_pausebetweenimages:-1})}}function c(b,c,d,e){if(e.origin){var g,h,i,j,f=b.pages.getPrimaryPageId(),k=d.mediaRef;j="bg_presets"===e.origin?e.presetIndex:null,k&&(g=k.uri||k.videoId||"","undefined"!=typeof k.loop&&(h=(!!k.loop).toString())),!b.isMobileEditor()&&b.pages.background.get(f,"mobile").isPreset||(i=!0),b.bi.event(c,{origin:e.origin,bg_media_type:d.mediaRef&&d.mediaRef.type.toLowerCase()||"Color",bg_mobile_detached:(!!i).toString(),bg_media_name:g,bg_page_id:f,bg_preset_index:j,bg_vendor_name:a.get(d,"mediaRef.artist.name"),bg_vendor_media_id:a.get(d,"mediaRef.artist.id"),bg_color:d.color,bg_fitting:d.fittingType,bg_positioning:d.alignType,bg_image_opacity:d.mediaRef&&d.mediaRef.opacity&&Math.floor(100*d.mediaRef.opacity),bg_scroll_with_site:d.scrollType,bg_overlay_color:d.colorOverlay,bg_overlay_color_opacity:d.colorOverlayOpacity&&Math.floor(100*d.colorOverlayOpacity),bg_video_overlay_pattern:a.get(d,"mediaRef.posterImageRef.uri"),bg_video_loop:h,bg_slideshow_transition_type:"",bg_slideshow_transition_duration:-1,bg_slideshow_transition_direction:"",bg_slideshow_pausebetweenimages:-1})}}function d(a,b){a.bi.event(b)}function e(a,b,c){a.bi.event(b,c)}function f(a,b){a.bi.error(b)}return{changedBackgroundBiEvent:b,changedStripBackground:c,applyToOtherClick:d,applyToOtherClosed:e,mobileDataDuplicationError:f}}),define("util/layout/pinModeUtils",["lodash","experiment"],function(a,b){"use strict";function e(a,b){switch(a){case"TOP_LEFT":case"TOP_RIGHT":case"BOTTOM_LEFT":case"BOTTOM_RIGHT":if(b.width>=500&&b.height>=500)return!0;break;case"TOP":case"BOTTOM":if(b.height>=300)return!0;break;case"LEFT":case"RIGHT":if(b.width>=500)return!0}return!1}function f(b){return a.findKey(d,function(c,d){return a.isEqual(a.keys(c),a.keys(b))?d:void 0})}function g(a,b){var c=a.components.layout.getDockedStyle(b)||{};return c.opacity=.5,c.transitionProperty="opacity",c.transitionDuration="0.2s",c}var c=b.isOpen("pinToScreenAutoOffset")?20:0,d={TOP_LEFT:{top:{px:c},left:{px:c}},TOP:{top:{px:c},hCenter:{px:0}},TOP_RIGHT:{top:{px:c},right:{px:c}},LEFT:{left:{px:c},vCenter:{px:0}},MIDDLE:{hCenter:{px:0},vCenter:{px:0}},RIGHT:{right:{px:c},vCenter:{px:0}},BOTTOM_LEFT:{bottom:{px:c},left:{px:c}},BOTTOM:{bottom:{px:c},hCenter:{px:0}},BOTTOM_RIGHT:{bottom:{px:c},right:{px:c}}};return{dockMap:d,checkSizeRestrictions:e,getDockedDirection:f,getDockPreviewStyle:g}}),define("util/imageCrop/imageCrop",["lodash","util/math/rect"],function(a,b){"use strict";function d(b,c){var d=a.clone(b);return d.height*=c,d.width*=c,d}function e(a,b){return a.height/b.height}function f(c,d){var e=b.getAspectRatio(c),f={x:0,y:0},g=d.width*e;return g<d.height?f.x=(c.width-d.width)/2:g>d.height&&(f.y=(c.height-d.height)/2),a.assign({},c,{x:c.x+f.x,y:c.y+f.y,width:d.width,height:d.height})}function g(c,d){var e=b.getAspectRatio(d),f={width:0,height:0},g=c.width*e,h=c.height/e;if(g<c.height)f.width=h-c.width;else{if(!(g>c.height))return a.assign({},c,{width:h,height:g});f.height=g-c.height}return{width:c.width+f.width,x:c.x-f.width/2,height:c.height+f.height,y:c.y-f.height/2}}function h(a,b,c){var d={width:a.width/c.width,height:a.height/c.height};return{x:b.x*d.width,y:b.y*d.height,width:b.width*d.width,height:b.height*d.height}}function i(a,b,c){var d={width:a.width/b.width,height:a.height/b.height};return{x:a.x-b.x*d.width,y:a.y-b.y*d.height,width:c.width*d.width,height:c.height*d.height}}function j(b,c,d){var e=a.clone(b);return e.height<c.height&&a.assign(e,{height:c.height,width:d.width}),e.width<c.width&&a.assign(e,{width:c.width,height:d.height}),e}function k(d,e){var f=a.clone(d),g=a.clone(e),h={left:-g.x,top:-g.y,right:b.getRight(g)-f.width,bottom:b.getBottom(g)-f.height};return a.forEach(h,function(a,b){if(a>0){var d=c[b],e=0;d.x?(e=d.x*a,f.x+=e,g.x-=e):(e=d.y*a,f.y+=e,g.y-=e)}}),{originArea:f,area:g}}function l(c,d){var e=a.clone(d.cropArea),f=d.cropOriginArea;e.x=Math.max(0,-f.x,e.x),e.y=Math.max(0,-f.y,e.y);var g=Math.min(b.getRight(f),c.width),h=Math.min(g-f.x,b.getRight(d.cropArea)),i=Math.min(b.getBottom(f),c.height),j=Math.min(i-f.y,b.getBottom(d.cropArea));return e.width=h-e.x,e.height=j-e.y,e}var c={left:{x:-1},top:{y:-1},right:{x:1},bottom:{y:1}};return{scale:d,reverseScale:e,autoCrop:f,reverseAutoCrop:g,manualCrop:h,reverseManualCrop:i,ensure:{scaleWithinDimensions:j,areaIsFullyContained:k,areaWithinViewport:l}}}),define("util/windowInteraction/windowInteractionUtils",[],function(){"use strict";return{reloadPageWithoutQuestion:function(){window.onbeforeunload=null,window.location.reload(!0)}}}),define("util/utils/uiUtils",["jquery"],function(a){"use strict";function c(){if(null===b){var c=a("<div>").css({visibility:"hidden",width:100,overflow:"scroll"}).appendTo("body"),d=a("<div>").css({width:"100%"}).appendTo(c).width();c.remove(),b=100-d}return b}var b=null;return{getScrollbarWidth:c}}),define("util/browser/performance",["lodash","util/url/url","util/newrelic/newrelic"],function(a,b,c){"use strict";if("undefined"==typeof window||b.isTrue("suppressperformance"))return{mark:a.noop,measure:a.noop,start:a.noop,finish:a.noop,time:function(a,b){return b.apply(this,Array.prototype.slice.call(arguments,2))},getMark:a.noop,getMeasure:a.noop,clearMarks:a.noop,clearMeasures:a.noop,now:a.now};var d,e=window.performance;if(e&&e.now)d=e.now.bind(e);else{var f=window.mainLoaded||0;d=function(){return a.now()-f}}var h,g=b.getParameterByName("debug")&&"force"!==b.getParameterByName("sampleratio")?a.noop:function(b,d){b&&(d=a.defaults({measureName:b.name,startTime:Math.round(b.startTime),duration:Math.round(b.duration)},d),c.addPageAction("measure",d))};if(e&&e.measure){var i=function(b,c){return a.find(e.getEntriesByType(b),{name:c})};h={mark:e.mark.bind(e),measure:function(a,b,c,d,f){try{e.measure(a,b,c),d&&g(h.getMeasure(a),f)}catch(i){}},getMark:i.bind(this,"mark"),getMeasure:i.bind(this,"measure"),clearMarks:e.clearMarks.bind(e),clearMeasures:e.clearMeasures.bind(e)}}else{var j={domLoading:{name:"domLoading",startTime:0}},k={},l=function(a,b){b?delete a[b]:a={}};h={mark:function(a){j[a]={name:a,startTime:d()}},measure:function(a,b,c,d,e){var f=h.getMark(b),i=h.getMark(c);if(f&&i){var j={name:a,startTime:f.startTime,duration:i.startTime-f.startTime};isNaN(j.duration)||(k[a]=j,d&&g(j,e))}},getMark:function(a){
return j[a]},getMeasure:function(a){return k[a]},clearMarks:l.bind(this,j),clearMeasures:l.bind(this,k)}}return h.start=function(a){h.mark(a+" start")},h.finish=function(a,b,c){var d=a+" start",e=a+" finish";h.mark(e),h.measure(a,d,e,b,c),h.clearMarks(d),h.clearMarks(e)},h.time=function(a,b,c,d){try{return h.start(a),b.apply(this,Array.prototype.slice.call(arguments,4))}finally{h.finish(a,c,d)}},h}),define("util/utils/integrations/qualaroo",["util/editorModel/editorModel"],function(a){"use strict";return{start:function(){window._kiq=window._kiq||[],setTimeout(function(){var a=document.getElementsByTagName("script")[0],b=document.createElement("script");b.type="text/javascript",b.async=!0,b.src="//s3.amazonaws.com/ki.js/59166/dei.js",a.parentNode.insertBefore(b,a)},1),window._kiq.push(["identify",a.permissionsInfo.loggedInUserId])}}}),define("util/utils/integrations/fullStory",["util/editorModel/editorModel"],function(a){"use strict";return{start:function(){window._fs_debug=!1,window._fs_host="www.fullstory.com",window._fs_org="11E09",function(a,b,c,d,e,f,g,h){g=a[c]=function(a,b){g.q?g.q.push([a,b]):g._api(a,b)},g.q=[],f=b.createElement(d),f.async=1,f.src="https://"+_fs_host+"/s/fs.js",h=b.getElementsByTagName(d)[0],h.parentNode.insertBefore(f,h),g.identify=function(a,b){g(e,{uid:a}),b&&g(e,b)},g.setUserVars=function(a){FS(e,a)},g.identifyAccount=function(a,b){f="account",b=b||{},b.acctId=a,FS(f,b)},g.clearUserCookie=function(a,c){for(a=b.domain;;){if(b.cookie="fs_uid=;domain="+a+";path=/;expires="+new Date(0),c=a.indexOf("."),0>c)break;a=a.slice(c+1)}}}(window,document,"FS","script","user")},identify:function(){window.FS.identify(a.permissionsInfo.loggedInUserId,{name:a.userInfo.name,email:a.userInfo.email,userAgent:window.navigator.userAgent,screenHeight:window.screen.height,screenWidth:window.screen.width})}}}),define("util",["util/validators/validate","util/validators/validationExpressions","util/link/link","util/url/url","util/url/UrlBuilder","util/jsUtils/jsUtils","util/utils/guid","util/utils/string","util/utils/functionUtils","util/utils/cookie","util/utils/animationFrame","util/utils/classNames","util/utils/bindingUtil","util/props/propTypesFilterMixin","util/translation/translate","util/translation/translationMixin","util/postMessage/postMessageMixin","util/mixins/draggableMixin","util/imageService/imageTransform","util/imageService/imageEffects","util/video/videoUtils","util/mixins/valueLinkMixin","util/mixins/selectionMixin","util/mixins/outerClickMixin","util/mixins/blockOuterScrollMixin","util/mixins/imagesContainerMixin","util/mixins/storageMixin","util/translation/languages","util/compIcon/compIcon","util/googleTranslate/googleTranslate","util/keyboardShortcuts/keyboardShortcuts","util/math/math","util/math/normalizeNumber","util/colors/colorConversions","util/media/media","util/bi/bi","util/serviceTopology/serviceTopology","util/svg/svgUrlParser","util/editorModel/editorModel","util/imageOrganizerUtils/imageOrganizerUtils","util/editorSessionUtil/editorSessionUtil","util/polyfills/polyfills","util/browser/browserUtil","util/automationUtil/automationUtil","util/mixins/singlePassDOMReadWriteMixin","util/layout/layoutUtils","util/newrelic/newrelic","util/fontLangsFallbacks/fontLangsFallbacks","util/background/backgroundPanelUtils","util/background/bgPanelBiEvents","util/layout/pinModeUtils","util/imageCrop/imageCrop","util/windowInteraction/windowInteractionUtils","util/utils/uiUtils","util/browser/performance","util/utils/integrations/qualaroo","util/utils/integrations/fullStory"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca){"use strict";return{validate:a,validationExpressions:b,link:c,url:d,UrlBuilder:e,setDeepPath:f.setDeepPath,getDeepPath:f.getDeepPath,guidUtils:g,stringUtils:h,functionUtils:i,cookie:j,animationFrameUtils:k,inheritClassName:l.inheritClassName,propTypesFilterMixin:n,translate:o,translationMixin:p,languages:B,postMessageMixin:q,draggableMixin:r,imageTransform:s,imageEffects:t,videoUtils:u,valueLinkMixin:v,selectionMixin:w,outerClickMixin:x,blockOuterScrollMixin:y,imagesContainerMixin:z,storageMixin:A,compIcon:C,keyboardShortcuts:E,math:F,normalizeNumber:G,colors:H,media:I,bi:J,serviceTopology:K,svgUrlParser:L,editorModel:M,polyfills:P,imageOrganizerUtils:N,editorSessionUtil:O,browserUtil:Q,automationUtil:R,singlePassDOMReadWriteMixin:S,layoutUtils:T,newrelic:U,fontLangsFallbacks:V,backgroundPanelUtils:W,bgPanelBiEvents:X,pinModeUtils:Y,imageCrop:Z,bindOwnMethodsDeep:m.bindOwnMethodsDeep,windowInteractionUtils:$,uiUtils:_,googleTranslate:D,performance:aa,qualaroo:ba,fullStory:ca}});