define("tpa/superApps/superAppsConstants",[],function(){"use strict";var a="61f33d50-3002-4882-ae86-d319c1a249ab",b="1380b703-ce81-ff05-f115-39571d94dfcd",c="13bb5d67-1add-e770-a71f-001277e17c57",d="135aad86-9125-6074-7346-29dc6a3c9bcf",e="1375baa8-8eca-5659-ce9d-455b2009250d",f="13d21c63-b5ec-5912-8397-c3a5ddb27a97",g="13ff8629-c1fc-e289-e81f-bc8c8968e9d6",h="135c3d92-0fea-1f9d-2ba5-2a1dfb04297e",i={};i[a]="blog_button",i[b]="ecom_button";var j=function(a){return i[a]},k=function(a){return a===b||a===c||a===g||a===d||a===e||a===f};return{getMarketOpenOriginForBi:j,isSuperApp:k,ECOM:{APP_DEF_ID:b,PRODUCT_PAGE:"13a94f09-2766-3c40-4a32-8edb5acdd8bc",GRID_GALLERY:"13afb094-84f9-739f-44fd-78d036adb028",SLIDER_GALLERY:"139a41fd-0b1d-975f-6f67-e8cbdf8ccc82",PRODUCT_GALLERY_PAGE:b,SHOPPING_CART:"1380bbab-4da3-36b0-efb4-2e0599971d14",TANK_YOU_PAGE:"1380bbb4-8df0-fd38-a235-88821cf3f8a4",SHOPPING_CART_WIDGET:"1380bbc4-1485-9d44-4616-92e36b1ead6b",PRODUCT_WIDGET:"13ec3e79-e668-cc0c-2d48-e99d53a213dd"},WIXMUSIC:{WIDGET:"13bb5dc2-a098-5a74-502b-6bac84e80b23"},BLOG_APP_DEF_ID:a,ECOM_APP_DEF_ID:b,WIXMUSIC_APP_DEF_ID:c,HOTELS:{APP_DEF_ID:d,SEARCH_BAR:"135aae78-42c9-63b5-d09a-77233cebc1c4"},GET_SUBSCRIBERS_APP_DEF_ID:e,WIX_BOOKINGS_APP_DEF_ID:f,WIX_PHOTOALBUMS_APP_DEF_ID:g,SHOUTOUT_APP_DEF_ID:h}}),define("tpa/bi/events.json",[],function(){return{TPA_ADDED:{evid:165,src:38,endpoint:"editor",fields:{is_permissions_app:"number",is_first:"boolean",app_id:"string",app_site_id:"string",instance_id:"string",category:"string",origin:"string",section:"string",search_term:"string",search_result_position:"number",referral_info_category:"string",referral_info:"string",adding_method:"string",template_guid:"string",modal_tab_name:"string",page_id:"string",widget_id:"string"}},TPA_ADD_CLICK:{evid:167,src:38,endpoint:"editor",fields:{adding_method:"string",section:"string",category:"string",origin:"string",app_id:"string",is_first:"boolean",is_permissions_app:"boolean"}},COMPONENT_ADDED_FROM_MARKET:{evid:168,src:38,endpoint:"editor",fields:{referral_info_category:"string",referral_info:"string",app_id:"guid",app_site_id:"guid",instance_id:"guid",search_result_position:"number",search_term:"string",modal_tab_name:"string",adding_method:"string",category:"string",origin:"string",component_id:"string",is_first:"boolean",component_type:"string"}},CLOSE_MARKET_CLICK:{evid:171,src:38,endpoint:"editor",fields:{open_origin:"string",closing_method:"string"}},MARKET_CLOSED:{evid:172,src:38,endpoint:"editor",fields:{open_origin:"string",seconds_opened:"number"}},OPEN_MODAL_CLICK:{evid:173,src:38,endpoint:"editor",fields:{app_id:"string",origin:"string",category:"string",section:"string",component_type:"string"}},MARKET_HELP_CLICK:{evid:174,src:38,endpoint:"editor"},TPA_HELP_CLICK:{evid:175,src:38,endpoint:"editor",fields:{widget_id:"string",help_status:"string",app_id:"string",origin:"string"}},EXTENSION_ADDED:{evid:177,src:38,endpoint:"editor",fields:{page_id:"string",app_site_id:"string",instance_id:"string",widget_id:"string",app_id:"string"}},EXTENSION_REMOVED:{evid:178,src:38,endpoint:"editor",fields:{page_id:"string",widget_id:"string",comp_id:"string",instance_id:"string",app_id:"string"}},TPA_OPEN_SETTINGS:{evid:179,src:38,endpoint:"editor",fields:{app_id:"string",app_site_id:"string",instance_id:"string"}},CUT_COMPONENT_OR_TPA:{evid:180,src:38,endpoint:"editor",fields:{component_type:"string",comp_id:"string",instance_id:"string",app_id:"string"}},COPY_COMPONENT_OR_TPA:{evid:181,src:38,endpoint:"editor",fields:{component_type:"string",comp_id:"string",instance_id:"string",app_id:"string"}},PASTE_COMPONENT_OR_TPA:{evid:182,src:38,endpoint:"editor",fields:{component_type:"string",comp_id:"string",instance_id:"string",app_id:"string"}},DUPLICATE_COMPONENT_OR_TPA:{evid:183,src:38,endpoint:"editor",fields:{component_type:"string",comp_id:"string",instance_id:"string",app_id:"string"}},CLICK_UPGRADE_APP:{evid:184,src:38,endpoint:"editor",fields:{pp_origin:"string",app_site_id:"string",app_id:"string"}},PP_OPENED:{evid:185,src:38,endpoint:"editor",fields:{app_id:"string",app_site_id:"string",pp_origin:"string",pp_type:"string"}},CLICK_UPGRADE_IN_PP:{evid:186,src:38,endpoint:"editor",fields:{pp_type:"string",pp_origin:"string",instance_id:"string",app_id:"string"}},CLICK_CYCLE:{evid:187,src:38,endpoint:"editor",fields:{cycle_id:"number",cycle_name:"string",pp_type:"string",pp_origin:"string",instance_id:"string",app_id:"string"}},EXPAND_OFFERING:{evid:188,src:38,endpoint:"editor",fields:{cycle_id:"number",cycle_name:"string",pp_type:"string",pp_origin:"string",instance_id:"string",app_id:"string"}},PERMISSION_MODAL_CLOSED:{evid:189,src:38,endpoint:"editor",fields:{closing_method:"string",app_id:"string"}},TPA_ERROR:{evid:190,src:38,endpoint:"editor",fields:{error_desc:"string",error_type:"string",app_id:"string"}},TPA_CLOSE_SETTINGS:{evid:191,src:38,endpoint:"editor",fields:{seconds_opened:"number",app_id:"string",app_site_id:"string",instance_id:"string"}},TPA_MESSAGE_LOADED:{evid:277,src:38,endpoint:"editor",fields:{app_id:"string",description:"string",type:"string"}},OPEN_DASHBOARD_APP_CLICK:{evid:278,src:38,endpoint:"editor",fields:{app_id:"string",app_site_id:"string",instance_id:"string",origin:"string"}}}}),define("tpa/bi/errors.json",[],function(){return{ECOM_MISSING_PAGES:{errorName:"ECOM_MISSING_PAGES",errorCode:300,severity:"fatal"}}}),define("tpa/bi/bi",["tpa/bi/events.json","tpa/bi/errors.json"],function(a,b){"use strict";var c=function(b){b.bi.register("tpa","event",a)};return{events:a,errors:b,registerEvents:c}}),define("tpa/utils/tpaUtils",["lodash","util","panels","tpa/superApps/superAppsConstants","tpa/bi/bi"],function(a,b,c,d,e){"use strict";var f=function(){return!a.isEmpty(b.url.getParameterByName("appDefinitionId"))},g=function(a,b){var c=h();return["//",c,"/my-account/sites/",a,"/app/",b,"?referralInfo=editor"].join("")},h=function(){var a=window.location.hostname.match(/editor\.(.*)/);return a?"www."+a[1]:"www.wix.com"},i=function(b){var d=c.panelManager.getOpenPanels();return a.find(d,{name:b})},j=function(b,c){if(!c)return!1;var d=b.widgets&&b.widgets[c];return a.get(d,"appPage.multiInstanceEnabled")},k=function(a){return a===d.BLOG_APP_DEF_ID},l=function(a){c.panelManager.openPanel("savePublish.panels.common.failPanel",{titleKey:"tpa_messages_dashboard_before_save_error_title",description:"SAVE_PUBLISH_ERROR_BODY_DESCRIPTION",steps:["tpa_messages_upgrade_before_save_error_step_1","tpa_messages_upgrade_before_save_error_step_2","tpa_messages_dashboard_before_save_error_step_3"],helpMessage:"tpa_messages_dashboard_before_save_error_support",helpLinkMessage:"tpa_messages_upgrade_before_save_error_support_link",helpLink:"",biEvent:e.events.TPA_MESSAGE_LOADED,biParams:{app_id:a,description:"provision failed",type:"provision_failed"}},!0)};return{isInDevMode:f,getAppInMyAccountUrl:g,getOpenedPanel:i,isMultiSectionInstanceEnabled:j,isBlog:k,provisionFailAlert:l}}),define("tpa/utils/mediaDialogHandlerUtils",["lodash"],function(a){"use strict";var b={photos:"IMAGE",backgrounds:"BG_IMAGE",audio:"MUSIC",documents:"DOCUMENT",secure_music:"MUSIC_PRO",swf:"FLASH"},c=function(a,c){var d=b[a];return c.categories[d]},d=function(b){var c={};if(c.fileName=b.title||"","secure_music"===b.mediaType){var d=b.fileOutput&&b.fileOutput.audio,e=a.find(d,{tag:"preview-short"});c.shortPreviewFileName=e&&e.url||"",c.previewFileName=b.previewFileName||"",c.fileUrl=b.fileUrl||""}else c.relativeUri=b.fileName||"",c.width=Number(b.width)||0,c.height=Number(b.height)||0;return c};return{convertMediaManagerResult:d,convertMediaType:c}}),define("tpa/handlers/editorRefreshTPADataAfterUpgrade",["lodash","jquery"],function(a,b){"use strict";var c=null,d="focus",e={},f=function(a,b){var c=a.tpa.app.getRenderedReactCompsByApplicationId(b);a.tpa.app.refreshApp(c)},g=function(a,b){var c=a.generalInfo.getMetaSiteId();b.forEach(function(b){a.tpa.provision.refreshAppSpecMap(b,c,function(){j(),a.selection.deselectComponents(),a.panelManager.closePanelByName("tpa.compPanels.tpaSettings"),f(a,b)})})},h=function(b,c){var d=b.generalInfo.getMetaSiteId();b.tpa.billing.getPremiumApps(d,function(b){if(!a.isEmpty(b)){var d,f,g=[],h=function(){return f&&f.cycle&&6===f.cycle};if(a.isArray(b)){b=a.indexBy(b,"appDefinitionId");for(d in e)a.isObject(b[e[d].appDefinitionId])&&(f=b[e[d].appDefinitionId],e[d].vendorProductId===f.vendorProductId&&e[d].upgradedToYearly===h()||(delete e[d],g.push(d)))}c(g)}})},i=function(a){c||(c=function(){h(a,function(b){g(a,b)})},b(window).on(d,c))},j=function(){c&&(b(window).off(d,c),c=null)},k=function(a,b){var c=a.tpa.app.getData(b);e[b]={appDefinitionId:c.appDefinitionId,vendorProductId:c.vendorProductId,upgradedToYearly:c.upgradedToYearly===!0},i(a)},l=function(){j();for(var a in e)e.hasOwnProperty(a)&&delete e[a]};return{trackAppUpgrade:k,trackedApps:e,resetListeners:l}}),define("tpa/packagePicker/packagePickerUtils",["lodash","jquery","panels","tpa/handlers/editorRefreshTPADataAfterUpgrade","tpa/bi/bi"],function(a,b,c,d,e){"use strict";var f={BENEFITS:"tpa.packagePicker.modals.benefitsModal",CYCLES:"tpa.packagePicker.modals.cyclesModal",EXTERNAL:"tpa.packagePicker.modals.externalBenefitsModal",PACKAGES:"tpa.packagePicker.modals.packagePickerModal"},g={BENEFITS:"offering",CYCLES:"cycle",PACKAGES:"package",EXTERNAL:"external"},h=function(a,b,c,d,e){var f=a.selection.getSelectedComponentData(),g="tpa_"+e+"_ed_14";return a.tpa.billing.getAppUpgradeUrl(f.applicationId,b,c,{referralAdditionalInfo:g,pp_type:d})},i=function(b,e,f,g,i,j){var k=!b.generalInfo.isFirstSave();if(k){var l=h(b,e,f,g,i);window.open(l);var m=b.selection.getSelectedComponentData();d.trackAppUpgrade(b,m.applicationId)}else c.panelManager.openPanel("savePublish.panels.common.failPanel",{titleKey:"PUBLISH_ERROR_TITLE_LABEL",description:"SAVE_PUBLISH_ERROR_BODY_DESCRIPTION",steps:["SAVE_PUBLISH_ERROR_OPTION_1","SAVE_PUBLISH_ERROR_OPTION_2"],helpMessage:"SAVE_ERROR_LEARN_MORE_LABEL",helpLinkMessage:"SAVE_PUBLISH_ERROR_LEARN_MORE_LINK",helpLink:""});a.isFunction(j)&&j()},j=function(a,b,c){var d=a.selection.getSelectedComponentData(),f=a.tpa.app.getData(d.applicationId),g={pp_type:b,pp_origin:c,app_site_id:f.instanceId,app_id:d.applicationId};a.bi.event(e.events.CLICK_UPGRADE_IN_PP,g)},k=function(b,c,d,e){e=e||{};var g=a.isArray(c.packages)&&c.packages.length,h=a.assign(a.pick(c,"name","appIcon","packages","features","price","upgradeBenefits","upgradeTitle","upgradedToYearly","appDefinitionId"),a.pick(d,"vendorProductId"));return c.hasPremiumVerticalsOffer||e.external?(h.panelName=f.EXTERNAL,h.upgradeUrl=b.tpa.billing.getSiteUpgradeUrl({appDefId:d.appDefinitionId,referralAdditionalInfo:e.origin}),h):!g||1===g&&a.isEmpty(c.packages[0].yearly)?(h.panelName=f.BENEFITS,h):1===g&&c.packages[0].yearly?(h.panelName=f.CYCLES,h):(h.panelName=f.PACKAGES,h)};return{upgradeToPremiumAndClosePickerModal:i,pickPickerForm:k,sendBI:j,TYPE:f,BI_TYPE:g}}),define("tpa/packagePicker/compModals/benefitsModal.rt",["react/addons","lodash","panels","baseUI","symbols"],function(a,b,c,d,e){"use strict";function f(){this.close()}function g(b,c){return a.createElement("li",{},a.createElement(d.symbol,{name:"benefitsModalVSign"}),a.createElement("span",{dangerouslySetInnerHTML:{__html:b}}))}function h(){this.close()}function i(){this.onBuy()}return function(){return a.createElement(c.frames.focusPanelFrame,{panelName:this.props.panelName,shouldHideHeader:!0},a.createElement("div",{className:"benefits-modal"},a.createElement("div",{className:"panel-header dark"},a.createElement("span",{className:"app-icon",style:{backgroundImage:"url('"+this.props.appIcon+"')"}}),a.createElement(d.symbol,{name:"messageConfetti"}),a.createElement(d.symbol,{name:"messageShadow"}),a.createElement("div",{className:"panel-header-title"},"\n                ",this.translateIfNeeded("tpa_package_picker_upgrade_title"),"\n                ",a.createElement("span",{dangerouslySetInnerHTML:{__html:this.props.name}}),a.createElement("button",{className:"close",onClick:f.bind(this)},a.createElement(e.symbol,{name:"headerCloseButton"})))),a.createElement("div",{className:"content"},a.createElement.apply(this,["ul",{className:"benefit-list"},b.map(this.props.upgradeBenefits,g.bind(this))]),a.createElement("div",{className:"price"},a.createElement("span",{className:"currencySymbol",dangerouslySetInnerHTML:{__html:this.props.price.currencySymbol}}),this.props.price.priceValue,"/",this.translateIfNeeded("tpa_package_picker_month"),"\n                "),a.createElement("div",{className:"actions"},a.createElement(d.button,{className:"btn-later",onClick:h.bind(this),label:"tpa_benefits_cancel_button"}),a.createElement(d.button,{className:"btn-upgrade",onClick:i.bind(this),label:"tpa_package_picker_upgrade_button"})))))}}),define("tpa/packagePicker/compModals/benefitsModal",["react","core","util","panels","tpa/packagePicker/packagePickerUtils","tpa/packagePicker/compModals/benefitsModal.rt","tpa/bi/bi"],function(a,b,c,d,e,f,g){"use strict";return a.createClass({displayName:"benefitsModal",mixins:[c.translationMixin,d.mixins.panelFrameMixin,b.mixins.editorAPIMixin],getInitialState:function(){return{}},componentDidMount:function(){var a=this.getEditorAPI(),b=a.selection.getSelectedComponentData(),c=a.tpa.app.getData(b.applicationId),d={app_id:c.appDefinitionId,app_site_id:c.instanceId,pp_origin:this.props.origin,pp_type:e.BI_TYPE.BENEFITS};a.bi.event(g.events.PP_OPENED,d)},onBuy:function(){var a=this.getEditorAPI();e.upgradeToPremiumAndClosePickerModal(a,this.props.packages[0].id,null,e.BI_TYPE.BENEFITS,this.props.origin,this.close),e.sendBI(a,e.BI_TYPE.BENEFITS,this.props.origin)},onCancel:function(){this.close()},render:f})}),define("tpa/packagePicker/compModals/cyclePickerHeader.rt",["react/addons","lodash","symbols"],function(a,b,c){"use strict";function d(){this.close()}return function(){return a.createElement("div",{className:"panel-header cycle-picker dark"},a.createElement("span",{className:"app-logo",style:{backgroundImage:"url('"+this.props.appIconUrl+"')"}}),a.createElement("button",{className:"close",onClick:d.bind(this)},a.createElement(c.symbol,{name:"headerCloseButton"})),a.createElement("span",{className:"panel-header-title",dangerouslySetInnerHTML:{__html:this.props.title}}))}}),define("tpa/packagePicker/compModals/cyclePickerHeader",["react","util","panels","tpa/packagePicker/compModals/cyclePickerHeader.rt"],function(a,b,c,d){"use strict";return a.createClass({displayName:"cyclePickerHeader",mixins:[b.translationMixin,c.mixins.panelFrameMixin],getUpgradeText:function(){return"Upgrade to Get More Features"},render:d})}),define("tpa/packagePicker/compModals/cyclesModal.rt",["react/addons","lodash","panels","tpa/packagePicker/compModals/cyclePickerHeader","baseUI"],function(a,b,c,d,e){"use strict";function f(c,d){return a.createElement("div",{className:b.keys(b.pick({feature:!0,"feature-display":!this.state.moreFeatures},b.identity)).join(" ")},a.createElement("span",{className:"premium"},this.getPremiumText(c).length>0?a.createElement("span",{key:"features",dangerouslySetInnerHTML:{__html:this.getPremiumText(c)}}):null,c.premium&&0===this.getPremiumText(c).length?a.createElement("span",{className:"symbol",key:"premium"},a.createElement(e.symbol,{name:"cyclePickerV"})):null,c.premium?null:a.createElement("span",{className:"symbol",key:"not-premium"},a.createElement(e.symbol,{name:"cyclePickerX"}))),a.createElement("span",{className:"basic"},c.freeText&&c.freeText.length>0?a.createElement("span",{key:"free",dangerouslySetInnerHTML:{__html:c.freeText}}):null,(c.freeText&&0===c.freeText.length||!c.freeText)&&c.free?a.createElement("span",{className:"symbol",key:"free1"},a.createElement(e.symbol,{name:"cyclePickerV"})):null,(!c.freeText||0!==c.freeText.length)&&c.freeText||c.free?null:a.createElement("span",{className:"symbol",key:"not-free"},a.createElement(e.symbol,{name:"cyclePickerX"}))),a.createElement("span",{className:"title"},a.createElement(e.tooltip,{value:a.createElement("span",{className:"cycles-modal-tooltip-content-wrapper"},{dangerouslySetInnerHTML:{__html:c.description}}),alignment:"right",styleType:e.uiConstants.TOOLTIP.STYLE_TYPE.NORMAL},a.createElement("span",{},c.title))))}function g(){this.yearlyPlanSelected()}function h(){this.monthlyPlanSelected()}function i(){this.onBuy()}function j(){this.toggleMoreFeatures()}function k(){this.toggleMoreFeatures()}function l(){this.onCancel()}return function(){return a.createElement(c.frames.focusPanelFrame,{panelName:this.props.panelName,shouldHideHeader:!0,enableScroll:"true"},a.createElement("div",{className:"cycles-modal"},a.createElement(d,{panelName:this.props.panelName,appIconUrl:this.props.appIcon,title:this.translateIfNeeded("tpa_package_picker_upgrade_title")+" "+this.props.name}),a.createElement(e.customScroll,{addScrolledClass:"true"},a.createElement("div",{className:"wrapper"},a.createElement("div",{className:"tableWrapper"},a.createElement("div",{className:"header"},a.createElement("span",{className:"free header"},"\n                        ",this.translateIfNeeded("tpa_cycle_picker_free"),"\n                    "),a.createElement("span",{className:"premium header"},"\n                        ",this.translateIfNeeded("tpa_cycle_picker_premium"),"\n                    ")),a.createElement.apply(this,["div",{className:"feature-table-wrapper"},b.map(this.props.features,f.bind(this))]),a.createElement("div",{className:"cycle-modal-footer"},a.createElement("div",{className:"upgrade"},a.createElement("div",{className:"cycle-options"},a.createElement("label",{onClick:g.bind(this)},a.createElement("input",{type:"radio",checked:this.state.yearly,name:"the-radio"}),a.createElement("div",{className:"cycle-box"},a.createElement("div",{className:"circle"},a.createElement(e.symbol,{name:"vCyclePicker"})),a.createElement("div",{className:"title"},this.translateIfNeeded("tpa_cycle_picker_pay_annually")),a.createElement("div",{className:"save"},this.getSaveTitle()),a.createElement("div",{className:"price price-yearly"},a.createElement("span",{className:"currency",dangerouslySetInnerHTML:{__html:this.props.price.currencySymbol}}),a.createElement("span",{className:"price-whole-number"},this.getYearlyPriceWholeNumber()),a.createElement("span",{className:"price-fragment-number"},this.getYearlyPriceFragmentNumber()),a.createElement("span",{className:"month"},"/",this.translateIfNeeded("tpa_package_picker_month"))))),this.isPremium()?null:a.createElement("label",{onClick:h.bind(this),key:"footer-upgrade"},a.createElement("input",{type:"radio",checked:!this.state.yearly,name:"the-radio"}),a.createElement("div",{className:"cycle-box"},a.createElement("div",{className:"circle"},a.createElement(e.symbol,{name:"vCyclePicker"})),a.createElement("div",{className:"title"},this.translateIfNeeded("tpa_cycle_picker_pay_monthly")),a.createElement("div",{className:"price price-monthly"},a.createElement("span",{className:"currency",dangerouslySetInnerHTML:{__html:this.props.price.currencySymbol}}),a.createElement("span",{className:"price-whole-number"},this.getMonthlyPriceWholeNumber()),a.createElement("span",{className:"price-fragment-number"},this.getMonthlyPriceFragmentNumber()),a.createElement("span",{className:"month"},"/",this.translateIfNeeded("tpa_package_picker_month")))))),a.createElement("div",{},a.createElement(e.button,{className:"btn-confirm-primary upgrade-yearly-btn",onClick:i.bind(this),label:"tpa_package_picker_upgrade_button"}))),a.createElement("div",{className:"basic-bottom-border"}),!this.state.moreFeatures&&this.props.features.length>7?a.createElement("div",{className:"features",key:"moreFeatures",onClick:j.bind(this)},a.createElement("span",{},this.translateIfNeeded("tpa_cycle_picker_more_features")),a.createElement(e.symbol,{name:"cyclePickerMoreArrow"})):null,this.state.moreFeatures?a.createElement("div",{className:"features",key:"lessFeatures",onClick:k.bind(this)},a.createElement("span",{},this.translateIfNeeded("tpa_cycle_picker_less_features")),a.createElement(e.symbol,{name:"cyclePickerLessArrow"})):null),a.createElement("div",{className:"cancel-btn",onClick:l.bind(this)},this.translateIfNeeded("tpa_cycle_picker_cancel_link")))))))}}),define("tpa/packagePicker/compModals/cyclesModal",["react","core","util","panels","tpa/packagePicker/packagePickerUtils","tpa/packagePicker/compModals/cyclesModal.rt","tpa/bi/bi"],function(a,b,c,d,e,f,g){"use strict";return a.createClass({displayName:"cyclesModal",mixins:[c.translationMixin,d.mixins.panelFrameMixin,b.mixins.editorAPIMixin],propTypes:{vendorProductId:a.PropTypes.object,packages:a.PropTypes.array,price:a.PropTypes.object},getInitialState:function(){return{yearly:!0,shouldShowMonthly:!this.props.vendorProductId,moreFeatures:!1}},componentDidMount:function(){var a=this.getEditorAPI(),b=a.selection.getSelectedComponentData(),c=a.tpa.app.getData(b.applicationId),d={app_id:c.appDefinitionId,app_site_id:c.instanceId,pp_origin:this.props.origin,pp_type:e.BI_TYPE.CYCLES};a.bi.event(g.events.PP_OPENED,d)},getSaveTitle:function(){var a=this.translateIfNeeded("tpa_cycle_picker_save"),b=Math.round((this.props.price.priceValue-this.props.price.yearlyPriceValue)/this.props.price.priceValue*100);return a+" "+b+"%"},onBuy:function(){var a=this.props.packages[0].id,b=this.state.yearly?"YEARLY":"MONTHLY",c=this.getEditorAPI();e.upgradeToPremiumAndClosePickerModal(c,a,b,e.BI_TYPE.CYCLES,this.props.origin,this.close),e.sendBI(c,e.BI_TYPE.CYCLES,this.props.origin)},onCancel:function(){this.close()},isPremium:function(){var a=this.getEditorAPI(),b=a.selection.getSelectedComponentData();return a.tpa.app.isPremium(b.applicationId)},toggleMoreFeatures:function(){this.setState({moreFeatures:!this.state.moreFeatures})},getPremiumText:function(a){var b=this.props.packages[0].id,c="";return a&&a.packagesTexts&&a.packagesTexts[b]&&a.packagesTexts[b].premiumText&&(c=a.packagesTexts[b].premiumText),c},yearlyPlanSelected:function(){this.state.yearly||(this.setState({yearly:!0}),this.cycleChangedBI("yearly"))},monthlyPlanSelected:function(){this.state.yearly&&(this.setState({yearly:!1}),this.cycleChangedBI("monthly"))},cycleChangedBI:function(a){var b=this.getEditorAPI(),c=b.selection.getSelectedComponentData(),d=b.tpa.app.getData(c.applicationId),f={cycle_id:"monthly"===a?3:6,cycle_name:a,pp_type:e.BI_TYPE.PACKAGES,pp_origin:this.props.origin,app_site_id:d.instanceId,app_id:d.appDefinitionId};b.bi.event(g.events.CLICK_CYCLE,f)},getYearlyPriceWholeNumber:function(){return parseInt(this.props.price.yearlyPriceValue,10)},getYearlyPriceFragmentNumber:function(){return this.getFragmentNumber(this.props.price.yearlyPriceValue)},getMonthlyPriceWholeNumber:function(){return parseInt(this.props.price.priceValue,10)},getMonthlyPriceFragmentNumber:function(){return this.getFragmentNumber(this.props.price.priceValue)},getFragmentNumber:function(a){for(var b=String(a).split(".")[1]||"";b.length<2;)b+="0";return b},render:f})}),define("tpa/packagePicker/compModals/packagePickerModal.rt",["react/addons","lodash","panels","tpa/packagePicker/compModals/cyclePickerHeader","baseUI"],function(a,b,c,d,e){"use strict";function f(){this.showMonthly()}function g(a,b){this.selectPackage(a.id,"YEARLY")}function h(a,b){this.onBuy()}function i(a,b){this.selectPackage(a.id,"MONTHLY")}function j(a,b){this.onBuy()}function k(c,d,f,g){return a.createElement("div",{className:b.keys(b.pick({feature:!0,highlighted:f.relevant.highlighted},b.identity)).join(" ")},a.createElement(e.tooltip,{value:a.createElement("span",{className:"package-picker-modal-tooltip-content-wrapper"},{dangerouslySetInnerHTML:{__html:f.full.description}}),alignment:"top"},a.createElement("span",{dangerouslySetInnerHTML:{__html:f.relevant.premiumText}})))}function l(c,d){return a.createElement("div",{className:b.keys(b.pick({"package":!0,popular:1==d},b.identity)).join(" "),key:c.id},a.createElement("header",{},a.createElement("div",{className:"package-name",dangerouslySetInnerHTML:{__html:c.name}}),1===d?a.createElement("div",{key:"firstIndex"},a.createElement(e.symbol,{className:"badge",name:"PPPopular"}),a.createElement("div",{className:"badge text"},a.createElement("span",{className:"badge-caption"},this.translateIfNeeded("tpa_package_picker_popular")))):null),this.state.hasCycles?a.createElement("div",{className:b.keys(b.pick({plane:!0,yearly:!0,disabled:this.isDisabled(c.id,"YEARLY")},b.identity)).join(" "),key:"yearly",onClick:g.bind(this,c,d)},a.createElement("div",{className:"price"},a.createElement("span",{className:"currency",dangerouslySetInnerHTML:{__html:this.props.price.currencySymbol}}),a.createElement("span",{className:"yearly-per-month-whole"},this.getPriceWholePart(c.yearly.price)),a.createElement("span",{className:"yearly-per-month-fragment"},this.getPriceFragmentPart(c.yearly.price)),a.createElement("span",{className:"per-month"},"/",a.createElement("span",{},this.translateIfNeeded("tpa_package_picker_month")))),a.createElement("div",{className:"you-save"},a.createElement("span",{className:"original-price"},a.createElement("span",{className:"currency",dangerouslySetInnerHTML:{__html:this.props.price.currencySymbol}}),a.createElement("span",{},c.monthly.price)),a.createElement("span",{className:"you-save"},a.createElement("span",{},this.translateIfNeeded("tpa_cycle_picker_save")),a.createElement("span",{className:"discount-percent"},c.discountPercent),"%\n                            ")),this.state.hasCycles?a.createElement("div",{key:"best-feature",className:"best-selling-feature",dangerouslySetInnerHTML:{__html:c.bestSellingFeature}}):null,a.createElement("div",{className:b.keys(b.pick({"select-package":!0,selected:this.isSelectedPackage(c.id,"YEARLY")},b.identity)).join(" ")},a.createElement("div",{className:"radio-button"}),a.createElement("button",{onClick:h.bind(this,c,d)},a.createElement("span",{},this.translateIfNeeded("tpa_package_picker_upgrade_button"))))):null,a.createElement("div",{className:b.keys(b.pick({plane:!0,monthly:!0,"monthly-open":this.state.monthlyOpen||!this.state.hasCycles,"no-cycles":!this.state.hasCycles,disabled:this.isDisabled(c.id,"MONTHLY")},b.identity)).join(" "),onClick:i.bind(this,c,d)},a.createElement("div",{className:"price"},a.createElement("span",{className:"currency",dangerouslySetInnerHTML:{__html:this.props.price.currencySymbol}}),a.createElement("span",{className:"yearly-per-month-whole"},this.getPriceWholePart(c.monthly.price)),a.createElement("span",{className:"yearly-per-month-fragment"},this.getPriceFragmentPart(c.monthly.price)),a.createElement("span",{className:"per-month"},"/",a.createElement("span",{},this.translateIfNeeded("tpa_package_picker_month")))),this.state.hasCycles?null:a.createElement("div",{key:"best-feature",className:"best-selling-feature",dangerouslySetInnerHTML:{__html:c.bestSellingFeature}}),a.createElement("div",{className:b.keys(b.pick({"select-package":!0,selected:this.isSelectedPackage(c.id,"MONTHLY")},b.identity)).join(" ")},a.createElement("div",{className:"radio-button"}),a.createElement("button",{onClick:j.bind(this,c,d)},a.createElement("span",{},this.translateIfNeeded("tpa_package_picker_upgrade_button"))))),a.createElement.apply(this,["div",{className:"features"},b.map(this.state.normalizedFeatures[c.id],k.bind(this,c,d))]))}return function(){return a.createElement(c.frames.focusPanelFrame,{panelName:this.props.panelName,shouldHideHeader:!0},a.createElement("div",{className:"package-picker-container"},a.createElement(d,{panelName:this.props.panelName,appIconUrl:this.props.appIcon,title:this.translateIfNeeded("tpa_package_picker_upgrade_title")+" "+this.props.name}),a.createElement(e.customScroll,{addScrolledClass:"true"},a.createElement("div",{className:"packages"},this.state.hasCycles?a.createElement("div",{className:b.keys(b.pick({"plane-cycles":!0,"package":!0,"has-cycles":this.state.hasCycles},b.identity)).join(" "),key:"monthly-cycles"},a.createElement("div",{className:"best-value-badge"},a.createElement(e.symbol,{name:"PPBestValue"}),a.createElement("div",{},this.translateIfNeeded("tpa_package_picker_best_value"))),a.createElement("div",{className:"yearly"},a.createElement("div",{className:"cycle-title"},this.translateIfNeeded("tpa_package_picker_yearly"),"\n                            "),a.createElement("div",{className:"cycle-subtitle"},this.translateIfNeeded("tpa_package_picker_saving_plans"),"\n                            "),a.createElement("div",{className:b.keys(b.pick({"open-monthly":!0,"monthly-open":this.state.monthlyOpen},b.identity)).join(" "),onClick:f.bind(this)},a.createElement("span",{className:"arrow"},a.createElement(e.symbol,{name:"PPOpenMonthlyArrow"})),a.createElement("span",{className:"caption"},this.translateIfNeeded("tpa_package_picker_monthly")," ",this.translateIfNeeded("tpa_package_picker_plans")))),a.createElement("div",{className:b.keys(b.pick({monthly:!0,"monthly-open":this.state.monthlyOpen},b.identity)).join(" ")},a.createElement("div",{className:"cycle-title"},this.translateIfNeeded("tpa_package_picker_monthly"),"\n                            "),a.createElement("div",{className:"cycle-subtitle"},this.translateIfNeeded("tpa_package_picker_plans"),"\n                            "))):null,a.createElement.apply(this,["div",{className:"packages-wrapper"},b.map(this.props.packages,l.bind(this))])))))}}),define("tpa/packagePicker/compModals/packagePickerModal",["react","core","lodash","util","panels","tpa/packagePicker/packagePickerUtils","tpa/packagePicker/compModals/packagePickerModal.rt","tpa/bi/bi"],function(a,b,c,d,e,f,g,h){"use strict";function j(a){var b={};return a.forEach(function(a){var e;for(var f in a.packagesTexts)a.packagesTexts.hasOwnProperty(f)&&(e=a.packagesTexts[f].highlighted,b[f]||(b[f]=[]),a.packagesTexts[f].premiumText&&b[f].push({full:a,relevant:{premiumText:a.packagesTexts[f].premiumText,highlighted:c.isBoolean(e)?e:d.stringUtils.isTrue(e)}}))}),b}function k(a){return c.isArray(a)&&c.isObject(a[0])&&c.isObject(a[0].yearly)&&!c.isUndefined(a[0].yearly.price)}var i=1;return a.createClass({displayName:"packagePickerModal",mixins:[d.translationMixin,e.mixins.panelFrameMixin,b.mixins.editorAPIMixin],componentDidMount:function(){var a=this.getEditorAPI(),b=a.selection.getSelectedComponentData(),c=a.tpa.app.getData(b.applicationId),d={app_id:c.appDefinitionId,app_site_id:c.instanceId,pp_origin:this.props.origin,pp_type:f.BI_TYPE.PACKAGES};a.bi.event(h.events.PP_OPENED,d)},getInitialState:function(){return{hasCycles:this.isHasCycles(),monthlyOpen:!1,normalizedFeatures:j(this.props.features),selectedPackageId:this.getDefaultPackageId(this.props.vendorProductId,this.props.upgradedToYearly,this.props.packages),selectedPackageCycle:this.isHasCycles()?"YEARLY":"MONTHLY"}},isHasCycles:function(){return k(this.props.packages)},getMostExpansiveIndex:function(a){return a.length-1},getOwnedPackageIndex:function(a,b){if(c.isUndefined(a))return-1;for(var d=0;d<b.length;d++)if(b[d].id===a)return d},isDefaultPackageAlreadyPurchased:function(a,b,d){var e=k(d);return 1!==a?!1:e?!(c.isUndefined(b)||b===!1):!0},getDefaultPackageId:function(a,b,c){var d=this.getOwnedPackageIndex(a,c),e=i;return(this.isDefaultPackageAlreadyPurchased(d,b,c)||this.isPurchasedPackageHigherThenDefault(d,c))&&(e=this.getMostExpansiveIndex(c)),c[e].id},isPurchasedPackageHigherThenDefault:function(a,b){return a===this.getMostExpansiveIndex(b)},showMonthly:function(){this.setState({monthlyOpen:!0});var a=this.getEditorAPI(),b=a.selection.getSelectedComponentData(),c=a.tpa.app.getData(b.applicationId),d={cycle_id:"3",cycle_name:"monthly",pp_type:f.BI_TYPE.PACKAGES,pp_origin:this.props.origin,instance_id:a.selection.getSelectedComponentId(),app_id:c.appDefinitionId};a.bi.event(h.events.EXPAND_OFFERING,d)},isDisabled:function(a,b){var c=this.getOwnedPackageIndex(this.props.vendorProductId,this.props.packages),d=this.getOwnedPackageIndex(a,this.props.packages);return this.props.upgradedToYearly&&"MONTHLY"===b?!0:d===c?this.props.upgradedToYearly?!0:"MONTHLY"===b:-1===c?!1:c>d;
},selectPackage:function(a,b,c){this.isDisabled(a,b)||this.setState({selectedPackageId:a,selectedPackageCycle:b},c)},getPriceWholePart:function(a){return parseInt(a,10)},getPriceFragmentPart:function(a){for(var b=String(a).split(".")[1]||"";b.length<2;)b+="0";return b},isSelectedPackage:function(a,b){return a===this.state.selectedPackageId&&b===this.state.selectedPackageCycle},onBuy:function(){var a=this.getEditorAPI();f.upgradeToPremiumAndClosePickerModal(a,this.state.selectedPackageId,this.state.selectedPackageCycle,f.BI_TYPE.PACKAGES,this.props.origin,this.close),f.sendBI(a,f.BI_TYPE.PACKAGES,this.props.origin)},render:g})}),define("tpa/packagePicker/compModals/externalBenefitsModal.rt",["react/addons","lodash","panels","baseUI","symbols"],function(a,b,c,d,e){"use strict";function f(){this.close()}function g(b,c){return a.createElement("li",{},a.createElement(d.symbol,{name:"benefitsModalVSign"}),a.createElement("span",{dangerouslySetInnerHTML:{__html:b}}))}function h(){this.close()}function i(){this.onBuy()}return function(){return a.createElement(c.frames.focusPanelFrame,{shouldHideHeader:!0},a.createElement("div",{className:"benefits-modal"},a.createElement("div",{className:"panel-header dark"},a.createElement("span",{className:"app-icon",style:{backgroundImage:"url('"+this.props.appIcon+"')"}}),a.createElement(d.symbol,{name:"messageConfetti"}),a.createElement(d.symbol,{name:"messageShadow"}),a.createElement("div",{className:"panel-header-title"},"\n                ",this.translateIfNeeded("tpa_package_picker_upgrade_title"),"\n                ",a.createElement("span",{dangerouslySetInnerHTML:{__html:this.props.name}}),a.createElement("button",{className:"close",onClick:f.bind(this)},a.createElement(e.symbol,{name:"headerCloseButton"})))),a.createElement("div",{className:"content"},a.createElement.apply(this,["ul",{className:"benefit-list"},b.map(this.props.upgradeBenefits,g.bind(this))]),a.createElement("div",{className:"price"}),a.createElement("div",{className:"actions"},a.createElement(d.button,{className:"btn-later",onClick:h.bind(this),label:"tpa_benefits_cancel_button"}),a.createElement(d.button,{className:"btn-upgrade",onClick:i.bind(this),label:"tpa_package_picker_upgrade_button"})))))}}),define("tpa/packagePicker/compModals/externalBenefitsModal",["react","core","util","panels","tpa/packagePicker/packagePickerUtils","tpa/handlers/editorRefreshTPADataAfterUpgrade","tpa/bi/bi","tpa/packagePicker/compModals/externalBenefitsModal.rt"],function(a,b,c,d,e,f,g,h){"use strict";return a.createClass({displayName:"benefitsModal",mixins:[c.translationMixin,d.mixins.panelFrameMixin,b.mixins.editorAPIMixin],getInitialState:function(){return{}},componentDidMount:function(){var a=this.getEditorAPI(),b=a.selection.getSelectedComponentData(),c=a.tpa.app.getData(b.applicationId),d={app_id:c.appDefinitionId,app_site_id:c.instanceId,pp_origin:this.props.origin,pp_type:e.BI_TYPE.BENEFITS};a.bi.event(g.events.PP_OPENED,d)},onBuy:function(){var a=this.getEditorAPI(),b=a.selection.getSelectedComponentData(),c=a.tpa.app.getData(b.applicationId);f.trackAppUpgrade(a,c.applicationId),window.open(this.props.upgradeUrl),this.close()},onCancel:function(){this.close()},render:h})}),define("tpa/packagePicker/packagePicker",["lodash","panels","savePublish","tpa/packagePicker/compModals/benefitsModal","tpa/packagePicker/compModals/cyclesModal","tpa/packagePicker/compModals/packagePickerModal","tpa/packagePicker/compModals/externalBenefitsModal","tpa/packagePicker/packagePickerUtils","tpa/handlers/editorRefreshTPADataAfterUpgrade","tpa/bi/bi","tpa/utils/tpaUtils"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";function t(b,c){var e,d=b.selection.getSelectedComponentData();if(a.isNull(d)||a.isUndefined(d)){e=b.tpa.app.getDataByAppDefId(c).applicationId;var f=b.tpa.app.getFirstAppCompPageId(c),g=b.components.get.byId(f.compId,f.pageId);b.selection.selectComponentByCompRef(g)}else e=d.applicationId;return b.tpa.app.getData(e)}var l=function(b,c,d,e){var f=d||!1;e=a.assign({isAsyncFlow:f},e);var g=b.tpa.appMarket.getData(c),h=t(b,c);h&&h.demoMode?b.tpa.provision.provisionAppDemoSave(h.applicationId,function(){e.forceRequest=!0,m(b,e,c,g,h)},function(){k.provisionFailAlert(c)}):w(b,h)?m(b,e,c,g,h):n(b,c,g,h,e)},m=function(a,d,e,f,g){c.saveInBackground(a,function(){a.tpa.appMarket.getDataAsync(e,{forceRequest:!0}).then(function(b){d.isAsyncFlow=!0,n(a,e,b,g,d)})},function(){b.panelManager.openPanel("savePublish.panels.common.failPanel",{titleKey:"tpa_messages_upgrade_before_save_error_title",description:"tpa_messages_upgrade_before_save_error_description",steps:["tpa_messages_upgrade_before_save_error_step_1","tpa_messages_upgrade_before_save_error_step_2","tpa_messages_upgrade_before_save_error_step_3"],helpMessage:"tpa_messages_upgrade_before_save_error_support",helpLinkMessage:"tpa_messages_upgrade_before_save_error_support_link",helpLink:"",biEvent:j.events.TPA_MESSAGE_LOADED,biParams:{app_id:e,description:"Error on upgrade TPA from template site",type:"upgrade_save_error"}},!0)})},n=function(a,b,c,d,e){o(c,e)?a.tpa.appMarket.getDataAsync(b,{forceRequest:!0}).then(function(b){p(a,b,d,e)}):p(a,c,d,e)},o=function(b,c){return c.forceRequest||a.isUndefined(b)||b&&a.isUndefined(b.price)},p=function(c,d,e,f){var g=h.pickPickerForm(c,d,e,f),j=g.upgradeUrl;g.panelName!==h.TYPE.EXTERNAL||f.isAsyncFlow?b.panelManager.openPanel(g.panelName,a.assign(g,f),!0):(window.open(j),i.trackAppUpgrade(c,e.applicationId))},q=function(b,c){return a.last(b.packages).id===c.vendorProductId},r=function(b){return!a.last(b.packages).yearly.price},s=function(a,b){var c=a.tpa.appMarket.getData(b.appDefinitionId);if(c){var d=h.pickPickerForm(a,c,b),e=!!b.vendorProductId,f=!!c.upgradedToYearly;switch(d.panelName){case h.TYPE.BENEFITS:return e;case h.TYPE.CYCLES:return e&&f;case h.TYPE.PACKAGES:var g=e&&q(d,b);return g=g&&(f||r(d));case h.TYPE.EXTERNAL:return e;default:return!1}}return!0},u=function(a,b,c){a.tpa.appMarket.getDataAsync(b).then(function(d){var e=t(a,b),f=h.pickPickerForm(a,d,e);c(f.upgradeUrl)})},v=function(a,b,d){var e=t(a,b);w(a,e)?c.saveInBackground(a,function(){u(a,b,d)}):u(a,b,d)},w=function(a,b){var c=!a.generalInfo.isFirstSave();return!c||b&&(!a.tpa.app.isAppProvisionedOnServer(b.applicationId)||a.tpa.app.isPermissionsRevoked(b))};return{startUpgradeFlow:l,isFullyUpgraded:s,getWixUpgradeUrl:v,modals:{benefitsModal:d,cyclesModal:e,packagePickerModal:f,externalBenefitsModal:g}}}),define("tpa/constants/constants",[],function(){"use strict";return{TPA_SETTING_MODAL:"tpa.compModals.tpaSettingsModal",TPA_DEFAULT_HELP_ID:"47f00d3e-78ae-4bd6-9c2f-4ddf0e9c42f4"}}),define("tpa/services/dashboardAppService",["panels","util","savePublish","tpa/utils/tpaUtils","tpa/bi/bi"],function(a,b,c,d,e){"use strict";var f=function(a){var b=a.selection.getSelectedComponentData();return a.tpa.app.isHybrid(b.applicationId)},g=function(a){return!a.generalInfo.isFirstSave()},h=function(a){var b=a.selection.getSelectedComponentData();return a.tpa.app.getData(b.applicationId)},i=function(b,i){var j=h(b),k=f(b),l=g(b),m=b.tpa.app.isAppProvisionedOnServer(j.applicationId);if(k&&l&&m){var n=d.getAppInMyAccountUrl(b.generalInfo.getMetaSiteId(),j.appDefinitionId);i(n)}else if(l&&m)i(null);else{var o=function(){var a=d.getAppInMyAccountUrl(b.generalInfo.getMetaSiteId(),j.appDefinitionId);i(a)},p=function(){a.panelManager.openPanel("savePublish.panels.common.failPanel",{titleKey:"tpa_messages_dashboard_before_save_error_title",description:"SAVE_PUBLISH_ERROR_BODY_DESCRIPTION",steps:["tpa_messages_upgrade_before_save_error_step_1","tpa_messages_upgrade_before_save_error_step_2","tpa_messages_dashboard_before_save_error_step_3"],helpMessage:"tpa_messages_dashboard_before_save_error_support",helpLinkMessage:"tpa_messages_upgrade_before_save_error_support_link",helpLink:"",biEvent:e.events.TPA_MESSAGE_LOADED,biParams:{app_id:j.appDefinitionId,description:"Error on open dashboard from template site",type:"dashboard_save_error"}},!0),i(null)};c.saveInBackground(b,o,p)}},j=function(a){var b=f(a),c=g(a),e=h(a);return b&&c?d.getAppInMyAccountUrl(a.generalInfo.getMetaSiteId(),e.appDefinitionId):null},k=function(a){var c=a.selection.getSelectedComponentData();if(c){var d=a.tpa.app.getData(c.applicationId),e=a.tpa.appMarket.getData(d.appDefinitionId);if(e&&e.editorGfpp)return e.editorGfpp}return{upgradeText:b.translate("tpa_package_picker_upgrade_title"),openInDashboardText:b.translate("tpa_open_dashboard")}};return{getDashboardAppUrl:j,getDashboardAppUrlAsync:i,getEditorGfppData:k}}),define("tpa/services/tpaAddRemoveDSService",["lodash","util","core","tpa/utils/tpaUtils"],function(a,b,c,d){"use strict";var e=[],f=function(a,b,c){c.onError=function(){d.provisionFailAlert(b)};var e=a.tpa.widget.add(b,c);return a.waitForChangesApplied(function(){e&&a.components.is.exist(e)&&a.selection.selectComponentByCompRef(e)}),a.history.add("adding a tpa widget to stage"),e},g=function(b,c,f){if(!a.includes(e,c)){e.push(c),f=f||{};var g=f.callback||null;f.callback=function(b){e=a.without(e,c),g&&g(b)};var h=function(){e=a.without(e,c),d.provisionFailAlert(c)},i=b.tpa.section.add(c,f,h);return b.history.add("adding a tpa section to stage"),i}return{id:b.pages.getFocusedPageId()}},h=function(a,b,c){var d=a.tpa.section.addMultiSection(b,c);return a.history.add("adding multi section"),d},i=function(a,b){a.tpa.widget["delete"](b),a.panelManager.getPanelsOfType("tpaSettingsPanelFrame").length>0&&a.panelManager.closePanelByName("tpa.compPanels.tpaSettings")},j=function(a,c,d){a.tpa.section["delete"](c),a.bi.reportBI(b.bi.events.COMPONENT_REMOVED,d),a.components.reset()};return{addWidget:f,addSection:g,addMultiSection:h,deleteWidget:i,deleteSection:j}}),define("tpa/services/tpaStyleService",["lodash","core"],function(a,b){"use strict";var c="param_color_",d="param_number_",e="param_boolean_",f="param_font_",g=null,h={},i=function(a,b){var c=a.components.style.getId(b);return a.theme.styles.get(c)},j=function(b,c){a.isArray(c)?a.forEach(c,function(a){k(b,a)}):k(b,c)},k=function(a,b){var g=b.key;switch(b.type){case"color":g=c+g,r(a,g,b);break;case"font":g=f+g,s(a,g,b);break;case"number":g=d+g,q(a,g,b);break;case"boolean":g=e+g,p(a,g,b)}},l=function(b,c){var d=i(b,c);return a.defaults(d,{style:{groups:{},properties:{},propertiesSource:{}}}),d&&(d.styleType="custom"),d},m=function(b){if(h[g]){var c=[],d=[],e=g;a.forEach(h[e],function(a){c.push(a.data),d.push(a.callback)}),delete h[e],g=null,o(b,e,c,d)}else g=null},n=function(b,c){a.isArray(b)?a.forEach(b,function(a){a&&a(c)}):b&&b(c)},o=function(a,c,d,e){if(g===c)return h[c]||(h[c]=[]),void h[c].push({data:d,callback:e});var f=a.components.get.byId(c),i=l(a,f);j(i,d);var k=b.styleManager.getStyleIdByDef(a.theme,a.components,i,a.components.getType(f));a.components.style.setId(f,k,function(a){n(e,a)}),a.waitForChangesApplied(m.bind(null,a)),g=c},p=function(a,b,c){var d=c.param.value;a.style.properties[b]=d,a.style.propertiesSource[b]="value"},q=function(a,b,c){var d=c.param.value;a.style.properties[b]=d,a.style.propertiesSource[b]="value"},r=function(a,b,c){var d=c.param.value.color&&"object"==typeof c.param.value.color,e=d?c.param.value.color.name:c.param.value.rgba||c.param.value.cssColor;a.style.properties[b]=e,a.style.propertiesSource[b]=d?"theme":"value",c.param.value.hasOwnProperty("opacity")&&(a.style.properties["alpha-"+b]=c.param.value.opacity)},s=function(a,b,c){var d=c.param.value;a&&a.style&&(a.style.properties[b]=JSON.stringify(d),a.style.propertiesSource[b]="value")};return{setStyleParam:o}}),define("tpa/appMarket/utils/appMarketUtils",["lodash","panels","util","pLoader!santa:utils"],function(a,b,c,d){"use strict";var e=function(){var a=c.url.getParameterByName("openpanel");return 0===a.indexOf("market")},f=function(){var a=c.url.parseUrlParams(window.location.search);return a=a&&a.amexperiment,a||""},g=function(){var b=["openAppDefId","appDefinitionId"],d={};return a.forEach(b,function(a){d[a]=c.url.getParameterByName(a)}),d.tests=f(),d},h=function(){var b=c.url.getParameterByName("openpanel"),d={};if(!a.isEmpty(b)){var e=b.split(":"),f=g();switch(e.length){case 1:d.appDefinitionId=f.appDefinitionId,d.openAppDefId=f.openAppDefId;break;case 2:d.query=e[1];break;case 3:"Cat"===e[1]?d.categorySlug=e[2]:"appDefId"===e[1]&&(d.openAppDefId=e[2]);break;default:d.query=""}}return d},i=function(a){return a.getUserPreferences().site.get("app-market")||{}},j=function(a,b){return a.getUserPreferences().site.set("app-market",b)||!1},k=function(c,d){var e="tpa.compModals."+c;d.width=l(d.width),d.height=l(d.height);var f=a.pick(d,["title","width","height","closeModalBiEvent","closeModalBiParams","id"]);f.panelName=e,f.iframeUrl=d.url,f.shouldTranslate=d.shouldTranslateTitle,b.panelManager.openPanel(e,f,!0)},l=function(a){return"number"==typeof a&&(a=a.toString()),a},m=function(a,c){var d="tpa.compModals."+a;b.panelManager.openPanel(d,{panelName:d,iframeUrl:c.url,appDefinitionId:c.appDefinitionId,onClose:c.onClose},!0)},n=function(c){var d=b.panelManager.getOpenPanels();return a.find(d,{props:{id:c}})},o=function(a,c){var d=n(c);d&&(b.panelManager.closePanelByPropKey("id",d.props.id),d.props.closeModalBiEvent&&a.bi.event(d.props.closeModalBiEvent,d.props.closeModalBiParams))},p=function(a){b.panelManager.closePanelByName("tpa.compModals."+a)},q=function(){return d.urlUtils.origin()};return{openAppMarketModal:k,openAppMarketModalWithAppDefinitionId:m,closeAppMarketModal:p,closeAppMarketModalById:o,shouldOpenAppMarketTab:e,getAppMarketUrlParams:g,getAppMarketOpenPanelUrlParams:h,getAppMarketUserPrefs:i,setAppMarketUserPrefs:j,origin:q}}),define("tpa/appMarket/services/appMarketTabService",["lodash","util","panels","tpa/appMarket/utils/appMarketUtils"],function(a,b,c,d){"use strict";var e="tpa.compPanels.appMarketPanel",f=function(){var a=d.shouldOpenAppMarketTab();a&&g({urlParams:{openMarketOrigin:b.url.getParameterByName("referral_info")}})},g=function(b){b=b||{},b.urlParams=b.urlParams||{};var f=d.getAppMarketOpenPanelUrlParams();a.merge(b.urlParams||{},f),c.panelManager.openPanel(e,b)},h=function(){c.panelManager.closePanelByName(e)};return{openAppMarketTab:g,closeAppMarketTab:h,openAppMarketTabFromUrlParamIfNeeded:f}}),define("tpa/addPanelData/addPanelService",["lodash","addPanelData"],function(a,b){"use strict";var g,c={1024:b.categoriesConstIds.GALLERY,1025:b.categoriesConstIds.VIDEO,1026:b.categoriesConstIds.MUSIC,1027:b.categoriesConstIds.SOCIAL,1028:b.categoriesConstIds.CONTACT,1029:b.categoriesConstIds.IMAGE,1030:b.categoriesConstIds.OTHER,1031:b.categoriesConstIds.BUTTON,1032:b.categoriesConstIds.BOX,1034:b.categoriesConstIds.MENU,1035:b.categoriesConstIds.SHAPE,1036:b.categoriesConstIds.TEXT,1037:b.categoriesConstIds.LIST,1038:b.categoriesConstIds.BLOG,1039:b.categoriesConstIds.STORE,1153:b.categoriesConstIds.STORE},d={},e=function(a){switch(a){case b.categoriesConstIds.GALLERY:return"1024";case b.categoriesConstIds.VIDEO:return"1025";case b.categoriesConstIds.MUSIC:return"1026";case b.categoriesConstIds.SOCIAL:return"1027";case b.categoriesConstIds.CONTACT:return"1028";case b.categoriesConstIds.IMAGE:return"1029";case b.categoriesConstIds.OTHER:return"1030";case b.categoriesConstIds.BUTTON:return"1031";case b.categoriesConstIds.BOX:return"1032";case b.categoriesConstIds.MENU:return"1034";case b.categoriesConstIds.SHAPE:return"1035";case b.categoriesConstIds.TEXT:return"1036";case b.categoriesConstIds.LIST:return"1037";case b.categoriesConstIds.BLOG:return"1038";case b.categoriesConstIds.STORE:return"1153";case b.categoriesConstIds.STORE+"_post":return"1039"}},f=function(){return a.keys(c)},h=function(a,b,c){g=b,a.tpa.appMarket.getRelatedApps(function(a){i(a),c()})},i=function(b){a.forEach(b,function(b){var c=a.intersection(b.categories,f());a.forEach(c,function(a){j(a,b)})})},j=function(a,b){d[a]=d[a]?d[a]:[],d[a].push(b)},k=function(){return a(c).pick(a.keys(d)).values().xor(g).value()},l=function(b){return a.sortBy(d[b],function(a){return a.weights?-a.weights.categories[b]:0})},m=function(b,c,e){if(a.isEmpty(d))h(b,function(){e(l(c))});else{var f=l(c);e(f)}},n=function(){return d};return{init:h,initRelatedApps:i,getApps:n,getCategories:k,getCategoryApps:m,getCategoryNumber:e}}),define("tpa/addPanelData/tpaAddPanelAppBox.rt",["react/addons","lodash","baseUI"],function(a,b,c){"use strict";function d(){this.onMouseEnter(this.props.index)}function e(){this.onMouseLeave(this.props.index)}function f(a,c){var d=b.assign({},a,c);return a.hasOwnProperty("style")&&(d.style=b.defaults(d.style,a.style)),a.hasOwnProperty("className")&&c.hasOwnProperty("className")&&(d.className=c.className+" "+a.className),d}return function(){return a.createElement("div",{className:"box-app-wrapper",onMouseEnter:d.bind(this),onMouseLeave:e.bind(this),onClick:this.onClick},a.createElement("a",f({onMouseDown:this.onMouseDown,className:"box-app",onClick:this.onClick},{style:{margin:"auto",top:"0",bottom:"0"},appDefinitionId:this.props.box.appDefinitionId}),a.createElement("div",{style:{backgroundImage:"url("+this.props.box.appIcon+")",width:"100%",height:"100%",backgroundSize:"contain",borderRadius:"5px"}})),a.createElement("div",{className:"content"},a.createElement("div",{className:"title ellipsis"},this.props.box.name),a.createElement("label",{className:"ellipsis"},this.props.box.relatedAppsTeaser)),a.createElement("a",{onClick:this.onPlusClick.bind(this,this.props.index)},a.createElement("span",{className:"plus-tooltip"},a.createElement(c.tooltip,{value:"tpa_add_panel_add_to_site",alignment:c.uiConstants.TOOLTIP.ALIGNMENT.TOP},a.createElement("div",{},a.createElement(c.symbol,{className:"plus",name:"plusBig"}))))))}}),define("tpa/addPanelData/tpaAddPanelAppBox",["react","lodash","core","panels","tpa/appMarket/utils/appMarketUtils","tpa/addPanelData/addPanelService","tpa/appMarket/services/appMarketTabService","tpa/bi/bi","tpa/utils/tpaUtils","tpa/services/tpaAddRemoveDSService","tpa/addPanelData/tpaAddPanelAppBox.rt"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";return a.createClass({displayName:"tpaAddPanelApp",mixins:[c.mixins.editorAPIMixin],render:k,propTypes:{referralInfo:a.PropTypes.string.isRequired,category:a.PropTypes.string,box:a.PropTypes.object,onItemDrag:a.PropTypes.func},addApp:function(a,c,f,g,h,i){var k=this,l=this.getEditorAPI(),m=l.tpa.app.isInstalled(a,!0);if(m&&i){var n=l.pages.getFocusedPageId(),o=l.tpa.app.getFirstAppCompPageId(a);o&&o.pageId!==n&&l.pages.navigateTo(o.pageId),l.tpa.appMarket.getDataAsync(a).then(function(c){d.panelManager.openPanel("tpa.message.sectionAlreadyInstalled",{appName:b.get(c,"name"),appIcon:b.get(c,"appIcon"),appDefId:a})})}else if(c||m){var p={pageId:l.pages.getFocusedPageId()};p=f?b.merge(p,{layout:f}):p,p.callback=function(b){k.reportTpaAddedBiEvent(a,c,g,m,p.pageId,b.comp.id,h)},i?l.tpa.appMarket.getDataAsync(a).then(function(c){var e=j.addSection(l,a,{callback:function(){b.get(c,"doNotShowPageAddedPanel")||d.panelManager.openPanel("tpa.message.newPageAdded",{appName:b.get(c,"name"),appIcon:b.get(c,"appIcon"),appDefId:a})}});l.pages.navigateTo(b.get(e,"id"),function(){var a=l.tpa.section.getSectionRefByPageId(e.id);l.selection.selectComponentByCompRef(a)})}):j.addWidget(l,a,p)}else{var q=l.tpa.appMarket.getPermissionsUrl(this.getAppMarketParams(),a);q=f?q.concat("&x="+f.x+"&y="+f.y):q,e.openAppMarketModal("appMarketPermissionsModal",{url:q})}},onMouseEnter:function(a){this.setState({hover:!0,selected:a})},onMouseLeave:function(){this.setState({hover:!1})},onMouseDown:function(a){var c=this;if(b.isFunction(this.props.onItemDrag)){var f,g,d=this.getDOMNode().getBoundingClientRect(),e=b.pick(b.merge({},d,{top:d.top+30,left:d.left+41,width:60,height:60}),["left","top","width","height"]),h=this.props.box.hasSection;h?(f=980,g=500):(f=this.props.box.widgets[0].defaultWidth,g=this.props.box.widgets[0].defaultHeight),this.props.onItemDrag(a,{rect:e,onDrop:function(a,b){c.onMouseDrop(a,b)},structure:{layout:{width:f,height:g}},selectedApp:this.props.box})}},onMouseDrop:function(a,b){var c=this.getEditorAPI(),d=b.selectedApp.appDefinitionId,e="Wix"===b.selectedApp.by,f=this.isFirstAdd(c,d),g=b.selectedApp.hasSection;this.reportTpaAddClickBiEvent(d,e,"drag",f),this.addApp(d,e,{width:b.structure.layout.width,height:b.structure.layout.height,x:a.x,y:a.y},"drag",f,g)},onClick:function(a){if(!this.svgClicked(a)){var b=this.getEditorAPI(),c=this.props.box,e=c.appDefinitionId,f=c.hasSection;if(f){var g="Wix"===c.by,j=this.isFirstAdd(b,e);this.addApp(e,g,null,"direct_add",j,f)}else{this.openInfoModal(c);var k={app_id:e,origin:this.props.referralInfo,category:this.getCategory(),section:"related apps",component_type:i.isBlog(e)?"blog":"tpa"};b.bi.event(h.events.OPEN_MODAL_CLICK,k),d.panelManager.closePanelByName("rEditor.addPanel")}}},svgClicked:function(a){return"svg"===a.target.tagName||"circle"===a.target.tagName||"path"===a.target.tagName},onPlusClick:function(a,b){if(this.svgClicked(b)){var c=this.getEditorAPI(),d=this.props.box,e="Wix"===d.by,f=d.appDefinitionId,g=d.hasSection,h=this.isFirstAdd(c,f);this.reportTpaAddClickBiEvent(f,e,"direct_add",h),this.addApp(f,e,null,"direct_add",h,g)}},getAppMarketParams:function(){return{origin:e.origin(),openMarketOrigin:this.props.referralInfo,referralInfoCategory:this.getCategory(),section:"related_apps"}},openInfoModal:function(a){var b=this.getEditorAPI(),c=b.tpa.appMarket.getInfoUrl(this.getAppMarketParams(),a.slug);e.openAppMarketModal("appMarketAppModal",{url:c})},reportTpaAddedBiEvent:function(a,c,d,e,f,g,i){var j=this.getEditorAPI(),k=this.getBasicBiParams(j,a,c,d,i),l=j.tpa.app.getDataByAppDefId(a),m=j.generalInfo.isFirstSave(),n=m?j.generalInfo.getMetaSiteId():"",o={widget_id:"",app_site_id:l.instanceId,instance_id:g,search_term:"",search_result_position:"",referral_info_category:this.getCategory(),referral_info:this.props.referralInfo,template_guid:n,modal_tab_name:"",page_id:f};k=b.assign(k,o),j.bi.event(h.events.TPA_ADDED,k)},reportTpaAddClickBiEvent:function(a,b,c,d){var e=this.getEditorAPI(),f=this.getBasicBiParams(e,a,b,c,d);e.bi.event(h.events.TPA_ADD_CLICK,f)},getBasicBiParams:function(a,b,c,d,e){return{adding_method:d,section:"related_apps",category:this.getCategory(),origin:this.props.referralInfo,app_id:b,is_first:e?1:0,is_permissions_app:c?0:1}},isFirstAdd:function(a,b){return!a.tpa.app.isInstalled(b,!0)},getCategory:function(){return this.props.category}})}),define("tpa/addPanelData/tpaAddPanelSection.rt",["react/addons","lodash","addPanelInfra","util","baseUI","tpa/addPanelData/tpaAddPanelAppBox"],function(a,b,c,d,e,f){"use strict";function g(b,c){return a.createElement("div",{key:b.appDefinitionId},a.createElement(f,{box:b,index:c,category:this.props.props.category,onItemDrag:this.props.onItemDrag,referralInfo:this.props.parentType}))}function h(){this.openCategory()}return function(){return a.createElement.apply(this,["div",{category:this.getCategory()},b.map(this.getAppBoxList(),g.bind(this)),a.createElement("div",{className:"more"},a.createElement(e.symbol,{name:"market"}),a.createElement("span",{},d.translate("tpa_add_panel_still_havent_found")),a.createElement("a",{onClick:h.bind(this)},d.translate("tpa_add_panel_browse_app_market")),a.createElement("span",{dangerouslySetInnerHTML:{__html:"&nbsp;"}}))])}}),define("tpa/services/pendingAppsService",["lodash","tpa/appMarket/utils/appMarketUtils"],function(a,b){"use strict";var c="tpa.compPanels.appMarketPanel",d=function(c,d){var e=b.getAppMarketUserPrefs(c);if(e){var f=e.removedPendingApps||[],g=a(d).indexBy("appDefinitionId").omit(f).value();d=a.values(g)}return d},e=function(a){var b=a.tpa.getPendingApps();return d(a,b)},f=function(a){return a.tpa.getPremiumPendingApps()},g=function(b){return a.size(b.tpa.pending.getPendingApps())},h=function(b){var c=e(b),d=f(b);return a.union(c,d)},i=function(a){a.leftBar.notifications.setCount(c,g(a))},j=function(a,b){a.tpa.pending.dismiss(b),i(a)};return{getPendingApps:h,getPendingAppsCount:g,updateNotification:i,dismiss:j}}),define("tpa/addPanelData/tpaAddPanelSection",["react","lodash","core","panels","tpa/addPanelData/addPanelService","tpa/appMarket/services/appMarketTabService","tpa/addPanelData/tpaAddPanelSection.rt","util","tpa/services/pendingAppsService"],function(a,b,c,d,e,f,g,h,i){"use strict";return a.createClass({displayName:"tpaAddPanelSection",mixins:[c.mixins.editorAPIMixin],render:g,getAppBoxList:function(){return this.appBoxList},componentWillMount:function(){var a=this,b=this.getEditorAPI();e.getCategoryApps(b,this.getCategoryNum(),function(b){a.appBoxList=b}),this.referralInfo=this.props.parentType.toLowerCase()},openCategory:function(){d.panelManager.closePanelByName("rEditor.addPanel");var a={referralInfoCategory:this.getCategory(),openMarketOrigin:this.referralInfo,section:"related_apps"};f.openAppMarketTab({urlParams:a}),this.getEditorAPI().bi.event(h.bi.events.OPEN_MARKET_CLICK,{referral_info:this.referralInfo,referral_info_category:this.getCategory(),num_pending_apps:i.getPendingAppsCount(this.getEditorAPI())})},getCategory:function(){return this.props.props.category},getCategoryNum:function(){return this.props.props.categoryNum}})}),define("tpa/addPanelData/section",["tpa/addPanelData/tpaAddPanelSection","tpa/addPanelData/addPanelService","addPanelData"],function(a,b,c){"use strict";var d=function(){var a=b.getCategories();c.manager.end.register(a,function(a){return[e(a,null)]})},e=function(b,d){var e=c.getGeneralSectionBaseStructure();return e.help.hide=!1,e.help.title="",e.help.text="add_section_info_text_relatedapps_general",e.teaser.hide=!0,e.props["class"]="tpaSection",e.props.template=a,e.props.category=b,e.props.categoryNum=d||f(b),"store"===b?"1153"===d?e.help.text="add_section_info_text_relatedapps_store":e.help.text="add_section_info_text_relatedapps_store2":"blog"===b&&(e.help.text="add_section_info_text_relatedapps_blog"),e},f=function(a){return b.getCategoryNumber(a)};return{registerAddPanelSection:d,getSectionStructure:e}}),define("tpa/superApps/superAppsHelpConstants",["lodash","tpa/superApps/superAppsConstants","tpa/constants/constants"],function(a,b,c){"use strict";var d={},e=b.ECOM;d[e.APP_DEF_ID]={"default":"0f648788-74b4-4e52-a81a-6e7beaf886be"},d[e.APP_DEF_ID][e.PRODUCT_GALLERY_PAGE]={"default":"23862857-e4f2-4205-87da-592e3cad64de"},d[e.APP_DEF_ID][e.SHOPPING_CART_WIDGET]={"default":"c52504cf-b6bb-466b-97bc-3bc5db055383",settings:"6e30d2d7-f14a-4eec-b5df-666a6adbfa63",MOBILE:{"default":"e70514e0-fef6-4323-badb-0bcc7cd4c505"}},d[e.APP_DEF_ID][e.GRID_GALLERY]={"default":"722d45ed-b4f4-455b-b61f-5d50658b930f",settings:"8f2c4943-2958-4e46-843b-99c236c9a307",MOBILE:{"default":"143e074d-2ac8-433f-977b-e0b3161901de"}},d[e.APP_DEF_ID][e.SLIDER_GALLERY]={"default":"df957dfd-405d-4531-a2c2-8e2f5cf8a336",settings:"8f2c4943-2958-4e46-843b-99c236c9a307",MOBILE:{"default":"c8e7cffc-d618-481a-a924-73191ec0e29a"}},d[e.APP_DEF_ID][e.TANK_YOU_PAGE]={"default":"84a5e37f-afb2-4c91-8991-14acf7ca855d",settings:"398e0f01-ca67-4970-b842-a4882f5d1bca"},d[e.APP_DEF_ID][e.SHOPPING_CART]={"default":"6311358d-4f8f-45e8-8406-b1ee73de5d07",settings:"b7840a7d-9dc8-49e2-8638-60066b549715"},d[e.APP_DEF_ID][e.PRODUCT_PAGE]={"default":"7b07bbe9-442f-46c7-b706-f23110a495b3",settings:"19466d19-d605-4d64-86a7-d34ce33d89f4"},d[e.APP_DEF_ID][e.PRODUCT_WIDGET]={"default":"2f415db1-ad0d-4b62-a16b-d41d7db67a89",settings:"294247fa-e48e-4d04-b60b-700ab26b1aed",MOBILE:{"default":"b6d9a270-f9c5-4837-995b-c3818b13a643"}},d[b.HOTELS.APP_DEF_ID]={"default":"62802d08-f2d0-4210-bd31-61137bffd369",DESKTOP:{"default":"62802d08-f2d0-4210-bd31-61137bffd369",settings:"9533a46e-f2f9-4937-aa42-34ebe6605c9f",settings_modal:"ae1e7043-9e32-4d17-8be6-fe5251eea504"},MOBILE:{"default":"b6d9a270-f9c5-4837-995b-c3818b13a643"}},d[b.HOTELS.APP_DEF_ID][b.HOTELS.SEARCH_BAR]={"default":"74fa7881-aada-49b7-9524-f0d06e91dcbe",settings:"137eb12b-4f84-4db9-9d42-6883af2ddf44",MOBILE:{"default":"b6d9a270-f9c5-4837-995b-c3818b13a643"}},d[b.WIXMUSIC_APP_DEF_ID]={"default":"5c492ea8-e4de-4b4f-ae99-d69123cc0cd5",DESKTOP:{"default":"5c492ea8-e4de-4b4f-ae99-d69123cc0cd5",settings:"c3347bf4-41d3-440f-ad6e-69df65e9329f",settings_modal:"d2a0c964-e879-492f-a3a0-99bf8310c589"},MOBILE:{"default":"b6d9a270-f9c5-4837-995b-c3818b13a643"}},d[b.WIX_BOOKINGS_APP_DEF_ID]={"default":"c7cfedc0-f0c7-4ea3-9f91-9e1e9a5f7b33",DESKTOP:{"default":"c7cfedc0-f0c7-4ea3-9f91-9e1e9a5f7b33",settings:"d3a68bc1-6c4b-4068-bb83-3409368c11c4",settings_modal:"bf44fdcd-7f35-41a2-a04a-93a0a821e55d"},MOBILE:{"default":"b6d9a270-f9c5-4837-995b-c3818b13a643"}},d[b.GET_SUBSCRIBERS_APP_DEF_ID]={"default":"bcb69cdc-c329-45eb-98aa-e9823bfc2ce5"},d[b.WIX_PHOTOALBUMS_APP_DEF_ID]={"default":"73bedc32-fd06-4d8c-a8d3-afcfb80b8e18",settings:"0ed5aab7-9087-439e-a213-ba4b1cc6b3af"};var f=function(b,e,f,g){var h=b.viewMode.get(),i=c.TPA_DEFAULT_HELP_ID,j={};return j=d[e]||j,j=j[f]||j,j=j[h]||j,j=j[g]||j,a.isObject(j)&&!a.isUndefined(j["default"])?i=j["default"]:a.isString(j)&&(i=j),i},g=function(a,b,d,e){var g=f(a,b,d,e),h=g===c.TPA_DEFAULT_HELP_ID?b:null;return{helpId:g,appDefinitionId:h}};return{helpConstants:d,getCustomHelpId:f,getHelpData:g}}),define("tpa/superApps/superApps",["lodash","panels","savePublish","superAppMenuInfra","tpa/utils/tpaUtils","tpa/appMarket/services/appMarketTabService","tpa/appMarket/utils/appMarketUtils","tpa/constants/constants","tpa/addPanelData/section","tpa/bi/bi","tpa/superApps/superAppsConstants","tpa/superApps/superAppsHelpConstants","tpa/services/tpaAddRemoveDSService","tpa/packagePicker/packagePicker"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";var o,p={store:{category:"store",categoryNum:{pre:"1153",post:"1039"}}},q=["store"],r=function(a){o=a},s=function(a){return o.tpa.app.isPremiumByAppDefinitionId(a)},t=function(a,b){b&&o.tpa.appMarket.getDataAsync(a).then(function(a){b(o.tpa.app.getExtensionsWidgets(a))})},u=function(a,b,c,d){var f=o.tpa.app.getDataByAppDefId(a);if(f){var g=!o.generalInfo.isFirstSave();if(g)w(f,b,c,d);else if(f.demoMode){var h=function(){v(f,b,c,d)},i=function(){e.provisionFailAlert(f.appDefinitionId)};o.tpa.provision.provisionAppDemoSave(f.applicationId,h,i)}else v(f,b,c,d)}},v=function(a,d,e,f){c.saveInBackground(o,function(){o.tpa.appMarket.getDataAsync(a.appDefinitionId,{forceRequest:!0}),a=o.tpa.app.getDataByAppDefId(a.appDefinitionId),y(a,d,e,f)},function(){b.panelManager.openPanel("savePublish.panels.common.failPanel",{titleKey:"tpa_messages_dashboard_before_save_error_title",description:"SAVE_PUBLISH_ERROR_BODY_DESCRIPTION",steps:["tpa_messages_upgrade_before_save_error_step_1","tpa_messages_upgrade_before_save_error_step_2","tpa_messages_dashboard_before_save_error_step_3"],helpMessage:"tpa_messages_dashboard_before_save_error_support",helpLinkMessage:"tpa_messages_upgrade_before_save_error_support_link",helpLink:"",biEvent:j.events.TPA_MESSAGE_LOADED,biParams:{app_id:a.appDefinitionId,description:"Error on open dashboard from template site",type:"dashboard_save_error"}},!0)})},w=function(a,b,c,d){if(a.demoMode){var f=function(){o.tpa.appMarket.getDataAsync(a.appDefinitionId,{forceRequest:!0}),y(a,b,c,d)},g=function(){e.provisionFailAlert(a.appDefinitionId)};o.tpa.provision.provisionAppDemoSave(a.applicationId,f,g)}else y(a,b,c,d)},x=function(a,b){return b=b||{},b.appDefinitionId=a.appDefinitionId,b.helpId=l.getCustomHelpId(o,b.appDefinitionId,null,"settings_modal"),b},y=function(a,c,d,f){f=f||{};var g=h.TPA_SETTING_MODAL,i=e.getOpenedPanel(g);i&&b.panelManager.closePanelByName(i.props.panelName);var j=a.dashboardUrl;if(f.state&&(j+="#"+f.state),a.dashboardUrl){var k={url:j,deviceType:"desktop",applicationId:a.applicationId,origCompId:""},l={width:c,height:d,title:f.title},m=o.tpa.getSettingsModalParams(k,l);m.onClose=f.onClose;var n=f.leavePanelsOpen||!1;x(a,m);var p=o.selection.getSelectedComponentData();if(!p||p.applicationId!==a.applicationId){var q=o.tpa.app.getFirstAppCompPageId(a.appDefinitionId),r=o.components.get.byId(q.compId,q.pageId);o.selection.selectComponentByCompRef(r);
}b.panelManager.openPanel(g,m,n)}},z=function(a){var b={urlParams:{openMarketOrigin:k.getMarketOpenOriginForBi(a),openAppDefId:a}};f.openAppMarketTab(b)},A=function(a){var b=o.tpa.app.getDataByAppDefId(a),c=o.tpa.app.getRenderedReactCompsByApplicationId(b.applicationId);o.tpa.app.refreshApp(c)},B=function(a){var b=o.tpa.appMarket.getInfoUrl({origin:"http://editor.wix.com"},a);g.openAppMarketModal("appMarketAppModal",{url:b})},C=function(a,b){o.tpa.app.registerOnInstalled(a,b)},D=function(a,b){o.tpa.app.registerOnDeleted(a,b)},E=function(a,b){var c=o.tpa.app.getDataByAppDefId(a),d=c.widgets[b];if(d&&e.isMultiSectionInstanceEnabled(c,d.widgetId)){var f=m.addMultiSection(o,c.appDefinitionId,{pageId:d.appPage.id});o.pages.navigateTo(f.pageId),L(c,f,d.widgetId)}},F=function(a,b){return m.addSection(o,a,b)},G=function(b,c,d,e){var f=m.addWidget(o,b,{widgetId:c,layout:d});o.waitForChangesApplied(function(d){if(a.isUndefined(d)){H(f,e);var g=o.tpa.app.getDataByAppDefId(b);K(g,f,c)}})},H=function(b,c){var d=c&&c.presetId;a.isString(d)&&!a.isEmpty(d)&&o.tpa.data.set(b,"presetId",d,o.tpa.data.SCOPE.COMPONENT)},I=function(a){var b=o.tpa.app.isInstalled(a);return b&&o.tpa.appMarket.getData(a),b},J=function(a){return o.tpa.app.getFirstAppCompPageId(a)},K=function(a,b,c){var d={app_id:a.appDefinitionId,app_site_id:a.instanceId,instance_id:b.id,widget_id:c,page_id:b.pageId};o.bi.event(j.events.EXTENSION_ADDED,d)},L=function(a,b,c){var d={app_id:a.appDefinitionId,app_site_id:a.instanceId,instance_id:b.sectionId,widget_id:c,page_id:b.pageId};o.bi.event(j.events.EXTENSION_ADDED,d)},M=function(a,b){return i.getSectionStructure(a,b,"vertical_button")},N=function(a){return o.tpa.section.getSectionRefByPageId(a)},O=function(a,b,c){n.startUpgradeFlow(o,a,!1,{external:b,origin:c})},P=function(a){var b=o.tpa.app.getDataByAppDefId(a);return b?o.tpa.app.hasPremiumOffering(b.applicationId):!1},Q=function(a,c,e,f,g,h,i){d.button.registerButton(o,a,c,e,f,g,h,i,!0),b.panelManager.openPanel(e,{appWasManuallyInstalled:!0})};return{init:r,isPremium:s,getExtensions:t,openDashboardUrl:u,openAppMarketForAppDef:z,refreshAppCompsForAppDefId:A,openAppMarketInfoModal:B,registerOnAppInstalled:C,registerOnAppDeleted:D,addApp:F,addWidget:G,addSection:E,superAppsConstants:k,isInstalled:I,getFirstAppCompPageId:J,relatedApps:{addPanelCategories:q,constants:p,getRelatedAppsForPostInstall:M,getRelatedAppsForPreInstall:M},getSectionRefByPageId:N,upgrade:O,isSuperApp:k.isSuperApp,hasPremiumOffering:P,openSuperAppPanel:Q}}),define("tpa/handlers/editorTPAHandlers",["lodash","panels","tpa/utils/mediaDialogHandlerUtils","tpa/utils/tpaUtils","tpa/packagePicker/packagePicker","tpa/constants/constants","tpa/services/dashboardAppService","tpa/bi/bi","tpa/services/tpaAddRemoveDSService","tpa/services/tpaStyleService","tpa/handlers/editorRefreshTPADataAfterUpgrade","tpa/superApps/superApps","tpa/superApps/superAppsHelpConstants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";var n=function(a){var b=a.selection.getSelectedComponentData();if(b){var c=a.tpa.app.getData(b.applicationId);if(!e.isFullyUpgraded(a,c)){var d=!0;e.startUpgradeFlow(a,c.appDefinitionId,d,{origin:"settings"})}}},o=function(a,b){var c=a.selection.getSelectedComponentData();c&&a.tpa.change.trigger.settingsUpdated(c.applicationId,b.data.compId,b.data.message)},p=function(b,d,e){var f=function(b){a.isArray(b)||(b=[b]);var e=b.map(c.convertMediaManagerResult);return e=d.data.multiSelection?e:e[0]};r(b,d,f,e)},q=function(a,b,c){var d=function(a){return a};r(a,b,d,c)},r=function(b,d,e,f){var g=b.mediaServices.mediaManager,h=c.convertMediaType(d.data.mediaType,g),i=d.data.callOnCancel,j=d.data.multiSelection,k=function(b){var c,d=!a.isEmpty(b),g=i;d?c=e(b):g&&(c={wasCancelled:!0}),c&&f(c)},l={multiSelect:j,callback:k};g.open(h,l)},s=function(a,b,c){j.setStyleParam(a,b.compId,b.data,c),a.tpa.style.setParamOldSDK(b.compId,b.data)},t=function(a,b,c){g.getDashboardAppUrlAsync(a,c)},u=function(a,c,d){b.panelManager.updatePanelProps("tpa.compPanels.tpaSettings",{isAlive:!0}),d(a.tpa.style.get(c.compId))},v=function(b,c){var d=c.data.placement;if("CENTER"===d)throw new Error("Invalid position: "+d+". please use a valid position");var e=c.data.verticalMargin||0,f=c.data.horizontalMargin||0,g=b.components.get.byId(c.compId,"masterPage"),h=b.components.properties.get(g);a.assign(h,{placement:d,verticalMargin:e,horizontalMargin:f}),b.components.properties.update(g,h),b.tpa.change.trigger.windowPlacement(c)},w=function(a,b,c){var d=a.components.properties.get(a.selection.getSelectedComponents());if(!d)throw new Error("Selected widget is not Glued Widget");c({placement:d.placement,verticalMargin:parseFloat(d.verticalMargin),horizontalMargin:parseFloat(d.horizontalMargin)})},x=function(a){return"number"==typeof a&&(a=a.toString()+"px"),a},y=function(c,e,g){var h=f.TPA_SETTING_MODAL,i=c.selection.getSelectedComponentData(),j=d.getOpenedPanel(h);j&&b.panelManager.closePanelByName(j.props.panelName);var k={url:e.data.url,deviceType:e.deviceType,applicationId:i.applicationId,origCompId:c.selection.getSelectedComponentId()},m=a.clone(e.data);m.width=x(m.width),m.height=x(m.height),m.onClose=g;var n=c.tpa.getSettingsModalParams(k,m),o=c.tpa.app.getData(i.applicationId);l.isSuperApp(o.appDefinitionId)&&z(c,o,n),b.panelManager.openPanel(h,n,!0)},z=function(a,b,c){return c=c||{},c.appDefinitionId=b.appDefinitionId,c.helpId=m.getCustomHelpId(a,c.appDefinitionId,null,"settings_modal"),c},A=function(a,b,c){var d=a.components.get.byId(b.compId);a.tpa.comp.setExternalId(d,b.data.externalId,c)},B=function(a,b,c){var d=a.components.get.byId(b.compId),e=a.tpa.comp.getExternalId(d);c(e)},C=function(b,c){return a.includes(b.pages.getPageIdList(),c)},D=function(a,c,e){var f=a.selection.getSelectedComponentData();if(f){var g=a.tpa.app.getData(f.applicationId),h=c.data.componentType;if("WIDGET"===h){var j=a.pages.getFocusedPageId(),k=c.data.widget.wixPageId||j;if(C(a,k)||c.data.widget.allPages){var l=a.tpa.app.getWidgetDataFromTPAWidgetId(g.appDefinitionId,c.data.widget.tpaWidgetId);if(l){var m=l.widgetId,n=i.addWidget(a,g.appDefinitionId,{pageId:k,widgetId:m,showOnAllPages:c.data.widget.allPages});k!==j&&a.pages.navigateTo(k,function(){b.panelManager.closePanelByName("tpa.compPanels.tpaSettings")}),a.waitForChangesApplied(function(){e&&e(n.id),E(a,g,n,m)})}else e&&e({onError:"No widget found."})}else e&&e({onError:"pageId was not found."})}else if("PAGE"===h){var o=a.tpa.app.getWidgetDataFromTPAPageId(g.appDefinitionId,c.data.page.pageId);if(o&&d.isMultiSectionInstanceEnabled(g,o.widgetId)){var p=i.addMultiSection(a,g.appDefinitionId,{pageId:c.data.page.pageId,title:c.data.page.title});a.pages.navigateTo(p.id,function(){e&&e(p.sectionId),b.panelManager.closePanelByName("tpa.compPanels.tpaSettings")}),F(a,g,p,o.widgetId)}else e&&e({onError:"No page found."})}else e&&e({onError:"componentType not supported."})}else e&&e({onError:"General Error."})},E=function(a,b,c,d){var e=a.components.getPage(c),f=e&&e.id,g={app_id:b.appDefinitionId,app_site_id:b.instanceId,instance_id:c.id,widget_id:d,page_id:f};a.bi.event(h.events.EXTENSION_ADDED,g)},F=function(a,b,c,d){var e={app_id:b.appDefinitionId,app_site_id:b.instanceId,instance_id:c.sectionId,widget_id:d,page_id:c.id};a.bi.event(h.events.EXTENSION_ADDED,e)},G=function(a){var b=a.selection.getSelectedComponentData();k.trackAppUpgrade(a,b.applicationId)},H=function(a,b,c){var d=a.selection.getSelectedComponentData(),f=a.tpa.app.getData(d.applicationId);e.getWixUpgradeUrl(a,f.appDefinitionId,c)};return{openBillingPage:n,trackAppUpgrade:G,getWixUpgradeUrl:H,postMessage:o,openMediaDialog:p,superAppsOpenMediaDialog:q,setStyleParam:s,appIsAlive:u,getDashboardAppUrl:t,setWindowPlacement:v,getWindowPlacement:w,settingsOpenModal:y,addComponent:D,setExternalId:A,getExternalId:B}}),define("tpa/handlers/editorSettingsModalHandlers",["lodash","panels"],function(a,b){"use strict";var c=function(c,d,e){var f=a.clone(e.props);f.callbackArgs=c.data.message,b.panelManager.updatePanelProps(e.props.panelName,f),b.panelManager.closePanelByName(e.props.panelName)},d=function(a,c,d){b.panelManager.updatePanelProps(d.name,{width:a.data.width,height:a.data.height})};return{closeWindow:c,resizeWindow:d}}),define("tpa/settings/uiLib/fontPickerStyleService",["textControls","tpa/services/tpaStyleService"],function(a,b){"use strict";var c=function(a,c,e,f,g,h,i){var j={key:e,param:{value:d(a,c,e,g,h,i)},type:"font"};b.setStyleParam(a,c,j),a.waitForChangesApplied(function(){var b=a.tpa.style.get(c);f({fontParam:b.style.fonts[j.key]})})},d=function(b,c,d,e,f,g){var h={size:24,style:{italic:!1,bold:!1,underline:!1},family:"ariel",preset:"Custom",fontStyleParam:!0},i=b.tpa.style.get(c);switch(i.style&&i.style.fonts&&i.style.fonts[d]&&(h=i.style.fonts[d],delete h.displayName,delete h.value),e){case"theme":var j=b.tpa.style.getNameToFontsKeyMap(),k=j[f],l=b.theme.fonts.get(f),m=a.fontUtils.parseStyleFont(l,b.theme.fonts.getAll(),b.theme.colors.getAll());h.preset=k,h.editorKey=f,h.displayName=g,h.size=m.size,h.family=m.family.toLowerCase(),h.style={bold:m.bold,italic:m.italic,underline:!1};break;case"family":h.preset="Custom",h.family=f;break;case"size":h.preset="Custom",h.size=f;break;case"bold":h.preset="Custom",h.style.bold=f;break;case"italic":h.preset="Custom",h.style.italic=f;break;case"underline":h.preset="Custom",h.style.underline=f}return h};return{onStyleChange:c}}),define("tpa/settings/uiLib/colorPickerStyleService",["lodash","tpa/services/tpaStyleService"],function(a,b){"use strict";var c=function(a,c,g,h,i){var j=a.tpa.style.get(c)||{},k=j.style&&j.style.colors[g]||{},l=e(k.value),m=l?+l:1,n={key:g,param:{value:{opacity:m}},type:"color"};d(i)?n.param.value.rgba=f(i,m):n.param.value.color={name:i},b.setStyleParam(a,c,n),a.waitForChangesApplied(function(){j=a.tpa.style.get(c),j.style&&j.style.colors&&h({colorParam:j.style.colors[n.key]})})},d=function(b){return a.isUndefined(b)?!1:!!a.includes(b,"#")},e=function(b){if(a.isUndefined(b))return 1;if(a.includes(b,"#"))return 1;var c=b.split(","),d=c[3];return d.split(")")[0]},f=function(b,c){var d;if(a.includes(b,"rgba")){var e=b.split(",");e[3]=c+")",d=e.join(",")}else{b=b.replace("#","");var f=parseInt(b.substring(0,2),16),g=parseInt(b.substring(2,4),16),h=parseInt(b.substring(4,6),16);d="rgba("+f+","+g+","+h+","+c+")"}return d};return{onStyleChange:c}}),define("tpa/handlers/editorUILibHandlers",["jquery","lodash","panels","tpa/services/tpaStyleService","tpa/settings/uiLib/fontPickerStyleService","tpa/settings/uiLib/colorPickerStyleService"],function(a,b,c,d,e,f){"use strict";var g=function(b){var c=a("#tpaSettingsFrame").offset();return c?{left:(b.left||0)+(c.left||0),top:(b.top||0)+(c.top||0)}:{left:b.left,top:b.top}},h=function(a,c,d){var e=a.tpa.style.get(c);return e&&b.has(e,"style.fonts")?e.style.fonts[d]:void 0},i=function(a,c,d){var e=g(b.pick(c.data,"top","left")),h=c.data.wixParam,i=c.compId,j=c.data.color||"#ffffff";a.panelManager.openPanel("panels.toolPanels.colorPicker.colorPickerPanel",{value:j,onChange:f.onStyleChange.bind(null,a,i,h,d),siteCustomColors:a.theme.colors.getCustomUsedInSkins(),sessionStorage:a.userPreferences.session,history:null,palettePresets:a.theme.colors.getColorPresets(),updateSitePalette:k.bind(null,a,i,d),previewOnHover:!1,top:e.top,left:e.left},!0)},j=function(a,d,f){var i=d.data.wixParam,j=d.compId,k=g(b.pick(d.data,"top","left"));c.panelManager.openPanel("tpaPanels.uiLib.uiLibTextParamDesignPanel",{title:d.data.title||"Font picker",startWithTheme:d.data.startWithTheme,top:k.top,left:k.left,fontMaxSize:d.data.fontMaxSize||100,compStyle:h(a,j,i),onStyleChange:e.onStyleChange.bind(null,a,j,i,f)},!0)},k=function(a,b,c,d){a.theme.colors.update(d),a.waitForChangesApplied(function(){var d=a.tpa.style.get(b);d.style&&d.style.colors&&c({paletteChange:!0,colors:d.style.colors})})};return{openColorPicker:i,openFontPicker:j}}),define("tpa/handlers/editorPublicDataHandlers",[],function(){"use strict";var a=function(a,b,c){var d=a.components.get.byId(b.compId);a.tpa.data.set(d,b.data.key,b.data.value,b.data.scope,c)},b=function(a,b,c){if(b.data.scope===a.tpa.data.SCOPE.APP){var d=a.selection.getSelectedComponentData();a.tpa.data.app.get(d.applicationId,b.data.key,c)}else{var e=a.components.get.byId(b.compId);a.tpa.data.comp.get(e,b.data.key,c)}},c=function(a,b,c){var d=a.components.get.byId(b.compId);a.tpa.data.remove(d,b.data.key,b.data.scope,c)},d=function(a,b,c){if(b.data.scope===a.tpa.data.SCOPE.APP){var d=a.selection.getSelectedComponentData();a.tpa.data.app.getMulti(d.applicationId,b.data.keys,c)}else{var e=a.components.get.byId(b.compId);a.tpa.data.comp.getMulti(e,b.data.keys,c)}};return{setValue:a,removeValue:c,getValue:b,getValues:d}}),define("tpa/common/editorTPAPostMessageCommon",["lodash"],function(a){"use strict";var b={TPA_MESSAGE:"TPA",TPA_MESSAGE2:"TPA2",TPA_RESPONSE:"TPA_RESPONSE",UI_LIB_RESPONSE:"UI_LIB_RESPONSE",PINGPONG_PREFIX:"pingpong:"},c=function(b,c,d){if(!a.isUndefined(b)){var e="";try{e=JSON.stringify(c)}catch(f){return}b.postMessage||(b=b.contentWindow),b.postMessage(e,d||"*")}},d=function(d,e){var f=["openColorPicker","openFontPicker"],g=b.TPA_RESPONSE;return a.includes(f,e.type)&&(g=b.UI_LIB_RESPONSE),function(a){try{c(d,{intent:g,callId:e.callId,type:e.type,res:a,status:!0})}catch(b){}}},e=function(a){return(a.intent===b.TPA_MESSAGE||a.intent===b.TPA_MESSAGE2)&&!f(a)},f=function(a){return"[UNKNOWN]"===a.compId},g=function(a){return a.replace(b.PINGPONG_PREFIX,"")},h=function(a,b,c){var f;try{c.data?f=JSON.parse(c.data):c.originalEvent&&c.originalEvent.data&&(c=c.originalEvent,f=JSON.parse(c.data))}catch(g){return}f&&e(f)&&b(a,f,d(c.source,f))};return{Intents:b,callPostMessage:c,generateResponseFunction:d,isTPAMessage:e,fixOldPingPongMessageType:g,handleTPAMessage:h}}),define("tpa/services/tpaPostMessageService",["lodash","tpa/handlers/editorTPAHandlers","tpa/handlers/editorSettingsModalHandlers","tpa/handlers/editorUILibHandlers","tpa/handlers/editorPublicDataHandlers","tpa/common/editorTPAPostMessageCommon","tpa/utils/tpaUtils","tpa/constants/constants"],function(a,b,c,d,e,f,g,h){"use strict";function i(a){var c=Boolean(b[a.type]);return c}function j(a){var b=Boolean(e[a.type]);return b}var k=function(f,k,n){if(a.merge(k,{compId:f.selection.getSelectedComponentId()}),l(k)){var o=g.getOpenedPanel(h.TPA_SETTING_MODAL);c[k.type].call(this,k,n,o)}else j(k)?e[k.type].call(this,f,k,n):i(k)?b[k.type].call(this,f,k,n):m(k)?d[k.type].call(this,f,k,n):(a.merge(k,{originFrame:"editor"}),f.tpa.handlers(k,n))},l=function(a){var b=g.getOpenedPanel(h.TPA_SETTING_MODAL);return b&&c[a.type]},m=function(a){return d[a.type]},n=function(a){window.addEventListener("message",f.handleTPAMessage.bind(this,a,k),!1)};return{init:n,callHandler:k}}),define("tpa/handlers/editorTPAPreviewHandlers",["lodash","util","tpa/constants/constants","experiment"],function(a,b,c,d){"use strict";var e=function(a,b){a.togglePreview();var d=a.tpa.app.getFirstAppCompPageId(b.data),e=a.components.get.byId(d.compId,d.pageId);a.selection.selectComponentByCompRef(e);var f=a.selection.getSelectedComponentData(),g=a.tpa.app.getData(f.applicationId);a.panelManager.openHelpCenter(c.TPA_DEFAULT_HELP_ID,g.appDefinitionId,{origin:"preview"})},f=function(a,b,c){var d=a.getPreviewMode()?"preview":"editor";return c(d)},g=function(b,c){if(b.isDesktopEditor()&&b.getPreviewMode()){var e=c.data.pageId,f=c.data.compId,g=[b.pages.getFocusedPageId()];d.isOpen("popups")&&b.pages.isPopupOpened()||g.push(b.pages.getMasterPageId()),a.includes(g,e)?h(b,f,e):b.pages.navigateTo(e,h.bind(void 0,b,f,e))}},h=function(a,b,c){a.togglePreview();var d=a.components.get.byId(b,c);a.selection.selectComponentByCompRef(d);var e={selectedComponent:a.selection.getSelectedComponents(),origCompId:b};a.panelManager.openPanel("tpa.compPanels.tpaSettings",e)},i=function(a){a.selection.deselectComponents()};return{openHelp:e,getViewMode:f,openSettingsDialog:g,deselectComponent:i}}),define("tpa/services/tpaPreviewPostMessageService",["lodash","tpa/handlers/editorTPAPreviewHandlers","tpa/common/editorTPAPostMessageCommon"],function(a,b,c){"use strict";function h(a){return Boolean(b[a.type])}var d=function(a,b){var c;try{b.data?c=JSON.parse(b.data):b.originalEvent&&b.originalEvent.data&&(b=b.originalEvent,c=JSON.parse(b.data))}catch(d){return}c&&g(c)&&h(c)&&e(a,c,f(b.source,c))},e=function(a,c,d){b[c.type].call(this,a,c,d)},f=function(a,b){return function(d){var e={intent:"TPA_PREVIEW",callId:b.callId,type:b.type,res:d,status:!0};c.callPostMessage(a,e)}},g=function(a){return"TPA_PREVIEW"===a.intent},i=function(a){window.addEventListener("message",d.bind(this,a),!1)};return{init:i}}),define("tpa/settings/settings",["lodash","util","panels","tpa/superApps/superAppsConstants","tpa/appMarket/utils/appMarketUtils"],function(a,b,c,d,e){"use strict";var f=function(a,b){b=b||a.selection.getSelectedComponents();var c=a.components.data.get(b),d=a.tpa.app.getData(c.applicationId),f=d.appDefinitionId;f?a.tpa.appMarket.getDataAsync(f,{verticalsPremium:!0}).then(function(c){if(d.demoMode&&"Wix"!==c.by){var h=a.tpa.appMarket.getPermissionsUrl({},f);h=h.concat("&demoMode=true"),e.openAppMarketModal("appMarketPermissionsModal",{url:h})}else g(a,b)}):g(a,b)},g=function(a,b){var c="tpa.compPanels.tpaSettings",d=h(c);d||a.panelManager.openPanel(c,{selectedComponent:b,origCompId:a.selection.getSelectedComponentId()})},h=function(b){var d=c.panelManager.getOpenPanels();return a.find(d,{name:b})};return{open:f}}),define("tpa/services/navigateAndOpenAppService",["lodash","util","panels","tpa/appMarket/services/appMarketTabService","tpa/settings/settings"],function(a,b,c,d,e){"use strict";var f=function(a){var c=b.url.getParameterByName("etpa");if(c){var e=a.tpa.app.getFirstAppCompPageId(c);e?h(a,c):d.openAppMarketTab({urlParams:{openAppDefId:c,openMarketOrigin:b.url.getParameterByName("referral_info")}})}},g=function(a,b){var c=a.components.get.byId(b.compId,b.pageId);a.selection.selectComponentByCompRef(c),e.open(a,c)},h=function(a,b){var c=a.tpa.app.getFirstAppCompPageId(b);if(c){var d=a.pages.getFocusedPageId();c.pageId!==d&&"masterPage"!==c.pageId?a.pages.navigateTo(c.pageId,function(){g(a,c)}):g(a,c)}};return{handleIfComingFromETPA:f,navigateAndOpenSettingsForAppDefId:h}}),define("tpa/componentsData/addCompKeyToCompTypeMap",[],function(){"use strict";var a={addAccordion:"tpa.viewer.components.Accordion",addAdminLoginButton:"wysiwyg.viewer.components.AdminLoginButton",addAudioPlayer:"wysiwyg.viewer.components.AudioPlayer",addBgImageStrip:"wysiwyg.viewer.components.BgImageStrip",addCollage:"tpa.viewer.components.Collage",addContactForm:"wysiwyg.viewer.components.ContactForm",addDocumentMedia:"wysiwyg.viewer.components.documentmedia.DocumentMedia",addFacebookComment:"wysiwyg.viewer.components.WFacebookComment",addFacebookLike:"wysiwyg.viewer.components.WFacebookLike",addDisqusComment:"wysiwyg.common.components.disquscomments.viewer.DisqusComments",addFacebookShare:"wysiwyg.viewer.components.FacebookShare",addFlashComponent:"wysiwyg.viewer.components.FlashComponent",addFreestyle:"tpa.viewer.components.Freestyle",addGoogleMap:"wysiwyg.viewer.components.GoogleMap",addGooglePlusOne:"wysiwyg.viewer.components.WGooglePlusOne",addHtmlComponent:"wysiwyg.viewer.components.HtmlComponent",addHoneycomb:"tpa.viewer.components.Honeycomb",addImpress:"tpa.viewer.components.Impress",addItunesButton:"wysiwyg.viewer.components.ItunesButton",addLoginButton:"wysiwyg.viewer.components.LoginButton",addMasonry:"tpa.viewer.components.Masonry",addMatrixGallery:"wysiwyg.viewer.components.MatrixGallery",addPaginatedGridGallery:"wysiwyg.viewer.components.PaginatedGridGallery",addPayPalButton:"wysiwyg.viewer.components.PayPalButton",addPinterestFollow:"wysiwyg.viewer.components.PinterestFollow",addSliderGallery:"wysiwyg.viewer.components.SliderGallery",addSlideShowGallery:"wysiwyg.viewer.components.SlideShowGallery",addSocialBar:"wysiwyg.viewer.components.LinkBar",addSoundCloud:"wysiwyg.viewer.components.SoundCloudWidget",addStripShowcase:"tpa.viewer.components.StripShowcase",addStripSlideshow:"tpa.viewer.components.StripSlideshow",addSvgShape:"wysiwyg.viewer.components.svgshape.SvgShape",addThumbnails:"tpa.viewer.components.Thumbnails",addTPA3DCarousel:"wysiwyg.viewer.components.tpapps.TPA3DCarousel",addTPA3DGallery:"wysiwyg.viewer.components.tpapps.TPA3DGallery",addTwitterFollow:"wysiwyg.viewer.components.WTwitterFollow",addTwitterTweet:"wysiwyg.viewer.components.WTwitterTweet",addVideo:"wysiwyg.viewer.components.Video",addVKShare:"wysiwyg.viewer.components.VKShareButton"},b=function(b){return a[b]||b};return{getCompType:b}}),define("tpa/componentsData/componentsDefaultData",["lodash"],function(a){"use strict";var b={"wysiwyg.viewer.components.tpapps.TPA3DCarousel":{layout:{width:803,height:272},componentType:"wysiwyg.viewer.components.tpapps.TPA3DCarousel",data:{type:"ImageList",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Cherry Blossom",uri:"3dcc6f56be1f8507181d0197e52d09e8.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Ray of Light",uri:"8fed9ef13904fb85b6b12092c269a465.jpg",description:"Describe your image here",width:750,height:563},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Bloom",uri:"24bba47f40f8473a534ae0301bf748c9.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Dew",uri:"8dde68848c4daae3a6905dc6a17d270e.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tranquil forest",uri:"568544c06dafc9d2ab6f4f4496e7d7b9.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lilly Pond",uri:"a3ae91861f93fde1b8917291180c5fe0.jpg",description:"Describe your image here",width:700,height:525}]},props:{type:"SlideShowGalleryProperties",metaData:{schemaVersion:"1.0"},expandEnabled:!0,galleryImageOnClickAction:"disabled",goToLinkText:"Go to link",imageMode:"clipImage",transition:"swipeHorizontal",autoplayInterval:5,autoplay:!1,transDuration:1,bidirectional:!0,reverse:!1,showAutoplay:!0,showNavigation:!0,showCounter:!0,showExpand:!1,showSocial:!1},style:"tfc1"},"wysiwyg.viewer.components.tpapps.TPA3DGallery":{layout:{width:790,height:237},componentType:"wysiwyg.viewer.components.tpapps.TPA3DGallery",data:{type:"ImageList",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Cherry Blossom",uri:"3dcc6f56be1f8507181d0197e52d09e8.jpg",description:"Describe your image here",width:1e3,height:750,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Ray of Light",uri:"8fed9ef13904fb85b6b12092c269a465.jpg",description:"Describe your image here",width:750,height:563,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Bloom",uri:"24bba47f40f8473a534ae0301bf748c9.jpg",description:"Describe your image here",width:1e3,height:750,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Dew",uri:"8dde68848c4daae3a6905dc6a17d270e.jpg",description:"Describe your image here",width:800,height:600,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tranquil forest",uri:"568544c06dafc9d2ab6f4f4496e7d7b9.jpg",description:"Describe your image here",width:800,height:600,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lilly Pond",uri:"a3ae91861f93fde1b8917291180c5fe0.jpg",description:"Describe your image here",width:700,height:525,alt:""}]},props:{type:"SlideShowGalleryProperties",metaData:{schemaVersion:"1.0"},expandEnabled:!0,galleryImageOnClickAction:"disabled",goToLinkText:"Go to link",imageMode:"clipImage",transition:"swipeHorizontal",autoplayInterval:5,autoplay:!1,transDuration:1,bidirectional:!0,reverse:!1,showAutoplay:!0,showNavigation:!0,showCounter:!0,showExpand:!1,showSocial:!1},style:"tfg1"},"tpa.viewer.components.Accordion":{layout:{width:473,height:270},componentType:"tpa.viewer.components.Accordion",data:{type:"ImageList",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Cherry Blossom",uri:"3dcc6f56be1f8507181d0197e52d09e8.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Ray of Light",uri:"8fed9ef13904fb85b6b12092c269a465.jpg",description:"Describe your image here",width:750,height:563},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Bloom",uri:"24bba47f40f8473a534ae0301bf748c9.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Dew",uri:"8dde68848c4daae3a6905dc6a17d270e.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tranquil forest",uri:"568544c06dafc9d2ab6f4f4496e7d7b9.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lilly Pond",uri:"a3ae91861f93fde1b8917291180c5fe0.jpg",description:"Describe your image here",width:700,height:525}]},props:{type:"AccordionProperties",metaData:{schemaVersion:"1.0"},font:"arial",descFont:"arial",alignText:"left",textMode:"titleOnly",galleryImageOnClickAction:"zoomMode",borderWidth:0,textColor:"#2F2E2E",alphaTextColor:"1",descriptionColor:"#605E5E",alphaDescriptionColor:"1",textBackgroundColor:"#FFFFFF",alphaTextBackgroundColor:"0.8",borderColor:"#FFFFFF",alphaBorderColor:"1"},style:{componentClassName:"tpa.viewer.components.Accordion",pageId:"",compId:"i6rzx2vz",styleType:"custom",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-color4":"1","alpha-color5":"1",color1:"color_15",color2:"color_14",color3:"color_11",color4:"color_11",color5:"color_15",version:"1","alpha-color1":"1","alpha-color2":"1","alpha-color3":"0.8"},propertiesSource:{color1:"theme",color2:"theme",color3:"theme",color4:"theme",color5:"theme",version:"value"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAAccordionSkin"}},"wysiwyg.viewer.components.AdminLoginButton":{layout:{width:125,height:20},componentType:"wysiwyg.viewer.components.AdminLoginButton",data:{type:"LinkableButton",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},label:"Webmaster Login"},props:{type:"ButtonProperties",metaData:{schemaVersion:"1.0"},align:"center",margin:0},style:"admb0"},"wysiwyg.viewer.components.PaginatedGridGallery":{layout:{width:273,height:204},componentType:"wysiwyg.viewer.components.PaginatedGridGallery",style:"pagg1"},"wysiwyg.viewer.components.AudioPlayer":{layout:{width:42,height:40},componentType:"wysiwyg.viewer.components.AudioPlayer",style:"ap1"},"tpa.viewer.components.Collage":{layout:{width:631,height:846},componentType:"tpa.viewer.components.Collage",data:{type:"ImageList",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Almond Tree Flowers",uri:"7b45bb77d4727e68f365c65043b64a97.jpg",description:"Describe your image here",width:800,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Autumn Leaves",uri:"acd902b0f9d63e266ef47931afefa885.jpg",description:"Describe your image here",width:1e3,height:673},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Berry Branches",uri:"905004d09ba3b477e9ea48cb2d33ceac.jpg",description:"Describe your image here",width:2294,height:1524},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tranquil forest",uri:"568544c06dafc9d2ab6f4f4496e7d7b9.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Cherry Blossom",uri:"3dcc6f56be1f8507181d0197e52d09e8.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Dramatic Dew Drops",uri:"e216a94ff6d1a540dc14ee2f4beda3be.jpg",description:"Describe your image here",width:800,height:1067},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Echinacea Coneflowers",uri:"dfb23621c1d676831ce35d50b279d1be.jpg",description:"Describe your image here",width:555,height:580},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Fresh Herbs Close Up",uri:"9f5b9d38ec87d4d03d8ee8159af4d307.jpg",description:"Describe your image here",width:600,height:900},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Bloom",uri:"24bba47f40f8473a534ae0301bf748c9.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lily Pond",uri:"a3ae91861f93fde1b8917291180c5fe0.jpg",description:"Describe your image here",width:700,height:525},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lush Plants",uri:"7b181c91a72e6c368bb017f85b2f25f4.jpg",description:"Describe your image here",width:1e3,height:1500},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Open Field",uri:"dfcee47a2e2936abb046c3fa6c603ed2.jpg",description:"Describe your image here",width:700,height:814},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Raindrops on Window",uri:"e5433a67390ddeb83e13ebda5ddade7d.jpg",description:"Describe your image here",width:532,height:800},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,
schemaVersion:"2.0",isHidden:!1},title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Ray of Light",uri:"8fed9ef13904fb85b6b12092c269a465.jpg",description:"Describe your image here",width:750,height:563},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tropical Berries Close Up",uri:"e6ab3aad737f5a6e8ddbe92567e164e5.jpg",description:"Describe your image here",width:803,height:1e3},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Stalks of Wheat",uri:"d30a81385011babaecf69c166c78ca8a.jpg",description:"Describe your image here",width:750,height:1e3}]},props:{type:"CollageProperties",metaData:{schemaVersion:"1.0"},font:"arial",alignText:"center",textMode:"titleOnly",galleryImageOnClickAction:"zoomMode",minImageSize:1,maxImageSize:3,margin:5,fitToScreenWidth:!1,showNavButtons:!0,orientation:"vertical",layoutSeed:50,numOfCells:5,textColor:"#2F2E2E",alphaTextColor:"1",descriptionColor:"#605E5E",alphaDescriptionColor:"1",backgroundMouseoverColor:"#FFFFFF",alphaBackgroundMouseoverColor:"0.7"},style:{componentClassName:"tpa.viewer.components.Collage",pageId:"",compId:"i6rzzs7n",styleType:"custom",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-color4":"1","alpha-color5":"1",color1:"color_15",color2:"color_14",color3:"color_11",color4:"color_15",color5:"color_15",version:"1","alpha-color1":"1","alpha-color2":"1","alpha-color3":"0.7"},propertiesSource:{color1:"theme",color2:"theme",color3:"theme",color4:"theme",color5:"theme",version:"value"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPACollageSkin"}},"wysiwyg.viewer.components.documentmedia.DocumentMedia":{layout:{width:70,height:90},componentType:"wysiwyg.viewer.components.documentmedia.DocumentMedia",data:{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Document Title",uri:"http://static.parastorage.com/services/skins/2.1144.0/images/wysiwyg/core/themes/editor_web/add_image_thumb.png",width:0,height:0,alt:"",link:{type:"DocumentLink"}},props:{type:"DocumentMediaProperties",metaData:{schemaVersion:"1.0"},showTitle:!0},style:"dm1"},"wysiwyg.viewer.components.WFacebookComment":{layout:{width:555,height:116},componentType:"wysiwyg.viewer.components.WFacebookComment",props:{type:"WFacebookCommentProperties",metaData:{schemaVersion:"1.0"},numPosts:2,width:555,colorScheme:"light",canBeShownOnAllPagesBug:!0},data:{type:"WFacebookComment",urlFormat:"hashBang"},style:"fbc1"},"wysiwyg.common.components.disquscomments.viewer.DisqusComments":{type:"Component",skin:"wysiwyg.common.components.disquscomments.viewer.skins.DisqusCommentsSkin",layout:{width:500,height:325,x:0,y:1,scale:1,rotationInDegrees:0},componentType:"wysiwyg.common.components.disquscomments.viewer.DisqusComments",data:{type:"DisqusComments",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},disqusId:""},style:"disq2"},"wysiwyg.viewer.components.FacebookShare":{layout:{width:71,height:30,rotationInDegrees:0,scale:1,fixedPosition:!1},componentType:"wysiwyg.viewer.components.FacebookShare",data:{type:"FacebookShareButton",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},urlChoice:"Current page",urlFormat:"hashBang",label:"Share"},skin:"skins.viewer.facebookshare.FacebookShareSkin",style:"fs1"},"wysiwyg.viewer.components.WFacebookLike":{layout:{width:250,height:40},data:{type:"WFacebookLike",urlFormat:"hashBang"},componentType:"wysiwyg.viewer.components.WFacebookLike",style:"fbl1"},"wysiwyg.common.components.facebooklikebox.viewer.FacebookLikeBox":{layout:{width:280,height:575},componentType:"wysiwyg.common.components.facebooklikebox.viewer.FacebookLikeBox",data:{type:"FacebookLikeBox",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},facebookPageId:"wix",colorScheme:"light",showFaces:!0,showStream:!0,showBorder:!0,showHeader:!0},props:{type:"FacebookLikeBoxProperties",metaData:{schemaVersion:"1.0"},transparentBg:!1},style:"FacebookLikeBox_1"},"wysiwyg.viewer.components.FlashComponent":{layout:{width:128,height:128},componentType:"wysiwyg.viewer.components.FlashComponent",data:{type:"LinkableFlashComponent",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},uri:"",placeHolderImage:{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Default Flash",uri:"7ff659c252dfd1ca5c76533695cb9611.wix_mp",description:"Some description here",width:128,height:128,alt:""}},props:{type:"FlashComponentProperties",metaData:{schemaVersion:"1.0"},displayMode:"original"},style:"swf1"},"tpa.viewer.components.Freestyle":{layout:{width:602,height:600},componentType:"tpa.viewer.components.Freestyle",data:{type:"ImageList",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Cherry Blossom",uri:"3dcc6f56be1f8507181d0197e52d09e8.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Ray of Light",uri:"8fed9ef13904fb85b6b12092c269a465.jpg",description:"Describe your image here",width:750,height:563},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Bloom",uri:"24bba47f40f8473a534ae0301bf748c9.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Dew",uri:"8dde68848c4daae3a6905dc6a17d270e.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tranquil forest",uri:"568544c06dafc9d2ab6f4f4496e7d7b9.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lilly Pond",uri:"a3ae91861f93fde1b8917291180c5fe0.jpg",description:"Describe your image here",width:700,height:525}]},props:{type:"FreestyleProperties",metaData:{schemaVersion:"1.0"},galleryImageOnClickAction:"zoomMode",layoutSeed:50,cropAndFitStage:"fit",imageDecoration:"none",borderWidth:3,orientation:"horizontal",applyRotationInLayout:!0,borderColor:"#2F2E2E",alphaBorderColor:"1"},style:{componentClassName:"tpa.viewer.components.Freestyle",pageId:"",compId:"i6s02gma",styleType:"custom",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-color4":"1","alpha-color5":"1",color1:"color_15",color2:"color_15",color3:"color_15",color4:"color_15",color5:"color_15",version:"1","alpha-color1":"1","alpha-color2":"1","alpha-color3":"1"},propertiesSource:{color1:"theme",color2:"theme",color3:"theme",color4:"theme",color5:"theme",version:"value"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAFreestyleSkin"}},"wysiwyg.viewer.components.WGooglePlusOne":{layout:{width:250,height:24},componentType:"wysiwyg.viewer.components.WGooglePlusOne",style:"gp1"},"wysiwyg.viewer.components.GoogleMap":{layout:{width:500,height:400},componentType:"wysiwyg.viewer.components.GoogleMap",style:"gm1"},"wysiwyg.viewer.components.MatrixGallery":{layout:{width:675,height:712},componentType:"wysiwyg.viewer.components.MatrixGallery",style:"mg1"},"tpa.viewer.components.Honeycomb":{layout:{width:550,height:271},componentType:"tpa.viewer.components.Honeycomb",data:{type:"ImageList",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Almond Tree Flowers",uri:"7b45bb77d4727e68f365c65043b64a97.jpg",description:"",width:800,height:594},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Autumn Leaves",uri:"acd902b0f9d63e266ef47931afefa885.jpg",description:"",width:1e3,height:673},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Berry Branches",uri:"905004d09ba3b477e9ea48cb2d33ceac.jpg",description:"",width:2294,height:1524},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tranquil forest",uri:"568544c06dafc9d2ab6f4f4496e7d7b9.jpg",description:"",width:800,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Cherry Blossom",uri:"3dcc6f56be1f8507181d0197e52d09e8.jpg",description:"",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Echinacea Coneflowers",uri:"dfb23621c1d676831ce35d50b279d1be.jpg",description:"",width:555,height:580},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Fresh Herbs Close Up",uri:"9f5b9d38ec87d4d03d8ee8159af4d307.jpg",description:"",width:600,height:900},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lily Pond",uri:"a3ae91861f93fde1b8917291180c5fe0.jpg",description:"",width:700,height:525},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lush Plants",uri:"7b181c91a72e6c368bb017f85b2f25f4.jpg",description:"",width:1e3,height:1500},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Open Field",uri:"dfcee47a2e2936abb046c3fa6c603ed2.jpg",description:"",width:700,height:814},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tropical Berries close Up",uri:"e6ab3aad737f5a6e8ddbe92567e164e5.jpg",description:"",width:803,height:1e3},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Stalks of Wheat",uri:"d30a81385011babaecf69c166c78ca8a.jpg",description:"",width:750,height:1e3}]},props:{type:"HoneycombProperties",metaData:{schemaVersion:"1.0"},expandEnabled:!1,galleryImageOnClickAction:"zoomMode",font:"arial",alignText:"left",textMode:"titleAndDescription",margin:1,numOfColumns:4,layoutSeed:50,rolloverAnimation:"colorOnly",imageShape:"hexagon",imageScale:"x1",textColor:"#30BDFF",alphaTextColor:"1",descriptionColor:"#FFFFFF",alphaDescriptionColor:"1",textBackgroundColor:"#2F2E2E",alphaTextBackgroundColor:"1",backgroundMouseoverColor:"#FFFFFF",alphaBackgroundMouseoverColor:"0.7",holesColor:"#FFFFFF",alphaHolesColor:"1"},style:{componentClassName:"tpa.viewer.components.Honeycomb",pageId:"",compId:"i6s04hn3",styleType:"custom",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-color4":"0.7","alpha-color5":"1",color1:"color_18",color2:"color_1",color3:"color_15",color4:"color_11",color5:"color_11",version:"1","alpha-color1":"1","alpha-color2":"1","alpha-color3":"1"},propertiesSource:{color1:"theme",color2:"theme",color3:"theme",color4:"theme",color5:"theme",version:"value"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAHoneycombSkin"}},"wysiwyg.viewer.components.HtmlComponent":{layout:{width:200,height:200},componentType:"wysiwyg.viewer.components.HtmlComponent",data:{type:"HtmlComponent",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},url:"",sourceType:"external",freezeFrame:!1},style:"htco1"},"tpa.viewer.components.Impress":{layout:{width:980,height:390},componentType:"tpa.viewer.components.Impress",data:{type:"ImageList",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Cherry Blossom",uri:"3dcc6f56be1f8507181d0197e52d09e8.jpg",description:"Describe your image here",width:1e3,height:750,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Ray of Light",uri:"8fed9ef13904fb85b6b12092c269a465.jpg",description:"Describe your image here",width:750,height:563,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Bloom",uri:"24bba47f40f8473a534ae0301bf748c9.jpg",description:"Describe your image here",width:1e3,height:750,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Dew",uri:"8dde68848c4daae3a6905dc6a17d270e.jpg",description:"Describe your image here",width:800,height:600,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tranquil forest",uri:"568544c06dafc9d2ab6f4f4496e7d7b9.jpg",description:"Describe your image here",width:800,height:600,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lilly Pond",uri:"a3ae91861f93fde1b8917291180c5fe0.jpg",description:"Describe your image here",width:700,height:525,alt:""}]},props:{type:"ImpressProperties",metaData:{schemaVersion:"1.0"},font:"arial",textMode:"titleAndDescription",alignText:"left",autoplayInterval:5,autoplay:!1,galleryImageOnClickAction:"zoomMode",cropAndFitStage:"crop",transition:"random",showPagination:!0,bcgColor1:"#A0A09F",alphaBcgColor1:"1",bcgColor2:"#30BDFF",alphaBcgColor2:"1",bcgColor3:"#41BAAE",alphaBcgColor3:"1",bcgColor4:"#DE5021",alphaBcgColor4:"1",bcgColor5:"#DEC328",alphaBcgColor5:"1",textColor:"#BAE9FF",alphaTextColor:"1",descriptionColor:"#FFFFFF",alphaDescriptionColor:"1",textBackgroundColor:"#605E5E",alphaTextBackgroundColor:"1"},style:{componentClassName:"tpa.viewer.components.Impress",pageId:"",compId:"i6s05c77",styleType:"custom",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-color4":"1","alpha-color5":"1","alpha-color6":"1","alpha-color7":"1","alpha-color8":"1",color1:"color_13",color2:"color_18",color3:"color_23",color4:"color_28",color5:"color_33",color6:"color_16",color7:"color_1",color8:"color_14","alpha-color1":"1","alpha-color2":"1","alpha-color3":"1"},propertiesSource:{color1:"theme",color2:"theme",color3:"theme",color4:"theme",color5:"theme",color6:"theme",color7:"theme",color8:"theme"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAImpressSkin"}},"wysiwyg.viewer.components.ItunesButton":{layout:{width:110,height:40},componentType:"wysiwyg.viewer.components.ItunesButton",data:{type:"ItunesButton",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},downloadUrl:""},props:{type:"ItunesButtonProperties",metaData:{schemaVersion:"1.0"},language:"en",openIn:"_blank"},style:"ib1"},"tpa.viewer.components.Masonry":{layout:{width:980,height:1450},componentType:"tpa.viewer.components.Masonry",data:{type:"ImageList",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Bloom",uri:"0bfb60ff6550b68a849ada091f254158.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.  I'm a great way to display many images along with text to describe them.",width:800,height:1e3},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Fallen Apples",uri:"d5281560853f147420a877b24be7daec.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.  I'm a great way to display many images along with text to describe them.    When your visitors click on me I can expand or link to anywhere you choose.",width:800,height:536},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Ray Of Light",uri:"84b2ba7d33c6c76e0976354bfeb53223.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.",width:800,height:800},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tranquil Forest",uri:"0560932b578ed39cc5ff0d4f9b257496.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.  I'm a great way to display many images along with text to describe them.",width:800,height:800},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Cherry Blossom ",uri:"c18ef262eff1988801adc0c6cd9f69c2.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.  I'm a great way to display many images along with text to describe them.    When your visitors click on me I can expand or link to anywhere you choose.",width:800,height:511},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lily Pond",uri:"ae505cb9630a240ff39bd7e3a6a30e5b.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.",width:700,height:525},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Budding Tree",uri:"bab38d8e951657c1122c9ef971e512b3.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.  I'm a great way to display many images along with text to describe them.",width:800,height:800},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Water Droplets",uri:"bbb19657224f3880b7af258ffe1329ec.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.  I'm a great way to display many images along with text to describe them.    When your visitors click on me I can expand or link to anywhere you choose.",width:800,height:532},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Dew",uri:"e216a94ff6d1a540dc14ee2f4beda3be.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.",width:800,height:1067}]},props:{type:"MasonryProperties",metaData:{schemaVersion:"1.0"},font:"arial",galleryImageOnClickAction:"zoomMode",numCols:3,margin:25,textMode:"titleAndDescription",alignText:"left",boxShadowIsOn:!0,boxShadow:"0 1px 3px 0 rgba(0,0,0,0.33)",textColor:"#000000",alphaTextColor:"1",descriptionColor:"#000000",alphaDescriptionColor:"1",textBackgroundColor:"#ffffff",alphaTextBackgroundColor:"1",backgroundMouseoverColor:"#000000",alphaBackgroundMouseoverColor:"0.4",textButtonColor:"#2F2E2E",alphaTextButtonColor:"1"},style:{componentClassName:"tpa.viewer.components.Masonry",pageId:"",compId:"i6s06d18",styleType:"custom",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-color4":"0.4","alpha-color5":"1",color1:"#000000",color2:"#000000",color3:"#ffffff",color4:"#000000",color5:"color_15",version:"2","alpha-color1":"1","alpha-color2":"1","alpha-color3":"1"},propertiesSource:{color1:"value",color2:"value",color3:"value",color4:"value",color5:"theme",version:"value"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAMasonrySkin"}},"wysiwyg.viewer.components.LoginButton":{layout:{width:190,height:46},componentType:"wysiwyg.viewer.components.LoginButton",data:{type:"LoginButton",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},language:"en"},style:"lgn0"},"wysiwyg.viewer.components.PayPalButton":{layout:{width:170,height:47},componentType:"wysiwyg.viewer.components.PayPalButton",data:{type:"PayPalButton",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},merchantID:""},props:{type:"PayPalButtonProperties",metaData:{schemaVersion:"1.0"},buttonType:"buy",itemName:"",itemID:"",organizationName:"",organizationID:"",amount:"",currencyCode:"USD",target:"_blank",showCreditCards:!0,smallButton:!1},style:"ppb0"},"wysiwyg.viewer.components.PinterestFollow":{layout:{width:40,height:20},componentType:"wysiwyg.viewer.components.PinterestFollow",data:{type:"PinterestFollow",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},urlChoice:"www.pinterest.com/wixcom/",label:"Pinterest"},style:"pf1"},"wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt":{layout:{width:40,height:20},componentType:"wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt",data:{type:"PinterestPinIt",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},uri:"",urlFormat:"hashBang",description:"Check it out!"},props:{type:"PinterestPinItProperties",metaData:{schemaVersion:"1.0"},size:"small",color:"gray",counterPosition:"none"},style:"PinterestPinIt_1"},"wysiwyg.common.components.pinitpinwidget.viewer.PinItPinWidget":{layout:{width:237,height:377,x:385,y:6358},componentType:"wysiwyg.common.components.pinitpinwidget.viewer.PinItPinWidget",data:{type:"PinItPinWidget",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},pinId:"http://www.pinterest.com/pin/204421270560540859/"},style:"PinItPinWidget_1"},"wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer":{layout:{width:280,height:68},componentType:"wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer",style:"SingleAudioPlayer_1"},"wysiwyg.common.components.skypecallbutton.viewer.SkypeCallButton":{layout:{width:56,height:24},componentType:"wysiwyg.common.components.skypecallbutton.viewer.SkypeCallButton",data:{type:"SkypeCallButton",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},skypeName:"",buttonType:"call"},props:{type:"SkypeCallButtonProperties",metaData:{schemaVersion:"1.0"},imageSize:"medium",imageColor:"blue"},style:"SkypeCallButton_1"},"wysiwyg.viewer.components.SliderGallery":{layout:{width:480,height:160},componentType:"wysiwyg.viewer.components.SliderGallery",style:"sg1"},"wysiwyg.viewer.components.SlideShowGallery":{layout:{width:480,height:360},componentType:"wysiwyg.viewer.components.SlideShowGallery",style:"ssg1"},"wysiwyg.viewer.components.LinkBar":{layout:{width:105,height:30},componentType:"wysiwyg.viewer.components.LinkBar",data:{type:"ImageList",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Wix Facebook page",uri:"b1cd13f9d4dfb1450bbb325285106177.png",width:128,height:128,alt:"",link:{type:"ExternalLink",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},url:"http://www.facebook.com/wix",target:"_blank"}},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Wix Twitter page",uri:"01113281ebb7dfb57a8dc2a02eb1cb92.png",width:128,height:128,alt:"",link:{type:"ExternalLink",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},url:"http://www.twitter.com/wix",target:"_blank"}},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Wix Google+ page",uri:"806f5f56d9a7b8849f2f2ea71ff5c0cc.png",width:128,height:128,alt:"",link:{type:"ExternalLink",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},url:"https://plus.google.com/117167403531518744294/posts",target:"_blank"}}]},props:{type:"LinkBarProperties",metaData:{schemaVersion:"1.0"},gallery:"social_icons",iconSize:30,spacing:5,bgScale:1,orientation:"HORIZ"},style:"lb1"},"wysiwyg.viewer.components.SoundCloudWidget":{layout:{width:482,height:171},componentType:"wysiwyg.viewer.components.SoundCloudWidget",data:{type:"SoundCloudWidget",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},url:"",showArtWork:!0,autoPlay:!1},style:"scw1"},"wysiwyg.common.components.spotifyfollow.viewer.SpotifyFollow":{layout:{width:300,height:56},componentType:"wysiwyg.common.components.spotifyfollow.viewer.SpotifyFollow",data:{type:"SpotifyFollow",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},uri:""},props:{type:"SpotifyFollowProperties",metaData:{schemaVersion:"1.0"},size:"large",theme:"light",showFollowersCount:!0},style:"SpotifyFollow_1"},"wysiwyg.common.components.spotifyplayer.viewer.SpotifyPlayer":{layout:{width:250,height:82},componentType:"wysiwyg.common.components.spotifyplayer.viewer.SpotifyPlayer",data:{type:"SpotifyPlayer",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},uri:""},props:{type:"SpotifyPlayerProperties",metaData:{schemaVersion:"1.0"},size:"compact",color:"black",style:"list"},style:"SpotifyPlayer_1"},"tpa.viewer.components.StripShowcase":{layout:{width:500,height:500},componentType:"tpa.viewer.components.StripShowcase",data:{type:"ImageList",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Almond Tree Flowers",uri:"7b45bb77d4727e68f365c65043b64a97.jpg",description:"Describe your image here",width:800,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Autumn Leaves",uri:"acd902b0f9d63e266ef47931afefa885.jpg",description:"Describe your image here",width:1e3,height:673},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Berry Branches",uri:"905004d09ba3b477e9ea48cb2d33ceac.jpg",description:"Describe your image here",width:2294,height:1524},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tranquil forest",uri:"568544c06dafc9d2ab6f4f4496e7d7b9.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Cherry Blossom",uri:"3dcc6f56be1f8507181d0197e52d09e8.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Dramatic Dew Drops",uri:"e216a94ff6d1a540dc14ee2f4beda3be.jpg",description:"Describe your image here",width:800,height:1067},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Echinacea Coneflowers",uri:"dfb23621c1d676831ce35d50b279d1be.jpg",description:"Describe your image here",width:555,height:580},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Fresh Herbs Close Up",uri:"9f5b9d38ec87d4d03d8ee8159af4d307.jpg",description:"Describe your image here",width:600,height:900},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Bloom",uri:"24bba47f40f8473a534ae0301bf748c9.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lily Pond",uri:"a3ae91861f93fde1b8917291180c5fe0.jpg",description:"Describe your image here",width:700,height:525},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lush Plants",uri:"7b181c91a72e6c368bb017f85b2f25f4.jpg",description:"Describe your image here",width:1e3,height:1500},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Open Field",uri:"dfcee47a2e2936abb046c3fa6c603ed2.jpg",description:"Describe your image here",width:700,height:814},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Raindrops on Window",uri:"e5433a67390ddeb83e13ebda5ddade7d.jpg",description:"Describe your image here",width:532,height:800},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Ray of Light",uri:"8fed9ef13904fb85b6b12092c269a465.jpg",description:"Describe your image here",width:750,height:563},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tropical Berries Close Up",uri:"e6ab3aad737f5a6e8ddbe92567e164e5.jpg",description:"Describe your image here",width:803,height:1e3},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Stalks of Wheat",uri:"d30a81385011babaecf69c166c78ca8a.jpg",description:"Describe your image here",width:750,height:1e3}]},props:{type:"StripShowcaseProperties",metaData:{schemaVersion:"1.0"},galleryImageOnClickAction:"disabled",cropAndFitStage:"fit",imageScale:"4:3",imageMargin:5,showThumbnails:!0,thumbsScale:"4:3",thumbsMargin:5,autoplay:!1,autoplayInterval:5,arrowMode:!1},style:{componentClassName:"tpa.viewer.components.StripShowcase",pageId:"",compId:"i6s28d55",styleType:"custom",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-color4":"1","alpha-color5":"1",color1:"color_1",color2:"color_15",color3:"color_15",color4:"color_15",color5:"color_15",version:"1","alpha-color1":"0.5","alpha-color2":"1","alpha-color3":"1"},propertiesSource:{color1:"theme",color2:"theme",color3:"theme",color4:"theme",color5:"theme",version:"value"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAStripShowcaseSkin"}},"tpa.viewer.components.StripSlideshow":{layout:{width:500,height:500},componentType:"tpa.viewer.components.StripSlideshow",data:{type:"ImageList",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lily Pond",uri:"27f904ad057a38ab22a806fba8051170.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.",width:2560,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lily Pond",uri:"632212ab58f9280a24539800cf453443.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.",width:2560,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lily Pond",uri:"f1aba941244eda43f8ed7116ab2a98d4.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.",width:2560,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lily Pond",uri:"60562c9106f4ca8ba07bb4d430935993.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.",width:2560,height:600}]},props:{type:"StripSlideshowProperties",metaData:{schemaVersion:"1.0"},font:"arial",textMode:"titleAndDescription",alignText:"left",autoplayInterval:5,autoplay:!1,transDuration:1,transition:"scroll",titleColor:"#30BDFF",alphaTitleColor:"1",descriptionColor:"#2F2E2E",alphaDescriptionColor:"1",backgroundColor:"#FFFFFF",alphaBackgroundColor:"0.75"},style:{componentClassName:"tpa.viewer.components.StripSlideshow",pageId:"",compId:"i6s2b7bp",styleType:"custom",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-color4":"1","alpha-color5":"1",color1:"color_18",color2:"color_15",color3:"color_11",color4:"color_15",color5:"color_15",version:"1","alpha-color1":"1","alpha-color2":"1","alpha-color3":"0.75"},propertiesSource:{color1:"theme",color2:"theme",color3:"theme",color4:"theme",color5:"theme",version:"value"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAStripSlideshowSkin"}},"tpa.viewer.components.Thumbnails":{layout:{width:980,height:500},componentType:"tpa.viewer.components.Thumbnails",data:{type:"ImageList",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Fallen Apples",
uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Cherry Blossom",uri:"3dcc6f56be1f8507181d0197e52d09e8.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Ray of Light",uri:"8fed9ef13904fb85b6b12092c269a465.jpg",description:"Describe your image here",width:750,height:563},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Bloom",uri:"24bba47f40f8473a534ae0301bf748c9.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Dew",uri:"8dde68848c4daae3a6905dc6a17d270e.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tranquil forest",uri:"568544c06dafc9d2ab6f4f4496e7d7b9.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lilly Pond",uri:"a3ae91861f93fde1b8917291180c5fe0.jpg",description:"Describe your image here",width:700,height:525}]},props:{type:"ThumbnailsProperties",metaData:{schemaVersion:"1.0"},font:"arial",cropAndFitStage:"crop",componentScale:"4:3",margin:5,textMode:"titleAndDescription",arrowMode:!0,alignText:"left",autoplayInterval:5,autoplay:!1,transDuration:1,transition:"crossFade",thumbnailsGravity:"bottom",galleryImageOnClickAction:"disabled",textColor:"#FFFFFF",alphaTextColor:"1",descriptionColor:"#FFFFFF",alphaDescriptionColor:"1",textBackgroundColor:"#2F2E2E",alphaTextBackgroundColor:"0.6"},style:{componentClassName:"tpa.viewer.components.Thumbnails",pageId:"",compId:"i6s2bmjp",styleType:"custom",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-color4":"1","alpha-color5":"1",color1:"color_11",color2:"color_11",color3:"color_15",color4:"color_15",color5:"color_15",version:"1","alpha-color1":"1","alpha-color2":"1","alpha-color3":"0.6"},propertiesSource:{color1:"theme",color2:"theme",color3:"theme",color4:"theme",color5:"theme",version:"value"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAThumbnailsSkin"}},"wysiwyg.viewer.components.WTwitterFollow":{layout:{width:183,height:22},componentType:"wysiwyg.viewer.components.WTwitterFollow",data:{type:"TwitterFollow",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},accountToFollow:"wix"},props:{type:"WTwitterFollowProperties",metaData:{schemaVersion:"1.0"},showCount:!0,width:100,dataLang:"en",showScreenName:!0},style:"tf1"},"wysiwyg.viewer.components.WTwitterTweet":{layout:{width:100,height:20},componentType:"wysiwyg.viewer.components.WTwitterTweet",data:{type:"TwitterTweet",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},defaultText:"",urlFormat:"hashBang",accountToFollow:""},style:"twt1"},"wysiwyg.viewer.components.Video":{layout:{width:480,height:360},componentType:"wysiwyg.viewer.components.Video",style:"v1"},"wysiwyg.viewer.components.VKShareButton":{layout:{width:100,height:21},componentType:"wysiwyg.viewer.components.VKShareButton",data:{type:"VKShareButton",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},style:"Button",urlFormat:"hashBang",text:"Share"},props:{type:"VKShareProperties",metaData:{schemaVersion:"1.0"},rightAngles:!1},style:"vks1"},"wysiwyg.viewer.components.ContactForm":{layout:{width:480,height:180},componentType:"wysiwyg.viewer.components.ContactForm",style:"cf1"},"wysiwyg.common.components.youtubesubscribebutton.viewer.YouTubeSubscribeButton":{layout:{width:212,height:55},componentType:"wysiwyg.common.components.youtubesubscribebutton.viewer.YouTubeSubscribeButton",data:{type:"YouTubeSubscribeButton",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},youtubeChannelId:"wix"},props:{type:"YouTubeSubscribeButtonProperties",metaData:{schemaVersion:"1.0"},layout:"full",theme:"light"},style:"YouTubeSubscribeButton_1"}},c=function(c){return a.cloneDeep(b[c])||{}};return{getComponentDefaultData:c}}),define("tpa/componentsData/componentsDefaultDataGenerator",["lodash","jquery","baseUI","addPanelInfra","tpa/componentsData/addCompKeyToCompTypeMap","tpa/componentsData/componentsDefaultData"],function(a,b,c,d,e,f){"use strict";function g(a){var d=a.siteSegments.getPagesContainer(),e=a.siteSegments.layout.get(d);return{x:e.width/2,y:b(window).scrollTop()+window.innerHeight/2-e.y-c.uiConstants.TOPBAR_HEIGHT}}function h(b,c){var d={};return a.forIn(c,function(c,e){a.includes(["width","height"],e)&&(b?d[e]=b.stageLayout?b.stageLayout[e]:b.panelLayout[e]:d[e]=c)}),d}function i(a,b){var c=g(a),d={x:c.x-b.width/2,y:c.y-b.height/2};return d}function j(b){var c=b&&b.data,d=a.merge({},a.omit(c,"id"),b.stageData);return a.isEmpty(d)?null:d}var k=function(b,c){var g=e.getCompType(c.compType),k=f.getComponentDefaultData(g),l=d.componentsDefaultData.getComponentDefault(g);l&&(k.layout=h(l,k.layout),k.data=j(l)||k.data,k.props=l.props||k.props);var m=i(b,k.layout);return a.merge(k.layout,m),k.type="Component",k};return{getComponentDefinition:k}}),define("tpa/appMarket/appMarketHandlers",["lodash","panels","blog","core","savePublish","tpa/appMarket/services/appMarketTabService","tpa/appMarket/utils/appMarketUtils","tpa/services/pendingAppsService","tpa/services/navigateAndOpenAppService","tpa/componentsData/componentsDefaultDataGenerator","tpa/utils/tpaUtils","tpa/bi/bi","tpa/services/tpaAddRemoveDSService","tpa/settings/settings","tpa/superApps/superApps"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){"use strict";var p=function(a,b){b.params.shouldTranslateTitle=void 0===b.params.shouldTranslateTitle?!1:b.params.shouldTranslateTitle,a.ui.focus.setOnEditor(),g.openAppMarketModal("appMarketModal",b.params)},q=function(a,b){g.closeAppMarketModalById(a,b.params.id)},r=function(a,b){g.openAppMarketModalWithAppDefinitionId("appMarketPermissionsModal",{url:b.params.url,appDefinitionId:b.params.appDefinitionId})},s=function(){g.closeAppMarketModal("appMarketPermissionsModal")},t=function(a,b,c){g.openAppMarketModalWithAppDefinitionId("appMarketAppModal",{url:b.params.url,appDefinitionId:b.params.appDefinitionId,onClose:c})},u=function(){g.closeAppMarketModal("appMarketAppModal")},v=function(a,b,c){var d=a.generalInfo.getUserInfo(),e=d&&d.name||"";c(e)},w=function(a,b,c){var d=b.params.appDefinitionId;c(a.tpa.app.isInstalled(d,!0))},x=function(a,b,c){c(h.getPendingApps(a))},y=function(a,b){h.dismiss(a,b.params.id)},z=function(a,c,d){a.generalInfo.isFirstSave()?e.saveInBackground(a,function(){d({response:"success",metaSiteId:a.generalInfo.getMetaSiteId()})},function(){b.panelManager.openPanel("savePublish.panels.common.failPanel",{titleKey:"tpa_messages_dashboard_before_save_error_title",description:"SAVE_PUBLISH_ERROR_BODY_DESCRIPTION",steps:["tpa_messages_upgrade_before_save_error_step_1","tpa_messages_upgrade_before_save_error_step_2","tpa_messages_dashboard_before_save_error_step_3"],helpMessage:"tpa_messages_dashboard_before_save_error_support",helpLinkMessage:"tpa_messages_upgrade_before_save_error_support_link",helpLink:"",biEvent:l.events.TPA_MESSAGE_LOADED,biParams:{description:"save for app market failed",type:"save_for_app_market_failed"}},!0),d({response:"site was not saved."})}):d({response:"success",metaSiteId:a.generalInfo.getMetaSiteId()})},A=function(b,c){var d=a.get(c,"params.appDefinitionId");i.navigateAndOpenSettingsForAppDefId(b,d)},B=function(a,b,c){c({isDevMode:k.isInDevMode()})},C=function(g,i){var j=a.get(i,"params.appDefinitionDataObj"),p=a.get(j,"appDefinitionId"),q=i.params.type,r=i.params.widgetId,t=g.pages.getFocusedPageId(),v=g.tpa.app.getDataByAppDefId(p),w=i.params.biData,x=i.params.is_permissions_app;if(i.params.provision_demo_app){var y=function(){n.open(g,g.selection.getSelectedComponents()),E(g,p,r,t,null,!0,x,w,!0)},z=function(){k.provisionFailAlert(p)};g.tpa.provision.provisionAppDemoSave(v.applicationId,y,z)}else switch(q){case"tpaSection":var A=j&&j.doNotShowPageAddedPanel||!1,B=j&&j.appName;D(g,p,v,r,B,t,A,x,w);break;case"tpaWidget":var C=!g.tpa.app.isInstalled(p,!0),F={};i.params.x&&i.params.y&&(F={x:i.params.x,y:i.params.y}),p===o.superAppsConstants.SHOUTOUT_APP_DEF_ID?g.generalInfo.isFirstSave()?e.saveInBackground(g,function(){o.openSuperAppPanel("shoutout",!0,d.constants.SUPER_APPS.SHOUTOUT_PANEL_NAME,"SiteApp_ShoutOut_Button_Hover_Caption","SiteApp_ShoutOut_Button_Hover_Caption","shoutout-panel","shoutOutLeftBarIcon")},function(){b.panelManager.openPanel("savePublish.panels.common.failPanel",{titleKey:"tpa_messages_dashboard_before_save_error_title",description:"SAVE_PUBLISH_ERROR_BODY_DESCRIPTION",steps:["tpa_messages_upgrade_before_save_error_step_1","tpa_messages_upgrade_before_save_error_step_2","tpa_messages_dashboard_before_save_error_step_3"],helpMessage:"tpa_messages_dashboard_before_save_error_support",helpLinkMessage:"tpa_messages_upgrade_before_save_error_support_link",helpLink:"",biEvent:l.events.TPA_MESSAGE_LOADED,biParams:{description:"save for app market failed",type:"save_for_app_market_failed"}},!0)}):o.openSuperAppPanel("shoutout",!0,d.constants.SUPER_APPS.SHOUTOUT_PANEL_NAME,"SiteApp_ShoutOut_Button_Hover_Caption","SiteApp_ShoutOut_Button_Hover_Caption","shoutout-panel","shoutOutLeftBarIcon"):m.addWidget(g,p,{widgetId:r,layout:F,callback:function(a){h.updateNotification(g),E(g,p,r,t,a.comp.id,C,x,w)}});break;case"wixappsPart":if(c.siteHasBlog(g)){var H=c.getBlogPageId(g);H!==t&&g.pages.navigateTo(H)}else c.installApp(g,null,function(a){G(g,a,i.params)});break;default:throw new Error("Error: "+q+" is unknown tpa type")}s(),u(),f.closeAppMarketTab()},D=function(a,c,d,e,f,g,i,j,l){if(a.tpa.section.alreadyInstalled(c)){if(d.demoMode){var n=a.tpa.app.getFirstAppCompPageId(c),o=function(){E(a,c,e,n.pageId,n.compId,!0,j,l)},p=function(){k.provisionFailAlert(c)};a.tpa.provision.provisionAppDemoSave(d.applicationId,o,p)}var q=a.tpa.app.getFirstAppCompPageId(c);q&&q.pageId!==g&&a.pages.navigateTo(q.pageId),a.tpa.appMarket.getDataAsync(c).then(function(a){b.panelManager.openPanel("tpa.message.sectionAlreadyInstalled",{appName:f,appIcon:a&&a.appIcon,appDefId:c})})}else{var r=m.addSection(a,c,{widgetId:e,callback:function(d){i||a.tpa.appMarket.getDataAsync(c).then(function(a){b.panelManager.openPanel("tpa.message.newPageAdded",{appName:f,appIcon:a&&a.appIcon,appDefId:c})}),h.updateNotification(a),E(a,c,e,d.page.pageId,d.sectionId,!0,j,l)}});a.pages.navigateTo(r.id,function(){var b=a.tpa.section.getSectionRefByPageId(r.id);a.selection.selectComponentByCompRef(b)})}},E=function(a,b,c,d,e,f,g,h){var i=a.generalInfo.isFirstSave(),j=i?a.generalInfo.getMetaSiteId():"",k=a.tpa.app.getDataByAppDefId(b);h=h||{};var m={is_permissions_app:g?1:0,is_first:f?1:0,app_id:b,widget_id:c,app_site_id:k.instanceId,instance_id:e,origin:"ed_market",adding_method:h.adding_method,category:h.category,section:h.section,search_term:h.search_term,item_position:h.item_position,referral_info_category:h.referral_info_category,referral_info:h.referral_info,template_guid:j,modal_tab_name:h.modal_tab_name,page_id:d};a.bi.event(l.events.TPA_ADDED,m)},F=function(a,b){var c=b.params,d=c&&c.pageId||a.pages.getFocusedPageId(),e=a.pages.getReference(d),g=j.getComponentDefinition(a,c);a.components.add(e,g,void 0,function(b){a.selection.selectComponentByCompRef(b),a.history.add("add component from app market"),H(a,b.id,c)}),f.closeAppMarketTab()},G=function(a,b,d){var e=c.getBlogMainAppPartCompRef(a,b);H(a,e.id,d)},H=function(a,b,c){c.biData=c.biData||{},a.bi.event(l.events.COMPONENT_ADDED_FROM_MARKET,{app_id:c.biData.app_id,instance_id:b,component_type:c.type||"wix_component",origin:"ed_market",category:c.biData.category,search_term:c.biData.search_term,item_position:c.biData.item_position,referral_info_category:c.biData.referral_info_category,referral_info:c.biData.referral_info,adding_method:c.biData.adding_method,modal_tab_name:c.biData.modal_tab_name})};return{openMarketPopup:t,closeMarketPopup:u,openModal:r,closeModal:s,openAppMarketModal:p,closeAppMarketModal:q,addComponentToSite:F,getUserDetails:v,getPendingAppsList:x,addAppToSite:C,appIsInstalled:w,removePendingApp:y,save:z,openApp:A,isDevMode:B}}),define("tpa/appMarket/utils/appMarketPostMessageUtils",["tpa/common/editorTPAPostMessageCommon","util"],function(a,b){"use strict";var c={OPEN_MARKET_POPUP:"openMarketPopup",CLOSE_MARKET_POPUP:"closeMarketPopup",OPEN_MODAL:"openModal",CLOSE_MODAL:"closeModal",ADD_APP_TO_SITE:"addAppToSite",ADD_COMPONENT_TO_SITE:"addComponentToSite",GET_USER_DETAILS:"getUserDetails",GET_PENDING_APPS_LIST:"getPendingAppsList",APP_IS_INSTALLED:"appIsInstalled",REMOVE_PENDING_APP:"removePendingApp",OPEN_APP_MARKET_MODAL:"openAppMarketModal",CLOSE_APP_MARKET_MODAL:"closeAppMarketModal",SAVE:"save",OPEN_APP:"openApp",IS_DEV_MODE:"isDevMode"},d=b.serviceTopology.htmlEditorRootUrl?b.serviceTopology.htmlEditorRootUrl.replace(/html\/editor\/?/,""):"http://editor.wix.com/",e=function(a){return"APP_MARKET"===a},f=function(a){return!!g(a)},g=function(a){return c[a]},h=function(b){var c={eventType:"ON_MARKET_OPEN"};a.callPostMessage(b,c,d)},i=function(b,c,e){var f={eventType:"ON_COMMAND_RESPONSE",callerId:c,params:e};a.callPostMessage(b,f,d)};return{getMethodName:g,isAppMarketMessage:e,shouldHandleMessage:f,sendOnOpenEvent:h,sendMessageToAppMarket:i}}),define("tpa/appMarket/services/appMarketPostMessageService",["lodash","core","tpa/appMarket/appMarketHandlers","tpa/appMarket/utils/appMarketPostMessageUtils"],function(a,b,c,d){"use strict";var e=function(a,b,e){var f=d.getMethodName(b.cmd);c[f].apply(this,[a,b,e])},f=function(a,b){var c;try{b.data?c=JSON.parse(b.data):b.originalEvent&&b.originalEvent.data&&(b=b.originalEvent,c=JSON.parse(b.data))}catch(f){return}c&&d.isAppMarketMessage(c.intent)&&d.shouldHandleMessage(c.cmd)&&e(a,c,g(b.source,c))},g=function(a,b){return function(c){d.sendMessageToAppMarket(a,b.id,c)}},h=function(a){window.addEventListener("message",f.bind(this,a),!1)};return{init:h,callHandler:e,handleAppMarketMessage:f}}),define("tpa/services/tpaCompNameService",["lodash"],function(a){"use strict";var b=function(b,c){var d=b.components.data.get(c),e=b.tpa.app.getData(d.applicationId),f=b.tpa.appMarket.getData(e.appDefinitionId);if(f){var g=a.find(f.widgets,{widgetId:d.widgetId});return g?g.title:f.name}return e.appDefinitionName};return{getCompName:b}}),define("tpa/settings/frames/tpaSettingsPanelFrame.rt",["react/addons","lodash","symbols","baseUI"],function(a,b,c,d){"use strict";function e(a,c){var d=b.assign({},a,c);return a.hasOwnProperty("style")&&(d.style=b.defaults(d.style,a.style)),a.hasOwnProperty("className")&&c.hasOwnProperty("className")&&(d.className=c.className+" "+a.className),d}function f(a){this.startDrag(a,this.getDragLimits())}return function(){return a.createElement("div",e({className:"tpa-settings-panel-frame"},this.getPanelProps()),a.createElement("header",{onMouseDown:f.bind(this),className:"panel-header dragger dark"},a.createElement("span",{className:"panel-header-title"},this.props.title),a.createElement("button",{className:"help",onClick:this.openHelpCenter},"?"),a.createElement("button",{className:"close",onClick:this.close},a.createElement(c.symbol,{name:"headerCloseButton"}))),a.createElement(d.customScroll,{},a.createElement("div",{className:"content"},this.props.children)))}}),define("tpa/settings/frames/tpaSettingsPanelFrame",["lodash","react","core","util","panels","tpa/settings/frames/tpaSettingsPanelFrame.rt"],function(a,b,c,d,e,f){"use strict";return b.createClass({displayName:"tpaSettingsPanelFrame",mixins:[e.mixins.panelFrameMixin,d.draggableMixin,e.mixins.panelDragLimitsMixin],propTypes:{panelName:b.PropTypes.string.isRequired,title:b.PropTypes.string.isRequired,width:b.PropTypes.number,height:b.PropTypes.number,top:b.PropTypes.string,left:b.PropTypes.string,onHelpClicked:b.PropTypes.func},getInitialState:function(){return{showHelp:!1}},componentWillMount:function(){e.panelManager.registerForStageMouseDown(this.constructor.displayName,function(){this.close()}.bind(this))},getPanelProps:function(){var b=["width","height","top","left"];return this.props.style={},a.forEach(b,function(a){this.props[a]&&(this.props.style[a]=this.props[a])},this),a.omit(this.props,"children","height","top","left")},toggleHelp:function(){var a=!this.state.showHelp;this.setState({showHelp:a})},render:f})}),define("tpa/settings/compPanels/tpaSettings.rt",["react/addons","lodash","baseUI","core","util","tpa/settings/frames/tpaSettingsPanelFrame"],function(a,b,c,d,e,f){"use strict";return function(){return a.createElement(f,b.assign({},{className:b.keys(b.pick({"tpa-settings-panel-frame-padding":1===this.state.settingsVersion},b.identity)).join(" "),title:this.getAppName(),width:this.state.width,ref:"tpaSettingsFrame",top:c.uiConstants.TOPBAR_HEIGHT+24+"px",left:"78px",onHelpClicked:this.onHelpClicked},this.getFrameProps()),a.createElement("div",{className:b.keys(b.pick({"tpa-settings-iframe-wrapper":!0,"tpa-settings-iframe-wrapper-padding":1===this.state.settingsVersion},b.identity)).join(" "),style:this.getDialogStyle()},this.shouldShowPreloader()?a.createElement("div",{key:"preloader",className:"tpa-preloader"},a.createElement("div",{},a.createElement(c.preloader,{}),a.createElement("div",{className:"text"},e.translate("tpa_loading_settings"),"."))):null,this.state.overlay===this.OVERLAY_STATE.UNRESPONSIVE?a.createElement("div",{key:"unavailableMessage",className:"tpa-unresponsive"},a.createElement("header",{},a.createElement(c.symbol,{name:"alert"}),"\n                ",e.translate("tpa_oops"),"\n            "),a.createElement("div",{id:"textContainer"},a.createElement("span",{id:"text",dangerouslySetInnerHTML:{__html:this.getUnresponsiveText()}}),a.createElement("span",{id:"dismissButton",onClick:this.refs.tpaSettingsFrame.openHelpCenter},a.createElement("a",{}," ",this.getAppName()," ")),a.createElement("span",{id:"text_2",dangerouslySetInnerHTML:{__html:this.getUnresponsiveContact()}}))):null,a.createElement("iframe",{scrolling:"no",frameBorder:"0",marginHeight:"0",marginWidth:"0",className:"tpa-iframe",width:"100%",height:this.getIframeHeight(),id:"tpaSettingsFrame",src:this.state.url})))}}),define("tpa/settings/compPanels/tpaSettings",["lodash","react","jquery","core","panels","compPanels","tpa/bi/bi","util","tpa/utils/tpaUtils","tpa/superApps/superAppsHelpConstants","tpa/services/tpaCompNameService","tpa/settings/compPanels/tpaSettings.rt"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";return b.createClass({ALIVE_TIMEOUT:2e4,OVERLAY_STATE:{PRELOADER:"preloader",UNRESPONSIVE:"unresponsive",NONE:"none"},mixins:[f.compPanelMixin],displayName:"TPASettings",getInitialState:function(){var b=this.getEditorAPI();this.selectedComponent=a.isArray(this.props.selectedComponent)?this.props.selectedComponent[0]:this.props.selectedComponent,this.data=b.components.data.get(this.selectedComponent),this.appData=b.tpa.app.getData(this.data.applicationId),this.maxScreenHeight=c(window).height()-126;var d=this.data.widgetId?a.get(this.appData.widgets,this.data.widgetId):this.getMainSectionWidgetData(),e=a.get(d,"settings.version",1);if(this.appDataIsValid()){var f=this.getSize();return{url:this.appData.demoMode===!0?void 0:this.getUrl(),width:f.width,height:f.height,overlay:this.OVERLAY_STATE.PRELOADER,settingsVersion:e}}return{width:400,height:200}},appDataIsValid:function(){var b=a.isArray(this.appData)&&0===a.size(this.appData)||a.isObject(this.appData)&&a.isEmpty(this.appData);return!b},componentDidMount:function(){var a=this.getEditorAPI();if(this.props.isAlive||(this._appAliveTimeout=setTimeout(this.onAppAliveTimeoutExpires,this.ALIVE_TIMEOUT)),a.leftBar.collapseMenu(),this.appDataIsValid()){if(this.appData.demoMode){var b=function(){this.appData=a.tpa.app.getData(this.data.applicationId),this.setState({url:this.getUrl()}),this.reportTpaAddedBiEvent(a)},c=function(){i.provisionFailAlert(this.appData.appDefinitionId),this.setState({overlay:this.OVERLAY_STATE.UNRESPONSIVE})};a.tpa.provision.provisionAppDemoSave(this.appData.applicationId,b.bind(this),c.bind(this))}}else this.setState({overlay:this.OVERLAY_STATE.UNRESPONSIVE});this.panelOpenTime=this.getTime();var d={app_id:this.appData.appDefinitionId,app_site_id:this.appData.instanceId,instance_id:this.props.origCompId};a.bi.event(g.events.TPA_OPEN_SETTINGS,d)},componentWillReceiveProps:function(a){var b=this.getEditorAPI();b.components.is.exist(this.props.selectedComponent)||e.panelManager.closePanelByName("tpa.compPanels.tpaSettings"),a&&a.isAlive&&this.setState({overlay:this.OVERLAY_STATE.NONE})},reportTpaAddedBiEvent:function(a){var b=a.generalInfo.isFirstSave(),c=b?a.generalInfo.getMetaSiteId():"",d="Wix"===this.appData.by,e={is_permissions_app:d?0:1,is_first:1,app_id:this.appData.appDefinitionId,widget_id:this.data.widgetId,app_site_id:this.appData.instanceId,instance_id:this.props.origCompId,category:"",section:"",search_term:"",item_position:"",referral_info_category:"",referral_info:"",template_guid:c,modal_tab_name:"",origin:"template_provision",adding_method:"template",page_id:a.pages.getFocusedPageId()};a.bi.event(g.events.TPA_ADDED,e)},getSize:function(){if(this.isSection()){var a=this.appData.widgets[this.data.widgetId];return{width:a.settings.width,height:a.settings.height}}return{width:this.appData.sectionSettings.width,height:this.appData.sectionSettings.height}},isSection:function(){return this.appData.widgets&&this.data.widgetId},getUrl:function(){return this.getEditorAPI().tpa.app.url.getSettingsUrl(this.appData.applicationId,this.data.widgetId,this.props.origCompId)},getIframeHeight:function(){return 2===this.state.settingsVersion?this.getSize().height-2+"":this.getSize().height},getDialogStyle:function(){return this.state.overlay===this.OVERLAY_STATE.NONE?{height:this.state.height,position:"relative"}:{height:a.min([this.maxScreenHeight,this.state.height]),position:"relative"}},onAppAliveTimeoutExpires:function(){this.showUnresponsiveOverlay()},showUnresponsiveOverlay:function(){this.props.isAlive?(this.clearAliveTimeout(),this.setState({overlay:this.OVERLAY_STATE.NONE})):this.setState({overlay:this.OVERLAY_STATE.UNRESPONSIVE})},getTime:function(){return Date.now()},sendClosePanelBI:function(){var a=this.getEditorAPI(),b=this.props.origCompId,c={app_id:this.appData.appDefinitionId,app_site_id:this.appData.instanceId,instance_id:b,seconds_opened:parseInt((this.getTime()-this.panelOpenTime)/1e3,10)};a.bi.event(g.events.TPA_CLOSE_SETTINGS,c)},componentWillUnmount:function(){this.clearAliveTimeout(),this.sendClosePanelBI()},clearAliveTimeout:function(){this._appAliveTimeout&&clearTimeout(this._appAliveTimeout)},shouldShowPreloader:function(){return!this.props.isAlive&&this.state.overlay===this.OVERLAY_STATE.PRELOADER||this.appData.demoMode===!0},onHelpClicked:function(){var b=this.getEditorAPI(),c=g.events.TPA_HELP_CLICK,f={widget_id:this.data.widgetId,app_id:this.appData.appDefinitionId,origin:"settings"},h=j.getHelpData(b,this.appData.appDefinitionId,this.data.widgetId,"settings"),i={openPanelBiEvent:c,openPanelBiParams:a.merge({help_status:"open"},f),closePanelBiEvent:c,closePanelBiParams:a.merge({help_status:"close"},f),origin:"settings"},k={panel_name:this.props.panelName,origin:d.constants.BI.HELP.ORIGIN.PANEL,component:b.selection.getSelectedComponentType(),learn_more:!1};e.panelManager.openHelpCenter(h.helpId,h.appDefinitionId,i,k)},getUnresponsiveText:function(){var b=this.appData.appDefinitionName;if(b){var c=a.template(h.translate("tpa_unavail_problems"));return c({appName:b})}},getAppName:function(){var a=this.getEditorAPI();return a.components.is.exist(this.props.selectedComponent)?k.getCompName(a,this.selectedComponent):""},getUnresponsiveContact:function(){return a.isEmpty(this.appData)?void 0:h.translate("tpa_unavail_problems_2")},getMainSectionWidgetData:function(){return this.appData.widgets?a.find(this.appData.widgets,function(a){return a.appPage&&a.appPage.name&&!a.appPage.hidden}):void 0},render:l})}),define("tpa/compPanels/appMarketPanel.rt",["react/addons","lodash","panels"],function(a,b,c){"use strict";return function(){return a.createElement(c.frames.leftPanelFrame,b.assign({},{panelName:this.props.panelName,label:this.translateIfNeeded("app_market_title"),className:this.getAppMarketPanelClass(),panelClass:this.getAppMarketPanelClass(),panelIndex:this.props.panelIndex},this.getPanelProps()),a.createElement("iframe",{src:this.state.appMarketUrl,className:b.keys(b.pick(this.getAppMarketIframeClass(),b.identity)).join(" "),frameBorder:"0",scrolling:"no"}))}}),define("tpa/experiments/experiments",["experiment!se_AppMarketUnification","experiment!se_ecomPagesMissing","experiment!se_ecomAddApp","experiment!se_shouldShowPhotoAlbumsAbout","experiment!StorePagesUsability1b"],function(a,b,c,d,e){"use strict";var f=function(){return a},g=function(){return b},h=function(){return c},i=function(){return e},j=function(){return d};return{isAppMarketUnificationExperimentOn:f,isEcomPagesMissingExperimentOn:g,isEcomAddAppExperimentOn:h,isStorePagesUsability1bExperimentOn:i,isShouldShowPhotoAlbumsAboutExperimentOn:j}}),define("tpa/compPanels/appMarketPanel",["lodash","react","core","util","tpa/appMarket/utils/appMarketUtils","tpa/utils/tpaUtils","tpa/compPanels/appMarketPanel.rt","tpa/bi/bi","helpIds","tpa/experiments/experiments"],function(a,b,c,d,e,f,g,h,i,j){"use strict";return b.createClass({displayName:"AppMarketPanel",propTypes:{urlParams:b.PropTypes.shape({openMarketOrigin:b.PropTypes.string.isRequired,referralInfoCategory:b.PropTypes.string,section:b.PropTypes.string,openAppDefId:b.PropTypes.string,appDefinitionId:b.PropTypes.string,categorySlug:b.PropTypes.string,query:b.PropTypes.string,tags:b.PropTypes.string,tests:b.PropTypes.string}).isRequired,helpId:b.PropTypes.string.isRequired},mixins:[d.translationMixin,c.mixins.editorAPIMixin],getInitialState:function(){return{appMarketUrl:this.getAppMarketUrl()}},getDefaultProps:function(){return{helpId:i.EXTERNAL.APP_MARKET}},timeMarketOpened:void 0,openMarketOrigin:void 0,getTime:function(){return Date.now()},componentDidMount:function(){this.timeMarketOpened=this.getTime(),this.openMarketOrigin=this.props.urlParams&&this.props.urlParams.openMarketOrigin},componentWillUnmount:function(){var a={open_origin:this.openMarketOrigin,seconds_opened:parseInt((this.getTime()-this.timeMarketOpened)/1e3,10)};this.getEditorAPI().bi.event(h.events.MARKET_CLOSED,a)},getEditorOrigin:function(){return e.origin()},getAppMarketUrl:function(){var b=this.getEditorAPI(),c={};return"market_button"===this.props.urlParams.openMarketOrigin&&(c=e.getAppMarketUrlParams()),a.assign(c,this.props.urlParams),c.origin=this.getEditorOrigin(),b.tpa.appMarket.getUrl(c)},getPanelProps:function(){return{urlParams:this.props.urlParams,onHelpClicked:this.onHelpClicked,helpId:this.props.helpId}},onHelpClicked:function(){var a=this.getEditorAPI();a.bi.event(h.events.MARKET_HELP_CLICK)},getAppMarketIframeClass:function(){var a={"app-market-frame":!j.isAppMarketUnificationExperimentOn(),"app-market-frame-20":j.isAppMarketUnificationExperimentOn()};return a},getAppMarketPanelClass:function(){return j.isAppMarketUnificationExperimentOn()?"app-market-panel-20":"app-market-panel"},render:g})}),define("tpa/compModals/appMarketAppModal.rt",["react/addons","lodash","panels"],function(a,b,c){"use strict";return function(){return a.createElement(c.frames.focusPanelFrame,{panelName:this.props.panelName,title:this.translateIfNeeded("app_market_title"),shouldHideHelp:!0,onClose:this.onClose},a.createElement("div",{className:"app-market-app-modal-container"},a.createElement("iframe",{src:this.props.iframeUrl,width:"100%",height:"100%",frameBorder:"0"})))}}),define("tpa/compModals/appMarketAppModal",["react","core","util","panels","tpa/compModals/appMarketAppModal.rt"],function(a,b,c,d,e){"use strict";return a.createClass({propTypes:{onClose:a.PropTypes.func.isRequired},displayName:"appMarketAppModal",mixins:[c.translationMixin],render:e,onClose:function(){d.panelManager.closePanelByName(this.props.panelName),this.props.onClose&&this.props.onClose()}})}),define("tpa/compModals/appMarketPermissionsModal.rt",["react/addons","lodash","panels"],function(a,b,c){"use strict";return function(){return a.createElement(c.frames.focusPanelFrame,{panelName:this.props.panelName,title:this.getTitle(),onClose:this.onClose,shouldHideHelp:!0},a.createElement("div",{className:"app-market-permissions-modal-container"},a.createElement("iframe",{src:this.props.iframeUrl,className:"app-market-permissions-modal",width:"100%",height:"100%",frameBorder:"0"})))}}),define("tpa/compModals/appMarketPermissionsModal",["react","core","util","tpa/compModals/appMarketPermissionsModal.rt","tpa/bi/bi"],function(a,b,c,d,e){"use strict";return a.createClass({displayName:"appMarketPermissionsModal",mixins:[c.translationMixin,b.mixins.editorAPIMixin],onClose:function(){var a={closing_method:"X",app_id:this.props.appDefinitionId};return this.getEditorAPI().bi.event(e.events.PERMISSION_MODAL_CLOSED,a),!0},getTitle:function(){return this.props.iframeUrl.indexOf("demoMode=true")>-1?this.translateIfNeeded("app_market_permissions_template_message_title"):this.translateIfNeeded("app_market_permissions_message_title")},render:d})}),define("tpa/compModals/tpaSettingsModal.rt",["react/addons","lodash","panels","core"],function(a,b,c,d){"use strict";return function(){return a.createElement(c.frames.focusPanelFrame,{title:this.props.title,shouldHideHeader:this.shouldHideHeader(),panelName:"tpa.compModals.tpaSettingsModal",width:this.getPanelWidth(),height:this.getPanelHeight(),onHelpClicked:this.helpClicked,isBareMode:this.props.isBareMode,className:"tpa-settings-modal"},a.createElement("iframe",{id:"settingsModalIframe",src:this.props.url,style:{width:"100%",height:"100%",border:"0px"}}))}}),define("tpa/compModals/tpaSettingsModal",["lodash","react","core","baseUI","util","panels","tpa/bi/bi","tpa/constants/constants","tpa/compModals/tpaSettingsModal.rt"],function(a,b,c,d,e,f,g,h,i){"use strict";return b.createClass({mixins:[c.mixins.editorAPIMixin],displayName:"settingsModal",getPanelHeight:function(){var a=this.parsePercentToPixel(this.props.height,window.innerHeight),b=54;a+=b;var c=1.4*(d.uiConstants.TOPBAR_HEIGHT+12);return this.resizeToFitContainer(a,window.innerHeight,c).toString()},getPanelWidth:function(){var a=this.parsePercentToPixel(this.props.width,window.innerWidth),b=36;return this.resizeToFitContainer(a,window.innerWidth,b).toString()},parsePercentToPixel:function(b,c){var d=a.isString(b)&&/^[0-9]+%$/.test(b);return d?b=c*parseInt(b.replace("%",""),10)/100:a.isNumber(b)||(b=parseInt(b.replace("px",""),10)),b},resizeToFitContainer:function(a,b,c){var d=b-c;return a>d&&(a=b-c),a},componentWillUnmount:function(){this.props.onClose&&this.props.onClose(this.props.callbackArgs)},shouldHideHeader:function(){return this.props.isBareMode},helpClicked:function(){var d,e,i,b=this.getEditorAPI();if(this.props.appDefinitionId&&this.props.helpId)e=this.props.appDefinitionId,d=this.props.helpId;else{var j=b.selection.getSelectedComponents(),k=b.components.data.get(j),l=b.tpa.app.getData(k.applicationId);i=k.widget_id,e=l.appDefinitionId,d=h.TPA_DEFAULT_HELP_ID}var m=g.events.TPA_HELP_CLICK,n={widget_id:i?i:null,app_id:e,origin:"settings_modal"},o={openPanelBiEvent:m,openPanelBiParams:a.merge({help_status:"open"},n),closePanelBiEvent:m,closePanelBiParams:a.merge({help_status:"close"},n),origin:n.origin},p={panel_name:this.props.panelName,origin:c.constants.BI.HELP.ORIGIN.PANEL,component:b.selection.getSelectedComponentType(),learn_more:!1};f.panelManager.openHelpCenter(d,e,o,p)},render:i})}),define("tpa/compModals/appMarketModal.rt",["react/addons","lodash","panels"],function(a,b,c){"use strict";return function(){return a.createElement(c.frames.focusPanelFrame,{panelName:this.props.panelName,title:this.getTitle(),onClose:this.onClose,shouldHideHelp:!0,
width:this.props.width,height:this.props.height,keyboardShortcuts:this.getShortcuts()},a.createElement("div",{className:"app-market-modal-container"},a.createElement("iframe",{src:this.props.iframeUrl,width:"100%",height:"100%",frameBorder:"0"})))}}),define("tpa/compModals/appMarketModal",["react","core","util","panels","tpa/compModals/appMarketModal.rt"],function(a,b,c,d,e){"use strict";var f={ESC:"esc"};return a.createClass({propTypes:{iframeUrl:a.PropTypes.string.isRequired,width:a.PropTypes.string.isRequired,height:a.PropTypes.string.isRequired,id:a.PropTypes.string.isRequired,title:a.PropTypes.string,closeModalBiEvent:a.PropTypes.object,closeModalBiParams:a.PropTypes.object},displayName:"appMarketModal",mixins:[c.translationMixin,b.mixins.editorAPIMixin],render:e,getTitle:function(){return this.props.title?this.translateIfNeeded(this.props.title):void 0},onClose:function(a){if(d.panelManager.closePanelByPropKey("id",this.props.id),this.props.closeModalBiEvent){var b=this.props.closeModalBiParams||{};b.closeMethod=a,this.getEditorAPI().bi.event(this.props.closeModalBiEvent,b)}},getShortcuts:function(){var a=this;return{esc:function(){a.onClose(f.ESC)}}}})}),define("tpa/addPanelData/music/musicSection",["addPanelData","panels","tpa/superApps/superApps","util"],function(a,b,c,d){"use strict";var e="13bb5d67-1add-e770-a71f-001277e17c57",f="13bb5dc2-a098-5a74-502b-6bac84e80b23",g=function(){a.manager.start.register(["music"],function(){return j()})},h=function(){return c.addWidget(e,f)},i=function(a){var b={width:350,height:700,x:a.x,y:a.y};return c.addWidget(e,f,b)},j=function(){return{type:a.addPanelDataConsts.SECTIONS_TYPES.PRESET,hide:!1,title:"add_section_label_proplayer",showSectionHeader:!0,additionalBehaviours:{labelMode:a.addPanelDataConsts.LABEL_BEHAVIOUR.NONE,infoIcon:a.addPanelDataConsts.INFO_ICON_BEHAVIOUR.NONE,hoverImageAction:a.addPanelDataConsts.HOVER_IMAGE_ACTIONS.SCALE,iconEnabledForComps:{}},props:{onClick:h,onDrop:i,image:"addPanelData/sections/wixMusicPlayerSection_"+d.languages.getLanguageCode()+"/wixMusicPlayerSection_"+d.languages.getLanguageCode()+".png",items:[{id:"Music_Prop_Player_1",structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:350,height:700,x:616,y:18,scale:1,rotationInDegrees:0},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",appDefinitionId:"13bb5d67-1add-e770-a71f-001277e17c57",slug:"wix-music",data:{type:"TPAWidget",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},applicationId:"16",widgetId:"13bb5dc2-a098-5a74-502b-6bac84e80b23"},style:"tpaw0"},preset:{rect:{width:324,height:618,x:0,y:0},label:""}}]},help:{hide:!1,text:"add_section_info_text_proplayer"},teaser:{id:"proplayer_section_teaser",hide:!1,title:"add_section_teaser_title_proplayer",text:"add_section_teaser_text_proplayer",linkText:"add_category_teaser_link",learnMore:function(){c.openAppMarketInfoModal("wix-music"),b.panelManager.closePanelByName("rEditor.addPanel")}}}};return{registerSection:g}}),define("tpa/addPanelData/contact/contactSection",["staticAssets","addPanelData","panels","util","tpa/superApps/superApps"],function(a,b,c,d,e){"use strict";var f="1375baa8-8eca-5659-ce9d-455b2009250d",g="1375babd-6f2b-87ed-ff19-5778602c8b86",h=function(){b.manager.start.register(["contact"],function(){return k()})},i=function(){return e.addWidget(f,g)},j=function(a){var b={width:350,height:700,x:a.x,y:a.y};return e.addWidget(f,g,b)},k=function(){return{type:b.addPanelDataConsts.SECTIONS_TYPES.PRESET,hide:!1,title:"add_section_label_getsubscribers",additionalBehaviours:{labelMode:b.addPanelDataConsts.LABEL_BEHAVIOUR.NONE,infoIcon:b.addPanelDataConsts.INFO_ICON_BEHAVIOUR.NONE,hoverImageAction:b.addPanelDataConsts.HOVER_IMAGE_ACTIONS.SCALE,iconEnabledForComps:{}},showSectionHeader:!0,props:{onClick:i,onDrop:j,image:"addPanelData/sections/getSubscribersSection_"+d.languages.getLanguageCode()+"/getSubscribersSection_"+d.languages.getLanguageCode()+".png",items:[{structure:{layout:{x:315,y:650,width:500,height:122,scale:1,rotationInDegrees:0},type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",appDefinitionId:f,slug:"wix-get-subscribers",data:{widgetId:g,applicationId:"18",type:"TPAWidget",metaData:{isHidden:!1,isPreset:!0,schemaVersion:"1.0"}},style:"tpaw0"},preset:{rect:{width:324,height:110,x:0,y:0},label:""}}]},help:{hide:!1,text:"add_section_info_text_getsubscribers"},teaser:{id:"get_subscribers_section_teaser",hide:!1,title:"add_section_teaser_title_getsubscribers",text:"add_section_teaser_text_getsubscribers",linkText:"add_category_teaser_link",learnMore:function(){e.openAppMarketInfoModal("wix-get-subscribers"),c.panelManager.closePanelByName("rEditor.addPanel")}}}};return{registerSection:h}}),define("tpa/compPanels/baseTpaMessage.rt",["react/addons","lodash","panels"],function(a,b,c){"use strict";return function(){return a.createElement("div",{className:"tpa-base-message-panel "+this.props.classNamespace},a.createElement(c.frames.messagePanelFrame,{panelName:this.props.panelName,onConfirm:this.props.onConfirm,confirmLabel:"tpa_messages_ok",panelTitle:this.props.title,keyboardShortcuts:this.getKeyboardShortcuts()},a.createElement("div",{className:"content-wrapper"},"\n            ",this.props.children,"\n        ")))}}),define("tpa/compPanels/baseTpaMessage",["react","panels","core","tpa/compPanels/baseTpaMessage.rt"],function(a,b,c,d){"use strict";return a.createClass({displayName:"baseTpaMessage",mixins:[c.mixins.editorAPIMixin],close:function(){b.panelManager.closePanelByName(this.props.panelName)},getKeyboardShortcuts:function(){var a=this;return{enter:function(){a.close()},esc:function(){a.close()}}},render:d})}),define("tpa/compPanels/sectionAlreadyInstalled.rt",["react/addons","lodash","tpa/compPanels/baseTpaMessage"],function(a,b,c){"use strict";return function(){return a.createElement(c,{classNamespace:"section-already-installed",panelName:this.props.panelName,onConfirm:this.props.onConfirm,title:this.translateIfNeeded("tpa_messages_page_already_installed_title")},a.createElement("div",{className:"icon"},a.createElement("img",{src:this.props.appIcon,alt:"app icon"})),a.createElement("div",{className:"textual"},a.createElement("p",{dangerouslySetInnerHTML:{__html:this.getText()}}),a.createElement("p",{},this.translateIfNeeded("tpa_messages_page_already_installed_text_2"))))}}),define("tpa/compPanels/sectionAlreadyInstalled",["lodash","react","core","util","tpa/compPanels/sectionAlreadyInstalled.rt","tpa/bi/bi"],function(a,b,c,d,e,f){"use strict";return b.createClass({displayName:"sectionAlreadyInstalled",mixins:[d.translationMixin,c.mixins.editorAPIMixin],getText:function(){var a={app_name:this.props.appName};return this.translateTemplate("tpa_messages_page_already_installed_text",a)},componentDidMount:function(){var a={app_id:this.props.appDefId,description:"Adding page app again to site",type:"add_page"};this.getEditorAPI().bi.event(f.events.TPA_MESSAGE_LOADED,a)},render:e})}),define("tpa/compPanels/cannotDeleteSection.rt",["react/addons","lodash","tpa/compPanels/baseTpaMessage","baseUI"],function(a,b,c,d){"use strict";return function(){return a.createElement(c,{classNamespace:"tpa-cannot-delete-section",panelName:this.props.panelName,onConfirm:this.props.onConfirm,title:this.getTitle()},a.createElement("div",{className:"icon"},a.createElement(d.symbol,{name:"plaster"})),a.createElement("div",{className:"textual"},a.createElement("p",{dangerouslySetInnerHTML:{__html:this.getFirstParagraph()}}),a.createElement("p",{dangerouslySetInnerHTML:{__html:this.getSecondParagraph()}})))}}),define("tpa/compPanels/cannotDeleteSection",["lodash","react","core","util","tpa/compPanels/cannotDeleteSection.rt","tpa/bi/bi"],function(a,b,c,d,e,f){"use strict";return b.createClass({displayName:"cannotDeleteSection",mixins:[d.translationMixin,c.mixins.editorAPIMixin],getInitialState:function(){return{}},getTitle:function(){var a={app_name:this.props.appName};return this.translateTemplate(this.props.title,a,this.getEditorAPI())},getFirstParagraph:function(){var a={app_name:this.props.appName};return this.translateTemplate("tpa_messages_oops_text",a,this.getEditorAPI())},getSecondParagraph:function(){var a=this.getEditorAPI(),b={page_name:a.pages.getCurrentUrlPageTitle()};return this.translateTemplate("tpa_messages_oops_text_2",b,a)},componentDidMount:function(){var a={app_id:this.props.appDefId,description:"Trying to delete page app",type:"cant_delete_page_app"};this.getEditorAPI().bi.event(f.events.TPA_MESSAGE_LOADED,a)},render:e})}),define("tpa/compPanels/tpaNewPageAdded.rt",["react/addons","lodash","panels","baseUI","symbols"],function(a,b,c,d,e){"use strict";function f(){this.onConfirm()}function g(){this.onConfirm()}return function(){return a.createElement(c.frames.focusPanelFrame,{shouldHideHeader:!0,panelName:this.props.panelName,keyboardShortcuts:this.getKeyboardShortcuts()},a.createElement("div",{className:"tpa-new-page-added"},a.createElement("div",{className:"panel-header dark"},a.createElement("button",{className:"close",onClick:f.bind(this),'"':!0},a.createElement(e.symbol,{name:"headerCloseButton"})),a.createElement(d.symbol,{name:"newPageAdded"}),a.createElement("div",{className:"panel-header-title"},a.createElement("div",{className:"title-text",dangerouslySetInnerHTML:{__html:this.getTitleText()}}))),a.createElement("div",{className:"content"},a.createElement("div",{className:"price"},"\n                ",this.translateIfNeeded("tpa_messages_new_page_added_text"),"\n            "),a.createElement("div",{className:"ok-btn"},a.createElement(d.button,{className:"btn-ok",onClick:g.bind(this),label:"tpa_messages_ok"})))))}}),define("tpa/compPanels/tpaNewPageAdded",["lodash","react","util","panels","tpa/compPanels/tpaNewPageAdded.rt","core","tpa/bi/bi"],function(a,b,c,d,e,f,g){"use strict";return b.createClass({displayName:"newPageAddedSectionApp",mixins:[c.translationMixin,f.mixins.editorAPIMixin,d.mixins.panelFrameMixin],getTitleText:function(){var a={appName:this.props.appName};return this.translateTemplate("tpa_messages_new_page_added_title",a)},componentDidMount:function(){var a={app_id:this.props.appDefId,description:"Adding page app to site",type:"add_page"};this.getEditorAPI().bi.event(g.events.TPA_MESSAGE_LOADED,a)},onConfirm:function(){this.close()},getKeyboardShortcuts:function(){var a=this;return{enter:function(){a.onConfirm()},esc:function(){a.onConfirm()}}},render:e})}),define("tpa/compPanels/baseTpaConfirmation.rt",["react/addons","lodash","panels","baseUI"],function(a,b,c,d){"use strict";return function(){return a.createElement(c.frames.confirmationPanelFrame,{type:this.props.type,panelName:this.props.panelName,onCancel:this.onCancel,onConfirm:this.props.onConfirm,confirmLabel:this.props.confirmLabel,cancelLabel:"tpa_messages_cancel",panelTitle:this.props.title},a.createElement("div",{className:"content-wrapper"},this.props.svgName?a.createElement("div",{className:"icon",key:"icon"},a.createElement(d.symbol,{name:this.props.svgName})):null,a.createElement("div",{className:"content"},this.props.children)))}}),define("tpa/compPanels/baseTpaConfirmation",["react","panels","tpa/compPanels/baseTpaConfirmation.rt"],function(a,b,c){"use strict";return a.createClass({displayName:"baseTpaConfirmation",close:function(){b.panelManager.closePanelByName(this.props.panelName)},onConfirm:function(){this.close(),this.props.onConfirm()},render:c})}),define("tpa/compPanels/premiumTPADeleteConfirmation.rt",["react/addons","lodash","tpa/compPanels/baseTpaConfirmation"],function(a,b,c){"use strict";return function(){return a.createElement("div",{className:"tpa-delete-confirmation-wrapper"},a.createElement(c,{type:"important",title:this.translateIfNeeded("tpa_messages_are_you_sure_title"),panelName:this.props.panelName,confirmLabel:"tpa_messages_delete",onConfirm:this.props.onConfirm,svgName:"deleteConfirmationIcon"},a.createElement("p",{dangerouslySetInnerHTML:{__html:this.getFirstParagraph()}}),a.createElement("p",{dangerouslySetInnerHTML:{__html:this.getSecondParagraph()}}),a.createElement("p",{},this.getThirdParagraph())))}}),define("tpa/compPanels/premiumTPADeleteConfirmation",["lodash","react","core","util","tpa/compPanels/premiumTPADeleteConfirmation.rt","tpa/bi/bi"],function(a,b,c,d,e,f){"use strict";return b.createClass({displayName:"premiumTPADeleteConfirmation",mixins:[d.translationMixin,c.mixins.editorAPIMixin],getInitialState:function(){return{}},getFirstParagraph:function(){var b=a.template(this.translateIfNeeded("tpa_messages_delete_premium_app_text"));return b({app_name:this.props.appName})},getSecondParagraph:function(){var b=a.template(this.translateIfNeeded("tpa_messages_stop_payments_text"));return b({url:"https://premium.wix.com/wix/api/PaymentConsole"})},getThirdParagraph:function(){var b=a.template(this.translateIfNeeded("tpa_messages_delete_app_question_app_text"));return b()},componentDidMount:function(){var a={app_id:this.props.appDefId,description:"Deleting premium app",type:"delete_premium"};this.getEditorAPI().bi.event(f.events.TPA_MESSAGE_LOADED,a)},render:e})}),define("tpa/compPanels/deletePageContainsPremiumTpaConfirmation.rt",["react/addons","lodash","tpa/compPanels/baseTpaConfirmation"],function(a,b,c){"use strict";return function(){return a.createElement("div",{className:"tpa-delete-confirmation-wrapper delete-page-contains-premium-tpa-confirmation"},a.createElement(c,{type:"important",title:this.translateIfNeeded("tpa_messages_are_you_sure_title"),panelName:this.props.panelName,confirmLabel:"tpa_messages_delete",onConfirm:this.onDeleteClick,svgName:"deleteConfirmationIcon"},1===this.props.appCount?a.createElement("p",{dangerouslySetInnerHTML:{__html:this.getFirstParagraph()},key:"singularMessage"}):null,this.props.appCount>1?a.createElement("p",{key:"pluralMessage"},this.getFirstParagraphPlural()):null,a.createElement("p",{dangerouslySetInnerHTML:{__html:this.getSecondParagraph()}}),a.createElement("p",{dangerouslySetInnerHTML:{__html:this.getThirdParagraph()}})))}}),define("tpa/compPanels/deletePageContainsPremiumTpaConfirmation",["lodash","react","core","util","tpa/compPanels/deletePageContainsPremiumTpaConfirmation.rt","tpa/bi/bi"],function(a,b,c,d,e,f){"use strict";return b.createClass({displayName:"deletePageContainsPremiumTpaConfirmation",mixins:[d.translationMixin,c.mixins.editorAPIMixin],getInitialState:function(){return{}},getFirstParagraph:function(){var b=a.template(this.translateIfNeeded("tpa_messages_delete_premium_page_text"));return b({app_name:this.props.appName})},getFirstParagraphPlural:function(){var b=a.template(this.translateIfNeeded("tpa_messages_delete_premium_page_plurals_text"));return b()},getSecondParagraph:function(){var b=a.template(this.translateIfNeeded("tpa_messages_stop_payments_text"));return b({url:"https://premium.wix.com/wix/api/PaymentConsole"})},getThirdParagraph:function(){var b=a.template(this.translateIfNeeded("tpa_messages_delete_page_question_page_text"));return b({page_name:this.props.pageTitle})},componentDidMount:function(){var a={app_id:this.props.appDefId,description:"Deleting page with premium app",type:"delete_premium"};this.getEditorAPI().bi.event(f.events.TPA_MESSAGE_LOADED,a)},onDeleteClick:function(){this.props.onConfirm(this.getEditorAPI())},render:e})}),define("tpa/compPanels/deleteContainerContainsPremiumTpaConfirmation.rt",["react/addons","lodash","tpa/compPanels/baseTpaConfirmation"],function(a,b,c){"use strict";return function(){return a.createElement("div",{className:"tpa-delete-confirmation-wrapper"},a.createElement(c,{type:"important",title:this.translateIfNeeded("tpa_messages_are_you_sure_title"),panelName:this.props.panelName,confirmLabel:"tpa_messages_delete",onConfirm:this.onDeleteClick,svgName:"deleteConfirmationIcon"},1===this.props.appCount?a.createElement("p",{dangerouslySetInnerHTML:{__html:this.getFirstParagraph()},key:"singularMessage"}):null,this.props.appCount>1?a.createElement("p",{key:"pluralMessage"},this.getFirstParagraphPlural()):null,a.createElement("p",{dangerouslySetInnerHTML:{__html:this.getSecondParagraph()}})))}}),define("tpa/compPanels/deleteContainerContainsPremiumTpaConfirmation",["lodash","react","core","util","tpa/compPanels/deleteContainerContainsPremiumTpaConfirmation.rt","tpa/bi/bi"],function(a,b,c,d,e,f){"use strict";return b.createClass({displayName:"deleteContainerContainsPremiumTpaConfirmation",mixins:[d.translationMixin,c.mixins.editorAPIMixin],getInitialState:function(){return{}},getFirstParagraph:function(){var b=a.template(this.translateIfNeeded("tpa_messages_delete_premium_container_text"));return b({app_name:this.props.appName})},getFirstParagraphPlural:function(){var b=a.template(this.translateIfNeeded("tpa_messages_delete_premium_container_plurals_text"));return b()},getSecondParagraph:function(){var b=a.template(this.translateIfNeeded("tpa_messages_stop_payments_text"));return b({url:"https://premium.wix.com/wix/api/PaymentConsole"})},componentDidMount:function(){var a={app_id:this.props.appDefId,description:"Deleting container with premium app",type:"delete_premium"};this.getEditorAPI().bi.event(f.events.TPA_MESSAGE_LOADED,a)},onDeleteClick:function(){this.props.onConfirm(this.getEditorAPI())},render:e})}),define("tpa/compPanels/sectionDelete.rt",["react/addons","lodash","tpa/compPanels/baseTpaConfirmation"],function(a,b,c){"use strict";return function(){return a.createElement("div",{className:"tpa-delete-confirmation-wrapper"},a.createElement(c,{type:"important",title:this.translateIfNeeded("tpa_messages_are_you_sure_title"),panelName:this.props.panelName,confirmLabel:"tpa_messages_delete",onConfirm:this.props.onConfirm,svgName:"generalDeleteIcon"},a.createElement("p",{dangerouslySetInnerHTML:{__html:this.getText()}})))}}),define("tpa/compPanels/sectionDelete",["lodash","react","core","util","tpa/bi/bi","tpa/compPanels/sectionDelete.rt"],function(a,b,c,d,e,f){"use strict";return b.createClass({displayName:"sectionDelete",mixins:[d.translationMixin,c.mixins.editorAPIMixin],getInitialState:function(){return{}},getText:function(){var b=a.template(this.translateIfNeeded("tpa_messages_delete_page_with_section_text"));return b({app_name:this.props.appName,page_name:this.props.pageName})},componentDidMount:function(){var a={app_id:this.props.appDefId,description:"Deleting page with section app",type:"delete_page_with_section_app"};this.getEditorAPI().bi.event(e.events.TPA_MESSAGE_LOADED,a)},render:f})}),define("tpa/compPanels/addEcom.rt",["react/addons","lodash","panels","baseUI","symbols"],function(a,b,c,d,e){"use strict";function f(){this.onCancel()}function g(){this.onConfirm()}return function(){return a.createElement(c.frames.focusPanelFrame,{shouldHideHeader:!0,panelName:this.props.panelName,keyboardShortcuts:this.getKeyboardShortcuts()},a.createElement("div",{className:"add-ecom"},a.createElement("div",{className:"panel-header dark"},a.createElement("button",{className:"close",onClick:f.bind(this),'"':!0},a.createElement(e.symbol,{name:"headerCloseButton"})),a.createElement(d.symbol,{name:"newPageAdded"})),a.createElement("div",{className:"content"},a.createElement("div",{},"\n                ",this.getTitleText(),"\n            "),a.createElement("div",{className:"ok-btn"},a.createElement(d.button,{className:"btn-ok",onClick:g.bind(this),label:"tpa_messages_ok"})))))}}),define("tpa/compPanels/addEcom",["react","panels","core","util","tpa/bi/bi","tpa/compPanels/addEcom.rt"],function(a,b,c,d,e,f){"use strict";return a.createClass({displayName:"addEcom",mixins:[d.translationMixin,c.mixins.editorAPIMixin],getTitleText:function(){return"Do you want to add the eCom app?"},getKeyboardShortcuts:function(){var a=this;return{enter:function(){a.onConfirm()},esc:function(){a.onCancel()}}},onCancel:function(){this.close()},onConfirm:function(){this.props.onConfirm(),this.close()},close:function(){b.panelManager.closePanelByName(this.props.panelName)},render:f})}),define("tpa/superApps/gfpp/superAppsGfppData",["lodash","panels","tpa/superApps/superApps","tpa/superApps/superAppsConstants","tpa/superApps/superAppsHelpConstants","tpa/experiments/experiments"],function(a,b,c,d,e,f){"use strict";var g={label:"gfpp_mainaction_store_manage_products",isApplied:!0,onClick:function(){q(c.superAppsConstants.ECOM_APP_DEF_ID,"","90%","100%")}},h={label:"gfpp_mainaction_store_pages_panel",isApplied:!0,addAtBack:!0,onClick:function(){b.panelManager.openPanel("wixStore.panels.wixStorePanel",{selectedTabName:"Pages"},!0)}},i=function(b,c){a.isObject(b)&&(b.actions=b.actions||[],b.actions.push(c))},j=function(a){f.isStorePagesUsability1bExperimentOn()&&i(a,h)},k={},l={},m={},n={},o={};k[d.ECOM.PRODUCT_PAGE]={actions:[g],showUpgrade:!0},j(k[d.ECOM.PRODUCT_PAGE]),k[d.ECOM.GRID_GALLERY]={actions:[g],showUpgrade:!0},j(k[d.ECOM.GRID_GALLERY]),k[d.ECOM.SLIDER_GALLERY]={actions:[g],showUpgrade:!0},j(k[d.ECOM.SLIDER_GALLERY]),k[d.ECOM.SHOPPING_CART_WIDGET]={showUpgrade:!1},j(k[d.ECOM.SHOPPING_CART_WIDGET]),k[d.ECOM.PRODUCT_GALLERY_PAGE]={actions:[g],showUpgrade:!0},j(k[d.ECOM.PRODUCT_GALLERY_PAGE]),k[d.ECOM.TANK_YOU_PAGE]={showUpgrade:!0},k[d.ECOM.SHOPPING_CART]={actions:[{label:"gfpp_mainaction_store_manage_shipping_tax",isApplied:!0,onClick:function(){q(c.superAppsConstants.ECOM_APP_DEF_ID,"shippingAndTax/list","90%","100%")}},{label:"gfpp_mainaction_store_manage_payments",isApplied:!0,onClick:function(){q(c.superAppsConstants.ECOM_APP_DEF_ID,"dynamicPayments/list","90%","100%")}}],showUpgrade:!0},l[d.WIXMUSIC_APP_DEF_ID]={actions:[{label:"gfpp_mainaction_wixmusic_manage_your_music",isApplied:!0,onClick:function(){q(c.superAppsConstants.WIXMUSIC_APP_DEF_ID,"","984px","660px","Manage Your Music")}}],showUpgrade:!0},m[d.HOTELS.APP_DEF_ID]={actions:[{label:"gfpp_mainaction_hotels_manage",isApplied:!0,onClick:function(){q(c.superAppsConstants.HOTELS.APP_DEF_ID,"","1280px","85%","Wix Hotels")}}],showUpgrade:!0},f.isShouldShowPhotoAlbumsAboutExperimentOn()&&(n[d.WIX_PHOTOALBUMS_APP_DEF_ID]={actions:[{label:"gfpp_mainaction_wixphotoalbums_about",tooltip:"gfpp_tooltip_wixphotoalbums_about",isApplied:!0,onClick:function(){q(c.superAppsConstants.WIX_PHOTOALBUMS_APP_DEF_ID,"about","100%","100%","Wix Photo Albums")}}]}),o[d.ECOM.APP_DEF_ID]=k,o[d.WIXMUSIC_APP_DEF_ID]=l,o[d.HOTELS.APP_DEF_ID]=m,o[d.WIX_PHOTOALBUMS_APP_DEF_ID]=n;var p=function(b,c,d){var f=e.getCustomHelpId(b,c,d,"gfpp"),g=f?{helpId:f}:{},h=o[c];return h&&h[d]?a.assign(g,h[d]):h&&h[c]?a.assign(g,h[c]):void 0},q=function(a,b,d,e,f){var g={appDefId:a,appWidth:d,appHeight:e};c.openDashboardUrl(g.appDefId,g.appWidth,g.appHeight,{state:b,title:f,onClose:c.refreshAppCompsForAppDefId.bind(void 0,g.appDefId)})},r=function(b){return!a.isUndefined(o[b])},s=function(a,b){if(c.hasPremiumOffering(a)){var d=o[a];if(d&&d[b])return d[b].showUpgrade;if(d&&d[a])return d[a].showUpgrade}return!1};return{getCustomMainActionsFor:p,hasCustomActions:r,hasExternalUpgrade:s,addStorePagesActionIfNeeded:j}}),define("tpa/gfpp/tpaGfppData",["lodash","core","panels","tpa/packagePicker/packagePicker","tpa/services/dashboardAppService","tpa/superApps/gfpp/superAppsGfppData","tpa/superApps/superAppsHelpConstants","tpa/bi/bi","tpa/constants/constants","tpa/settings/settings"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=function(a,b){j.open(a,b)},l={label:"gfpp_mainaction_tpa",isApplied:!0,onClick:k},m=function(a,b){b&&(window.open(b),r(a))},n=function(a,b){return{label:b,isApplied:!0,shouldTranslate:!1,onClick:function(){e.getDashboardAppUrlAsync(a,m.bind(null,a))}}},o=function(a){var b=[l];w(a,b);var c=a.selection.getSelectedComponentData(),d=a.tpa.app.getData(c.applicationId);return f.hasCustomActions(d.appDefinitionId)&&u(a,d.appDefinitionId,c.widgetId,b),b},p=function(a,b){return s(a)?[b.UPGRADE,b.HELP]:[b.HELP]},q=function(){return{help:{isSelected:!1,tooltip:"gfpp_tooltip_help",onClick:function(d){var e=v(d),f=d.selection.getSelectedComponentData().widgetId,i={widget_id:f,app_id:e.appDefinitionId,origin:"gfpp"},j={openPanelBiEvent:h.events.TPA_HELP_CLICK,openPanelBiParams:a.merge({help_status:"open"},i),closePanelBiParams:a.merge({help_status:"close"},i),closePanelBiEvent:h.events.TPA_HELP_CLICK},k=g.getHelpData(d,e.appDefinitionId,f,"gfpp"),l={origin:b.constants.BI.HELP.ORIGIN.GFPP,component:d.selection.getSelectedComponentType(),learn_more:!1};c.panelManager.openHelpCenter(k.helpId,k.appDefinitionId,j,l)}},upgrade:{isSelected:!1,shouldTranslate:!1,tooltip:function(a){return e.getEditorGfppData(a).upgradeText},icon:"upgrade",onClick:function(a){var b=v(a);f.hasExternalUpgrade(b.appDefinitionId)?d.startUpgradeFlow(a,b.appDefinitionId,!1,{external:!0,origin:"gfpp"}):d.startUpgradeFlow(a,b.appDefinitionId,!1,{origin:"gfpp"});var c={pp_origin:"gfpp",app_site_id:b.instanceId,app_id:b.appDefinitionId};a.bi.event(h.events.CLICK_UPGRADE_APP,c)}}}},r=function(a){var b=a.selection.getSelectedComponentData(),c=a.tpa.app.getData(b.applicationId),d={app_id:c.appDefinitionId,app_site_id:c.instanceId,instance_id:b.id,origin:"gfpp"};a.bi.event(h.events.OPEN_DASHBOARD_APP_CLICK,d)},s=function(a){var b=a.selection.getSelectedComponentData(),c=a.tpa.app.getData(b.applicationId);if(f.hasExternalUpgrade(c.appDefinitionId,b.widgetId))return!0;var e=a.tpa.app.hasPremiumOffering(b.applicationId);if(e){var g=d.isFullyUpgraded(a,c);return!g}return!1},t=function(a){var b,c=e.getEditorGfppData(a);return c.openInDashboard&&(b=n(a,c.openInDashboardText)),b},u=function(b,c,d,e){var g=f.getCustomMainActionsFor(b,c,d);a.isEmpty(g)||a.forEach(g.actions,function(a){a.addAtBack?y(a,e):x(a,e)})},v=function(a){var b=a.selection.getSelectedComponentData();return a.tpa.app.getData(b.applicationId)},w=function(b,c){var d=t(b);a.isEmpty(d)||c.push(d)},x=function(b,c){a.isEmpty(b)||c.unshift(b)},y=function(b,c){a.isEmpty(b)||c.push(b)};return{mainActions:o,enabledActions:p,presetActions:q}}),define("tpa/services/tpaDeleteService",["lodash","util","tpa/services/tpaAddRemoveDSService"],function(a,b,c){"use strict";var d=function(a,d,e,f){var g=a.components.data.get(d),h=a.tpa.app.isPremium(g.applicationId),i=a.tpa.app.getData(g.applicationId),j=a.tpa.app.hasSections(i);h&&!j&&e?a.panelManager.openPanel("tpa.confirmation.premiumTPADelete",{appName:i.appDefinitionName,appDefId:i.appDefinitionId,onConfirm:function(){var e=a.tpa.app.isLastAppComp(g.applicationId);c.deleteWidget(a,d);var h={app_id:i.appDefinitionId,app_site_id:i.instanceId,instance_id:d.id,is_last_tpa:e?1:0,component_type:"tpa"};a.bi.event(b.bi.events.REMOVE_COMPONENT_SECOND_STEP_CLICK,h),f&&f()}},!0):(c.deleteWidget(a,d),f&&f())},e=function(a,b,d,e){a.pages.beforePageRemoveHook(b,function(){c.deleteSection(a,b,e),d&&d()})},f=function(c,d,f,g,h,i,j){a.assign(j,j);var k=c.tpa.app.isMultiSectionInstalled(g.applicationId);!h||k||g.demoMode?h?c.panelManager.openPanel("panels.messagePanels.deletePageMessage",{pageTitle:f,onConfirm:function(){e(c,d,i,j)}},!0):e(c,d,i,j):c.panelManager.openPanel("tpa.confirmation.sectionDelete",{appName:g.appDefinitionName,pageName:f,appDefId:g.appDefinitionId,onConfirm:function(){e(c,d,i,j);var f=a.clone(j);f=a.map(f,function(b){return a.pick(b,["app_id","app_site_id","component_id","component_type","instance_id","is_last_tpa"])}),c.bi.reportBI(b.bi.events.REMOVE_COMPONENT_SECOND_STEP_CLICK,f)}},!0)},g=function(a,b){var c=a.components.data.get(b),d=a.tpa.app.getData(c.applicationId);a.panelManager.openPanel("tpa.message.cannotDeleteSection",{title:"tpa_messages_oops_title",appName:d.appDefinitionName,appDefId:d.appDefinitionId},!0)};return{deleteWidget:d,deleteSection:f,displaySectionDeleteMessage:g}}),define("tpa/superApps/superAppsOnStageActionsService",["lodash","tpa/superApps/superApps","tpa/superApps/superAppsConstants"],function(a,b,c){"use strict";var d={},e=function(a,b){if(a&&d[a]){var c=d[a][b||a];c&&c.call()}},f=function(b,c){return a.isObject(d[b])&&!a.isUndefined(d[b][c])},g=function(){var a=c.WIXMUSIC_APP_DEF_ID;d[a]={},d[a][c.WIXMUSIC.WIDGET]=h.bind(this,a,"","970px","650px","Manage Your Music")},h=function(a,c,d,e,f){var g={appDefId:a,appWidth:d,appHeight:e};b.openDashboardUrl(g.appDefId,g.appWidth,g.appHeight,{state:c,title:f})};return{init:g,mainAction:e,hasCustomDoubleClickAction:f}}),define("tpa",["lodash","panels","tpa/utils/tpaUtils","tpa/services/tpaPostMessageService","tpa/services/tpaPreviewPostMessageService","tpa/appMarket/services/appMarketPostMessageService","tpa/appMarket/services/appMarketTabService","tpa/settings/compPanels/tpaSettings","tpa/compPanels/appMarketPanel","tpa/packagePicker/packagePicker","tpa/compModals/appMarketAppModal","tpa/compModals/appMarketPermissionsModal","tpa/compModals/tpaSettingsModal","tpa/compModals/appMarketModal","tpa/services/navigateAndOpenAppService","tpa/addPanelData/section","tpa/addPanelData/music/musicSection","tpa/addPanelData/contact/contactSection","tpa/compPanels/sectionAlreadyInstalled","tpa/compPanels/cannotDeleteSection","tpa/compPanels/tpaNewPageAdded","tpa/compPanels/premiumTPADeleteConfirmation","tpa/compPanels/deletePageContainsPremiumTpaConfirmation","tpa/compPanels/deleteContainerContainsPremiumTpaConfirmation","tpa/compPanels/sectionDelete","tpa/compPanels/addEcom","tpa/bi/bi","tpa/superApps/superApps","tpa/services/pendingAppsService","tpa/services/dashboardAppService","tpa/gfpp/tpaGfppData","tpa/addPanelData/addPanelService","tpa/services/tpaDeleteService","tpa/services/tpaCompNameService","tpa/handlers/editorTPAHandlers","tpa/appMarket/utils/appMarketUtils","tpa/appMarket/appMarketHandlers","tpa/settings/settings","tpa/experiments/experiments","tpa/superApps/superAppsOnStageActionsService","tpa/superApps/superAppsConstants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O){"use strict";var Q,P=!1,R=function(a){Q=a,d.init(a),e.init(a),f.init(a),B.init(a)},S=function(b){var d=c.isInDevMode();b.tpa.initEditor(d,M),aa(b);var e=b.pluginService;a.forEach(b.tpa.constants.COMP_TYPES,function(a){b.registerCompNamePlugin(a,H.getCompName.bind(null,b)),e.registerPlugin(e.pluginConstants.DOUBLE_CLICK,a,W)}),a.forEach(b.tpa.constants.TPA_COMP_TYPES,function(a){b.registerCompNamePlugin(a,H.getCompName.bind(null,b)),e.registerPlugin(e.pluginConstants.DOUBLE_CLICK,a,W)}),b.registerRemovePlugin(b.tpa.constants.COMP_TYPES.TPA_WIDGET,G.deleteWidget.bind(null,b)),b.registerRemovePlugin(b.tpa.constants.COMP_TYPES.TPA_GLUED_WIDGET,G.deleteWidget.bind(null,b)),b.registerRemovePlugin(b.tpa.constants.TPA_COMP_TYPES.TPA_WIDGET,G.deleteWidget.bind(null,b)),b.registerRemovePlugin(b.tpa.constants.TPA_COMP_TYPES.TPA_GLUED_WIDGET,G.deleteWidget.bind(null,b)),b.registerRemovePlugin(b.tpa.constants.COMP_TYPES.TPA_SECTION,G.deleteSection.bind(null,b)),b.registerRemovePlugin(b.tpa.constants.TPA_COMP_TYPES.TPA_SECTION,G.deleteSection.bind(null,b)),b.registerCopyComponentPlugin(b.tpa.constants.COMP_TYPES.TPA_WIDGET,U),b.registerCopyComponentPlugin(b.tpa.constants.COMP_TYPES.TPA_GLUED_WIDGET,U),b.registerCopyComponentPlugin(b.tpa.constants.TPA_COMP_TYPES.TPA_WIDGET,U),b.registerCopyComponentPlugin(b.tpa.constants.TPA_COMP_TYPES.TPA_GLUED_WIDGET,U),b.registerCannotRemovePlugin(b.tpa.constants.COMP_TYPES.TPA_SECTION,G.displaySectionDeleteMessage.bind(null,b)),b.registerCannotRemovePlugin(b.tpa.constants.TPA_COMP_TYPES.TPA_SECTION,G.displaySectionDeleteMessage.bind(null,b)),b.tooltipTextService.registerTooltipText(b.tpa.constants.COMP_TYPES.TPA_SECTION,"DELETE","tpa_section_cant_delete_tooltip"),b.tooltipTextService.registerTooltipText(b.tpa.constants.TPA_COMP_TYPES.TPA_SECTION,"DELETE","tpa_section_cant_delete_tooltip"),b.tooltipTextService.registerTooltipText(b.tpa.constants.COMP_TYPES.TPA_GLUED_WIDGET,"SHOW_ON_ALL_PAGES","tpa_glued_show_on_all_pages_tooltip"),b.tooltipTextService.registerTooltipText(b.tpa.constants.TPA_COMP_TYPES.TPA_GLUED_WIDGET,"SHOW_ON_ALL_PAGES","tpa_glued_show_on_all_pages_tooltip"),g.openAppMarketTabFromUrlParamIfNeeded(),o.handleIfComingFromETPA(b),b.registerInitUserPrefsCallback(function(){
C.updateNotification(b)}),ba(b),X(),b.tpa.billing.getPremiumApps(b.site.getMetaSiteId()),b.registerSitePublishedCallbacks($.bind(null,b)),b.registerDeviceTypeChangeCallbacks(_.bind(null,b)),Y(b),A.registerEvents(b),T(b)},T=function(a){a.tpa.app.isInstalled(O.ECOM.APP_DEF_ID)&&(V(a)||(a.bi.error(A.errors.ECOM_MISSING_PAGES),M.isEcomAddAppExperimentOn()&&b.panelManager.openPanel("tpa.confirmation.addEcom",{onConfirm:function(){a.tpa.section.add(O.ECOM.APP_DEF_ID)}},!0)))},U=function(a,b){return b.originCompId=a.id,b},V=function(b){var c=b.tpa.app.getDataByAppDefId(O.ECOM.APP_DEF_ID),d=c.applicationId,e=b.tpa.app.getSections(d);return e&&!a.isEmpty(e)},W=function(b,c){var d=c.comp&&a.size(c.comp)>0&&c.comp[0],e=b.components.data.get(d),f=b.tpa.app.getData(e.applicationId);N.hasCustomDoubleClickAction(f.appDefinitionId,e.widgetId)?N.mainAction(f.appDefinitionId,e.widgetId):b.isDesktopEditor()&&L.open(b,d)},X=function(){q.registerSection(),r.registerSection()},Y=function(a){a.tpa.appMarket.getDataForPage(a.pages.getFocusedPageId()),a.registerPageNavigationCallback(function(b){a.tpa.appMarket.getDataForPage(b)})},Z=function(a,b){a.tpa.change.editMode(b?"preview":"editor"),P=b,b||a.tpa.closePopupsAndModal()},$=function(a){a.tpa.change.sitePublished()},_=function(a){a.tpa.change.deviceType(a.getDeviceType())},aa=function(a){a.registerToViewerChange(function(){var b=a.getPreviewMode();b!==P&&Z(a,b)})},ba=function(a){F.init(a,B.relatedApps.addPanelCategories,function(){p.registerAddPanelSection()})},ca=function(){return Q};return{initEditor:R,onPreviewReady:S,editModeChange:Z,packagePicker:j,message:{sectionAlreadyInstalled:s,newPageAdded:u,cannotDeleteSection:t},confirmation:{sectionDelete:y,premiumTPADelete:v,deletePageContainsPremiumTpa:w,deleteContainerContainsPremiumTpa:x,addEcom:z},compPanels:{tpaSettings:h,appMarketPanel:i},compModals:{tpaSettingsModal:m,appMarketAppModal:k,appMarketPermissionsModal:l,appMarketModal:n},superApps:B,dashboardApps:D,gfpp:E,getEditorAPI:ca,editorTPAHandlers:I,appMarketUtils:J,settings:L,appMarketTabService:g,appMarketHandlers:K}});