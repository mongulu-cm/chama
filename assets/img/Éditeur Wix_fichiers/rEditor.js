define("rEditor/app/panelHelpers",["lodash","util","core","experiment"],function(a,b,c,d){"use strict";function i(){return(h++).toString()}function j(c){var d=a.map(c.items,function(a){var c=a.link;return{id:i(),data:a,linkText:c?b.link.getLinkValueAsString(this,c,!0):""}},this);return d}function k(a,b){a&&a(b)}function l(a,b){var c=this.selection.getSelectedComponentData();return{imageDatas:j.call(this,c),isPreset:c.metaData.isPreset,imagesChanged:k.bind(this,b),createImageDataItem:this.data.createItem.bind(null,"Image"),galleryType:a}}function m(a,b){n.call(this,a)?b&&this.panelManager.updatePanelProps(a,b):this.panelManager.openPanel(a,b)}function n(b){var c=this.panelManager.getOpenPanels();return a.some(c,{name:b})}function o(){return d.isOpen("popups")?"rEditor.panels.pagesAndPopupsPanel":this.isMobileEditor()?"rEditor.panels.pagesPanelMobile":"rEditor.panels.pagesPanel"}function p(b,c,e){var f=b.userPreferences.site.get(c.DONT_SHOW_AGAIN_KEY),h=a.includes(g.FORBIDDEN_COMP_TYPES,e),i=d.isOpen("popups")?b.pages.popupPages.isPopupOpened():!1;return f||h||i}var e="panels.focusPanels.organizeImagesPanel",f="panels.focusPanels.aviaryPanel",g={NOTIFICATION_RATE:10,FORBIDDEN_COMP_TYPES:["wysiwyg.common.components.anchor.viewer.Anchor","mobile.core.components.Page"],DESKTOP:{DONT_SHOW_AGAIN_KEY:c.constants.USER_PREFS.OUT_OF_GRID.DESKTOP.OUT_OF_GRID_DONT_SHOW_AGAIN,OUT_OF_GRID_COUNT_KEY:c.constants.USER_PREFS.OUT_OF_GRID.DESKTOP.OUT_OF_GRID_COUNT,PANEL_NAME:"panels.focusPanels.outOfGridDesktopPanel"},MOBILE:{DONT_SHOW_AGAIN_KEY:c.constants.USER_PREFS.OUT_OF_GRID.MOBILE.OUT_OF_GRID_DONT_SHOW_AGAIN,OUT_OF_GRID_COUNT_KEY:c.constants.USER_PREFS.OUT_OF_GRID.MOBILE.OUT_OF_GRID_COUNT,PANEL_NAME:"panels.focusPanels.outOfGridMobilePanel"},CONTAINER:{DONT_SHOW_AGAIN_KEY:c.constants.USER_PREFS.OUT_OF_GRID.CONTAINER.OUT_OF_GRID_DONT_SHOW_AGAIN,OUT_OF_GRID_COUNT_KEY:c.constants.USER_PREFS.OUT_OF_GRID.CONTAINER.OUT_OF_GRID_COUNT,PANEL_NAME:"panels.focusPanels.outOfContainerGridPanel"}},h=0;return{openOrganizeImagesPanel:function(a){this.panelManager.openPanel(e,l.call(this,"images",a),!0)},openOrganizeSocialIconsPanel:function(a){this.panelManager.openPanel(e,l.call(this,"socialIcons",a))},openAviaryPanel:function(a){this.panelManager.openPanel(f,{imageLink:a,editorAPI:this,onDialogResult:function(){this.panelManager.closePanelByName(f)}.bind(this)},!0)},isPagesPanelOpen:function(){var a=o.call(this);return n.call(this,a)},openPagesPanel:function(a){var b=o.call(this);m.call(this,b,a)},closePagesPanel:function(){var a=o.call(this);this.panelManager.closePanelByName(a)},openMobileElementsPanel:function(a){if(this.isMobileEditor()){var b="mobileEditor.mobileElementsPanel",d=(new Date).getTime();a=a||{},a.key=c.lazyComponent.isLoaded(b)?b+d:b+"loading",m.call(this,b,a,"leftPanelFrame")}},openCompOutOfGridPanel:function(a,b){var c;c=b?g.CONTAINER:this.isMobileEditor()?g.MOBILE:g.DESKTOP;var d=this.components.getType(this.selection.getSelectedComponents());if(!p(this,c,d)){var e=this.userPreferences.session.get(c.OUT_OF_GRID_COUNT_KEY)||0;e%g.NOTIFICATION_RATE===0&&this.panelManager.openPanel(c.PANEL_NAME,a,!0),e+=1,this.userPreferences.session.set(c.OUT_OF_GRID_COUNT_KEY,e)}},openDragToHeaderPanel:function(a){var b=this.userPreferences.site.get(c.constants.USER_PREFS.DRAG_TO_HEADER.DONT_SHOW_AGAIN);if(!b){var d=this.userPreferences.session.get(c.constants.USER_PREFS.DRAG_TO_HEADER.DRAG_COUNT)||0;d%10===0&&this.panelManager.openPanel("panels.focusPanels.dragToHeaderPanel",a),d+=1,this.userPreferences.session.set(c.constants.USER_PREFS.DRAG_TO_HEADER.DRAG_COUNT,d)}},openPinModeSizeRestrictionPanel:function(a){var b=this.userPreferences.site.get(c.constants.PANELS.PIN_TOO_BIG.PIN_TOO_BIG_DONT_SHOW_AGAIN);b||this.panelManager.openPanel(c.constants.PANELS.PIN_TOO_BIG.PANEL_NAME,a,!0)},openLinkPanel:function(a,c){this.panelManager.openPanel("panels.toolPanels.linkPanel",b.link.getLinkPanelProps(this,a),!c)}}}),define("rEditor/app/updateOperationsPlugins",["lodash"],function(a){"use strict";function b(){var b=arguments;a.forEach(this.list,function(a){a.apply(this,b)})}return{setHomePagePlugins:{list:[],run:b},updatePagePlugins:{list:[],run:b}}}),define("rEditor/app/componentsPlugins",["lodash","util","core","gfppData","constants","experiment"],function(a,b,c,d,e,f){"use strict";function g(g){function i(b){var c=a(b).filter(function(b){var c=g.components.properties.get(b);return a.get(c,"isHidden")}).map("id").value();g.documentMode.ignoreComponentsHiddenProperty(c)}var h=g.pluginService;h.registerPlugin(h.pluginConstants.DOUBLE_CLICK,"wysiwyg.viewer.components.WRichText",function(){g.isMobileEditor()?g.openComponentPanel(c.constants.componentPanels.settings):f.isOpen("newCK")&&!g.text.isEditorReady()||(g.bi.event(c.bi.events.textControls.Text_Panel_opened,{origin:c.constants.USER_ACTIONS.ORIGIN.DOUBLE_CLICK}),g.text.startEditing())}),h.registerPlugin(h.pluginConstants.DOUBLE_CLICK,"wysiwyg.viewer.components.SiteButton",function(b,e){if(!g.isMobileEditor()){var f=d.getComponentMainActionClick(g,e.comp);a.isFunction(f)&&f(g,e.comp,c.constants.USER_ACTIONS.ORIGIN.DOUBLE_CLICK)}}),h.registerPlugin(h.pluginConstants.DOUBLE_CLICK,c.constants.MULTISELECT.TYPE,a.noop),h.registerPlugin(h.pluginConstants.DOUBLE_CLICK,"mobile.core.components.Page",function(a,b){var d=g.siteSegments.getPagesContainerAbsLayout(),h=b.evt.pageX<d.x||b.evt.pageX>d.x+d.width,i=b.comp[0];return f.isOpen("popups")&&g.pages.popupPages.isPopup(i.id)?void g.panelManager.openPanel(e.COMP_PANELS.POPUP.OVERLAY.SETTINGS_PANEL.NAME):h?void g.panelManager.openPanel("rEditor.panels.backgroundPanel"):void g.openComponentPanel(c.constants.componentPanels.design)}),g.registerCompNamePlugin("wysiwyg.viewer.components.HoverBox",function(c){if(!f.isOpen("se_hoverBox"))return b.translate("component_label_HoverBox");for(var d=g.components.modes.getTypes(),e=a.filter(g.components.modes.getModes(c),"type",d.HOVER),h=g.components.modes.getComponentActiveModeIds(c),i=0;i<e.length;i++)if(h[e[i].modeId])return b.translate("component_label_hover_box_onhover");return b.translate("component_label_hover_box")}),h.registerPlugin("selection","*",i),h.registerPlugin("propertiesChange","*",i)}return{register:g}}),define("rEditor/app/APISectionsPlugins/historyPlugins",["constants"],function(a){"use strict";function b(b){var c=b.pluginService;c.registerPlugin(a.R_EDITOR.HISTORY.REDO,a.DS_ACTIONS.ADD_PAGE,function(a,c){a.nextPage&&a.nextPage!==b.pages.getFocusedPageId()?b.pages.navigateTo(a.nextPage,c):c()})}return{register:b}}),define("rEditor/app/updateOperationsPlugins/siteSeoUpdateOperationPlugin",["rEditor/app/updateOperationsPlugins"],function(a){"use strict";function b(a,b){b=b&&b.replace(/^#/,"")||a.homePage.get();var c=a.pages.data.get(b);return{name:c.pageTitleSEO,description:c.descriptionSEO,keywords:c.metaKeywordsSEO}}function c(a,b){a.site.setSEOSiteName(b.name),a.site.setSEOSiteDescription(b.description),a.site.setSEOSiteKeywords(b.keywords)}return{register:function(){a.setHomePagePlugins.list.push(function(a,d){c(a,b(a,d))}),a.updatePagePlugins.list.push(function(a,d){var e=d===a.homePage.get();e&&c(a,b(a,d))})}}}),define("rEditor/app/pluginsRegistrar",["rEditor/app/componentsPlugins","rEditor/app/APISectionsPlugins/historyPlugins","rEditor/app/updateOperationsPlugins/siteSeoUpdateOperationPlugin"],function(a,b,c){"use strict";return{register:function(d){a.register(d),b.register(d),c.register()}}}),define("rEditor/app/APISections/concurrentUsersWrapper",["lodash","jquery","util","panels"],function(a,b,c,d){"use strict";function m(){j&&(clearTimeout(j),j=null),i=null,k=!1}function n(){k||(k=!0,o(this,!0))}function o(a,b){p(a)?j=q(a)?setTimeout(function(){o(a,b)},h):setTimeout(function(){var c=r.bind(null,a,b);u(a,c)},b?0:h):m()}function p(b){var d=b.generalInfo.getUserInfo(),e=c.cookie.getCookie("wixClient");return d&&d.name&&a.includes(e,d.name)}function q(a){return a.generalInfo.isFirstSave()}function r(b,c,f){if(c&&null===l&&(l=a.isEmpty(f)),!a.isEmpty(f)&&!t(i,f)){var g=s(i,f);i=f;var h={isFirstUser:l,concurrentUsers:f,concurrentUserToDisplay:g};d.panelManager.openPanel(e,h)}o(b,!1)}function s(b,c){var d={};a.forEach(b,function(a){d[a]=d});var e=null;return a.forEach(c,function(a){return d[a]?void 0:(e=a,!1)}),e}function t(b,c){if(b===c)return!0;if(b&&!c||!b&&c||a.size(b)<a.size(c))return!1;var d={},e=b.length;return a.forEach(b,function(a){d[a]=a}),a.forEach(c,function(a){d[a]=a}),e===a.size(d)}function u(a,b){if(b){var d=a.generalInfo.getMetaSiteId(),e=c.editorModel.editorSessionId;v(d,e,b)}}function v(a,c,d){var e=null,f=g({msid:a,esi:c});b.get(f).done(function(a){a&&(e=a.otherUsersOnSite||null),d(e)}).fail(function(){d(e)})}var e="panels.messagePanels.concurrentUserPanel",f="http://editor."+c.serviceTopology.baseDomain+"/concurrent-editing-session-watcher/watcher/report",g=a.template(f+"?msid=<%= msid %>&esi=<%= esi %>"),h=6e4,i=null,j=null,k=!1,l=null;return{concurrentUsers:{checkForConcurrentUsers:n,stopCheckForConcurrentUsers:m}}}),define("rEditor/app/APISections/themeWrapper",["lodash"],function(a){"use strict";return{theme:{colors:{get:function(b){return a.includes(b,"color")?this.documentServices.theme.colors.get(b):b}},styles:{getExcludedList:function(){return this.theme.styles.excludedList||[]},setExcluded:function(a){var b=this.theme.styles;b.excludedList||(b.excludedList=[]),b.excludedList.push(a)},update:function(b,c,d){this.updateHooks&&a.forEach(this.updateHooks,function(a){a(b,c)}),this.documentServices.theme.styles.update(b,c),d||this.history.debouncedAdd("Update component style")},getAllIds:function(){var b=this.documentServices.theme.styles;return a.difference(b.getAllIds(),this.theme.styles.getExcludedList())},registerHook:function(a){this.updateHooks=this.updateHooks||[],this.updateHooks.push(a)}}}}}),define("rEditor/bi/events.json",[],function(){return{QUALAROO_DUMMY_EVENT:{evid:9,fields:{testField:"testValue"}},UPGRADE_EVENT:{evid:519,fields:{origin:"string"}},AUTOSAVE_TEST:{src:42,endpoint:"ugc-viewer",evid:362,fields:{type:"string",uuid:"guid"}}}}),define("rEditor/app/APISections/historyWrapper",["lodash","constants","util","experiment","rEditor/bi/events.json"],function(a,b,c,d,e){"use strict";function g(){a.forEach(f,this.panelManager.closePanelByName)}function h(a,b){d.isOpen("autosaveEvents")&&a.bi.event(e.AUTOSAVE_TEST,{type:b,uuid:c.editorModel.permissionsInfo.loggedInUserId})}function i(b,c){a.assign(c,{isSameEditorMode:c.isMobileEditor===this.isMobileEditor(),selectedComps:this.selection.getSelectedComponents()}),g.call(this),this.selection.deselectComponents(),this.setEditorMode(c.isMobileEditor,!0),b.call(this.documentServices.history);var d=this;this.waitForChangesApplied(function(){c.postAction?c.postAction(c,j.bind(d,c)):j.call(d,c),h(d,b===d.documentServices.history.undo?"undo":"redo")})}function j(b){var c=a.filter(b.selectedComps,this.components.is.exist,this);if(!a.isEmpty(c)){var e=this.components.getPage(c),f=this.pages.getFocusedPageId(),g=[f];d.isOpen("popups")&&this.pages.popupPages.isPopupOpened()||g.push(this.pages.getMasterPageId()),b.isSameEditorMode&&a.includes(g,e.id)&&this.selection.selectComponentByCompRef(c)}}function k(a,c,d){var e=d.pluginService.getPlugin(c,a.actionType);if(c===b.R_EDITOR.HISTORY.REDO)switch(a.actionType){case b.DS_ACTIONS.ADD_PAGE:a.postAction=e}return a}var f=["panels.toolPanels.colorPicker.colorPickerPanel","rEditor.panels.backgroundApplyPanel","compPanels.dynamicPanels.pinnedDockPanel","rEditor.panels.slideShowBgApplyPanel"];return{history:{add:function(b,c){d.isOpen("rulers")&&this.rulers.resetRulersHistory();var e=this.isMobileEditor();c=a.defaults(c||{},{label:b,currentPage:this.pages.getFocusedPageId(),isMobileEditor:e}),this.documentServices.history.add(b,c),h(this,"action")},debouncedAdd:function(b){this.history._debouncedAdd||(this.history._debouncedAdd=a.debounce(this.history.add,500)),this.history._debouncedAdd(b)},undo:function(){var a=d.isOpen("rulers");return a&&this.rulers.canUndo()?void this.rulers.undo():void this.waitForChangesApplied(function(){if(this.text.isEditingText())return a&&this.text.canUndo()&&this.rulers.resetRulersHistory(),void this.text.undo();var b=this.documentServices.history;if(b.canUndo()){a&&this.rulers.resetRulersHistory();var c=b.getUndoLastSnapshotParams();c.currentPage===this.documentServices.pages.getFocusedPageId()?i.call(this,b.undo,c):this.pages.navigateTo(c.currentPage,i.bind(this,b.undo,c))}}.bind(this))},redo:function(){return d.isOpen("rulers")&&this.rulers.canRedo()?void this.rulers.redo():void this.waitForChangesApplied(function(){var a,c;return this.text.isEditingText()?void this.text.redo():(a=this.documentServices.history,void(a.canRedo()&&(c=a.getRedoLastSnapshotParams(),c=k(c,b.R_EDITOR.HISTORY.REDO,this),c.currentPage===this.documentServices.pages.getFocusedPageId()?i.call(this,a.redo,c):this.pages.navigateTo(c.currentPage,i.bind(this,a.redo,c)))))}.bind(this))}}}}),define("rEditor/app/APISections/imageCrop",["lodash","core","util"],function(a,b,c){"use strict";function g(a,b){var c=d.getMiddlePoint(a);return d.getPointRatioFromRect(c,b)}function h(a,b,c){var d=g(a,b);return{x:c.width*d.x,y:c.height*d.y}}function i(b,c,e){var f=a.clone(c),g=a.clone(e),i=d.getMiddlePoint(e),j=h(e,b,f),k={x:j.x-i.x,y:j.y-i.y};return g.x+=k.x,g.y+=k.y,f.x-=k.x,f.y-=k.y,{originArea:f,area:g}}function j(a,b,c){var e=a/d.getAreaRatioPercentage(b,c);return d.getResizedByRatio(b,e)}function k(b){return{cropOriginArea:b,cropArea:a(b).pick(["height","width"]).assign({x:0,y:0}).value()}}function l(a,b){var c=e.reverseAutoCrop(a,b.crop),d=e.reverseManualCrop(c,b.crop,b),f=e.reverseAutoCrop(d,b),g=e.manualCrop(f,b.crop,b);return g=e.autoCrop(g,a),{cropOriginArea:f,cropArea:g}}function m(a,b){var c=e.reverseManualCrop(a,b.crop,b),d=e.manualCrop(c,b.crop,b);return{cropOriginArea:c,cropArea:d}}function n(b,c){var d=e.reverseAutoCrop(b,c),f=a.assign({},d,{x:0,y:0});return f=e.autoCrop(f,a.pick(b,["height","width"])),{cropOriginArea:d,cropArea:f}}function o(a){var b={x:0,y:0,width:this.site.getSiteWidth(),height:this.site.getHeight()};return{cropArea:e.ensure.areaWithinViewport(b,a),cropOriginArea:a.cropOriginArea}}function p(b){var c=this.components.data.get(b),d=this.components.properties.get(b).displayMode,e=this.components.layout.get(b).rotationInDegrees,g=d===f.fittingTypes.SCALE_TO_FILL,h=a.pick(this.components.layout.getRelativeToScreen(b),["height","width","x","y"]),i={};i=c.crop||g?!c.crop&&g?n(h,c):c.crop&&!g?m(h,c):l(h,c):k(h);var j=q(i.cropArea,i.cropOriginArea,e);return a.assign(i.cropOriginArea,j),i=o.call(this,i)}function q(b,e,f){var g=a.clone(b);g.x+=e.x,g.y+=e.y;var h=c.math.getPointAsIfRectWasNotRotated(g,d.getMiddlePoint(e),-f);return{x:h.x-e.width/2,y:h.y-e.height/2}}function r(){return this.editor.state.imageCrop.isOn}function s(b){var d=c.imageTransform.fittingTypes,e=d.SCALE_TO_FILL,f=d.STRETCH,g=this.components.properties.get(b).displayMode;a.includes([e,f],g)||this.components.properties.update(b,{displayMode:e})}function t(d,e){var f,g,h=this.editor.state.imageCrop,i=this.editor.state.selectedComponents;i&&(h.isOn="undefined"==typeof d?!h.isOn:d,h.isOn?(s.call(this,i),f=p.call(this,i),this.bi.event(b.bi.events.imageCrop.Open_crop_mode,{fixed_layout:!1}),g=c.keyboardShortcuts.CONTEXTS.IMAGE_CROP):(f={cropArea:null,cropOriginArea:null},g=c.keyboardShortcuts.CONTEXTS.EDITOR),a.assign(h,f),e=e||a.noop,c.keyboardShortcuts.setContext(g),h.isOn?D.call(this,h,e):this.editor.setState({imageCrop:h},e))}function u(){return a.clone(this.editor.state.imageCrop.cropArea)}function v(){return a.clone(this.editor.state.imageCrop.cropOriginArea)}function w(a){var b=this.components.get.byId("PAGES_CONTAINER"),c=this.components.layout.getRelativeToScreen(b),d=this.components.getContainer(a),e=this.components.layout.getRelativeToScreen(d);return(this.components.is.fullWidth(d)||this.components.isShowOnAllPages(a))&&(e.x+=c.x),e}function x(b,e,f){var g=d.getMiddlePoint(b),h=a.assign({},e,{x:0,y:0}),i=c.math.getPointAsIfRectWasNotRotated(h,g,-f);return{x:i.x-b.width/2,y:i.y-b.height/2}}function y(b,c){var d=this.editor.state.selectedComponents,e=this.editor.state.imageCrop,f=e.cropOriginArea,g=e.cropArea,h=this.components.layout.get(d).rotationInDegrees,i=b?{x:0,y:0}:w.call(this,d);if(!e)return null;var j=c?g:x(g,f,h);return a(g).pick(["height","width"]).assign({x:j.x+f.x-i.x,y:j.y+f.y-i.y}).value()}function z(b){return a(b).pick(["x","y","width","height"]).mapValues(Math.round).value()}function A(b,c){var d=a.cloneDeep(b);d.cropArea=z(b.cropArea),d.cropOriginArea=z(b.cropOriginArea),c=c||a.noop,this.editor.setState({imageCrop:d},c)}function B(b,c){var d=a.assign({},this.editor.state.imageCrop,{cropOriginArea:b});A.call(this,d,c)}function C(b,c){var d=a.assign({},this.editor.state.imageCrop,{cropArea:b});A.call(this,d,c)}function D(b,c){var d=a.assign({},this.editor.state.imageCrop,b);A.call(this,d,c)}function E(){var b=this.editor.state.selectedComponents,c=this.components.data.get(b),e=this.components.layout.get(b).fixedPosition,f=this.imageCrop.getCropArea(),g=this.imageCrop.getCropOriginArea(),h=this.imageCrop.getCropAreaFinalPosition(e),i={width:g.width/c.width,height:g.height/c.height},j=a.mapValues({x:f.x/i.width,y:f.y/i.height,height:f.height/i.height,width:f.width/i.width},Math.round),k=d.areRectsTheSameSize(c,j)&&0===j.x&&0===j.y;k&&c.crop?this.components.data.update(b,{crop:null}):k||this.components.data.update(b,{crop:j}),this.components.layout.update(b,h)}function F(a,b,e){var f=d.getMiddlePoint(a),g=d.getMiddlePoint(b),h={x:g.x-f.x,y:g.y-f.y},i=c.math.degToRad(e),j=c.math.rotateVectorAround(h,i);return{x:c.math.roundToNearestHalf(j.x-h.x),y:c.math.roundToNearestHalf(j.y-h.y)}}function G(b,c){var g=this.components.data.get(b),h=this.components.layout.get(b),k=h.rotationInDegrees,l=this.components.properties.get(b).displayMode,m=this.imageCrop.getCropOriginArea(),n=this.imageCrop.getCropArea(),o=d.getAspectRatio(h),p=a.assign({},g,{height:g.width*o}),q=l===f.fittingTypes.STRETCH?p:g,r=d.getRectMinDimensionsByContainedInnerRect(q,n),s=j(c,m,g);s=e.ensure.scaleWithinDimensions(s,n,r);var t=i(m,s,n),u=e.ensure.areaIsFullyContained(t.originArea,t.area),v=F(m,u.originArea,k);return u.originArea.x+=v.x,u.originArea.y+=v.y,u}function H(a){return G.call(this,a,100)}function I(){var a=this.imageCrop.getCropOriginArea(),b=this.imageCrop.getCropArea(),c=Math.min(b.width,b.height);return b.height=c,b.width=c,{area:b,originArea:a}}function J(){var b=v.call(this),c=d.getAspectRatio(b),e=u.call(this),f=this.imageCrop.getCropAreaFinalPosition(!0),g=d.getRectMinDimensionsByContainedInnerRect(b,f),h=e.height>e.width?{height:g.height,width:g.height/c}:{width:g.width,height:g.width*c};return{area:a.assign({},h,{x:0,y:0}),originArea:a.assign({},f,h)}}var d=c.math.rect,e=c.imageCrop,f=c.imageTransform;return{imageCrop:{isCropMode:r,toggleCropMode:t,getCropArea:u,getCropOriginArea:v,getCropAreaFinalPosition:y,setCropOriginArea:B,setCropArea:C,setCropData:D,updateCrop:E,getNewCropStateByPercentageFromOriginalImage:G,quickActions:{getNewCropStateForHundredPercent:H,getNewCropStateForSquare:I,getNewCropStateResetCrop:J}}}}),define("rEditor/app/APISections/siteWrapper",["core","util"],function(a,b){"use strict";function c(a,c){var d=b.url;return c.forEach(function(b){var c=d.getParameterByName(b);a=c?d.setUrlParam(a,b,c):a}),a}return{site:{getCurrentSiteDomain:function(){var a=window.location.hostname,b=a.match(/editor\.(.*)/);return b?"www."+b[1]:"www.wix.com"},getSEOSiteName:function(){return this.documentServices.seo.title.get()},setSEOSiteName:function(a){return this.documentServices.seo.title.set(a)},getSEOSiteDescription:function(){return this.documentServices.seo.description.get()},setSEOSiteDescription:function(a){return this.documentServices.seo.description.set(a)},getSEOSiteKeywords:function(){return this.documentServices.seo.keywords.get()},setSEOSiteKeywords:function(a){return this.documentServices.seo.keywords.set(a)},getMetaSiteId:function(){return this.documentServices.generalInfo.getMetaSiteId()},isPremium:function(){return this.documentServices&&this.documentServices.premiumFeatures&&this.documentServices.premiumFeatures.get().length>0},getXPos:function(){return this.components.layout.getRelativeToScreen(this.siteSegments.getPagesContainer()).x},getSiteDomainInfo:function(b,c){var d=this.documentServices.generalInfo.getMetaSiteId();a.premiumServicesAPI.getSiteDomainInfo(d,b,c)},getSitePremiumPackage:function(){return this.editor.state.site.premiumPackage||-1},getSitePublicUrl:function(){var a=this.generalInfo.getPublicUrl()||this.domain.getFreeDomainPrefix()+this.siteName.get();return c(a,["ReactSource","experiments","experimentsoff"])},getSiteWidth:function(){var a=document.getElementById("preview").getBoundingClientRect();return a.width}}}}),define("rEditor/app/APISections/domainWrapper",["lodash","util"],function(a,b){"use strict";function c(){return this.generalInfo.urlFormat.isSlash()?"wixwebsite.com":"wix.com"}return{domain:{isDomainConnected:function(){var b=this.generalInfo.getPublicUrl();return null!==b&&void 0!==b&&!a.includes(b,c.call(this))},getFreeDomainPrefix:function(){return"http://"+this.generalInfo.getUserInfo().name+"."+c.call(this)+"/"},doesUserOwnGoogleDomain:function(){var a=b.cookie.getCookie("wixClient");return a.indexOf("GOOGLE_DOMAIN")>0||a.indexOf("REGRU")>0}}}}),define("rEditor/app/APISections/developerMode",["core","lodash"],function(a,b){"use strict";function c(){var b=!d.call(this),c={developerModeEnabled:b,developerToolBarEnabled:b};this.userPreferences.site.set(a.constants.USER_PREFS.VIEW_TOOLS.DEVELOPER_MODE_ENABLED,b),this.userPreferences.site.set(a.constants.USER_PREFS.VIEW_TOOLS.DEVELOPER_TOOLBAR_ENABLED,b),b&&this.editor.state.viewTools.toolbarEnabled&&(c.toolbarEnabled=!1),b&&!this.userPreferences.site.get(a.constants.USER_PREFS.DEVELOPER_MODE.FIRST_TIME)&&(this.panelManager.openPanel("wixCode.panels.developerWelcomePanel"),this.userPreferences.site.set(a.constants.USER_PREFS.DEVELOPER_MODE.FIRST_TIME,!0)),this.updateEditorViewTools(c)}function d(){var a=this.getViewTools();return a?a.developerModeEnabled:!1}function e(a,b){return{type:a,data:b}}function f(a){var b=this.editor.state.devModeContext;this.editor.setState({devModeContext:a}),g.call(this,b,a)}function g(b,c){b&&b.type===c.type||(c.type===a.constants.DEVELOPER_MODE.CONTEXT_TYPES.PAGE?l.call(this):i.call(this,"top"))}function h(){var b=this.editor.state.devModeContext;if(b.type===a.constants.DEVELOPER_MODE.CONTEXT_TYPES.PAGE){var c=this.pages.getFocusedPageId();b=e(a.constants.DEVELOPER_MODE.CONTEXT_TYPES.PAGE,{id:this.pages.getFocusedPageId(),displayName:this.pages.getPageTitle(c)})}return b}function i(a){this.editor.getIdeSplitter().collapse(a)}function j(a){this.editor.getIdeSplitter().unCollapse(a)}function k(a){this.editor.getIdeSplitter().toggleCollapse(a)}function l(){this.editor.getIdeSplitter().unCollapse()}function m(a){return this.editor.getIdeSplitter().isCollapsed(a)}function n(){return m.call(this,"top")?a.constants.DEVELOPER_MODE.IDE_CONTAINER_STATES.MAXIMIZED:m.call(this,"bottom")?a.constants.DEVELOPER_MODE.IDE_CONTAINER_STATES.MINIMIZED:a.constants.DEVELOPER_MODE.IDE_CONTAINER_STATES.CUSTOM}var o={createContext:e,setContext:f,getContext:h,isEnabled:d,toggle:c,ui:{idePane:{maximize:b.partial(i,"top"),unMaximize:b.partial(j,"top"),toggleMaximize:b.partial(k,"top"),minimize:b.partial(i,"bottom"),unMinimize:b.partial(j,"bottom"),toggleMinimize:b.partial(k,"bottom"),revertSize:l,getState:n}}};return{developerMode:o}}),define("rEditor/app/APISections/selectedComponent",["lodash","pLoader!santa:utils"],function(a,b){"use strict";var c=function(a){var b=this.components.layout.get(a),c=!b.fixedPosition;return this.components.layout.setFixed(a,c),c};return{selectedComponent:{sendSelectedComponentBI:function(b,c){var d=this.selection.getSelectedComponents();if(b&&d){var e=this.getComponentType(d),f={component_id:a.first(d).id,component_type:e};c&&a.merge(f,c),this.bi.event(b,f)}},copy:function(){return this.components.copy(this.selection.getSelectedComponents())},duplicate:function(){return this.components.duplicate(this.selection.getSelectedComponents())},cut:function(){var a=this.selection.getSelectedComponents();return this.selection.isComponentSelected()&&this.components.cut(a),a},remove:function(a){var b=this.selection.getSelectedComponents();return this.selection.isComponentSelected()&&this.components.remove(b,a),b},copyStyle:function(){b.log.info("copyStyle")},pasteStyle:function(){b.log.info("pasteStyle")},lock:function(){b.log.info("lock")},toggleFixedPosition:function(){var a=this.selection.getSelectedComponents();return a&&this.components.layout.canBeFixedPosition(a)?c.call(this,a):!1},togglePin:function(){var a=this.selection.getSelectedComponents();return a?c.call(this,a):!1}}}}),define("rEditor/app/APISections/savePublishWrapper",["lodash","core","util","pLoader!santa:utils"],function(a,b,c,d){"use strict";function f(){this.userPreferences.loadSitePreferences(this.documentServices.generalInfo.getSiteId(),!0),this.leftBar.collapseMenu()}function g(a){try{return JSON.stringify(a)}catch(b){return"Failed to stringify save error info"}}function h(c,d,e){var f=a.keys(d),g=a.compact(a.pluck(d,"errorCode")),h=a.compact(a.pluck(d,"errorType")),i={p1:f,p2:h,p3:g};e?c.bi.error(b.bi.errors.FIRST_SAVE_ERROR,i):c.bi.error(b.bi.errors.SAVE_ERROR,i)}function i(a,b){return a?"first":b?"full":"partial"}var e=[f],j=c.newrelic,k=0,l=0;return{savePublish:{save:function(c,d,f,l){function s(){q.duration=a.now()-n,m.bi.event(b.bi.events.save.saveProcess.SUCCESS_SAVE_PROCESS,q),r=a.assign(r,q,{result:"success"}),j.addPageAction("save finish",r),o&&a.forEach(e,function(a){a.call(m)}),c&&(m.isSavedInCurrentSession=!0,c()),m.editor.setState({savingStatus:b.constants.PROGRESS_STATUS.DONE_SUCCESS}),setTimeout(function(){m.editor.setState({savingStatus:b.constants.PROGRESS_STATUS.IDLE})},b.constants.SAVE_PUBLISH.DURATION_TO_SHOW_RESULT)}function t(c){h(m,c,o),r=a.assign(r,{result:"failure",error:g(c)}),j.addPageAction("save finish",r),d&&d(c),m.editor.setState({savingStatus:b.constants.PROGRESS_STATUS.DONE_FAILED}),setTimeout(function(){m.editor.setState({savingStatus:b.constants.PROGRESS_STATUS.IDLE})},b.constants.SAVE_PUBLISH.DURATION_TO_SHOW_RESULT)}var m=this,n=a.now();this.editor.setState({savingStatus:b.constants.PROGRESS_STATUS.IN_PROGRESS});var o=this.documentServices.generalInfo.isFirstSave(),p=i(o,f);m.bi.event(b.bi.events.save.saveProcess.SAVE_CLICK,{origin:l});var q={save_type:p};m.bi.event(b.bi.events.save.saveProcess.START_SAVE_PROCESS,q);var r=a.assign({is_first_save:o,save_count:++k},q);j.addPageAction("save start",a.clone(r)),m.documentServices.save(s,t,f),j.addPageAction("save computed",a.assign(a.clone(r),{duration:a.now()-n}))},saveAsTemplate:function(a,b){function c(a){b&&b(a),d.log.info("Failed saving as template ",a)}function e(){a&&a()}this.documentServices.saveAsTemplate(e,c)},publish:function(c,d){function g(){f.result="success",j.addPageAction("publish finish",f),a.forEach(e.sitePublishedCallbacks,function(a){a()}),c&&c(),e.editor.setState({publishingStatus:b.constants.PROGRESS_STATUS.DONE_SUCCESS}),setTimeout(function(){e.editor.setState({publishingStatus:b.constants.PROGRESS_STATUS.IDLE})},b.constants.SAVE_PUBLISH.DURATION_TO_SHOW_RESULT)}function h(a){f.result="failure",j.addPageAction("publish finish",f),d&&d(a),e.editor.setState({publishingStatus:b.constants.PROGRESS_STATUS.DONE_FAILED}),setTimeout(function(){e.editor.setState({publishingStatus:b.constants.PROGRESS_STATUS.IDLE})},b.constants.SAVE_PUBLISH.DURATION_TO_SHOW_RESULT)}var e=this;this.editor.setState({publishingStatus:b.constants.PROGRESS_STATUS.IN_PROGRESS});var f={publish_count:++l};j.addPageAction("publish start",a.clone(f)),this.documentServices.publish(g,h)},registerFirstSaveCallback:function(a){e.push(a)}}}}),define("rEditor/utils/removeUtil",["lodash","panels","util","core"],function(a,b,c,d){"use strict";function m(a,b,c,d){var e=b.tpa.app.getData(a.applicationId);c.app_id=e.appDefinitionId,c.app_site_id=e.instanceId,c.instance_id=d}function s(b,d,f,g,h,i,j){var k=f[0];e.openPanel("tpa.confirmation.deleteContainerContainsPremiumTpa",{appName:k.appDefinitionName,appDefId:k.appDefinitionId,appCount:f.length,onConfirm:function(e){r(b,d,g,!1,i,j),e.bi.reportBI(c.bi.events.COMPONENT_REMOVED,h),a.forEach(h,function(a){e.bi.event(c.bi.events.REMOVE_COMPONENT_SECOND_STEP_CLICK,a)})}},!0)}var e=b.panelManager,f=function(a){return!!a.tpaApplicationId},g=function(a,b,c){var d=a.app.isPremium(b);return d&&c>1?!0:!d&&c>0},h=function(b,d,h,i,k){var l=d.pages.getReference(i),m=d.pages.data.get(i),n=d.tpa.getPremiumTpaChildrenOnPage(l,m.tpaApplicationId,!0),o=d.wixapps.classics.isBlogPage(i),p=d.components.getTpaChildren(l);o&&(p=p.concat(d.components.getBlogChildren(l)));var q=b.bi.getComponentsBIParams(p);a.forEach(q,function(a){a.removal_method="delete_page"});var r=f(m)&&d.tpa.app.isMultiSectionInstalled(m.tpaApplicationId);if(n.length>0&&!r||r&&g(d.tpa,m.tpaApplicationId,n.length)){var s=m&&m.title||"",t=n[0];e.openPanel("tpa.confirmation.deletePageContainsPremiumTpa",{appName:t.appDefinitionName,appDefId:t.appDefinitionId,appCount:n.length,pageTitle:s,onConfirm:function(){j(b,d,i,m,h,!1,q,k),a.forEach(n,function(a,e){var f={app_id:a.appDefinitionId,app_site_id:a.instanceId,instance_id:p[e].id,is_last_tpa:d.tpa.app.isLastAppComp(a.applicationId)?1:0,component_type:"tpa"};b.bi.event(c.bi.events.REMOVE_COMPONENT_SECOND_STEP_CLICK,f)})}},!0)}else o?e.openPanel("blog.blogDeleteConfirmation",{onConfirm:function(){j(b,d,i,m,h,!1,q,k)}},!0):j(b,d,i,m,h,!0,q,k)},i=function(a,b){a.bi.reportBI(c.bi.events.COMPONENT_REMOVED,b)},j=function(b,c,d,f,g,h,j,l){var m=c.tpa.section.getPageData(d),n=m.hasSection&&g[c.tpa.constants.COMP_TYPES.TPA_SECTION],o=c.wixapps.classics.isBlogPage(d);if(o)g.blog&&g.blog(),b.pages.beforePageRemoveHook(d,function(){a.forEach(c.pages.getPagesData(),function(a){c.wixapps.classics.isBlogPage(a.id)&&(c.pages.remove(a.id),i(b,j))}),l&&l()});else if(n)g[c.tpa.constants.COMP_TYPES.TPA_SECTION](d,m.title,m.appData,h,l,j);else if(h){var p={pageTitle:f.title,onConfirm:k.bind(this,b,c,d,l,j)};e.openPanel("panels.messagePanels.deletePageMessage",p,!0)}else k(b,c,d,l,j)},k=function(a,b,c,d,e){a.pages.beforePageRemoveHook(c,function(){b.pages.remove(c),d&&d(),i(a,e)})},l=function(a,b){a.components.remove(b)},n=function(b,c,f){a.forEach(f,function(a){var f=b.components.getType(a),g=c.mobile.mobileOnlyComponents.isMobileOnlyComponent(a.id)?a.id:f,h=b.components.data.get(a);b.mobile.hiddenComponents.hide(a),c.zoomMode.isInZoomMode()||e.openPanel("mobileEditor.hiddenItemsPanel");var i={current_page_name:b.pages.getFocusedPageId(),component_id:g,origin:"",component_type:f};c.isTpa(f)&&m(h,c,i,a.id),c.bi.event(d.bi.events.mobileEditor.hiddenElements.HIDDEN_ELEMENTS_HIDE,i)})},o=function(b,d,e,f,g,h){var i=a.some(e,b.components.is.container),j=e.length>1;if(b.viewMode.get()===b.viewMode.VIEW_MODES.MOBILE)n(b,f,e),g&&g();else{var k=b.tpa.getPremiumTpaChildren(e),l=a.reject(k,b.tpa.app.hasSections),m=p(b,f,e);if((i||j)&&l.length>0)s(b,d,k,e,m,g,h);else{var o=q(e.length,function(){f.bi.reportBI(c.bi.events.COMPONENT_REMOVED,m)});r(b,d,e,!0,function(){return o(),g?g(arguments):null},h)}}},p=function(b,c,d){var e=b.tpa.getTpaPointersRecursive(d),f=d.concat(e);f=a.uniq(f,"id");var g=c.bi.getComponentsBIParams(f);return g},q=function(a,b){var c=a;return function(){c--,0===c&&b()}},r=function(b,c,d,e,f,g){a.forEach(d,function(a){var d=b.components.getType(a),h=function(){b.components.remove(a,f,g)};c[d]?c[d](a,e,f,h):h()})};return{removePage:h,removeComponent:o,cutComponent:l}}),define("rEditor/utils/multiSelectHandler",["lodash"],function(a){"use strict";return function(){var b=a.toArray(arguments),c=b.shift(),d=b.pop(),e=this.components.asArray(c);return this.multiselect.isMultiselect(e)?d.multiCompHandler.apply(this,[e].concat(b)):d.singleCompHandler.apply(this,[e[0]].concat(b));
}}),define("rEditor/app/APISections/componentsFacade/layoutWrapper",["lodash","experiment","core","util","rEditor/utils/multiSelectHandler"],function(a,b,c,d,e){"use strict";function f(a,b,c){var e=l.call(this,a,b),f=d.layoutUtils.getLayoutRelativeToParentFromRelativeToScreen(this,a,e);this.documentServices.components.layout.update(a,f),c||this.history.debouncedAdd("component - update layout")}function g(a,b,c){var e=d.layoutUtils.getLayoutRelativeToParentFromRelativeToStructure(this,a,b);this.components.layout.update(a,e,c)}function h(a,b,c){var e=d.layoutUtils.getLayoutRelativeToParentFromRelativeToScreen(this,a,b);this.components.layout.updateAndPreserveProportions(a,e,c)}function i(a,b,c){var e=d.layoutUtils.getLayoutRelativeToParentFromRelativeToStructure(this,a,b);this.components.layout.updateAndPreserveProportions(a,e,c)}function j(a,b,c){this.documentServices.components.layout.updateAndPreserveProportions(b,c,!0)}function k(a,b){var d=this.components.layout.get(a);return c.utils.updateLayoutUtil.getLayoutAfterConstraints(this,a,b,d)}function l(a,b){var d=this.components.layout.getRelativeToScreen(a);return c.utils.updateLayoutUtil.getLayoutRelativeToScreenAfterConstraints(this,a,b,d)}function m(c,d,e){var f=!b.isOpen("se_screenWidthOff")&&b.isOpen("exp171"),g=f&&b.isOpen("se_screenWidthEditBox");if(g&&this.components.layout.isHorizontallyStretchedToScreen(c))return d;var h={left:this.components.layout.RESIZE_SIDES.LEFT,right:this.components.layout.RESIZE_SIDES.RIGHT,top:this.components.layout.RESIZE_SIDES.TOP,bottom:this.components.layout.RESIZE_SIDES.BOTTOM},i=a.map(e,function(a,b){return h[b]});return a.difference(d,i)}function n(a){return this.documentServices.components.layout.canBeStretched(a)&&!this.components.layout.isPinned(a)}function o(a,b){var c=d.math.getSquaresIntersection(a,b);return c&&d.math.rect.getAreaRatioPercentage(c,b)}return{get:function(a){return e.call(this,a,{multiCompHandler:this.multiselect.layout.get,singleCompHandler:this.documentServices.components.layout.get})},isRenderedInFixedPosition:function(b){var c=this.components.asArray(b),d=a.every(c,function(a){return this.documentServices.components.layout.isRenderedInFixedPosition(a)},this);return d},isAncestorRenderedInFixedPosition:function(b){var c=this.components.asArray(b),d=a.every(c,function(a){return this.documentServices.components.layout.isAncestorRenderedInFixedPosition(a)},this);return d},isShowOnFixedPosition:function(b){var c=this.components.asArray(b),d=a.every(c,function(a){return this.documentServices.components.layout.isShowOnFixedPosition(a)},this);return d},isHorizontallyStretchedToScreen:function(b){var c=this.components.asArray(b),d=a.every(c,function(a){return this.documentServices.components.layout.isHorizontallyStretchedToScreen(a)},this);return d},isDocked:function(b){var c=this.components.asArray(b),d=a.every(c,function(a){return this.documentServices.components.layout.isDocked(a)},this);return d},unDock:function(a){return e.call(this,a,{multiCompHandler:this.multiselect.layout.unDock,singleCompHandler:this.documentServices.components.layout.unDock})},isRotated:function(b){var c=this.components.asArray(b);return a.every(c,function(a){return this.documentServices.components.layout.isRotated(a)},this)},isPinnedBySerializedLayout:function(b){var c=a.isArray(b)?b:[b];return a.isEmpty(c)?!1:a.every(c,function(b){return!a.isUndefined(b.docked)&&b.fixedPosition},this)},isPinned:function(b){var c=this.components.asArray(b);return a.isEmpty(c)?!1:a.every(c,function(a){var b=this.documentServices.components.layout.get(a);return b.docked=this.documentServices.components.layout.getDock(a),this.components.is.pinnable(a)&&this.components.layout.isPinnedBySerializedLayout(b)},this)},canBeStretched:function(a){return e.call(this,a,{multiCompHandler:this.multiselect.layout.canBeStretched,singleCompHandler:n})},canBeFixedPosition:function(a){return e.call(this,a,{multiCompHandler:this.multiselect.layout.canBeFixedPosition,singleCompHandler:this.documentServices.components.layout.canBeFixedPosition})},getRelativeToScreen:function(a,b){return e.call(this,a,b,{multiCompHandler:this.multiselect.layout.getRelativeToScreen,singleCompHandler:this.documentServices.components.layout.getRelativeToScreen})},getRelativeToScreenConsideringScroll:function(a){return e.call(this,a,{multiCompHandler:this.multiselect.layout.getRelativeToScreenConsideringScroll,singleCompHandler:this.documentServices.components.layout.getRelativeToScreenConsideringScroll})},getRelativeToStructure:function(a){return e.call(this,a,{multiCompHandler:this.multiselect.layout.getRelativeToStructure,singleCompHandler:this.documentServices.components.layout.getRelativeToStructure})},getResizableSides:function(b){return e.call(this,b,{multiCompHandler:this.multiselect.layout.getResizableSides,singleCompHandler:function(c){if(this.editor.state.pinMode)return{};if(this.components.is.group(c))return a.toArray(this.components.layout.RESIZE_SIDES);var d=this.documentServices.components.layout.getResizableSides(c),e=this.components.layout.getDock(c);return e&&(d=m.apply(this,[b,d,e])),d}})},getProportionStructure:function(a,b){return e.call(this,a,b,{multiCompHandler:this.multiselect.layout.getProportionStructure,singleCompHandler:this.documentServices.components.layout.getProportionStructure})},update:function(a,b,c){if(b){var d=k.call(this,a,b);e.call(this,a,d,{multiCompHandler:this.multiselect.layout.update,singleCompHandler:this.documentServices.components.layout.update}),c||this.history.debouncedAdd("component - update layout")}},updateRelativeToStructure:function(a,b,c){e.call(this,a,b,c,{multiCompHandler:this.multiselect.layout.updateRelativeToStructure,singleCompHandler:g})},updateRelativeToScreen:function(a,b,c){e.call(this,a,b,c,{multiCompHandler:this.multiselect.layout.updateRelativeToScreen,singleCompHandler:f})},updateRelativeToStructureAndPreserveProportions:function(a,b,c){e.call(this,a,b,c,{multiCompHandler:this.multiselect.layout.updateRelativeToStructureAndPreserveProportions,singleCompHandler:i})},updateRelativeToScreenAndPreserveProportions:function(a,b,c,d){e.call(this,a,b,c,d,{multiCompHandler:this.multiselect.layout.updateRelativeToScreenAndPreserveProportions,singleCompHandler:h})},updateAndPreserveProportions:function(a,b,c){e.call(this,a,b,c,{multiCompHandler:this.multiselect.layout.updateAndPreserveProportions,singleCompHandler:j})},updateAndAdjustLayout:function(a,b,c){var d=k.call(this,a,b),f=e.call(this,a,d,{multiCompHandler:this.multiselect.layout.updateAndAdjustLayout,singleCompHandler:this.documentServices.components.layout.updateAndAdjustLayout});return c||this.history.debouncedAdd("component - update layout"),f},updateRelativeToStructureAndAdjustLayout:function(a,b,c){var e=d.layoutUtils.getLayoutRelativeToParentFromRelativeToStructure(this,a,b);return this.components.layout.updateAndAdjustLayout(a,e,c)},updateRelativeToScreenAndAdjustLayout:function(a,b,c){var e=d.layoutUtils.getLayoutRelativeToParentFromRelativeToScreen(this,a,b);return this.components.layout.updateAndAdjustLayout(a,e,c)},setFixed:function(a,b){return e.call(this,this,a,b,{multiCompHandler:this.multiselect.layout.setFixed,singleCompHandler:c.utils.fixedPositionUtils.setFixedPosition})},isStretchedToScreen:function(a){return e.call(this,a,{multiCompHandler:this.multiselect.layout.isStretchedToScreen,singleCompHandler:this.documentServices.components.layout.isHorizontallyStretchedToScreen})},setDock:function(a,b){return e.call(this,a,b,{multiCompHandler:this.multiselect.layout.setDock,singleCompHandler:this.documentServices.components.layout.setDock})},getDock:function(a){return e.call(this,a,{multiCompHandler:this.multiselect.layout.getDock,singleCompHandler:this.documentServices.components.layout.getDock})},updateDock:function(a,b){return e.call(this,a,b,{multiCompHandler:this.multiselect.layout.updateDock,singleCompHandler:this.documentServices.components.layout.updateDock})},updateAspectRatio:function(a){return e.call(this,a,{multiCompHandler:this.multiselect.layout.updateAspectRatio,singleCompHandler:this.documentServices.components.layout.updateAspectRatio})},removeAspectRatio:function(a){return e.call(this,a,{multiCompHandler:this.multiselect.layout.removeAspectRatio,singleCompHandler:this.documentServices.components.layout.removeAspectRatio})},isAspectRatioOn:function(b){var c=this.components.asArray(b);return a.every(c,function(a){return this.documentServices.components.layout.isAspectRatioOn(a)},this)},isCompOutOfPageBounds:function(a){var b=this.components.layout.getRelativeToScreen(a),d=this.components.layout.getRelativeToScreen(this.siteSegments.getPagesContainer()),e=this.isMobileEditor()?c.constants.SIZE_LIMITS.MOBILE_DRAG_CONSTRAINT_MARGINS:0,f=d.x+e,g=d.x+d.width-e;return b.x+b.width<=f||b.x>=g},getCompMargin:function(a){var b=this.components.layout.getRelativeToScreen(a),c=this.components.layout.getRelativeToStructure(a),d=b.width-c.width,e=this.site.getSiteX(),f=c.x+e-b.x,g=d-f;return{left:f,right:g}},isCompExceedingContainerMargin:function(b,c){var d=this.components.layout.getRelativeToScreen(c),e=this.components.layout.getCompMargin(c),f=this.components.layout.getRelativeToScreen(b),g=a.assign({},d,{width:e.left}),h=a.assign({},d,{x:d.x+d.width-e.right,width:e.right});return(o(g,f)||0)>10||(o(h,f)||0)>10}}}),define("rEditor/app/APISections/componentsFacade/arrangementFacade",["core"],function(a){"use strict";return{moveForward:function(a){var b=this.components.asArray(a);return this.components.arrangement.canMoveForward(b)?(this.documentServices.components.arrangement.moveForward(b[0]),void this.history.add("component - move forward")):null},moveBackward:function(a){var b=this.components.asArray(a);return this.components.arrangement.canMoveBackward(b)?(this.documentServices.components.arrangement.moveBackward(b[0]),void this.history.add("component - move backward")):null},moveToFront:function(a){var b=this.components.asArray(a);return this.components.arrangement.canMoveForward(b)?(this.documentServices.components.arrangement.moveToFront(b[0]),void this.history.add("component - move to front")):null},moveToBack:function(a){var b=this.components.asArray(a);return this.components.arrangement.canMoveBackward(b)?(this.documentServices.components.arrangement.moveToBack(b[0]),void this.history.add("component - move to back")):null},moveToIndex:function(a,b,c){var d=this.components.asArray(a);this.documentServices.components.arrangement.moveToIndex(d[0],b),c||this.history.add("component - move to index")},canMoveBackward:function(b){var c=this.components.asArray(b);if(this.multiselect.isMultiselect(c))return this.multiselect.arrangement.canMoveBackward(c);var d=this.components.getType(c)===a.constants.COMP_TYPES.ANCHOR;return!d&&this.documentServices.components.arrangement.canMoveBackward(c[0])},canMoveForward:function(b){var c=this.components.asArray(b);if(this.multiselect.isMultiselect(c))return this.multiselect.arrangement.canMoveForward(c);var d=this.components.getType(c)===a.constants.COMP_TYPES.ANCHOR;return!d&&this.documentServices.components.arrangement.canMoveForward(c[0])}}}),define("rEditor/app/APISections/componentsFacade/behaviorsFacade",["rEditor/utils/multiSelectHandler"],function(a){"use strict";return{update:function(b,c,d){return a.call(this,b,c,d,{multiCompHandler:this.multiselect.behaviors.update,singleCompHandler:this.documentServices.components.behaviors.update})},get:function(b){return a.call(this,b,{multiCompHandler:this.multiselect.behaviors.get,singleCompHandler:this.documentServices.components.behaviors.get})},remove:function(b,c,d){return a.call(this,b,c,d,{multiCompHandler:this.multiselect.behaviors.remove,singleCompHandler:this.documentServices.components.behaviors.remove})},removeAll:function(b){return a.call(this,b,{multiCompHandler:this.multiselect.behaviors.removeAll,singleCompHandler:this.documentServices.components.behaviors.removeAll})},previewAnimation:function(b,c,d){return a.call(this,b,c,d,{multiCompHandler:this.multiselect.behaviors.previewAnimation,singleCompHandler:this.documentServices.components.behaviors.previewAnimation})},stopPreviewAnimation:function(b){return a.call(this,b,{multiCompHandler:this.multiselect.behaviors.stopPreviewAnimation,singleCompHandler:this.documentServices.components.behaviors.stopPreviewAnimation})},execute:function(b,c,d,e){return a.call(this,b,c,d,e,{multiCompHandler:this.multiselect.behaviors.execute,singleCompHandler:this.documentServices.components.behaviors.execute})},getRuntimeState:function(b){return a.call(this,b,{multiCompHandler:this.multiselect.behaviors.getRuntimeState,singleCompHandler:this.documentServices.components.behaviors.getRuntimeState})}}}),define("rEditor/componentsMetaData/components/bgImageStrip",[],function(){"use strict";return{pinnable:!1}}),define("rEditor/componentsMetaData/components/fiveGridLine",[],function(){"use strict";return{pinnable:!1}}),define("rEditor/componentsMetaData/components/footer",[],function(){"use strict";return{pinnable:!1}}),define("rEditor/componentsMetaData/components/header",[],function(){"use strict";return{pinnable:!1}}),define("rEditor/componentsMetaData/components/screenWidthContainer",[],function(){"use strict";return{pinnable:!1}}),define("rEditor/componentsMetaData/components/stripShowcase",[],function(){"use strict";return{pinnable:!1}}),define("rEditor/componentsMetaData/components/stripSlideshowGallery",[],function(){"use strict";return{pinnable:!1}}),define("rEditor/componentsMetaData/components/blogComponents",[],function(){"use strict";return{pinnable:!1}}),define("rEditor/componentsMetaData/components/rssButton",[],function(){"use strict";return{pinnable:!1}}),define("rEditor/componentsMetaData/components/tpaGluedWidget",[],function(){"use strict";return{pinnable:!1}}),define("rEditor/componentsMetaData/components/page",[],function(){"use strict";return{pinnable:!1}}),define("rEditor/componentsMetaData/components/boxSlideShow",["baseUI","core","gfppData","experiment"],function(a,b,c,d){"use strict";function h(a,b){var c=e.findCurrentSlide(a,b);return{compType:a.components.getType(c),compRef:c}}function i(a,b){if(d.isOpen("balata")&&d.isOpen("designData")){if(c.utils.isPanelOpen(g)){var i={selectedComponent:[e.findCurrentSlide(a,b)]};a.panelManager.updatePanelProps(g,i)}}else c.utils.findPanel(f,"wysiwyg.viewer.components.BoxSlideShowSlide")&&(a.panelManager.closePanelByName(f),a.panelManager.openComponentPanel(f,h(a,b)))}function j(a,b){a.selection.selectComponentByCompRef(b)}var e=b.utils.boxSlideShowUtils,f="designPanel.designPanel",g="compPanels.panels.BoxSlideShow.backgroundPanel";return{slidesContainer:!0,focusable:!0,focusBoxNavType:a.uiConstants.NAVIGATION_TYPES.PAGINATION,canContain:!1,canContainByStructure:!1,focusBoxNavContent:function(a,b){return{label:"gfpp_action_navigation_label",labelParams:{curr_slide:e.getCurrentSlideIndex(a,b),total_slides:e.getTotalSlidesLength(a,b)},onNext:e.moveNextSlide.bind(null,a,b,i),onPrev:e.movePrevSlide.bind(null,a,b,i),onLabelClick:j.bind(null,a,b)}}}}),define("rEditor/componentsMetaData/components/stripSlideShowMetaData",["baseUI","core","gfppData"],function(a,b,c){"use strict";function f(a,b){if(c.utils.isPanelOpen(e)){var f={selectedComponent:[d.findCurrentSlide(a,b)]};a.panelManager.updatePanelProps(e,f)}}function g(a,b){a.selection.selectComponentByCompRef(b)}var d=b.utils.boxSlideShowUtils,e="compPanels.panels.StripSlideShow.backgroundPanel";return{slidesContainer:!0,focusable:!0,focusBoxNavType:a.uiConstants.NAVIGATION_TYPES.PAGINATION,canContain:!1,canContainByStructure:!1,pinnable:!1,focusBoxNavContent:function(a,b){return{label:"gfpp_action_navigation_label",labelParams:{curr_slide:d.getCurrentSlideIndex(a,b),total_slides:d.getTotalSlidesLength(a,b)},onNext:d.moveNextSlide.bind(null,a,b,f),onPrev:d.movePrevSlide.bind(null,a,b,f),onLabelClick:g.bind(null,a,b)}}}}),define("rEditor/componentsMetaData/components/boxSlideShowSlide",[],function(){"use strict";return{selectable:!1,slideContainer:!0}}),define("rEditor/componentsMetaData/components/stripSlideShowSlide",[],function(){"use strict";return{selectable:!1,slideContainer:!0}}),define("rEditor/componentsMetaData/components/anchor",[],function(){"use strict";return{pinnable:!1}}),define("rEditor/componentsMetaData/components/collage",[],function(){"use strict";return{pinnable:!1}}),define("rEditor/componentsMetaData/components/wRichText",[],function(){"use strict";return{pinnable:!1}}),define("rEditor/componentsMetaData/components/group",[],function(){"use strict";return{pinnable:!1,selectedBeforeDescendants:!0}}),define("rEditor/componentsMetaData/components/stripContainer",[],function(){"use strict";return{pinnable:!1}}),define("rEditor/componentsMetaData/components/stripColumnsContainer",[],function(){"use strict";return{selectedBeforeDescendants:!0}}),define("rEditor/componentsMetaData/components/tpaSection",[],function(){"use strict";return{pinnable:!1}}),define("rEditor/componentsMetaData/components/column",["lodash","baseUI","util"],function(a,b,c){"use strict";function d(a,b){return a.components.getSiblings(b).length}return{showMarginsIndicator:d,focusable:d,focusBoxNavType:b.uiConstants.NAVIGATION_TYPES.TABS,focusBoxNavContent:function(b,d){var e=a.template(c.translate("gfpp_column_navigation_slide_number")),f=b.components.getContainer(d),g=b.components.getChildren(f),h=a.findIndex(g,function(b){return a.isEqual(b,d)});return{tabs:[{label:e({curr_column:h+1}),active:!0}],onTabClick:function(){b.selection.selectComponentByCompRef(d)},translate:!1}},selectable:d,delegateDragToParent:!0}}),define("rEditor/componentsMetaData/components/popupCloseIconButton",[],function(){"use strict";return{duplicatable:!1}}),define("rEditor/componentsMetaData/components/popupCloseTextButton",[],function(){"use strict";return{duplicatable:!1}}),define("rEditor/componentsMetaData/components/popupContainerMetaData",[],function(){"use strict";return{pinnable:!1}}),define("rEditor/componentsMetaData/metaDataMap",["rEditor/componentsMetaData/components/bgImageStrip","rEditor/componentsMetaData/components/fiveGridLine","rEditor/componentsMetaData/components/footer","rEditor/componentsMetaData/components/header","rEditor/componentsMetaData/components/screenWidthContainer","rEditor/componentsMetaData/components/stripShowcase","rEditor/componentsMetaData/components/stripSlideshowGallery","rEditor/componentsMetaData/components/blogComponents","rEditor/componentsMetaData/components/rssButton","rEditor/componentsMetaData/components/tpaGluedWidget","rEditor/componentsMetaData/components/page","rEditor/componentsMetaData/components/boxSlideShow","rEditor/componentsMetaData/components/stripSlideShowMetaData","rEditor/componentsMetaData/components/boxSlideShowSlide","rEditor/componentsMetaData/components/stripSlideShowSlide","rEditor/componentsMetaData/components/anchor","rEditor/componentsMetaData/components/collage","rEditor/componentsMetaData/components/wRichText","rEditor/componentsMetaData/components/group","rEditor/componentsMetaData/components/stripContainer","rEditor/componentsMetaData/components/stripColumnsContainer","rEditor/componentsMetaData/components/tpaSection","rEditor/componentsMetaData/components/column","rEditor/componentsMetaData/components/popupCloseIconButton","rEditor/componentsMetaData/components/popupCloseTextButton","rEditor/componentsMetaData/components/popupContainerMetaData"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){"use strict";return{"wysiwyg.viewer.components.BgImageStrip":a,"wysiwyg.viewer.components.FiveGridLine":b,"wysiwyg.viewer.components.FooterContainer":c,"wysiwyg.viewer.components.HeaderContainer":d,"wysiwyg.viewer.components.ScreenWidthContainer":e,"tpa.viewer.components.StripSlideshow":g,"tpa.viewer.components.StripShowcase":f,"wixapps.integration.components.AppPart":h,"wysiwyg.common.components.rssbutton.viewer.RSSButton":i,"wysiwyg.viewer.components.tpapps.TPAGluedWidget":j,"mobile.core.components.Page":k,"wysiwyg.viewer.components.BoxSlideShow":l,"wysiwyg.viewer.components.StripContainerSlideShow":m,"wysiwyg.viewer.components.BoxSlideShowSlide":n,"wysiwyg.viewer.components.StripContainerSlideShowSlide":o,"wysiwyg.common.components.anchor.viewer.Anchor":p,"tpa.viewer.components.Collage":q,"wysiwyg.viewer.components.WRichText":r,"wysiwyg.viewer.components.Group":s,"wysiwyg.viewer.components.StripContainer":t,"wysiwyg.viewer.components.StripColumnsContainer":u,"wysiwyg.viewer.components.tpapps.TPASection":v,"wysiwyg.viewer.components.Column":w,"wysiwyg.viewer.components.PopupCloseIconButton":x,"wysiwyg.viewer.components.PopupCloseTextButton":y,"wysiwyg.viewer.components.PopupContainer":z}}),define("rEditor/app/APISections/singleCompHandlers/componentsMetaData",["lodash","rEditor/componentsMetaData/metaDataMap"],function(a,b){"use strict";function d(d,e){return!b[d]||a.isUndefined(b[d][e])?c[e]:b[d][e]}function e(b,c,e){var f=b.components.getType(e),g=d(f,c);if("function"==typeof g){var h=a.toArray(arguments);return h.splice(1,1),g.apply(this,h)}return g}var c={pinnable:!0,duplicatable:!0,containable:!0,canContain:!0,containableByStructure:!0,canContainByStructure:!0,focusable:!1,resizable:!0,rotatable:!0,selectable:!0,slidesContainer:!1,slideContainer:!1,showMarginsIndicator:!1,selectedBeforeDescendants:!1,delegateDragToParent:!1};return{is:{fixed:function(a){return this.documentServices.components.layout.get(a).fixedPosition},exist:function(a){return this.documentServices.components.is.exist(a)},container:function(a){return this.documentServices.components.is.container(a)},selectable:function(a){return e(this,"selectable",a)},siteSegment:function(b){var c=this.siteSegments.getRefs();return a.find(c,b)},removable:function(a){return this.documentServices.components.is.removable(a)},duplicatable:function(a){return e(this,"duplicatable",a)&&this.documentServices.components.is.duplicatable(a)},containable:function(a,b){return e(this,"containable",a,b)&&e(this,"canContain",b,a)&&this.documentServices.components.is.containable(a,b)},containableByStructure:function(b,c){var f=b.componentType,g=d(f,"containableByStructure"),h=a.isFunction(g)?g(b,c):g;return h&&e(this,"canContainByStructure",c,b)&&this.documentServices.components.is.containableByStructure(b,c)},styleCanBeApplied:function(a,b){return this.documentServices.components.is.styleCanBeApplied(a,b)},movable:function(a){return this.documentServices.components.is.movable(a)},horizontallyMovable:function(a){return this.documentServices.components.is.horizontallyMovable(a)&&!this.components.layout.isPinned(a)&&!this.components.layout.isHorizontallyStretchedToScreen(a)},verticallyMovable:function(a){return this.documentServices.components.is.verticallyMovable(a)&&!this.components.layout.isPinned(a)},canMoveUp:function(a){return this.documentServices.components.is.canMoveUp(a)},focusable:function(a){return e(this,"focusable",a)},fullWidth:function(a){return this.documentServices.components.is.fullWidth(a)},rotatable:function(a){return e(this,"rotatable",a)&&this.documentServices.components.is.rotatable(a)},slidesContainer:function(a){return e(this,"slidesContainer",a)},slideContainer:function(a){return e(this,"slideContainer",a)},hoverBox:function(a){return e(this,"hoverBox",a)},resizable:function(a){return e(this,"resizable",a)&&this.documentServices.components.is.resizable(a)},horizontallyResizable:function(a){return!this.components.layout.isHorizontallyStretchedToScreen(a)&&(this.documentServices.components.is.horizontallyResizable(a)||this.components.is.group(a))},verticallyResizable:function(a){return this.documentServices.components.is.verticallyResizable(a)||this.components.is.group(a)},proportionallyResizable:function(a){return!this.components.is.fullWidth(a)&&!this.components.layout.isPinned(a)},group:function(a){return this.documentServices.components.is.group(a)},groupable:function(a){return this.documentServices.components.is.groupable(a)},topMost:function(a,b){return this.documentServices.components.is.topMost(a,b)},leftMost:function(a,b){return this.documentServices.components.is.leftMost(a,b)},groupedComponent:function(a){return this.documentServices.components.is.groupedComponent(a)},animatable:function(a,b){return this.documentServices.components.is.animatable(a,b)},pinnable:function(a){return e(this,"pinnable",a)&&!this.components.is.fullWidth(a)&&!this.components.layout.isRotated(a)&&!this.components.layout.isHorizontallyStretchedToScreen(a)},alignable:function(a){return this.documentServices.components.is.alignable(a)&&this.components.is.movable(a)},draggable:function(a){return this.components.is.movable(a)&&!this.components.layout.isPinned(a)&&!this.components.is.page(a)},showMarginsIndicator:function(a){return e(this,"showMarginsIndicator",a)},focusBoxNavType:function(a){return e(this,"focusBoxNavType",a)},focusBoxNavContent:function(a){return e(this,"focusBoxNavContent",a)},selectedBeforeDescendants:function(a){return e(this,"selectedBeforeDescendants",a)},delegateDragToParent:function(a){return e(this,"delegateDragToParent",a)}}}}),define("rEditor/app/APISections/componentsFacade/componentsMetaDataFacade",["lodash","rEditor/utils/multiSelectHandler","rEditor/app/APISections/singleCompHandlers/componentsMetaData"],function(a,b,c){"use strict";return{fixed:function(a){return b.call(this,a,{multiCompHandler:this.multiselect.is.fixed,singleCompHandler:c.is.fixed})},exist:function(a){return b.call(this,a,{multiCompHandler:this.multiselect.is.exist,singleCompHandler:c.is.exist})},container:function(a){return b.call(this,a,{multiCompHandler:this.multiselect.is.container,singleCompHandler:c.is.container})},selectable:function(a){return b.call(this,a,{multiCompHandler:this.multiselect.is.selectable,singleCompHandler:c.is.selectable})},siteSegment:function(a){return b.call(this,a,{multiCompHandler:this.multiselect.is.siteSegment,singleCompHandler:c.is.siteSegment})},siblings:function(b){if(a.includes(b,void 0))return!1;var c=b.pop(),d=this.components.getSiblings(c);return a.every(b,function(b){return a.find(d,b)})},removable:function(a){return b.call(this,a,{multiCompHandler:this.multiselect.is.removable,singleCompHandler:c.is.removable})},duplicatable:function(a){return b.call(this,a,{multiCompHandler:this.multiselect.is.duplicatable,singleCompHandler:c.is.duplicatable})},showMarginsIndicator:function(a,d){return b.call(this,a,d,{multiCompHandler:this.multiselect.is.showMarginsIndicator,singleCompHandler:c.is.showMarginsIndicator})},containable:function(a,d){return b.call(this,a,d,{multiCompHandler:this.multiselect.is.containable,singleCompHandler:c.is.containable})},containableByStructure:function(a,d){return b.call(this,a,d,{multiCompHandler:this.multiselect.is.containableByStructure,singleCompHandler:c.is.containableByStructure})},styleCanBeApplied:function(a){return b.call(this,a,{multiCompHandler:this.multiselect.is.styleCanBeApplied,singleCompHandler:c.is.styleCanBeApplied})},movable:function(a){return b.call(this,a,{multiCompHandler:this.multiselect.is.movable,singleCompHandler:c.is.movable})},horizontallyMovable:function(a){return b.call(this,a,{multiCompHandler:this.multiselect.is.horizontallyMovable,singleCompHandler:c.is.horizontallyMovable})},verticallyMovable:function(a){return b.call(this,a,{multiCompHandler:this.multiselect.is.verticallyMovable,singleCompHandler:c.is.verticallyMovable})},canMoveUp:function(a){return b.call(this,a,{multiCompHandler:this.multiselect.is.canMoveUp,singleCompHandler:c.is.canMoveUp})},fullWidth:function(a){return b.call(this,a,{multiCompHandler:this.multiselect.is.fullWidth,singleCompHandler:c.is.fullWidth})},resizable:function(a){return b.call(this,a,{multiCompHandler:this.multiselect.is.resizable,singleCompHandler:c.is.resizable})},horizontallyResizable:function(a){return b.call(this,a,{multiCompHandler:this.multiselect.is.horizontallyResizable,singleCompHandler:c.is.horizontallyResizable})},verticallyResizable:function(a){return b.call(this,a,{multiCompHandler:this.multiselect.is.verticallyResizable,singleCompHandler:c.is.verticallyResizable})},proportionallyResizable:function(a){return b.call(this,a,{multiCompHandler:this.multiselect.is.proportionallyResizable,singleCompHandler:c.is.proportionallyResizable})},group:function(a){return b.call(this,a,{multiCompHandler:this.multiselect.is.group,singleCompHandler:c.is.group})},groupable:function(a){return b.call(this,a,{multiCompHandler:this.multiselect.is.groupable,singleCompHandler:c.is.groupable})},page:function(a){var b=this.components.asArray(a);return this.pages.isPageExist(b[0].id)},topMost:function(a,d){return b.call(this,a,d,{multiCompHandler:this.multiselect.is.topMost,singleCompHandler:c.is.topMost})},leftMost:function(a,d){return b.call(this,a,d,{multiCompHandler:this.multiselect.is.leftMost,singleCompHandler:c.is.leftMost})},groupedComponent:function(a){return b.call(this,a,{multiCompHandler:this.multiselect.is.groupedComponent,singleCompHandler:c.is.groupedComponent})},rotatable:function(a){return b.call(this,a,{multiCompHandler:this.multiselect.is.rotatable,singleCompHandler:c.is.rotatable})},animatable:function(a,d){return b.call(this,a,d,{multiCompHandler:this.multiselect.is.animatable,singleCompHandler:c.is.animatable})},pinnable:function(a){return b.call(this,a,{multiCompHandler:this.multiselect.is.pinnable,singleCompHandler:c.is.pinnable})},focusable:function(a){return b.call(this,a,{multiCompHandler:this.multiselect.is.focusable,singleCompHandler:c.is.focusable})},slidesContainer:function(a){return b.call(this,a,{multiCompHandler:this.multiselect.is.slidesContainer,singleCompHandler:c.is.slidesContainer})},slideContainer:function(a){return b.call(this,a,{multiCompHandler:this.multiselect.is.slideContainer,singleCompHandler:c.is.slideContainer})},hoverBox:function(a){return b.call(this,a,{multiCompHandler:this.multiselect.is.hoverBox,singleCompHandler:c.is.hoverBox})},alignable:function(a){return b.call(this,a,{multiCompHandler:this.multiselect.is.alignable,singleCompHandler:c.is.alignable})},draggable:function(a){return b.call(this,a,{multiCompHandler:this.multiselect.is.draggable,singleCompHandler:c.is.draggable})},focusBoxNavType:function(a){return b.call(this,a,{multiCompHandler:this.multiselect.is.focusBoxNavType,singleCompHandler:c.is.focusBoxNavType})},focusBoxNavContent:function(a){return b.call(this,a,{multiCompHandler:this.multiselect.is.focusBoxNavContent,singleCompHandler:c.is.focusBoxNavContent})},potentialContainerForScreenWidthComp:function(a){var b=this.components.asArray(a);return 1===b.length&&this.documentServices.components.is.potentialContainerForScreenWidthComp(b[0])},selectedBeforeDescendants:function(a){return b.call(this,a,{multiCompHandler:this.multiselect.is.selectedBeforeDescendants,singleCompHandler:c.is.selectedBeforeDescendants})},delegateDragToParent:function(a){return b.call(this,a,{multiCompHandler:this.multiselect.is.delegateDragToParent,singleCompHandler:c.is.delegateDragToParent})}}}),define("rEditor/app/APISections/componentsWrapper",["lodash","core","util","rEditor/utils/removeUtil","rEditor/utils/multiSelectHandler","rEditor/app/APISections/componentsFacade/layoutWrapper","rEditor/app/APISections/componentsFacade/arrangementFacade","rEditor/app/APISections/componentsFacade/behaviorsFacade","rEditor/app/APISections/componentsFacade/componentsMetaDataFacade","pLoader!santa:animations","experiment!dontCloseAddPanelOnAdd","experiment"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";function m(b,c){return a.every(c,function(c,d){return a.isEqual(b[d],c)})}function n(c,d,e){var f=this.documentServices.components.properties,g=f.get(c),h=!g||!m(g,d),i=f.mobile.isForked(c);h&&(d.type=a.get(g,"type"),d=b.utils.updatePropertiesUtil.fixProperties(d,c,this.documentServices,this.isMobileEditor()),this.isMobileEditor()&&g&&!i&&f.mobile.fork(c),f.update(c,d),e||this.history.debouncedAdd("comp properties changed"),this.pluginService.getPlugin("propertiesChange","*")([c]));
}function o(a,c,d){c.type=c.type||this.components.data.get(a).type,c=b.utils.updateDataUtil.fixData(c);var e=this.components.data.get(a),f=!e||!m(e,c);f&&(this.documentServices.components.data.update(a,c),d||this.history.debouncedAdd("comp data changed"))}function p(a,c,d){c.type=c.type||this.components.design.get(a).type,c=b.utils.updateDataUtil.fixData(c);var e=this.components.design.get(a),f=!e||!m(e,c);f&&(this.documentServices.components.design.update(a,c),d||this.history.debouncedAdd("comp design changed"),q.call(this,a,c))}function q(a,b){var c=this.documentServices.viewMode.VIEW_MODES.MOBILE;if(a.type!==c){var d=this.documentServices.components.getPage(a).id,e=this.documentServices.components.get.byId(a.id,d,c);e&&this.documentServices.components.is.exist(e)&&p.call(this,e,b)}}function r(b,c){var d=this.selection.getSelectedComponents(),e=this.selection.getFocusedContainer(d);c?this.documentServices.components.modes.activateComponentMode(b,c):this.documentServices.components.modes.deactivateAllComponentModes(b),d&&!this.documentServices.components.modes.isComponentCurrentlyDisplayed(a.first(d))&&this.selection.selectComponentByCompRef(e)}function s(){return a.find(j.defaults,{action:"modeChange"})}function t(a,b,c){if(l.isOpen("se_hoverBox")){var d=a.components.modes.getModes(b);d&&0!==d.length&&a.documentServices.components.behaviors.update(c,s())}}return{layouters:{getNonMasterChildren:function(a){return e.call(this,a,{multiCompHandler:this.multiselect.getNonMasterChildren,singleCompHandler:this.documentServices.layouters.getNonMasterChildren})}},components:{onPreviewReady:function(c){var d=b.utils.componentPreviewReadyPlugins;a.forEach(d,function(a){a(c)},this)},getPage:function(a){return e.call(this,a,{multiCompHandler:this.multiselect.getPage,singleCompHandler:this.documentServices.components.getPage})},asArray:function(b){return a.compact(a.isArray(b)?b:[b])},reset:function(){this.clipboard.setItem(b.constants.EDITOR_CLIPBOARD_TYPES.COMPONENT,void 0)},isShowOnAllPages:function(a){return e.call(this,a,{multiCompHandler:this.multiselect.isShowOnAllPages,singleCompHandler:this.documentServices.components.isShowOnAllPages})},cut:function(b){var c=this.selection.getSelectedComponents();return c=this.multiselect.getComponentsWhichDontHaveAncestorsInTheArray(c),b=this.multiselect.getComponentsWhichDontHaveAncestorsInTheArray(b),a.isEqual(c,b)&&this.selection.deselectComponents(),this.isMobileEditor()?void this.openCantCopyPastePanel():void(this.components.is.duplicatable(b)&&(this.components.copy(b),a.forEach(b,function(a){d.cutComponent(this.documentServices,a)},this)))},add:function(c,d,e,f){var g=b.utils.addUtil.addComponent(this,this.documentServices.components.add,c,d,e,function(){k||this.panelManager.closePanelByName("addPanelInfra.addPanel"),this.utils.isSameRef(c,this.siteSegments.getHeader())&&this.openDragToHeaderPanel(),a.isFunction(f)&&f.apply(this,arguments)}.bind(this));return t(this,c,g),g},addAndAdjustLayout:function(a,c,d,e){var f=b.utils.addUtil.addComponent(this,this.documentServices.components.addAndAdjustLayout,a,c,d,e);return t(this,a,f),f},remove:function(b,c,e){var f=this,g=f.components.asArray(b);return f.components.is.removable(g)?(l.isOpen("ds_OperationsQAllAsync")||f.selection.deselectComponents(g),d.removeComponent(f.documentServices,f.removePlugins,g,f,c,e),void f.waitForChangesApplied(function(){if(l.isOpen("ds_OperationsQAllAsync")){if(!e||!e.isReplacingComp){var b=f.selection.getFocusedContainer();b&&!a.find(g,b)?f.selection.selectComponentByCompRef(b):f.selection.deselectComponents(g)}}else f.selection.deselectComponents(g)})):void a.forEach(g,function(a){var b=f.components.getType(a);f.cannotRemovePlugins[b]&&f.cannotRemovePlugins[b](a)})},setContainer:function(a,b){var c=this.components.isShowOnAllPages(a),d=e.call(this,a,b,{multiCompHandler:this.multiselect.setContainer,singleCompHandler:this.documentServices.components.setContainer});if(l.isOpen("se_hoverBox")){var f=this.components.modes.getModes(b),g=s();f&&0!==f.length?e.call(this,a,g,{multiCompHandler:this.multiselect.behaviors.update,singleCompHandler:this.documentServices.components.behaviors.update}):e.call(this,a,g.name,g.action,{multiCompHandler:this.multiselect.behaviors.remove,singleCompHandler:this.documentServices.components.behaviors.remove})}return!c&&this.utils.isSameRef(b,this.siteSegments.getHeader())&&this.openDragToHeaderPanel(),this.setStateUpdateCallback(function(){var a=this.selection.getSelectedComponents();return{focusedContainer:this.selection.getParentToFocus(a)}}.bind(this)),d},reparentComponentToPage:function(a,b){var c=e.call(this,a,b,{multiCompHandler:this.multiselect.reparentComponentToPage,singleCompHandler:this.documentServices.components.reparentComponentToPage});return c},getType:function(a){return e.call(this,a,{multiCompHandler:this.multiselect.getType,singleCompHandler:this.documentServices.components.getType})},getSiblings:function(a){return e.call(this,a,{multiCompHandler:this.multiselect.getSiblings,singleCompHandler:this.documentServices.components.getSiblings})},getChildren:function(a){return e.call(this,a,{multiCompHandler:this.multiselect.getChildren,singleCompHandler:this.documentServices.components.getChildren})},getDisplayName:function(a){var b=this.documentServices.components.getType(a),d=this.compNamePlugins[b]?this.compNamePlugins[b](a):c.translate("component_label_"+b.split(".").pop());if(this.developerMode.isEnabled()){var e=this.documentServices.components.code.getNickname(a);d+=" #"+e}return d},ungroup:function(a){var b=this.components.asArray(a);if(this.components.is.exist(b[0])){var c=this.documentServices.components.getChildren(b[0]);this.selection.selectComponentByCompRef(c),this.documentServices.components.ungroup(b[0]),this.history.add("ungroup")}},getIconInfo:function(a,b){var d=this.documentServices.components.getType(a);return this.compIconPlugins[d]?this.compIconPlugins[d](a):c.compIcon.getCompIconInfo(a,d,b,this)},getContainer:function(a){var b=this.components.asArray(a);return this.documentServices.components.getContainer(b[0])},moveToFooter:function(a){var b=15,c=this.components.layout.getRelativeToStructure(a),d=this.siteSegments.getFooter(),e=this.components.layout.get(d),f=this.components.setContainer(a,d),g=e.height<c.bounding.height+b;g&&this.components.layout.update(d,{height:c.bounding.height+2*b}),this.waitForChangesApplied(function(){this.components.layout.update(f,{y:c.y-c.bounding.y+b})}.bind(this))},isDescendantOfComp:function(a,b){return e.call(this,a,b,{multiCompHandler:this.multiselect.isDescendantOfComp,singleCompHandler:this.documentServices.components.isDescendantOfComp})},isAscendantOfComp:function(b,c){return a.some(b,function(a){return this.components.isDescendantOfComp(c,a)},this)},getDefaultBiParams:function(a){var b=this.components.asArray(a);return{componentType:this.components.getType(a),component_id:b[0].id}},data:{update:function(a,b,c){e.call(this,a,b,c,{multiCompHandler:this.multiselect.data.update,singleCompHandler:o})},get:function(a){return e.call(this,a,{multiCompHandler:this.multiselect.data.get,singleCompHandler:this.documentServices.components.data.get})},remove:function(a,b){e.call(this,a,{multiCompHandler:this.multiselect.data.remove,singleCompHandler:this.documentServices.components.data.remove}),b||this.history.add("comp data removed")}},design:{update:function(a,b,c){e.call(this,a,b,c,{multiCompHandler:this.multiselect.data.update,singleCompHandler:p})},get:function(a){return e.call(this,a,{multiCompHandler:this.multiselect.data.get,singleCompHandler:this.documentServices.components.design.get})},remove:function(a,b){e.call(this,a,{multiCompHandler:this.multiselect.design.remove,singleCompHandler:this.documentServices.components.design.remove}),b||this.history.add("comp design removed")}},properties:{update:function(a,b,c){return e.call(this,a,b,c,{multiCompHandler:this.multiselect.properties.update,singleCompHandler:n})},get:function(a){return e.call(this,a,{multiCompHandler:this.multiselect.properties.get,singleCompHandler:this.documentServices.components.properties.get})}},alignment:{align:function(a,b){e.call(this,a,b,{multiCompHandler:this.multiselect.alignment.align,singleCompHandler:this.documentServices.components.alignment.alignInContainer}),this.history.add("component - align - "+b)},canAlign:function(a,b){return this.documentServices.components.alignment.canAlign(a,b)}},multiComponents:{distribute:function(b,c){e.call(this,b,c,{multiCompHandler:this.multiselect.multiComponents.distribute,singleCompHandler:a.noop}),this.history.add("component - distribute - "+c)},matchSize:function(b,c){e.call(this,b,c,{multiCompHandler:this.multiselect.multiComponents.matchSize,singleCompHandler:a.noop}),this.history.add("component - matchSize - "+c)},canDistribute:function(a,b){return this.documentServices.components.multiComponents.canDistribute(a,b)},canMatchSize:function(a,b){return this.documentServices.components.multiComponents.canMatchSize(a,b)}},layout:f,style:{getId:function(a){var b=this.components.asArray(a);if(this.multiselect.isMultiselect(b))throw"components.style.getId isn't supported for multi select";return this.documentServices.components.style.getId(b[0])},setId:function(a,b,c){var d=this.components.asArray(a);if(this.multiselect.isMultiselect(d))throw"components.style.setId isn't supported for multi select";return this.documentServices.components.style.setId(d[0],b,c)},update:function(a,b){var c=this.components.asArray(a);if(this.multiselect.isMultiselect(c))throw"components.style.update isn't supported for multi select";return this.documentServices.components.style.update(c[0],b)}},arrangement:g,is:i,skin:{getComponentSkinExports:function(a){return e.call(this,a,{multiCompHandler:this.multiselect.skin.getComponentSkinExports,singleCompHandler:this.documentServices.components.skin.getComponentSkinExports})},get:function(a){return e.call(this,a,{multiCompHandler:this.multiselect.skin.get,singleCompHandler:this.documentServices.components.skin.get})}},behaviors:h,code:{setNickname:function(a,b){this.documentServices.components.code.setNickname(a,b),this.history.debouncedAdd("comp nick name changed")}},canToggleShowOnAllPages:function(a){return this.components.canShowOnAllPages(a)&&this.components.canShowOnCurrentPage(a)},canShowOnCurrentPage:function(a){var b=this.documentServices.pages.getFocusedPage();return this.components.is.containable(a,b)&&!this.components.isDescendantOfComp(a,this.siteSegments.getFooter())},canShowOnAllPages:function(b){b=this.components.asArray(b);var c=this.documentServices.siteSegments.getSiteStructure(),d=a.some(b,function(a){return this.documentServices.components.is.groupedComponent(a)},this),e=this.components.is.containable(b,c);return!this.isCurrentPageLandingPage()&&e&&!d&&!(l.isOpen("popups")&&this.pages.popupPages.isPopupOpened())},setShowOnAllPages:function(a,b){var c;return a=this.multiselect.getComponentsWhichDontHaveAncestorsInTheArray(a),c=b?this.documentServices.siteSegments.getSiteStructure():this.documentServices.pages.getReference(this.pages.getPrimaryPageId()),this.components.setContainer(a,c)},toggleShowOnAllPages:function(a){var b=this.selection.getSelectedComponents(),c=!this.components.isShowOnAllPages(a),d=this.components.setShowOnAllPages(a,c);b===a&&this.selection.selectComponentByCompRef(d),this.history.add(c?"Show component on all pages":"Show component on current page")},modes:{activateComponentMode:function(a,b){l.isOpen("se_hoverBox")&&r.call(this,a,b)},deactivateAllComponentModes:function(a){l.isOpen("se_hoverBox")&&r.call(this,a)},applyCurrentToAllModes:function(a){return l.isOpen("se_hoverBox")?e.call(this,a,{multiCompHandler:this.multiselect.componentModes.applyCurrentToAllModes,singleCompHandler:this.documentServices.components.modes.applyCurrentToAllModes}):void 0}}}}}),define("rEditor/app/APISections/rulersAPI",["lodash","core","util"],function(a,b,c){"use strict";function d(){var a=this.rulers.getGuidesState();this.rulersHistory={stack:[a],currentIndex:0}}function e(){if(this.rulers.canUndo()){x.call(this),this.rulersHistory.currentIndex-=1;var a=this.rulersHistory.stack[this.rulersHistory.currentIndex];v.call(this,a)}}function f(){if(this.rulers.canRedo()){x.call(this),this.rulersHistory.currentIndex+=1;var a=this.rulersHistory.stack[this.rulersHistory.currentIndex];v.call(this,a)}}function g(){return this.rulersHistory.currentIndex>0}function h(){return this.rulersHistory.stack.length>this.rulersHistory.currentIndex+1}function i(c){var d=c.guidesState;this.userPreferences.site.set(b.constants.USER_PREFS.VIEW_TOOLS.GUIDES_STATE,d),s.call(this,c),a.isEqual(this.rulersHistory.stack[this.rulersHistory.currentIndex],c.guidesState)||(this.rulersHistory.stack=a.take(this.rulersHistory.stack,this.rulersHistory.currentIndex+1),this.rulersHistory.stack.push(d),this.rulersHistory.currentIndex+=1)}function j(){return this.editor.state.viewTools.rulersEnabled}function k(b,c){var d=a.cloneDeep(this.editor.state.viewTools.rulers);return d[b]=c,d}function l(){var b;return a.get(this,"editor.state.viewTools.rulers")&&(b=a.cloneDeep(this.editor.state.viewTools.rulers.guidesState)),b=a.isEmpty(b)?q():b}function m(){var a=l.call(this);return this.isMobileEditor()?a.mobile.horizontalGuides:a.desktop.horizontalGuides}function n(){var a=l.call(this);return this.isMobileEditor()?a.mobile.verticalGuides:a.desktop.verticalGuides}function o(b){var d,c=this.rulers.getGuidesState();a.some(c.mobile.verticalGuides,"guideId",b)?d="mobile.verticalGuides":a.some(c.mobile.horizontalGuides,"guideId",b)?d="mobile.horizontalGuides":a.some(c.desktop.verticalGuides,"guideId",b)?d="desktop.verticalGuides":a.some(c.desktop.horizontalGuides,"guideId",b)&&(d="desktop.horizontalGuides");var e=a.find(a.get(c,d),{guideId:b}).guidePosition;return{guideId:b,guidePosition:e,guidePath:d}}function p(){var a=this.editor.state.viewTools.rulers.selectedGuide;return o.call(this,a)}function q(){return{desktop:{verticalGuides:[],horizontalGuides:[]},mobile:{verticalGuides:[],horizontalGuides:[]}}}function r(a){return{guideId:"GUIDE_"+Date.now().toString(36),guidePosition:a}}function s(a){this.updateEditorViewTools("rulers",a)}function t(a,c){var d=!j.call(this);this.updateEditorViewTools("rulersEnabled",d),this.userPreferences.site.set(b.constants.USER_PREFS.VIEW_TOOLS.RULERS_ENABLED,d,a,c)}function u(b,c){var d=a.clone(this.editor.state.viewTools.rulers);d[b]=c,s.call(this,d)}function v(a){this.userPreferences.site.set(b.constants.USER_PREFS.VIEW_TOOLS.GUIDES_STATE,a),u.call(this,"guidesState",a)}function w(a,b){b&&this.rulers.sendBIEvent("GUIDE_TOOLTIP_IN_EDIT_MODE",{origin:b}),a&&(this.selection.deselectComponents(),c.keyboardShortcuts.setContext(c.keyboardShortcuts.CONTEXTS.RULERS)),u.call(this,"selectedGuide",a)}function x(){this.rulers.selectGuide(null),c.keyboardShortcuts.setContext(this.getPreviewMode()?c.keyboardShortcuts.CONTEXTS.PREVIEW:c.keyboardShortcuts.CONTEXTS.EDITOR)}function y(b,d){var e=l.call(this),f=r(d);a.get(e,b).push(f);var g=k.call(this,"guidesState",e);return this.selection.deselectComponents(),g.selectedGuide=f.guideId,c.keyboardShortcuts.setContext(c.keyboardShortcuts.CONTEXTS.RULERS),i.call(this,g),f.guideId}function z(a){var b=K("vertical",this.isMobileEditor());return y.call(this,b,a)}function A(a){var b=K("horizontal",this.isMobileEditor());return y.call(this,b,a)}function B(b,c,d){var e=K(b,this.isMobileEditor()),f=D.call(this,e,c),g={guidePosition:d,guideId:c};a.get(f,e).push(g);var h=k.call(this,"guidesState",f);i.call(this,h)}function C(b,c){var d=p.call(this);a.includes(d.guidePath,b)&&this.rulers.changeGuidePosition(b,d.guideId,d.guidePosition+c)}function D(b,c){var d=l.call(this),e=a.reject(a.get(d,b),{guideId:c});return a.set(d,b,e),d}function E(a){var b=o.call(this,a),d=D.call(this,b.guidePath,b.guideId),e=k.call(this,"guidesState",d);e.selectedGuide=null,c.keyboardShortcuts.setContext(this.getPreviewMode()?c.keyboardShortcuts.CONTEXTS.PREVIEW:c.keyboardShortcuts.CONTEXTS.EDITOR),i.call(this,e)}function F(){E.call(this,this.editor.state.viewTools.rulers.selectedGuide)}function G(){this.rulers.sendBIEvent("GUIDE_DELETED",{origin:"delete_button"}),F.call(this)}function H(c,d){var e=b.bi.events.rulers[c],f={editor_view_mode:this.getDeviceType()};a.merge(f,d),this.bi.event(e,f)}function I(){return{"del,backspace":G.bind(this),"shift + right":C.bind(this,"vertical",10),"shift + left":C.bind(this,"vertical",-10),"shift + up":C.bind(this,"horizontal",-10),"shift + down":C.bind(this,"horizontal",10),left:C.bind(this,"vertical",-1),right:C.bind(this,"vertical",1),up:C.bind(this,"horizontal",-1),down:C.bind(this,"horizontal",1)}}function J(a){var b=this.siteSegments.getPagesContainerAbsLayout();return a+Math.round(b.x)}function K(a,b){var c=b?"mobile.":"desktop.";return c+a+"Guides"}return{rulers:{getGuidesState:l,getHorizontalGuides:m,getVerticalGuides:n,isRulersEnabled:j,toggleRulers:t,getGuidesInitialState:q,setVerticalGuide:z,setHorizontalGuide:A,removeSelectedGuide:F,removeGuideById:E,selectGuide:w,deselectGuide:x,changeGuidePosition:B,updateEditorRulersState:u,getVerticalGuideRealPosition:J,sendBIEvent:H,undo:e,redo:f,canUndo:g,canRedo:h,resetRulersHistory:d,getRulersKeyboardShortcuts:I}}}),define("rEditor/app/APISections/feedback",["lodash","jquery","experiment"],function(a,b,c){"use strict";function f(){var a=this.generalInfo.getSiteId(),b=this.generalInfo.getMetaSiteId();return d+a+"?metaSiteId="+b}function g(){return e+this.generalInfo.getSiteId()+"?metaSiteId="+this.generalInfo.getMetaSiteId()}function h(a){this.editor.state.unreadComments!==a&&this.editor.setState({unreadComments:a})}function i(){var a=f.call(this);b.ajax({url:a,type:"GET",xhrFields:{withCredentials:!0},success:function(a){h.call(this,a.count)}.bind(this)})}var d="http://feedback.wix.com/_api/feedback-server/getNewCommentsCount/",e="http://feedback.wix.com/_api/feedback-server/siteIsShared/",j={init:function(){var a=this;if(c.isOpen("exp171")&&!c.isOpen("feedmeIntegrationOff")&&a.account.isUserOwner()){var d=g.call(a);b.ajax({url:d,type:"GET",xhrFields:{withCredentials:!0},success:function(b){b.shared?(h.call(a,b.count),i.call(a),setInterval(i.bind(a),3e4)):setTimeout(a.feedback.init,3e5)}})}},getNewCommentsCounter:function(){var a=this;return a.editor.state.unreadComments}};return{feedback:j}}),define("rEditor/app/APISections/mainMenuWrapper",["lodash","pagesMenu","experiment","experiment!pagesPanelOpenCollapsed"],function(a,b,c,d){"use strict";function g(a){return a.replace("#","")}function h(b,c){var d;return a.some(c,function(a){return a.type.isPage&&!b.pages.isHomePage(a.pageData.id)?(d=a,!0):a.items&&a.items.length&&(d=h(b,a.items))?!0:void 0}),d}function i(b,c){var d;return a.some(b,function(a){var b=a.link&&a.link.pageId,e=b&&b.substr(1);return e===c?(d=a,!0):a.items&&a.items.length&&(d=i(a.items,c))?!0:void 0}),d}function j(a,b){var d=b.link&&b.link.type,e=b.link&&b.link.pageId,g="PageLink"===d,h=c.isOpen("popups")&&e&&a.pages.popupPages.isPopup(e.replace("#",""));return{raw:d,isDropdown:!d,isLink:!g&&f.test(d)||h,isPage:g&&!h}}function k(a,b,c,d,e){return{id:b.id,type:j(a,b),label:b.label,parent:e,isVisible:b.isVisible,isVisibleMobile:b.isVisibleMobile,pageData:d,link:b.link}}function l(b,c,e,f,h){var i=[];return a.forEach(c,function(c){var m,o,n=j(b,c);o=d?n.isPage?e.pagesDataMap[g(c.link.pageId)]:null:n.isPage?a.find(e.pagesDataList,"id",g(c.link.pageId)):null,f&&!f(c,o)||(m=k(b,c,n,o,e.parent),c.items.length>0?m.items=l(b,c.items,a.defaults({parent:m},e),f,h):m.items=[],i.push(m),h&&h(m))}),i}function m(b,c,e,f){if(f=f||this.mainMenu.getMenu(),d){var g=a.indexBy(b,"id");return l(this,f,{parent:null,homePageId:this.homePage.get(),pagesDataMap:g},c,e)}return l(this,f,{parent:null,homePageId:this.homePage.get(),pagesDataList:b},c,e)}function n(b,c){function d(c,f){var h,i,l;a.forEach(f,function(f){i=j(c,f),i.isPage&&(l=a.findIndex(b,{id:g(f.link.pageId)}),l>-1&&(h=b[l],e[l]=k(c,f,i,h))),f.items.length>0&&d(c,f.items)})}var e=[];return d(this,c||this.mainMenu.getMenu()),e}var e=b.specialPages.menuLogic,f=/Link$/;return{mainMenu:{hasOnlyLastPageMenuItem:function(){var b=this.documentServices.pages.getPagesData(),c=a.filter(b,function(a){return!e.isSpecialPage(this,a)},this);return 1===c.length},getFirstNonHomePageMenuItem:function(){var a=this.mainMenu.getMenuItemsTreeForMainMenu();return h(this,a)},getMenuItemIdForCurrentPage:function(){var a=this.documentServices.mainMenu.getMenu(),b=this.documentServices.pages.getCurrentUrlPageId(),c=i(a,b);return c&&c.id},getMenuItemsTree:function(){var a=this.pages.getPagesData();return this.mainMenu.extendMenuItemsTreeWithPageData(a)},getMenuItemsTreeForPagesFixed:function(){var b=this.mainMenu.getMenu(),c=this.pages.getPagesData(),d=e.getSectionPagesIds(this,c),f=[],g=Array.prototype.push,h=function(a,b){return b||0!==a.items.length?!b||!e.isSpecialPage(this,b):!1}.bind(this),i=function(b){b.pageData&&a.includes(d,b.pageData.id)&&f.push(b)},j=this.mainMenu.extendMenuItemsTreeWithPageData(c,h,i,b);return a.forEach(f,function(a){var d=e.getSpecialPagesListBySectionPageOrBySibling(this,a.pageData,c),f=this.mainMenu.convertPagesDataListToMenuItemsList(d,b);g.apply(a.items,f)},this),j},getMenuItemsTreeForMainMenu:function(a){a=a||this.pages.getPagesData();var b=function(a,b){return b?!e.isSpecialPage(this,b):!0}.bind(this);return this.mainMenu.extendMenuItemsTreeWithPageData(a,b)},extendMenuItemsTreeWithPageData:m,convertPagesDataListToMenuItemsList:n}}}),define("rEditor/app/APISections/multiselect",["lodash","core","util"],function(a,b,c){"use strict";function d(b){return a.some(b,this.selection.isSingleSelectionComponent,this)}function e(b,d,e){return a.map(d,function(d){var f=a.pick(b.components.layout.get(d),["x","y"]),g=c.layoutUtils.addXYOffsetsToLayout(f,e);return{component:d,newLayout:g}})}function f(b,d,f,g){var h=c.layoutUtils.getLayoutsXYDiff(g,f),i=e(b,d,h);a.forEach(i,function(a){b.components.layout.update(a.component,a.newLayout)})}function g(a,b){for(var c=a.components.getContainer(b);c&&!a.components.is.group(c);)c=a.components.getContainer(c);return c}function h(a,b){var d=c.layoutUtils.calcLayoutFromLayoutAndRatio(b,a.proportions),e=c.layoutUtils.addXYOffsetsToLayout(d,b);return e}return{multiselect:{canBeMasterChild:function(){return!1},getNonMasterChildren:function(){},isShownOnAllStates:function(){return!1},isDescendantOfComp:function(b,c){return a.every(b,function(a){return this.documentServices.components.isDescendantOfComp(a,c)},this)},getType:function(){return b.constants.MULTISELECT.TYPE},canBeShownOnAllStates:function(){return!1},toggleShowOnAllStates:function(){},getPage:function(b){return this.multiselect.areComponentsOfSamePage(b)?this.documentServices.components.getPage(a.first(b)):null},count:function(b){return a.isArray(b)?b.length:0},isMultiselect:function(a){return this.multiselect.count(a)>1},getContainer:function(b){return this.multiselect.containsSiblingsOnly(b)?this.documentServices.components.getContainer(a.first(b)):null},getChildren:function(){return[]},getSiblings:function(b){if(!this.multiselect.containsSiblingsOnly(b))throw"Cannot obtain siblings of the given compoents since they are not siblings";var c=this.documentServices.components.getSiblings(b[0]),d=a.reject(c,function(c){return a.some(b,{id:c.id})},this);return d},isShowOnAllPages:function(b){var c=a.every(b,function(a){return this.documentServices.components.isShowOnAllPages(a)},this);return c},canBeSelectedTogether:function(a){return this.multiselect.count(a)<=1?!0:!d.call(this,a)},containsSiblingsOnly:function(b){if(!this.multiselect.isMultiselect(b))return!0;var c=this.components.getSiblings(a.first(b)),d=a.rest(b);return a.every(d,function(b){return!!a.find(c,b)})},containsAncestorsAndDescendants:function(b){return this.multiselect.isMultiselect(b)?a.every(b,function(d,e){var f=b.slice(e+1);return a.every(f,function(a){return this.components.isDescendantOfComp(d,a)||this.components.isDescendantOfComp(a,d)},this)},this):!1},areComponentsOfSamePage:function(b){if(!this.multiselect.isMultiselect(b))return!0;var c=a.first(b),d=a.rest(b),e=this.documentServices.components.getPage(c);return a.every(d,function(b){var c=this.documentServices.components.getPage(b);return a.isEqual(c,e)},this)},getComponentsWhichDontHaveAncestorsInTheArray:function(b){var c=a.clone(b);return a.forEach(b,function(d,e){var f=b.slice(e+1);a.forEach(f,function(b){return this.components.isDescendantOfComp(d,b)?(a.remove(c,d),!1):void(this.components.isDescendantOfComp(b,d)&&a.remove(c,b))},this)},this),c},removeGroupedCompsIfTheirGroupIsInArray:function(b){return a.reject(b,function(d){var e=g(this,d);return e&&!!a.find(b,e)},this)},setContainer:function(b,c){var d=a.map(b,function(a){return this.documentServices.components.setContainer(a,c)},this);return d},reparentComponentToPage:function(b,c){var d=a.map(b,function(a){return this.documentServices.components.reparentComponentToPage(a,c)},this);return d},data:{update:function(){throw"Cannot update data for multiple components"},get:function(b){var c=a.map(b,function(a){return this.documentServices.components.data.get(a)},this);return c},remove:function(){throw"Cannot remove data for multiple components"}},design:{update:function(){throw"Cannot update design for multiple components"},get:function(b){var c=a.map(b,function(a){return this.documentServices.components.design.get(a)},this);return c},remove:function(){throw"Cannot remove design for multiple components"}},properties:{update:function(){throw"cannot update multiple components properties"},get:function(b){var c=a.map(b,function(a){return this.documentServices.components.properties.get(a)},this);return c}},arrangement:{canMoveForward:function(){return!1},canMoveBackward:function(){return!1}},alignment:{align:function(a,b){this.documentServices.components.alignment.alignComponents(a,b)}},multiComponents:{distribute:function(a,b){this.documentServices.components.multiComponents.distribute(a,b)},matchSize:function(a,b){this.documentServices.components.multiComponents.matchSize(a,b)}},layout:{get:function(a){if(!this.multiselect.containsSiblingsOnly(a))throw"Cannot get layout for non-siblings components";var b=this.documentServices.components.layout.getSnugLayout(a);return b},canBeFixedPosition:function(b){var c=a.every(b,function(a){return this.documentServices.components.layout.canBeFixedPosition(a)},this);return c},getRelativeToScreen:function(a){return this.documentServices.components.layout.getSnugLayoutRelativeToScreen(a)},getRelativeToScreenConsideringScroll:function(a){return this.documentServices.components.layout.getSnugLayoutRelativeToScreenConsideringScroll(a)},getRelativeToStructure:function(a){return this.documentServices.components.layout.getSnugLayoutRelativeToStructure(a)},getResizableSides:function(b){return this.multiselect.is.proportionallyResizable(b)?a.values(this.components.layout.RESIZE_SIDES):[]},update:function(a,b){if(!this.multiselect.containsSiblingsOnly(a))throw"Selected components do not share the same parent and therefore cannot be positioned relative to their container";var c=this.documentServices.components.layout.getSnugLayout(a);f(this,a,c,b)},updateRelativeToStructure:function(b,c){var d=a.pick(this.multiselect.layout.getRelativeToStructure(b),["x","y"]);f(this,b,d,c)},updateRelativeToScreen:function(b,c){var d=a.pick(this.multiselect.layout.getRelativeToScreen(b),["x","y"]);f(this,b,d,c)},updateRelativeToScreenAndPreserveProportions:function(b,c,d){a.defaults(c,d.layout),a.forEach(d.children,function(a){var b=h(a,c);this.components.layout.updateRelativeToScreenAndPreserveProportions(a.component,b,a)},this)},updateRelativeToStructureAndPreserveProportions:function(a,b,d){var e=c.layoutUtils.getLayoutRelativeToScreenFromRelativeToStructure(this,a,b);this.multiselect.layout.updateRelativeToScreenAndPreserveProportions(a,e,d)},updateAndPreserveProportions:function(a,b,d){if(!this.multiselect.containsSiblingsOnly(a))throw"Selected components do not share the same parent and therefore cannot be positioned relative to their container";var e=c.layoutUtils.getLayoutRelativeToScreenFromRelativeToParent(this,a,b);this.multiselect.layout.updateRelativeToScreenAndPreserveProportions(a,e,d)},getProportionStructure:function(b,d){var e=this.components.layout.getRelativeToScreen(b);return{component:null,layout:e,children:a.map(b,function(b){var f=this.components.layout.getRelativeToScreen(b),g=c.layoutUtils.getLayoutsXYDiff(f,e),h=a.defaults(g,f),i=c.layoutUtils.getChildContainerLayoutRatio(h,e),j=this.components.layout.getProportionStructure(b,d);return j.proportions=i,j.minLayout=a.omit(j.minLayout,["x","y"]),j},this)}},updateAndAdjustLayout:function(b,d){if(!this.multiselect.containsSiblingsOnly(b))throw"Cannot update and adjust layout of non-siblings components";var f=this.documentServices.components.layout.getSnugLayout(b);f=a.pick(f,"y");var g=c.layoutUtils.getLayoutsXYDiff(d,f),h=e(this,b,g);a.forEach(h,function(a){this.documentServices.components.layout.updateAndAdjustLayout(a.component,a.newLayout)},this)},setFixed:function(c,d){return a.map(c,function(a){return b.utils.fixedPositionUtils.setFixedPosition(this,a,d)})},updateAspectRatio:function(b){a.forEach(b,function(a){this.documentServices.components.layout.updateAspectRatio(a)},this)},removeAspectRatio:function(b){a.forEach(b,function(a){this.documentServices.components.layout.removeAspectRatio(a)},this)},unDock:function(){throw"Dock / Undock not supported for multiselect"},setDock:function(){throw"Dock / Undock not supported for multiselect"},updateDock:function(){throw"Dock / Undock not supported for multiselect"},getDock:function(){throw"Dock / Undock not supported for multiselect"},canBeStretched:function(){return!1},isStretchedToScreen:function(b){return a.some(b,function(a){return this.components.layout.isStretchedToScreen(a)},this)}},skin:{get:function(){throw"cannot get skin of multiple components"},getComponentSkinExports:function(){throw"Cannot get component skin exports for multiple components"}},is:{fixed:function(b){return a.every(b,this.components.is.fixed,this)},selectable:function(){return!0},alignable:function(b){return a.every(b,this.components.is.alignable)},container:function(){return!1},exist:function(b){return a.every(b,function(a){return this.components.is.exist(a)},this)},siteSegment:function(){return!1},removable:function(b){var c=a.every(b,function(a){return this.components.is.removable(a)},this);return c},duplicatable:function(b){var c=a.every(b,function(a){return this.components.is.duplicatable(a)},this);return c},styleCanBeApplied:function(){return!1},containable:function(b,c){var d=a.every(b,function(a){return this.components.is.containable(a,c)},this);return d},containableByStructure:function(b,c){var d=a.every(b,function(a){return this.components.is.containableByStructure(a,c)},this);return d},movable:function(b){var c=a.every(b,function(a){return this.components.is.movable(a)},this);return c},horizontallyMovable:function(b){var c=a.every(b,function(a){return this.components.is.horizontallyMovable(a)},this);return c},verticallyMovable:function(b){var c=a.every(b,function(a){return this.components.is.verticallyMovable(a)},this);return c},canMoveUp:function(b){var c=a.every(b,function(a){return this.components.is.canMoveUp(a)},this);return c&&this.multiselect.containsSiblingsOnly(b)},fullWidth:function(b){var c=a.every(b,function(a){return this.components.is.fullWidth(a)},this);return c},horizontallyResizable:function(b){return a.every(b,this.components.is.horizontallyResizable)},verticallyResizable:function(b){return a.every(b,this.components.is.verticallyResizable)},proportionallyResizable:function(b){return a.every(b,this.components.is.proportionallyResizable)},group:function(){return!1},groupable:function(b){return a.every(b,function(a){return this.components.is.groupable(a)},this)},groupedComponent:function(b){
var c=a.every(b,function(a){return this.documentServices.components.is.groupedComponent(a)},this);return c},topMost:function(b,c){var d=a.some(b,function(a){return this.documentServices.components.is.topMost(a,c)},this);return d},leftMost:function(b,c){var d=a.some(b,function(a){return this.documentServices.components.is.leftMost(a,c)},this);return d},resizable:function(){return!1},rotatable:function(){return!1},animatable:function(b,c){var d=a.every(b,function(a){return this.components.is.animatable(a,c)},this);return d},focusable:function(){return!1},pinnable:function(){return!1},slidesContainer:function(){return!1},slideContainer:function(){return!1},hoverBox:function(){return!1},draggable:function(b){return a.every(b,this.components.is.draggable)},selectedBeforeDescendants:function(){return!1},delegateDragToParent:function(b){return a.some(b,"delegateDragToParent")}},behaviors:{update:function(b,c,d){a.forEach(b,function(a){this.documentServices.components.behaviors.update(a,c,d)},this)},get:function(b){var c=a.reduce(b,function(a,b){return a.concat(this.documentServices.components.behaviors.get(b)||[])},[],this);return c},remove:function(b,c,d){a.forEach(b,function(a){this.documentServices.components.behaviors.remove(a,c,d)},this)},removeAll:function(b){a.forEach(b,function(a){this.documentServices.components.behaviors.removeAll(a)},this)},previewAnimation:function(b,c,d){var e=a.map(b,function(b,e,f){return this.documentServices.components.behaviors.previewAnimation(b,a.cloneDeep(c),e===f.length-1?d:void 0)},this);return e},stopPreviewAnimation:function(b){a.forEach(b,function(a){this.documentServices.components.behaviors.stopPreviewAnimation(a)},this)},execute:function(b,c,d){a.forEach(b,function(a){this.documentServices.components.behaviors.execute(a,c,d)},this)},getRuntimeState:function(b){return a.map(b,function(a){return this.documentServices.components.behaviors.getRuntimeState(a)},this)}},componentModes:{applyCurrentToAllModes:function(b){a.forEach(b,function(a){this.components.modes.applyCurrentToAllModes(a)},this)}}}}}),define("rEditor/app/APISections/leftBarAPI",["lodash","core"],function(a,b){"use strict";function c(c,d,e,f,g,h,i){return{panelName:c,panelProps:d,label:e,className:f,symbolName:g,order:a.indexOf(b.constants.LEFT_BAR.SUPER_APPS_ORDER.DESKTOP,c),collapseOnClick:h||!1,isButtonOpen:i}}function d(a,b){delete a.notifications[b],this.panelManager.closePanelByName(b)}return{leftBar:{collapseMenu:function(){var b=a.cloneDeep(this.editor.state.leftBar);b.isCollapsed=!0,this.editor.setState({leftBar:b})},openAddPanel:function(){this.leftBar.collapseMenu(),this.panelManager.openPanel("addPanelInfra.addPanel")},superApps:{addButton:function(b,d,e,f,g,h,i,j){var k=c(b,d,e,f,g,i,j),l=a.cloneDeep(this.editor.state.leftBar),m=[l.superApps.desktop];h&&m.push(l.superApps.mobile),m.forEach(function(c){var d=a.find(c,{panelName:b});d?a.assign(d,k):c.push(k)}),this.editor.setState({leftBar:l})},removeButton:function(b){var c=a.cloneDeep(this.editor.state.leftBar);c.superApps.desktop=a.reject(this.editor.state.leftBar.superApps.desktop,{panelName:b}),c.superApps.mobile=a.reject(this.editor.state.leftBar.superApps.mobile,{panelName:b}),d.call(this,c,b),this.editor.setState({leftBar:c})}},notifications:{setCount:function(b,c){var d=a.cloneDeep(this.editor.state.leftBar);d.notifications[b]=c,this.editor.setState({leftBar:d})},getCount:function(a){return this.editor.state.leftBar.notifications[a]},increaseCount:function(b,c){var d=a.cloneDeep(this.editor.state.leftBar);d.notifications[b]+=c||1,this.editor.setState({leftBar:d})},decreaseCount:function(b,c){var d=a.cloneDeep(this.editor.state.leftBar);d.notifications[b]-=c||1,this.editor.setState({leftBar:d})}}}}}),define("rEditor/app/APISections/selection",["lodash","core","util","baseUI","experiment"],function(a,b,c,d,e){"use strict";function l(a,b){var c=o.call(this,a);m.call(this,{selectedComponents:a,focusedContainer:c},b)}function m(b,c){var d=b.selectedComponents&&!a.isEqual(b.selectedComponents,this.editor.state.selectedComponents);this.editor.setState(b,function(){var b=this.editor.state.selectedComponents;if(d){var e=this.pluginService.getPlugin("selection","*");a.isFunction(e)&&e(b)}c&&c.call(this,b)}.bind(this))}function n(b,c){var d=c.getContainer(a.first(b));a(b).rest().every(function(a){return c.getContainer(a)===d})}function o(b){if(b&&b.length>=2&&!n(b,this.components))return null;for(var c=a.first(b),d=e.isOpen("se_hoverBox");c&&!this.components.is.focusable(c)&&(!d||a.isEmpty(this.components.modes.getModes(c)));)c=this.components.getContainer(c);return c}function p(a,b){return this.selection.isComponentSelected(a)?b.button===g?null:this.selection.deselectComponents(a):(this.closeCompPanelIfExists(),this.selection.addComponentToSelectionByRef(a))}function q(b,c){if(this.closeCompPanelIfExists(),e.isOpen("boxSlideShow")){var d=this.utils.getParentIfCompCanBeSelected(b);d&&(b=d)}var f=e.isOpen("firstTimePanels")&&c?this.openFirstTimePanel.bind(this,b):a.noop;this.selection.selectComponentByCompRef(b,f)}function r(b){var c=this.components.getSiblings(b),d=a.reject(c,function(a){return this.components.is.siteSegment(a)},this);return d}function s(a,b){var c=a.getComponentType(b);return"Page"===c||"AppPage"===c}function t(a,b){var c=this.editor.getPreviewFrameLayout();return{x:a-c.left,y:b-c.top}}function u(a,b,c){var d=a.selection.isComponentSelected(b),e=a.utils.findAncestorMatchesCondition(b,a.components.is.selectedBeforeDescendants),f=e&&c&&!a.components.isDescendantOfComp(c,e);return!d&&f?e:b}var f="compPanels.panels.MultiSelect.layoutPanel",g=2,h=d.uiConstants,i=c.browserUtil,j=!0,k=!1;return{selection:{isMultiSelectKeyPressed:function(a){return a.shiftKey||i.isSpecialKeyPressed(a)},isSingleSelectionComponent:function(c){var d=this.components.getType(c);return a.includes(b.constants.MULTISELECT.SINGLE_SELECTION_COMPONENT_TYPES,d)||this.components.layout.isShowOnFixedPosition(c)},setIsMouseUpSelectionEnabled:function(a){j=a},getIsMouseUpSelectionEnabled:function(){return j},setIsHiddenComponentDraggedNext:function(a){k=!!a},isHiddenComponentDraggedNext:function(){return k},getAnchorsUnderClick:function(b,c){var d=t.call(this,b,c),e=this.pages.getReference(this.pages.getFocusedPageId()),f=this.components.get.byType("wysiwyg.common.components.anchor.viewer.Anchor",e);return a.filter(f,function(a){var b=this.components.layout.getRelativeToScreenConsideringScroll(a);return b.y+=h.ANCHOR_OFFSET_TOP,d.x>=b.x&&d.x<=b.x+h.ANCHOR_WIDTH&&d.y>=b.y&&d.y<=b.y+h.ANCHOR_HEIGHT},this)},getComponentsUnderClick:function(a,b){var c=t.call(this,a,b),d=this.components.get.byXYRelativeToScreen(c.x,c.y,0,this.pages.getFocusedPageId()),e=this.selection.getAnchorsUnderClick(a,b);return e.concat(d)},getNonGroupCompUnderCursor:function(a,b){var c=this.selection.getComponentsUnderClick(a,b),d=0,f=c[d];if(e.isOpen("boxSlideShow"))for(;!this.components.is.selectable(f);)d++,f=c[d];else for(;this.components.is.group(f);)d++,f=c[d];return f||null},getComponentUnderClickToBeSelected:function(b,c){var d=this.selection.getNonGroupCompUnderCursor(b,c),e=a.first(this.selection.getSelectedComponents());return d?d=u(this,d,e):null},getComponentToBeMarkedByHoverBox:function(a,b){var c=this.selection.getComponentUnderClickToBeSelected(a,b);return c},selectComponentByClick:function(a){var b=this.selection.getComponentUnderClickToBeSelected(a.clientX,a.clientY),c=this.selection.isComponentSelected(b),d=this.selection.getSelectedComponents(),e="mousedown"===a.type;if(!b)return void this.selection.deselectComponents();if(!this.selection.isSelectedCompUnderCursorAndBeneathSiteSegment(d,a))if(this.selection.isMultiSelectKeyPressed(a)&&!c)p.call(this,b,a),this.selection.setLastSelectionClickPos(null);else{if(!this.multiselect.isMultiselect(d)){var g,f=this.components.layout.isShowOnFixedPosition(b);if(f)g={x:a.clientX,y:a.clientY};else{var h=this.ui.scroll.getScroll();g={x:a.clientX+h.scrollLeft,y:a.clientY+h.scrollTop}}this.selection.setLastSelectionClickPos(g)}if(c)return void this.selection.setIsMouseUpSelectionEnabled(!0);q.call(this,b,e)}},selectNonGroupCompUnderCursor:function(a){var b=this.selection.getNonGroupCompUnderCursor(a.clientX,a.clientY);return this.selection.isComponentSelected(b)?null:this.selection.isMultiSelectKeyPressed(a)?p.call(this,b):q.call(this,b)},selectComponentByCompRef:function(b,d){var g=this.components.asArray(b);if(g=a.uniq(g,"id"),!(g.length>30)&&(!(e.isOpen("boxSlideShow")&&g.length>0)||this.components.is.selectable(g))&&this.multiselect.canBeSelectedTogether(g)){g=a.isEmpty(g)?null:this.multiselect.removeGroupedCompsIfTheirGroupIsInArray(g);var h=a.find(this.panelManager.getOpenPanels(),{name:f});a.size(g)<2&&h&&this.panelManager.closePanelByName(f),this.components.layout.isPinned(g)?c.keyboardShortcuts.setContext(c.keyboardShortcuts.CONTEXTS.PIN_MODE):c.keyboardShortcuts.getContext()===c.keyboardShortcuts.CONTEXTS.PIN_MODE&&c.keyboardShortcuts.setContext(c.keyboardShortcuts.CONTEXTS.EDITOR),e.isOpen("exp171")&&!e.isOpen("hoverBoxStateToEditorStageOff")?l.call(this,g,d):m.call(this,{selectedComponents:g,hoveredComp:null},d)}},addComponentToSelectionByRef:function(a){var c=this.components.asArray(a),d=this.selection.getSelectedComponents()||[],e=d.concat(c);return e.length>1&&this.bi.event(b.bi.events.selection.MULTISELECT,{num_of_elements_selected:e.length,selection_method:"keyboard"}),this.selection.selectComponentByCompRef(e),d},getSelectedComponentId:function(){var b=this.selection.getSelectedComponents();return!!b&&a.first(b).id},getSelectedComponents:function(){return this.editor.state.selectedComponents},getFocusedContainer:function(){return this.editor.state.focusedContainer},getParentToFocus:function(a){return o.call(this,a)},getSelectedComponentType:function(){var b=this.selection.getSelectedComponents();return a.isEmpty(b)?null:this.getComponentType(a.first(b))},selectAll:function(){var d,e,c=this.selection.getSelectedComponents();this.multiselect.containsSiblingsOnly(c)&&this.selection.isComponentSelected()?this.components.is.siteSegment(c)||s(this,c)?d=this.components.getChildren(c):(e=r.call(this,c),d=c.concat(e)):d=(c||[]).concat(this.components.getChildren(this.pages.getFocusedPage())),a.isEmpty(d)||(this.closeCompPanelIfExists(),d.length>1&&this.bi.event(b.bi.events.selection.MULTISELECT,{num_of_elements_selected:d.length,selection_method:"keyboard"}),this.selection.selectComponentByCompRef(d))},getSelectedComponentData:function(){var a=this.selection.getSelectedComponents();return a?this.components.data.get(a):null},deselectComponents:function(b){c.keyboardShortcuts.getContext()===c.keyboardShortcuts.CONTEXTS.PIN_MODE&&c.keyboardShortcuts.setContext(c.keyboardShortcuts.CONTEXTS.EDITOR);var d=!b,e=this.components.asArray(b),f=this.selection.getSelectedComponents(),g=a.reject(f,function(b){return d||a.some(e,b)},this);this.selection.selectComponentByCompRef(g)},isComponentSelected:function(b){var c=this.selection.getSelectedComponents();if(a.isEmpty(b))return!!c;var d=this.components.asArray(b);return a.every(d,function(b){return a.some(c,b)})},setLastSelectionClickPos:function(a){a&&(a.y-=this.editorConfig.editingAreaLayout.top,a.x-=this.editorConfig.editingAreaLayout.left),m.call(this,{lastSelectionClickPos:a})},isSelectedCompUnderCursorAndBeneathSiteSegment:function(b,c){var d=this.selection.getComponentsUnderClick(c.clientX,c.clientY),e=this.pages.getReference(this.pages.getPrimaryPageId()),f=this.siteSegments.getRefs().concat(e),g=a.findIndex(d,function(b){return!!a.find(f,b)},this);if(-1===g)return!1;var h=!1;return a.forEach(b,function(b){a.forEach(d,function(c,d){a.isEqual(b,c)&&d>g&&(h=!0)})}),h}}}}),define("rEditor/app/APISections/databaseEditor",["savePublish","experiment!disableDbEditorAutoSave"],function(a,b){"use strict";function c(a,c,d,e){a.openPanel("compPanels.panels.AppPart2.databaseEditorPanel",{selectedComponentType:e,listId:c,compRef:d,autoSave:!b})}function d(a){a.openPanel("savePublish.panels.common.failPanel",{titleKey:"PUBLISH_ERROR_TITLE_LABEL",description:"SAVE_PUBLISH_ERROR_BODY_DESCRIPTION",steps:["SAVE_PUBLISH_ERROR_OPTION_1","SAVE_PUBLISH_ERROR_OPTION_2"],helpMessage:"SAVE_ERROR_LEARN_MORE_LABEL",helpLinkMessage:"SAVE_PUBLISH_ERROR_LEARN_MORE_LINK",helpLink:"http://www.wix.com/"})}function e(e,f){var g=this.panelManager,h=this.selection.getSelectedComponentType();!b&&this.generalInfo.isFirstSave()?a.saveInBackground(this,c.bind(null,g,e,f,h),d.bind(null,g)):c(g,e,f,h)}return{openDatabaseEditor:e}}),define("rEditor/app/APISections/welcomeScreensWrapper",["lodash","panels","util","core","experiment!newUserIntroVideo","experiment!appBuilderFeaturesRevival","experiment!newFeaturesIntroVideo"],function(a,b,c,d,e,f,g){"use strict";function h(a){return a.compatibility.hasOldApp()||a.compatibility.hasAppPage()}function i(a){var b=a.account.getEditorVersionsInfo(),c=window.editorModel.firstSave===!1&&b.isEligibleForSwitch===!1;return b&&!b.isNewUser&&!c}function j(a,b){var d=a.account.getEditorVersionsInfo(),e=d.isEligibleForSwitch?"START_NOW_CLICK_WITH_BACK_OPTION":"START_NOW_CLICK_WITHOUT_BACK_OPTION";l(a,e,b),c.cookie.setUserPetriOverrideCookie("SantaEditorUserOverride","new")}function k(a,b){l(a,"BACK_TO_OLD_EDITOR_CLICK",b),c.cookie.setUserPetriOverrideCookie("SantaEditorUserOverride","old"),c.windowInteractionUtils.reloadPageWithoutQuestion()}function l(a,b,c){var e=d.bi.events.newEditorWelcomeScreens[b],f={site_id:a.generalInfo.getSiteId()};e.fields.duration&&(f.duration=Date.now()-c),a.bi.event(e,f)}function m(b){return a(b.components.get.byType("wixapps.integration.components.AppPart2")).map(b.components.data.get).pluck("appPartName").map(b.wixapps.appbuilder.data.lists.getListVersion).some(function(a){return!a||"1.0"===a})}function n(a){if(!i(a))return!1;var b=a.account.getEditorVersionsInfo(),c="new"===b.userOverride,d="old"===b.userOverride&&b.isEligibleForSwitch;return!c&&!d}function o(a){return f&&i(a)&&m(a)}function p(a){var c=a.account.getEditorVersionsInfo(),d=o(a);b.panelManager.openPanel("panels.focusPanels.newEditorWelcomeScreenPanel",{isEligibleForSwitch:c.isEligibleForSwitch,onNextClick:d?q.bind(this,a):j.bind(this,a,Date.now()),nextBtnLabel:d?"Notification_Box_Next":"Notification_Box_Start_Now",onBackClick:k.bind(this,a,Date.now())})}function q(a){var c=a.account.getEditorVersionsInfo();b.panelManager.openPanel("panels.focusPanels.newEditorListWelcomeScreenPanel",{isEligibleForSwitch:c.isEligibleForSwitch,onNextClick:j.bind(this,a,Date.now()),onBackClick:k.bind(this,a,Date.now())})}function r(a){if(!e)return!1;var b=a.siteName.getUsed(),c=b?0===b.length:!0,d=!!a.getUserPreferences().global.get("didPassNewUserVideoCheck");return d?!1:(a.getUserPreferences().global.set("didPassNewUserVideoCheck",!0),c)}function s(a){var b=a.account.getEditorVersionsInfo(),c=a.siteName.getUsed(),d=c?0===c.length:!0,e=b&&"old"!==b.userOverride;return e&&!d}function t(a){var b=a.getUserPreferences().global.get("didPassNewFeaturesVideoCheck");return!g||b?!1:!i(a)&&s(a)}function u(a){a.getUserPreferences().global.set("didPassNewFeaturesVideoCheck",!0),b.panelManager.openPanel("panels.focusPanels.newFeaturesVideoPanel",{})}return{initWelcomeScreen:function(a){var d="true"===c.url.getParameterByName("disableWelcomeScreen");if(!d){if(a.wixStores.isSiteInWixStoreTestDrive())return;t(a)?u(a):r(a)?b.panelManager.openPanel("panels.focusPanels.newUserIntroVideoPanel",{}):h(a)?b.panelManager.openPanel("panels.focusPanels.editorMigrationFailedPanel",{}):n(a)?p(a):o(a)&&q(a)}}}}),define("rEditor/app/APISections/layoutersWrapper",["lodash","rEditor/utils/multiSelectHandler"],function(a,b){"use strict";var c="wysiwyg.viewer.components.BoxSlideShow",d="wysiwyg.viewer.components.StripContainerSlideShow";return{components:{canBeShownOnAllStates:function(a,e){var f={multiCompHandler:this.multiselect.canBeMasterChild,singleCompHandler:this.documentServices.layouters.canBeMasterChild};return e?b.call(this,a,e,f):b.call(this,a,c,f)||b.call(this,a,d,f)},toggleShowOnAllStates:function(a,e){return e||(e=this.components.canBeShownOnAllStates(a,c)?c:d),b.call(this,a,e,{multiCompHandler:this.multiselect.toggleShowOnAllStates,singleCompHandler:this.documentServices.layouters.toggleMasterChild})},isShownOnAllStates:function(a,e){var f={multiCompHandler:this.multiselect.isShownOnAllStates,singleCompHandler:this.documentServices.layouters.isMasterChild};return e?b.call(this,a,e,f):b.call(this,a,c,f)||b.call(this,a,d,f)}}}}),define("rEditor/app/APISections/copyPasteWrapper",["lodash","core","experiment"],function(a,b,c){"use strict";function f(a){var b={};if(c.isOpen("boxSlideShow")&&this.components.canBeShownOnAllStates(a)){var d=e.getSlideShowParent(this,a),f=e.getSlideShowSlideParent(this,a);if(f){b.originalParent=f,b.originalGrandParent=d;var g=this.components.layout.getRelativeToStructure(a),h=this.components.layout.getRelativeToStructure(f);b.relativeToParentLayout={x:g.x-h.x,y:g.y-h.y}}}return b}function g(b,d){if(c.isOpen("boxSlideShow")&&b.originalGrandParent&&this.components.is.slidesContainer(b.originalGrandParent)){var e=this.components.get.byXYRelativeToStructure(d.x,d.y);return!!a.find(e,b.originalGrandParent)}return!1}function h(a,b){return g.call(this,a,b)?e.findCurrentSlide(this,a.originalGrandParent):null}function i(b,c){return g.call(this,b,c)?a.isEqual(e.findCurrentSlide(this,b.originalGrandParent),b.originalParent)?null:b.relativeToParentLayout:null}function j(b){if(a.isEmpty(b))return!1;var c=this.isMobileEditor(),d=this.pages.data.get(this.pages.getPrimaryPageId()).isLandingPage,e=a.some(b.components,"isShowOnAllPages");return!(c||d&&e)}function k(b){return a.has(b,"x")&&a.has(b,"y")}function l(b){return a.includes(d,b)}function m(a,b){return[].concat(a[b]||[],a["*"]||[])}function n(b,c,d){var e=this.pages.getFocusedPageId(),f=[],g=this.components.asArray(b.components),j=this.siteSegments.getPagesContainer(),n=this.siteSegments.layout.get(j);c=k(c)?c:null;var o=this.pasteLogic.pasteContext.getPastePosition(this,b.snugLayoutRelativeToStructure,e);return a.forEach(g,function(b){var g=b.serializedComp,j=l(g.componentType),k=this.pages.getReference(j?this.pages.getMasterPageId():e),p=h.call(this,b,o);if(p){var q=this.components.layout.getRelativeToStructure(p);c=c||{},c.x=o.x-q.x,c.y=o.y-q.y,k=p}var r=a.clone(c),s=a.clone(o);r?j&&(r.y+=n.y):(j||(s.y-=n.y),r=s),g.layout.x=r.x+b.positionRelativeToSnug.x,g.layout.y=r.y+b.positionRelativeToSnug.y,d&&(g.layout.x-=g.layout.width/2,g.layout.y-=g.layout.height/2);var t=i.call(this,b,o);t&&(g.layout.x=t.x,g.layout.y=t.y);var u=m(this.pasteComponentPlugins,g.componentType);a.forEach(u,function(a){g=a(this,g)});var v=this.components.add(k,g);f.push(v)},this),f}function o(a){return this.components.is.duplicatable(a)}function p(b){var c=this.components.layout.getRelativeToStructure(b),d=this.pages.getFocusedPageId();this.pasteLogic.pasteContext.setPasteData(c,d,this.ui.scroll.getScroll());var e={snugLayoutRelativeToStructure:c,components:a.map(b,function(b){var d=this.components.serialize(b),e=this.components.style.getId(b);e&&(d.style=e),d.layout=this.components.layout.getRelativeToStructure(b);var g=this.components.getType(b);this.copyComponentPlugins[g]&&(d=this.copyComponentPlugins[g](b,d));var h=f.call(this,b);return a.merge({serializedComp:d,positionRelativeToSnug:{x:d.layout.x-c.x,y:d.layout.y-c.y},isShowOnAllPages:this.components.isShowOnAllPages(b)},h)},this)};return e}function q(b){var c=this.pages.getFocusedPageId(),d=[],e=this.siteSegments.getPagesContainer(),g=this.siteSegments.layout.get(e);return a.forEach(b,function(b){var e=this.components.serialize(b),i=l(e.componentType),j=this.components.layout.getRelativeToStructure(b).bounding,k=this.components.style.getId(b);k&&(e.style=k),this.pasteLogic.duplicateContext.setPasteData(j,c,this.ui.scroll.getScroll());var m=this.pasteLogic.duplicateContext.getPastePosition(this,j,c);i||(m.y-=g.y),e.layout.x=m.x,e.layout.y=m.y;var n=this.pages.getReference(i?this.pages.getMasterPageId():c),o=a.merge({serializedComp:e},f.call(this,b)),p=h.call(this,o,m);p&&(n=p);var q=this.components.getType(b);this.copyComponentPlugins[q]&&(e=this.copyComponentPlugins[q](b,e));var r=this.components.add(n,e);d.push(r)},this),d}var d=["wysiwyg.viewer.components.tpapps.TPAGluedWidget"],e=b.utils.boxSlideShowUtils;return{components:{copy:function(a){if(a){var c=this.components.asArray(a);if(c=this.multiselect.getComponentsWhichDontHaveAncestorsInTheArray(c),!o.call(this,c))return void(this.isMobileEditor()&&this.openCantCopyPastePanel());var d=p.call(this,c);this.clipboard.setItem(b.constants.EDITOR_CLIPBOARD_TYPES.COMPONENT,d)}},paste:function(a,c){var d=this.clipboard.getItem(b.constants.EDITOR_CLIPBOARD_TYPES.COMPONENT);if(!j.call(this,d))return void(this.isMobileEditor()&&this.openCantCopyPastePanel());var e=n.call(this,d,a,c);this.editor.state.performingMouseMoveAction||this.waitForChangesApplied(function(){this.selection.selectComponentByCompRef(e)}.bind(this))},duplicate:function(b){if(!b)return[];var c=this.selection.getSelectedComponents(),d=this.components.asArray(b);if(c=this.multiselect.getComponentsWhichDontHaveAncestorsInTheArray(c),d=this.multiselect.getComponentsWhichDontHaveAncestorsInTheArray(d),!this.components.is.duplicatable(d))return[];a.isEqual(d,c)&&this.selection.deselectComponents();var e=q.call(this,d);return this.waitForChangesApplied(function(){this.selection.selectComponentByCompRef(e)}.bind(this)),e}}}}),define("rEditor/app/APISections/wixStoresFlowAPI",["lodash","util"],function(a,b){"use strict";return{wixStores:{isSiteInWixStoreTestDrive:function(){return a.includes(b.editorModel.metaSiteFlags,"EComTestDrive")}}}}),define("rEditor/app/APISections/editorUI",[],function(){"use strict";return{ui:{scroll:{getScroll:function(){return this.editor.getScroll()},setScroll:function(a){return this.editor.setScroll(a)},animateScroll:function(a,b,c){this.editor.animateScroll(a,b,c)},addListener:function(a){return this.editor.addScrollListener(a)},removeListener:function(a){return this.editor.removeScrollListener(a)}},stage:{getEditingAreaLayout:function(){return this.editor.getEditingAreaLayout()}},focus:{setOnEditor:function(){this.editor.setFocus()}}}}}),define("rEditor/app/APISections/wixCode",[],function(){"use strict";function b(){return this.editor.state[a]}function c(){this.toggleEditorStateParam(a,!0)}var a="wixCodeLoaded";return{wixCode:{isLoaded:b,setLoaded:c}}}),define("rEditor/app/APISections/columns",["lodash"],function(a){"use strict";function e(b){var c=b,d=a.sum(c),e=100-d;return e&&(c[0]+=e),c}function f(b){var c=a.sum(b);return e(a.map(b,function(a){return Math.round(100*a/c)}))}function g(b,c){var d=i.call(this,b),e=this.components.getChildren(b);a.forEach(e,function(a,b){this.components.layout.update(a,{width:c[b]})},this);var g=f(c);v.call(this,e,d,g)}function h(b,c,d){a.isUndefined(c)||this.components.arrangement.moveToIndex(b,c,d)}function i(b){var c=this.components.getChildren(b),d=a(c).map(this.components.layout.get).pluck("width").value();return f(d)}function j(a){this.components.getChildren(a).length===b&&g.call(this,a,c)}function k(a){var b=i.call(this,a),c=b.reverse();g.call(this,a,c)}function l(b,c){var d=this.components.serialize(b),e=this.components.getContainer(b),g=a.findIndex(this.components.getChildren(e),b)+1,k=i.call(this,e);k.splice(g,0,k[g-1]);var l=f(k);return this.components.add(e,d,void 0,function(b){var d=!0;h.call(this,b,g,d),j.call(this,e);var f=this.components.getChildren(e);v.call(this,f,k,l),this.history.add("added column"),a.isFunction(c)&&this.waitForChangesApplied(c)}.bind(this))}function m(b,c){var d=this.components.getChildren(b),e=a.last(d);return l.call(this,e,c)}function n(a,b){this.components.data.update(a,{alignment:b})}function o(a){return this.components.data.get(a).alignment}function p(a){this.components.arrangement.moveBackward(a)}function q(a){this.components.arrangement.moveForward(a)}function r(a){return this.components.getChildren(a).length<b}function s(b){var c=this.components.getChildren(b),d=a(c).map(s,this).flatten().value();return d.concat(c)}function t(a,b,c,e){var f=this.components.layout.getRelativeToStructure(b),g=f.x-a.x,h=f.width,i=this.components.is.resizable(b),j=i?h*c:h,k={width:j};if(!this.components.is.group(b)){if(e===d.LEFT)k.x=g*c;else if(e===d.CENTER){var l=g+h/2,m=l*c;k.x=m-j/2}else{var n=g+h,o=n*c;k.x=o-j}k.x+=a.x;var p=!0;this.components.layout.updateRelativeToStructure(b,k,p)}}function u(a,b,c){var d=a[c],e=b[c];return d&&e?d/e:null}function v(b,c,d){a.forEach(b,function(b,e){var f=u(d,c,e);if(f){var g=s.call(this,b),h=this.components.data.get(b).alignment,i=this.components.layout.getRelativeToStructure(b);a.forEach(g,function(a){t.call(this,i,a,f,h)},this)}},this)}function w(b){var c=this.components.getContainer(b),d=this.components.getChildren(c),e=a.findIndex(d,b),g=i.call(this,c);g.splice(e,1),d.splice(e,1),v.call(this,d,g,f(g)),this.selection.deselectComponents(),this.documentServices.components.remove(b)}var b=5,c=a.times(b,function(){return 1}),d={LEFT:0,CENTER:50,RIGHT:100};return{columns:{addColumn:m,removeColumn:w,canAdd:r,proportions:{set:g,get:i,flip:k,fix:e,toPercentages:f},columnAlignment:{set:n,get:o},move:{left:p,right:q}}}}),define("rEditor/app/APISections/pagesWrapper",["lodash","core","util","rEditor/utils/removeUtil","rEditor/app/updateOperationsPlugins","pLoader!santa:utils"],function(a,b,c,d,e,f){"use strict";function h(b,d){c.keyboardShortcuts.enable(),this.getPreviewMode()||this.applyPreviewScrollToEditorScroll(),a(this.pageNavigationCallbacks).concat(d).compact().forEach(function(a){a(b)}).value()}function i(c,d){var e=c.style;a.isObject(c.style)&&(e=b.styleManager.getStyleIdByDef(d.theme,d.components,c.style,c.componentType)),e&&(c.style=e),a.forEach(c.components,function(a){i(a,d)})}function j(b,c){var d=b.behaviors.get(c),e=a.filter(d,{action:{name:"load"},behavior:{name:"openPopup"}});return a.map(e,function(a){return{pageId:a.action.sourceId,popupId:a.behavior.targetId,params:a.behavior.params}})}function k(b,c){var d=b.pages.data.get(c);return a.get(d,"title")||""}var g="masterPage";return{pages:{add:function(a,b){return b&&(b.data.pageUriSEO=this.pages.data.pageUriSEO.getValid("",b.data.pageUriSEO)),this.documentServices.pages.add(a,b)},navigateTo:function(a,d){this.selection.deselectComponents(),c.keyboardShortcuts.disable(),this.documentServices.pages.navigateTo(a,h.bind(this,a,d)),this.developerMode.setContext(this.developerMode.createContext(b.constants.DEVELOPER_MODE.CONTEXT_TYPES.PAGE))},navigateToAndScroll:function(a,c,d){this.selection.deselectComponents(),this.documentServices.pages.navigateToAndScroll(a,c,d),this.developerMode.setContext(this.developerMode.createContext(b.constants.DEVELOPER_MODE.CONTEXT_TYPES.PAGE))},getCurrentUrlPageTitle:function(){if(!this.documentServices)return null;var a=this.documentServices,b=a.pages.getCurrentUrlPageId();return k(a,b)},getPageTitle:function(a){return k(this.documentServices,a)},remove:function(a,b){this.selection.deselectComponents(),d.removePage(this,this.documentServices,this.removePlugins,a,b)},beforePageRemoveHook:function(a,b){var d,c=this.homePage.get();c===a&&(d=this.mainMenu.getFirstNonHomePageMenuItem(),d&&(this.homePage.set(d.pageData.id),c=d.pageData.id.replace(/^#/,""))),this.documentServices.pages.navigateTo(c,b)},isPageExist:function(a){return this.pages.doesPageExist(a)},isHomePage:function(a){return a===this.homePage.get()},serialize:function(a,b){var c=this.documentServices.pages.serialize(a,!0);return b&&i(c,this),c},data:{update:function(a,c){c.isLandingPage&&this.selection.deselectComponents(),c.pageUriSEO&&(c.pageUriSEO=this.pages.data.pageUriSEO.getValid(a,c.pageUriSEO)),c=b.utils.updateDataUtil.fixData(c),this.documentServices.pages.data.update(a,c),e.updatePagePlugins.run(this,a)}},background:{update:function(a,c,d){c=b.utils.updateDataUtil.fixData(c),this.documentServices.pages.background.update(a,c,d)}},transitions:{set:function(a){this.documentServices.pages.transitions.set(a),this.history.add("page transition")}},popupPages:{open:function(a){this.selection.deselectComponents(),this.documentServices.pages.popupPages.open(a)},close:function(){this.hideFloatingBubble(),this.selection.deselectComponents(),this.documentServices.pages.popupPages.close()},getCurrentPopup:function(){var a=this.pages.popupPages.getCurrentPopupId();return this.components.get.byId(a)},getCurrentPopupData:function(){var a=this.documentServices.pages.popupPages.getCurrentPopupId();return this.pages.data.get(a)},getCurrentMainContainer:function(){var b=this.documentServices.pages.popupPages.getCurrentPopupId(),c=this.documentServices.components.get.byId(b);return a.first(this.documentServices.components.get.byType(f.constants.POPUP.POPUP_CONTAINER.COMPONENT_TYPE,c))},toggleOverlay:function(a,b){this.documentServices.pages.popupPages.properties.update(a,{showOverlay:!b.showOverlay},this.documentServices.viewMode.VIEW_MODES.DESKTOP),this.history.add("toggle popup overlay")},getOpenBehaviorsForPopups:function(){var b=this.pages.getPageIdList(),c=this.viewMode.get(),d=function(a){return{id:a,type:c}},e=d(g),f=a.map(b,d);return a.flatten(a.map([e].concat(f),a.partial(j,this)))},getOpenBehaviorsForPopupWithId:function(b){return a.filter(this.pages.popupPages.getOpenBehaviorsForPopups(),{popupId:b})}}}}}),define("rEditor/app/pluginService",["lodash"],function(a){"use strict";var b={},c={DOUBLE_CLICK:"doubleClick"},d=function(c,d,e){a.set(b,[c,d],e)},e=function(c,d){return a.get(b,[c,d])};return{pluginConstants:c,registerPlugin:d,getPlugin:e}}),define("rEditor/app/updateThemePlugins/tinyMenu",["lodash"],function(a){"use strict";return function(b,c){if(c&&c.style&&c.style.properties){var d=c.style.properties,e=c.style.propertiesSource,f=d["alpha-txt"];if(a.isUndefined(f)||(a.isUndefined(d["alpha-iconcolor"])&&(d["alpha-iconcolor"]=f),a.isUndefined(d["alpha-bordercolor"])&&(d["alpha-bordercolor"]=f)),delete d["alpha-txt"],delete d["alpha-txts"],e){var g=e["alpha-txt"];e["alpha-iconcolor"]=e["alpha-iconcolor"]||g,e["alpha-bordercolor"]=e["alpha-bordercolor"]||g,delete e["alpha-txt"],delete e["alpha-txts"]}}}}),define("rEditor/app/updateThemePlugins",["rEditor/app/updateThemePlugins/tinyMenu"],function(a){"use strict";function c(a,c){var d=b[c.skin];d&&d(a,c)}var b={"wysiwyg.viewer.skins.mobile.TinyMenuSkin":a};return{register:function(a){a.theme.styles.registerHook(c)}}}),define("rEditor/app/tooltipTextService",["lodash"],function(a){"use strict";function c(c,d,e){a.isUndefined(b[c])&&(b[c]={}),b[c][d]=e}function d(a,c){return b[a]?b[a][c]||null:null}function e(a){var b=this.selection.getSelectedComponents();return this.tooltipTextService.getComponentTooltipText(b,a)}function f(a,b){var c=this.components.getType(a);return this.tooltipTextService.getTooltipText(c,b)}function g(){b={}}var b={};return{registerTooltipText:c,getTooltipText:d,getSelectedComponentTooltipText:e,getComponentTooltipText:f,clearAllToolTipsText:g}}),define("rEditor/pasteLogic/pasteLogicCalculations",[],function(){"use strict";function b(b){return{x:b.x+a.xOffset,y:b.y+a.yOffset}}function c(b){return{x:b.x+a.newStackOffset.x,y:b.y-a.newStackOffset.y}}function d(b,c,d){var e=a.rightThreshold,f=a.bottomThreshold;return d&&(e=0,f=0),c.x+e>b.rightX||c.y+f>b.stageLayout.bottom+b.scrollTop}function e(a,b,c){var d=a.siteSegments.getPagesContainer(),e=a.siteSegments.layout.get(d);return{x:(e.width-c.width)/2,y:(b.stageLayout.height-c.height)/2+b.scrollTop-e.y}}function f(a,b,c){var d=a.siteSegments.getPagesContainer(),e=a.siteSegments.layout.get(d);return c.y>e.height+b.stageLayout.top}function g(b,c){return c.y>=b.stageLayout.top&&c.y+a.bottomThreshold<=b.stageLayout.bottom-b.stageLayout.top+b.scrollTop}var a={xOffset:40,yOffset:30,newStackOffset:{x:60,y:40},bottomThreshold:80,rightThreshold:80};return{getNextComponentPosition:b,getNewStackComponentPosition:c,cannotFitIntoViewPort:d,
getCenteredCompPosition:e,isComponentInViewPort:g,cannotFitIntoPageHeight:f}}),define("rEditor/pasteLogic/ComponentPasteLogic",["lodash","core","rEditor/pasteLogic/pasteLogicCalculations"],function(a,b,c){"use strict";function d(){return a.isEmpty(this.firstCompPosition)}function e(a){return a!==this.lastCompPage}function f(a,b,d){return this.centerOnFirstPaste||e.call(this,d)&&c.cannotFitIntoPageHeight(a,b,this.originalCompPosition)}function g(a,b,d){c.isComponentInViewPort(b,d)||a.ui.scroll.setScroll({scrollLeft:0,scrollTop:d.y})}function h(a){this.lastCompPage||(this.lastCompPage=a),e.call(this,a)&&this.resetPastePosition()}function i(a){return a.y<0}function j(a,b,d,h){var j={};if(f.call(this,a,b,h))j=c.getCenteredCompPosition(a,b,d),i(j)&&(j.y=0);else if(e.call(this,h))j=this.originalCompPosition,g(a,b,j);else{var k=a.ui.scroll.getScroll();j={x:this.originalCompPosition.x,y:this.originalCompPosition.y-this.originalScrollPosition+k.scrollTop}}return this.firstCompPosition=j,j}function k(a){var b=c.getNextComponentPosition(this.lastCompPosition);return c.cannotFitIntoViewPort(a,b)&&(b=c.getNewStackComponentPosition(this.firstCompPosition),this.firstCompPosition=b),b}function l(a){a=a||{},this.originalCompPosition={},this.originalScrollPosition=0,this.firstCompPosition={},this.lastCompPosition={},this.lastCompPage="",this.centerOnFirstPaste=a.centerOnFirstPaste||!1,this.lastScrollPosition=null}return l.prototype.setPasteData=function(a,b,c){this.originalScrollPosition=c.scrollTop,this.originalCompPosition={x:a.x,y:a.y},this.firstCompPosition={x:a.x,y:a.y},this.lastCompPosition={x:a.x,y:a.y},this.lastCompPage=b},l.prototype.resetPastePosition=function(){this.firstCompPosition={},this.lastCompPosition={}},l.prototype.getPastePosition=function(c,e,f){var g=c.ui.scroll.getScroll();this.lastScrollPosition&&!a.isEqual(g,this.lastScrollPosition)&&this.resetPastePosition();var i=b.utils.stageUtils.getViewPort(!0),l=a.pick(e,["width","height"]),m={};return h.call(this,f),m=d.call(this)?j.call(this,c,i,l,f):k.call(this,i),this.lastCompPosition=m,this.lastCompPage=f,this.lastScrollPosition=g,a.clone(m)},l}),define("rEditor/pasteLogic/AddPanelPasteLogic",["rEditor/pasteLogic/ComponentPasteLogic"],function(a){"use strict";function b(){a.call(this,{centerOnFirstPaste:!0}),this.lastCompTypeAdded=""}return b.prototype=Object.create(a.prototype),b.prototype.constructor=b,b.prototype.getPastePosition=function(b,c,d,e){return e!==this.lastCompTypeAdded&&this.resetPastePosition(),this.lastCompTypeAdded=e,a.prototype.getPastePosition.call(this,b,c,d)},b}),define("rEditor/pasteLogic/pasteLogicContext",["lodash","rEditor/pasteLogic/ComponentPasteLogic","rEditor/pasteLogic/AddPanelPasteLogic"],function(a,b,c){"use strict";var d=new b,e=new b,f=new b({centerOnFirstPaste:!0}),g=new c;return{pasteContext:d,duplicateContext:e,addContext:f,addPanelPasteLogic:g}}),define("rEditor/bi/errors.json",[],function(){return{QUALAROO_SURVEY_TIMEOUT_NOT_SENT:{errorCode:8,errorName:"QUALAROO_SURVEY_TIMEOUT_NOT_SENT",desc:"qualaroo component was added without a timeout prop",severity:"error"}}}),define("rEditor/bi/bi",["rEditor/bi/events.json","rEditor/bi/errors.json"],function(a,b){"use strict";var c=function(b){b.bi.register("rEditor","event",a)};return{events:a,errors:b,registerEvents:c}}),define("rEditor/app/EditorAPI",["pLoader!santa:utils","lodash","jquery","core","baseUI","panels","util","mediaServices","compPanels","rEditor/app/panelHelpers","rEditor/app/updateOperationsPlugins","rEditor/app/pluginsRegistrar","userPreferences","savePublish","rEditor/app/APISections/concurrentUsersWrapper","rEditor/app/APISections/themeWrapper","rEditor/app/APISections/historyWrapper","rEditor/app/APISections/imageCrop","rEditor/app/APISections/siteWrapper","rEditor/app/APISections/domainWrapper","rEditor/app/APISections/developerMode","rEditor/app/APISections/selectedComponent","rEditor/app/APISections/savePublishWrapper","rEditor/app/APISections/componentsWrapper","rEditor/app/APISections/rulersAPI","rEditor/app/APISections/feedback","rEditor/app/APISections/mainMenuWrapper","rEditor/app/APISections/multiselect","rEditor/app/APISections/leftBarAPI","rEditor/app/APISections/selection","rEditor/app/APISections/databaseEditor","rEditor/app/APISections/welcomeScreensWrapper","rEditor/app/APISections/layoutersWrapper","rEditor/app/APISections/copyPasteWrapper","rEditor/app/APISections/wixStoresFlowAPI","rEditor/app/APISections/editorUI","rEditor/app/APISections/wixCode","rEditor/app/APISections/columns","rEditor/app/APISections/pagesWrapper","rEditor/app/pluginService","rEditor/app/updateThemePlugins","rEditor/app/tooltipTextService","rEditor/pasteLogic/pasteLogicContext","rEditor/bi/bi","textControls","blog","experiment","constants","uiAnimations"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V){"use strict";function Z(){return{topBarHeight:Y.TOPBAR_HEIGHT,previewHeight:"100%",previewWidth:null,languages:["latin"],extraSiteHeight:40,editingAreaLayout:{top:Y.TOPBAR_HEIGHT,left:0}}}function ba(a){var b=a.refs.preview.getDOMNode(),c=b.contentWindow;c.selection?c.selection.empty():c.getSelection&&c.getSelection().removeAllRanges()}function ca(a,c){var d=b.pick(a,["top","left","height","width"]);return d.top+=c,d}function da(a){g.bindOwnMethodsDeep(this,this),this.previewReady=!1,this.documentServices=null,this.userPreferences=new m,this.editor=a,this.editorConfig=Z(),this.pendingStateChanges={},this.pendingEditorStateUpdateCallbacks=[],this.removePlugins={},this.compNamePlugins={},this.compIconPlugins={},this.cannotRemovePlugins={},this.copyComponentPlugins={},this.pasteComponentPlugins={},this.pageNavigationCallbacks=[],this.viewerUpdateCallbacks=[this.onViewerChanged],this.goToPreviewCallbacks=[],this.userPreferencesInitCallbacks=[this.initViewToolsFromUserPrefs,this.initUserAddedColors,this.initWelcomeScreen,this.initDevModeValues],this.sitePublishedCallbacks=[],this.deviceTypeChangeCallbacks=[],this.registeredHideBubbleOnPreview=!1,this.isSavedInCurrentSession=!1,this.pasteLogic=Q,this.mediaServices=h,this.panelManager=f.panelManager,window.testApi&&window.testApi.domSelectors&&(window.testApi.domSelectors.setSearchRoot(this.editor),window.testApi.editorAPI=this,window.testApi.bi=g.automationUtil.bi),U.isOpen("columns")&&(this.removePlugins["wysiwyg.viewer.components.Column"]=b.bind(function(a){this.columns.removeColumn(a)},this))}var W=g.serviceTopology.dashboardUrl.replace(/create\//,"")+"/"||"http://www.wix.com/my-account/",X=g.serviceTopology.wixStoresMigrationServiceUrl.replace(/ecommerce-migration-web\//,"bi-profile-server/userprofile")||"http://editor.wix.com/_api/wix-bi-profile-server/userprofile",Y=e.uiConstants,$={toolbarEnabled:!0,developerModeEnabled:!1,showHiddenComponents:!0,guidelinesEnabled:!0,sectionsHandlesEnabled:!0,snapToEnabled:!0,rulersEnabled:void 0,rulers:{guidesState:{},selectedGuide:void 0,isHovered:!1}},_=["latin"],aa=null;return da.prototype=b.defaultsDeep({},B,w,x,y,z,A,C,p,q,r,s,t,u,v,D,E,G,H,o,I,J,K,L,M,{onPreviewReady:function(a){this.previewReady=!0,this.setDocumentServices(a),this.bi.event=this.bi.eventWithEditorPresets(this.bi.event),this.onViewerChanged(),this.updateUserPreferencesOnPreviewReady(),this.components.onPreviewReady(this),this.synchronizeSiteSEOToMainPageSEO(),n.setTimerForSaveReminder(this),this.panelManager.initBIHandler(this.bi),this.feedback.init(),this.documentServices.__setDs_OperationsQAllAsyncIsOpen(U.isOpen("ds_OperationsQAllAsync")),this.documentServices.registerToSiteChanged(this.notifyViewerUpdate),this.documentServices.documentMode.enableAction("screenIn",!1),U.isOpen("se_hoverBox")&&this.documentServices.documentMode.enableAction("modeChange",!1),this.documentServices.documentMode.enableAction("exit",!1),this.documentServices.documentMode.enableBgVideoAutoplay(!1),this.documentServices.generalInfo.isFirstSave()||this.leftBar.collapseMenu(),d.bi.registerEvents(this),this.initPlugins(),this.campaigns.fetchCampaignInfo(),this.documentServices.generalInfo.isFirstSave()&&this.initTemplateCharacterSet(),this.promotions.initPromotions()},isMetaSiteFlagOpen:function(a){return b.includes(g.editorModel.metaSiteFlags,a)},triggerMouseUpOnEditor:function(a){this.editor.onMouseUp(a)},synchronizeSiteSEOToMainPageSEO:function(){var a=this.seo.title.get()||"",b=this.seo.description.get()||"",c=this.seo.keywords.get()||"",d=this.homePage.get(),e=this.pages.data.get(d);e.pageTitleSEO=a,e.descriptionSEO=b,e.metaKeywordsSEO=c,this.pages.data.update(d,e)},initTemplateCharacterSet:function(){function c(a){return b.isEqual(a,_)}function d(a){return b.includes(a,"arabic")&&b.includes(a,"hebrew")}var a=this.documentServices.theme.fonts.getCharacterSet();if(c(a)||d(a)){var e=this.documentServices.theme.fonts.getLanguageCharacterSet(this.getLanguageCode());if(e)this.documentServices.theme.fonts.updateCharacterSet(e);else{var f=this.documentServices.theme.fonts.getCharacterSetByGeo();this.documentServices.theme.fonts.updateCharacterSet(f)}}},initPanelManager:function(){this.panelManager.registerObserver(this.onPanelsUpdated)},setDocumentServices:function(a){this.documentServices=a;var c={};b.merge(c,this.documentServices,this),b.merge(this,c)},initPlugins:function(){l.register(this),O.register(this)},getLanguageCode:function(){return g.languages.getLanguageCode()},getViewTools:function(){return b.clone(this.editor.state.viewTools)},updateUserPreferencesOnPreviewReady:function(){function h(){a.userPreferencesInitCallbacksInvoked=!0,b.forEach(a.userPreferencesInitCallbacks,function(a){a()})}function i(a){e=e||a===d.constants.USER_PREFS.TYPES.GLOBAL,f=f||a===d.constants.USER_PREFS.TYPES.SITE,e&&(f||g)&&h()}var e,f,a=this,c=this.generalInfo.getSiteId(),g=a.documentServices.generalInfo.isFirstSave();this.userPreferences.loadGlobalPreferences(i.bind(this,d.constants.USER_PREFS.TYPES.GLOBAL)),g||a.userPreferences.loadSitePreferences(c,!1,i.bind(this,d.constants.USER_PREFS.TYPES.SITE))},initWelcomeScreen:function(){this.newEditorWelcomeScreenWrapper.initWelcomeScreen(this)},initDevModeValues:function(){var a=this.userPreferences.site.get(d.constants.USER_PREFS.VIEW_TOOLS.SHOW_HIDDEN_COMPS);this.documentServices.documentMode.showHiddenComponents(a)},initViewToolsFromUserPrefs:function(){var a=d.constants.USER_PREFS.VIEW_TOOLS,c={showHiddenComponents:this.userPreferences.site.get(a.SHOW_HIDDEN_COMPS),developerModeEnabled:this.userPreferences.site.get(a.DEVELOPER_MODE_ENABLED),developerToolBarEnabled:this.userPreferences.site.get(a.DEVELOPER_TOOLBAR_ENABLED),guidelinesEnabled:this.userPreferences.site.get(a.GUIDELINES_ENABLED),sectionsHandlesEnabled:this.userPreferences.site.get(a.SECTIONS_HANDLES_ENABLED),snapToEnabled:this.userPreferences.site.get(a.SNAPTO_ENABLED),rulersEnabled:this.userPreferences.site.get(a.RULERS_ENABLED),rulers:{guidesState:this.userPreferences.site.get(a.GUIDES_STATE)}};b.defaults(c,$),this.editor.setState({viewTools:c}),this.rulers.resetRulersHistory()},initUserAddedColors:function(){var a=this.documentServices.theme.colors.getCustomUsedInSkins(),c=d.constants.USER_PREFS.THEME.COLORS.CUSTOM.USER_ADDED,e=this.userPreferences.session.get(c);e=b.intersection(e,a),this.userPreferences.session.set(c,e)},updatePreviewTop:function(a){var c=b.isUndefined(a)?this.editor.state.hideTools&&!this.editor.state.hideToolsAndMaintainStagePosition:a;this.editorConfig.editingAreaLayout.top=Y.TOPBAR_HEIGHT,c&&(this.editorConfig.editingAreaLayout.top-=Y.OFFSET_TOP_WHEN_TOOLS_HIDDEN),this.isMobileEditor()&&(this.editorConfig.editingAreaLayout.top+=Y.MOBILE_PREVIEW_TOP)},updateEditingAreaLayout:function(a){b.assign(this.editorConfig,{editingAreaLayout:a})},updateConfig:function(){this.editorConfig.previewHeight=this.documentServices.site.getHeight(),this.updatePreviewTop()},onPanelsUpdated:function(){this.editor.setState({openPanels:this.panelManager.getOpenPanels(),helpProps:this.panelManager.getHelpPanelProps()})},notifyViewerUpdate:function(a){this.waitForChangesApplied(function(){b.forEach(this.viewerUpdateCallbacks,function(b){b(a)})}.bind(this))},setStateWaitForViewer:function(a){b.assign(this.pendingStateChanges,a)},setStateUpdateCallback:function(a){this.pendingEditorStateUpdateCallbacks.push(a)},getPendingStateChanges:function(){return b.reduce(this.pendingEditorStateUpdateCallbacks,function(a,c){return b.assign(a,c())},this.pendingStateChanges,this)},preventMouseDown:function(){window.addEventListener("mousedown",this.preventEvent,!0),this.preventMouseDownTimeout=setTimeout(this.allowMouseDown,5e3)},allowMouseDown:function(){clearTimeout(this.preventMouseDownTimeout),window.removeEventListener("mousedown",this.preventEvent,!0)},preventEvent:function(a){a.stopPropagation(),a.preventDefault()},onViewerChanged:function(){this.editor.state.editorIsInit||this.setDocumentMode(!1),this.updateConfig();var a=this.getPendingStateChanges();this.pendingStateChanges={},this.pendingEditorStateUpdateCallbacks=[];var c={config:this.editorConfig,editorIsInit:!0,renderIndex:this.editor.state.renderIndex+1};U.isOpen("ds_OperationsQAllAsync")&&(c.isMobileEditor=this.viewMode&&this.viewMode.get()===this.viewMode.VIEW_MODES.MOBILE),this.editor.setState(b.defaults(c,a))},registerInitUserPrefsCallback:function(a){this.userPreferencesInitCallbacks.push(a),this.userPreferencesInitCallbacksInvoked&&a()},exitEditor:function(){window.open(W+"?referralInfo=EDITOR","_self")},getUserPreferences:function(){return this.userPreferences},isTpa:function(a){return this.documentServices.tpa.isTpaByCompType(a)},registerToViewerChange:function(a){this.viewerUpdateCallbacks.push(a)},registerToGoToPreview:function(a){this.goToPreviewCallbacks.push(a)},registerRemovePlugin:function(a,b){this.removePlugins[a]=b},registerCannotRemovePlugin:function(a,b){this.cannotRemovePlugins[a]=b},registerCopyComponentPlugin:function(a,b){this.copyComponentPlugins[a]=b},registerPasteComponentPlugin:function(a,b){this.pasteComponentPlugins[a]=this.pasteComponentPlugins[a]||[],this.pasteComponentPlugins[a].push(b)},registerPageNavigationCallback:function(a){this.pageNavigationCallbacks.push(a)},registerCompNamePlugin:function(a,b){this.compNamePlugins[a]=b},registerCompIconPlugin:function(a,b){this.compIconPlugins[a]=b},registerSitePublishedCallbacks:function(a){this.sitePublishedCallbacks.push(a)},registerDeviceTypeChangeCallbacks:function(a){this.deviceTypeChangeCallbacks.push(a)},applyPreviewScrollToEditorScroll:function(){if(!this.getPreviewMode()){var a=this.site.getScroll();this.editor.setScroll({scrollLeft:a.x,scrollTop:a.y})}},togglePreview:function(){var a=!this.editor.state.previewMode;this.setDocumentMode(a),this.setRenderPlugins(a,this.isMobileEditor()),U.isOpen("se_hoverBox")&&this.documentServices.components.modes.resetAllActiveModes(),a?this.goToPreview():this.exitPreview()},goToPreview:function(){ba(this.editor),this.panelManager.closeAllPanels(),this.editor.setState({previewMode:!0,contextMenu:null},function(){this.waitForChangesApplied(this.actions.executeAnimationsInPage),b.forEach(this.goToPreviewCallbacks,function(a){a()})}.bind(this)),this.selection.deselectComponents(),g.keyboardShortcuts.setContext(g.keyboardShortcuts.CONTEXTS.PREVIEW)},exitPreview:function(){this.editor.setState({previewMode:!1},function(){this.applyPreviewScrollToEditorScroll(),this.hideFloatingBubble(),g.keyboardShortcuts.setContext(g.keyboardShortcuts.CONTEXTS.EDITOR)}.bind(this))},setRenderPlugins:function(a){this.renderPlugins.allowSiteOverflow(a),this.renderPlugins.setExtraSiteHeight(a||this.isMobileEditor()?0:this.editorConfig.extraSiteHeight),this.renderPlugins.setPreviewTooltipCallback(function(a,b){var c=ca(a,this.editorConfig.editingAreaLayout.top);this.showFloatingBubble(b,c),aa=setTimeout(this.hideFloatingBubble,d.constants.PREVIEW.FLOATING_BUBBLE_TIMEOUT)}.bind(this))},setDocumentMode:function(a){this.documentServices.documentMode.enablePlaying(a),this.documentServices.documentMode.enableZoom(a),this.documentServices.documentMode.enableSocialInteraction(!1),this.documentServices.documentMode.enableExternalNavigation(!1),this.documentServices.documentMode.enableSlideShowGalleryClick(a),this.documentServices.documentMode.enableTinyMenuOpening(a),this.documentServices.documentMode.enableRenderFixedPositionContainers(a),this.documentServices.documentMode.enableRenderFixedPositionBackgrounds(a),this.documentServices.documentMode.enableBackToTopButton(a),this.documentServices.documentMode.enablePageProtection(!1),this.documentServices.documentMode.toggleWixAds(a),this.documentServices.documentMode.enableBgVideoAutoplay(a&&this.isDesktopEditor()),this.documentServices.documentMode.enableSiteMembersDialogsOpening(a),this.documentServices.documentMode.enableResetGalleryToOriginalState(a),this.documentServices.documentMode.enableResetComponent(!a),this.documentServices.documentMode.resetBehaviors(a),this.documentServices.documentMode.enableAction("screenIn",a&&this.isDesktopEditor()),U.isOpen("se_hoverBox")&&this.documentServices.documentMode.enableAction("modeChange",a&&this.isDesktopEditor()),this.documentServices.documentMode.enableAction("exit",a&&this.isDesktopEditor()),this.documentServices.documentMode.enableAction("bgScrub",a&&this.isDesktopEditor()),this.documentServices.documentMode.setExtraSiteHeight(a||this.isMobileEditor()?0:this.editorConfig.extraSiteHeight),this.documentServices.documentMode.enableShouldUpdateJsonFromMeasureMap(!a),this.documentServices.documentMode.allowSiteOverflow(a),this.documentServices.documentMode.setComponentViewMode(a?"preview":"editor"),this.documentServices.documentMode.allowWixCodeInitialization(a),this.documentServices.documentMode.showHiddenComponents(a?!a:this.getViewTools().showHiddenComponents),a||this.documentServices.documentMode.runtime.reset()},getPreviewSize:function(){return this.editor.getPreviewSize()},getPreviewMode:function(){return this.editor.state.previewMode},isCurrentPageLandingPage:function(){var a=this.pages.data.get(this.pages.getPrimaryPageId());return a.isLandingPage},isDesktopEditor:function(){return!this.isMobileEditor()},isMobileEditor:function(){return this.editor.state&&this.editor.state.isMobileEditor},getDeviceType:function(){return this.isMobileEditor()?"mobile":"desktop"},openCantCopyPastePanel:function(){var a=this.userPreferences.site.get(d.constants.USER_PREFS.CANT_MAKE_CHANGES.MOBILE_CANT_MAKE_CHANGE_DONT_SHOW_AGAIN);a||this.panelManager.openPanel("mobileEditor.panels.cantMakeChangeMobile",{},!0)},setDesktopEditor:function(){this.setEditorMode(!1)},setMobileEditor:function(){this.setEditorMode(!0)},setEditorMode:function(a,c){if(a!==this.isMobileEditor()){b.forEach(this.deviceTypeChangeCallbacks,function(a){a()}),U.isOpen("ds_OperationsQAllAsync")&&(a||this.editor.setState({isMobileEditor:!1}));var d=a?this.viewMode.VIEW_MODES.MOBILE:this.viewMode.VIEW_MODES.DESKTOP;if(this.panelManager.closeAllPanels(),this.selection.deselectComponents(),this.viewMode.set(d),this.setRenderPlugins(this.getPreviewMode(),a),!U.isOpen("ds_OperationsQAllAsync")){var e=a;this.editor.setState({isMobileEditor:e})}!c&&a&&this.documentServices.history.canUndo()&&this.history.add("mobile structure was updated"),this.documentServices.documentMode.setExtraSiteHeight(this.editor.state.previewMode||a?0:this.editorConfig.extraSiteHeight),this.documentServices.documentMode.resetBehaviors(this.getPreviewMode()),this.documentServices.documentMode.enableAction("screenIn",this.getPreviewMode()&&!a),U.isOpen("se_hoverBox")&&this.documentServices.documentMode.enableAction("modeChange",this.getPreviewMode()&&!a),this.documentServices.documentMode.enableAction("exit",this.getPreviewMode()&&!a),this.documentServices.documentMode.enableAction("bgScrub",this.getPreviewMode()&&!a),this.documentServices.documentMode.enableBgVideoAutoplay(this.getPreviewMode()&&!a),U.isOpen("rulers")&&this.rulers.resetRulersHistory()}},isMobileOptimizedSite:function(){return this.documentServices?this.documentServices.mobile.isOptimized():!1},setMobileOptimizedSite:function(a){this.documentServices&&this.documentServices.mobile.enableOptimizedView(a)},groupComponents:function(a){if(!this.components.is.groupedComponent(a)){this.selection.deselectComponents();var b=this.components.groupComponents(a);this.closeCompPanelIfExists(),this.history.add("group components"),this.waitForChangesApplied(function(){this.selection.selectComponentByCompRef(b)}.bind(this))}},getLeftBarButtonsBoundingRect:function(){return this.editor.refs.leftBar?this.editor.refs.leftBar.getButtonsBoundingRect():0},openRightClickMenu:function(a,b){var c={position:{x:a,y:b}};this.editor.setState({contextMenu:c})},closeRightClickMenu:function(){this.editor.setState({contextMenu:null})},closeCompPanelIfExists:function(){var a=this.panelManager.getPanelsOfType("compPanelFrame");a.length&&this.panelManager.closeAllPanelsOfType("compPanelFrame")},openFirstTimePanel:function(a){var b="firstTimePanelsNotToShow",c=this.selection.getSelectedComponentType(a),d=this.userPreferences.site.get(b)||{};d[c]||this.isMobileEditor()||this.panelManager.openFirstTimePanel(c)},toggleShowOnAllPages:function(a){var b;return b=this.components.isShowOnAllPages(a)?this.documentServices.pages.getReference(this.pages.getPrimaryPageId()):this.documentServices.siteSegments.getSiteStructure(),this.components.setContainer(a,b)},getCompDragRestrictions:function(a){return a?{horizontallyMovable:this.components.is.horizontallyMovable(a)&&!this.editor.state.isOpenTextEditor&&!this.editor.state.pinMode,verticallyMovable:this.components.is.verticallyMovable(a)&&!this.editor.state.isOpenTextEditor&&!this.editor.state.pinMode}:{}},getCompMoveRestrictions:function(a){var c=this.getCompDragRestrictions(a);return a&&b.assign(c,{canMoveForward:this.components.arrangement.canMoveForward(a),canMoveBackward:this.components.arrangement.canMoveBackward(a)}),c},getCompRestrictions:function(a){var c=this.getCompMoveRestrictions(a);return a&&(b.assign(c,{container:this.components.is.container(a),containable:this.components.is.containable(a),movable:this.components.is.movable(a)&&!this.editor.state.isOpenTextEditor,alignable:this.components.is.alignable(a),canMoveUp:this.components.is.canMoveUp(a)&&!this.editor.state.isOpenTextEditor,resizable:this.components.is.resizable(a),horizontallyResizable:this.components.is.horizontallyResizable(a)&&!this.components.layout.isPinned(a),verticallyResizable:this.components.is.verticallyResizable(a)&&!this.components.layout.isPinned(a),resizeableSides:this.components.layout.getResizableSides(a),rotatable:this.components.is.rotatable(a)&&!this.components.layout.isPinned(a),removable:this.components.is.removable(a)&&!this.editor.state.isOpenTextEditor,duplicatable:this.components.is.duplicatable(a)&&!this.editor.state.isOpenTextEditor&&!this.components.layout.isPinned(a),isFixed:this.components.is.fixed(a),canBeFixed:this.components.layout.canBeFixedPosition(a),canShowOnAllPages:this.components.canShowOnAllPages(a),canToggleShowOnAllPages:this.components.canToggleShowOnAllPages(a)}),U.isOpen("boxSlideShow")&&(c.canBeShownOnAllStates=this.components.canBeShownOnAllStates(a))),c},getComponentType:function(a){return this.components.getType(a).split(".").pop()},closePagesPanel:j.closePagesPanel,isPagesPanelOpen:j.isPagesPanelOpen,openPagesPanel:j.openPagesPanel,openMobileElementsPanel:j.openMobileElementsPanel,openComponentPanel:function(a,b){b=b||{};var c=this.getComponentType(this.editor.state.selectedComponents),d=this.getPanelPathByType(c,a);this.panelManager.openComponentPanel(d,b)},replaceComponentPanel:function(a,b){b=b||{};var c=this.getComponentType(this.editor.state.selectedComponents),d=this.getPanelPathByType(c,a);this.panelManager.replaceComponentPanel(d,b)},openCompOutOfGridPanelIfNeeded:function(a){var b=U.isOpen("columns")&&this.utils.findAncestorMatchesCondition(a,this.components.is.showMarginsIndicator);if(b&&this.components.layout.isCompExceedingContainerMargin(a,b)){var c=!0;this.openCompOutOfGridPanel({},c)}else!b&&this.components.layout.isCompOutOfPageBounds(a)&&this.openCompOutOfGridPanel()},openCompOutOfGridPanel:j.openCompOutOfGridPanel,openDragToHeaderPanel:j.openDragToHeaderPanel,openOrganizeImagesPanel:j.openOrganizeImagesPanel,openOrganizeSocialIconsPanel:j.openOrganizeSocialIconsPanel,openAviaryPanel:j.openAviaryPanel,openLinkPanel:j.openLinkPanel,openPinModeSizeRestrictionPanel:j.openPinModeSizeRestrictionPanel,getPanelPathByType:function(a,c){var e="compPanels.panels."+a+"."+c;return b.get(i,["panels",a,c])||(this.isTpa(a)?c===d.constants.componentPanels.settings&&(e="tpa.compPanels.tpaSettings"):c===d.constants.componentPanels.animation?e="compPanels.dynamicPanels."+d.constants.componentPanels.animation:c===d.constants.componentPanels.stretching?e="compPanels.dynamicPanels."+d.constants.componentPanels.stretching:c===d.constants.componentPanels.filters?e="compPanels.dynamicPanels."+d.constants.componentPanels.filters:c===d.constants.componentPanels.design?e="designPanel."+d.constants.componentPanels.design:c===d.constants.componentPanels.customizeDesign&&(e="advancedStylePanel."+d.constants.componentPanels.customizeDesign)),e},openLearnMore:function(b){b&&"string"==typeof b&&a.log.info("opening learn more with key - ",b)},isPreviewReady:function(){return this.previewReady},registerMouseMoveAction:function(a,b,c){this.editor.registerMouseMoveAction(a,b,c)},isPerformingMouseMoveAction:function(){return this.editor.isPerformingMouseMoveAction()},setPortalChildren:function(a,c){var d=b.cloneDeep(this.editor.state.portalComps);b.isEmpty(c)?delete d[a]:d[a]=c,this.editor.setState({portalComps:d})},hasExternalDesign:function(a){return this.documentServices.tpa.isTpaByCompType(this.components.getType(a))},setAttachCandidate:function(a,b){b?this.editor.setState({attachCandidate:a}):this.setStateWaitForViewer({attachCandidate:a})},setConstraintArea:function(a){this.setStateWaitForViewer({constraintArea:a})},setPageSections:function(a,c){var d=b.clone(this.editor.state.pageSections);b.assign(d,{sections:a,selectedSection:c}),this.editor.setState({pageSections:d})},clearPageSections:function(){this.setPageSections(null,null)},sectionsHandles:{areSectionsHandlesEnabled:function(){return this.editor.state.viewTools.sectionsHandlesEnabled},toggleSectionsHandles:function(a,b){var c=!this.sectionsHandles.areSectionsHandlesEnabled();this.updateEditorViewTools("sectionsHandlesEnabled",c),this.userPreferences.site.set(d.constants.USER_PREFS.VIEW_TOOLS.SECTIONS_HANDLES_ENABLED,c,a,b)}},setSiteScale:function(a,b){this.editor.setSiteScale(a,b)},zoomMode:{enterZoomMode:function(){this.setSiteScale(.5,0),this.documentMode.allowShowingFixedComponents(!1),g.keyboardShortcuts.setContext(g.keyboardShortcuts.CONTEXTS.ZOOM_MODE)},exitZoomMode:function(){this.setSiteScale(1,0),this.documentMode.allowShowingFixedComponents(!0),g.keyboardShortcuts.setContext(g.keyboardShortcuts.CONTEXTS.EDITOR)},isInZoomMode:function(){return 1!==this.editor.state.siteScale}},snapData:{set:function(a,b){b?this.editor.setState({snapData:a}):this.setStateWaitForViewer({snapData:a})},clear:function(a){a?this.editor.setState({snapData:null}):this.setStateWaitForViewer({snapData:null})}},lasso:{setCandidates:function(a){this.editor.setState({lassoCandidates:a})},setLayout:function(a){this.editor.setState({lassoLayout:a})},clear:function(){this.editor.setState({lassoLayout:null,lassoCandidates:[]})}},hoverBox:{set:function(a,b){var c=U.isOpen("exp171")&&!U.isOpen("hoverBoxStateToEditorStageOff");if(c)this.editor.setHoverBox(a,b);else{var d=this.utils.getParentIfCompCanBeSelected(a),e=d?d:a;this.editor.setState({hoveredComp:U.isOpen("boxSlideShow")?e:a,hoverBoxOverlay:!!b})}},clear:function(){var a=U.isOpen("exp171")&&!U.isOpen("hoverBoxStateToEditorStageOff");a?this.editor.clearHoverBox():this.editor.setState({hoveredComp:null,hoverBoxOverlay:!1})}},focusBox:{getFocusedContainer:function(){return this.editor.state.focusedContainer}},clipboard:{types:d.constants.EDITOR_CLIPBOARD_TYPES,setItem:function(a,c){var d=b.cloneDeep(this.editor.state.clipboard);d[a]=c,this.editor.setState({clipboard:d})},getItem:function(a){return this.editor.state.clipboard[a]}},clipboardContainsComp:function(){return!!this.clipboard.getItem(d.constants.EDITOR_CLIPBOARD_TYPES.COMPONENT)},text:{startEditing:function(){if((!U.isOpen("newCK")||this.text.isEditorReady())&&(CKEDITOR&&!CKEDITOR.wixDocumentServices&&(CKEDITOR.wixDocumentServices=this),!this.editor.state.isOpenTextEditor)){var a=this.selection.getSelectedComponents();if(this._textCompForEdit=b.first(a),S.migrationUtils.isOldTextComponent(this._textCompForEdit,this)){this.bi.error(d.bi.errors.OLD_TEXT_MIGRATION),S.migrationUtils.migrateComponent(this._textCompForEdit,this);var c=this;this.waitForChangesApplied(function(){c.editor.setState({isOpenTextEditor:!0})})}else this.editor.setState({isOpenTextEditor:!0})}},stopEditing:function(){function a(a,b){if(b){var c=a.components.data.get(b);if(c){var d=c.text;S.dataUtils.isEmptyHtmlText(d)&&a.components.remove(b)}}}if(this.editor.state.isOpenTextEditor)if(U.isOpen("newCK"))this.editor.setState({isOpenTextEditor:!1});else{var b=this;this.renderPlugins.setHideTextComponent(null),this.waitForChangesApplied(function(){a(b,b._textCompForEdit),b.editor.setState({isOpenTextEditor:!1}),delete b._textCompForEdit})}},setCurrentTextEditor:function(a){this._currentTextEditor=a},getEditor:function(){return this._currentTextEditor},getTextCompForEdit:function(){return this._textCompForEdit},isEditingText:function(){return!!this.editor.state.isOpenTextEditor},undo:function(){this._currentTextEditor.editor.undoManager.undo()},canUndo:function(){return this._currentTextEditor.editor.undoManager.hasUndo},redo:function(){this._currentTextEditor.editor.undoManager.redo()},canRedo:function(){return this._currentTextEditor.editor.undoManager.hasRedo},isEditorReady:function(){return U.isOpen("newCK")?this._currentTextEditor&&"ready"===this._currentTextEditor.editor.status&&"ready"===b.get(window,"CKEDITOR.WIX.status"):this._currentTextEditor&&"ready"===this._currentTextEditor.editor.status}},account:{isUserOwner:function(){var a=g.editorModel.permissionsInfo;return a&&a.ownerId===a.loggedInUserId},isUserContributor:function(){return!this.account.isUserOwner()},openConnectDomain:function(a,c){var d=this.generalInfo.isFirstSave();c=b.isBoolean(c)?c:!this.generalInfo.isSitePublished();var e=this.site.isPremium();this.panelManager.openPanel("savePublish.panels.connectDomain",{isFirstSave:d,isFirstPublish:c,isPremium:e,title:"PREMIUM_PUBLISH_TITLE",subtitle:e?"PREMIUM_PUBLISH_SUBTITLE":"CONNECT_DOMAIN_DIALOG_FREE_SUBTITLE",flowId:a},!0)},openSettings:function(){var a="49cebc11-f15c-4cf8-82d9-2c36c5397520";this.panelManager.openPanel("rEditor.panels.siteSettingsPanel",{helpId:a})},openRevisions:function(){var a=!!this.userPreferences.site.get(d.constants.USER_PREFS.SITE_REVISIONS.SITE_HISTORY_DONT_SHOW_AGAIN);if(a)this.account.openSiteHistory();else{var b=this;this.panelManager.openPanel("panels.messagePanels.siteRevisionsPanel",{onButtonClick:function(a){a&&b.account.openSiteHistory()}})}},manage:function(){var a=this.documentServices.generalInfo.getMetaSiteId();window.open(W+"sites/"+a+"/?referralInfo=EDITOR")},openSiteHistory:function(){var a=this.documentServices.generalInfo.getMetaSiteId();window.open(W+"history/"+a+"/?forceHttp&isEdited=true&referralInfo=EDITOR")},upgrade:function(a){var b=a.replace(/edhtml_/,"")||"unknown";this.bi.event(R.events.UPGRADE_EVENT,{origin:b});var c=this.documentServices.generalInfo.getMetaSiteId(),d=a?"referralAdditionalInfo="+a:"",e=g.serviceTopology.premiumServerUrl||"https://premium.wix.com";e+="/wix/api/premiumStart?"+d+"&siteGuid="+c,window.open(e)},getEditorVersionsInfo:function(){return window.editorVersionsInfo||null}},help:{openHelpCenter:function(b,c,d,e){a.log.error("editorAPI.help.openHelpCenter is deprecated. Use panelManager.openHelpCenter instead"),this.panelManager.openHelpCenter(b,c,d,e);
}},mobile:{mobileOnlyComponents:{enableBackToTopButton:function(a){this.documentServices.mobile.mobileOnlyComponents.enableBackToTopButton(a)}},hiddenComponents:{get:function(a){var c=this.documentServices.mobile.hiddenComponents.get(a);return b.filter(c,function(b){var c=this.documentServices.components.get.byId(b,a,this.documentServices.viewMode.VIEW_MODES.DESKTOP);return!this.documentServices.components.is.group(c)},this)}}},utils:{isSameRef:function(a,c){var d=this.components.asArray(a),e=this.components.asArray(c);if(this.multiselect.isMultiselect(d)||this.multiselect.isMultiselect(e)){if(d.length!==e.length)return!1;var f=b.sortBy(d,"id"),g=b.sortBy(e,"id"),h=b.every(f,function(a,b){return this.documentServices.utils.isSameRef(a,g[b])},this);return h}return this.documentServices.utils.isSameRef(b.first(d),b.first(e))},isPage:function(a){var b=this.components.asArray(a);return this.multiselect.isMultiselect(b)?!1:this.documentServices.utils.isPage(b[0])},getParentIfCompCanBeSelected:function(a){return this.components.is.selectable(a)?null:this.components.getContainer(a)},findAncestorMatchesCondition:function(a,b){if(!a)return null;for(var c=this.components.getContainer(a);c&&!b(c);)c=this.components.getContainer(c);return c}},siteName:{validate:function(a){var b=this.documentServices.siteName.validate(a),c={};return c[this.documentServices.siteName.ERRORS.SITE_NAME_IS_EMPTY]="SAVE_SITE_NAME_IS_EMPTY",c[this.documentServices.siteName.ERRORS.SITE_NAME_IS_NOT_STRING]="SITE_NAME_IS_NOT_STRING",c[this.documentServices.siteName.ERRORS.SITE_NAME_INVALID_CHARS]="SAVE_SITE_NAME_INVALID_CHARS",c[this.documentServices.siteName.ERRORS.SITE_NAME_ENDS_WITH_HYPHEN]="SAVE_SITE_NAME_ENDS_WITH_HYPHEN",c[this.documentServices.siteName.ERRORS.SITE_NAME_TOO_SHORT]="SAVE_SITE_NAME_TOO_SHORT",c[this.documentServices.siteName.ERRORS.SITE_NAME_TOO_LONG]="SAVE_SITE_NAME_TOO_LONG",c[this.documentServices.siteName.ERRORS.SITE_NAME_ALREADY_EXISTS]="SAVE_SITE_NAME_ALREADY_EXISTS",b.errorMessage=c[b.errorCode],b},set:function(a){this.documentServices.siteName.set(a),this.domain.isDomainConnected()||this.documentServices.generalInfo.setPublicUrl(this.domain.getFreeDomainPrefix()+a)},sanitize:function(a){return this.documentServices.siteName.sanitize(a)},rename:function(a,b,d){var e=g.serviceTopology.editorServerRoot||"//editor.wix.com/html/editor/web";e+="/meta-site-proxy/rename/"+this.documentServices.generalInfo.getMetaSiteId(),c.ajax(e,{type:"POST",data:{newName:a},success:function(c){return c.success?(this.documentServices.siteName.set(a),this.domain.isDomainConnected()||this.documentServices.generalInfo.setPublicUrl(this.domain.getFreeDomainPrefix()+a),void(b&&b())):void d(c)}.bind(this),error:function(){d&&d()}})}},updateEditorViewTools:function(a,c){var d=a;b.isString(a)&&(d={},d[a]=c);var e=b.defaults(d,this.getViewTools());this.editor.setState({viewTools:e})},toolbar:{isToolbarEnabled:function(){return this.editor.state.viewTools.toolbarEnabled},toggleToolbar:function(){this.updateEditorViewTools("toolbarEnabled",!this.toolbar.isToolbarEnabled())}},developerToolBar:{isEnabled:function(){return this.editor.state.viewTools.developerToolBarEnabled},toggle:function(){var a=!this.developerToolBar.isEnabled();this.updateEditorViewTools("developerToolBarEnabled",a),this.userPreferences.site.set(d.constants.USER_PREFS.VIEW_TOOLS.DEVELOPER_TOOLBAR_ENABLED,a)}},grid:{guidelines:{isGuidelinesEnabled:function(){return this.editor.state.viewTools.guidelinesEnabled},toggleGuidelines:function(a,b){var c=!this.grid.guidelines.isGuidelinesEnabled();this.updateEditorViewTools("guidelinesEnabled",c),this.userPreferences.site.set(d.constants.USER_PREFS.VIEW_TOOLS.GUIDELINES_ENABLED,c,a,b)}},snapTo:{isSnapToEnabled:function(){return this.editor.state.viewTools.snapToEnabled},toggleSnapTo:function(a,b){var c=!this.grid.snapTo.isSnapToEnabled();this.updateEditorViewTools("snapToEnabled",c),this.userPreferences.site.set(d.constants.USER_PREFS.VIEW_TOOLS.SNAPTO_ENABLED,c,a,b)}}},siteSegments:{getRefs:function(){var a=this.documentServices.siteSegments;return[a.getFooter(),a.getHeader(),a.getPagesContainer(),a.getSiteStructure()]},getPagesContainerAbsLayout:function(){var a=this.siteSegments.getPagesContainer();return this.components.layout.getRelativeToScreen(a)}},pluginService:N,tooltipTextService:P,homePage:{set:function(a){this.documentServices.homePage.set(a),k.setHomePagePlugins.run(this,a)}},openEditorVersionInfoPanel:function(){this.panelManager.openPanel("rEditor.panels.editorVersionInfoPanel")},styles:{openApplyStylePanel:function(a){this.panelManager.openPanel("rEditor.panels.applyStylePanel",{selectedComp:a,editorAPI:this})}},bi:{eventWithEditorPresets:function(a){return function(c,d){c=b.defaults({},c,{src:38,endpoint:"editor",sampleRatio:0}),d=d||{};var e=g.editorModel.permissionsInfo;if(e){var f=e.ownerId,h=b.pluck(e.loggedInUserRoles,"role").join(",");d=b.assign({},d,{ownerId:f,roles:h})}a(c,d)}},getComponentsBIParams:function(a){return b.map(a,function(a){var c={};if(a){c.component_id=a.id;var d=this.components.getType(a);c.component_type=d,d&&this.isTpa(d)&&b.assign(c,this.bi.getTpaComponentBIParams(a))}return c},this)},getTpaComponentBIParams:function(a){var b={},c=this.components.data.get(a)||{},d=this.tpa.app.getData(c.applicationId);b.app_id=d.appDefinitionId,b.instance_id=a.id,b.app_site_id=d.instanceId,b.widget_id=c.widgetId;var e="TPAWidget"===c.type,f=this.tpa.app.isLastAppComp(c.applicationId),g=f||!(e||this.tpa.app.isMultiSectionInstalled(c.applicationId));return b.is_last_tpa=g?1:0,b},reportBI:function(a,c){var d=this;b.forEach(c,function(b){b.is_last=b.is_last||b===this,d.bi.event(a,b)},c[c.length-1])}},campaigns:{fetchCampaignInfo:function(){var a=this,b="http://"+window.location.host+"/_api/wix/salesSystemResolver";c.getJSON(b,function(b,c){"success"===c&&b&&(a.campaignInfo={id:b.data.campaignId,type:b.data.type})})},getActiveCampaignInfo:function(){return this.campaignInfo},isActiveCampaign:function(a){return this.campaigns.getActiveCampaignInfo()?b.includes(this.campaigns.getActiveCampaignInfo().id,a.id):!1},getDiscountValue:function(a){var c=this.campaigns.getActiveCampaignInfo(),d=c.id.split("_");return 1===d.length?a.defaultDiscount:b.last(d)},personalSale:{isActiveCampaign:function(){return this.campaigns.isActiveCampaign(d.constants.CAMPAIGNS.PERSONAL_SALE)||this.campaigns.isActiveCampaign(d.constants.CAMPAIGNS.SEASONAL_CAMPAIGN)},getDiscountValue:function(){return this.campaigns.getDiscountValue(d.constants.CAMPAIGNS.PERSONAL_SALE)},getAssetPath:function(){return d.constants.CAMPAIGNS.PERSONAL_SALE.assetPath}}},newEditorWelcomeScreenWrapper:F,promotions:{initPromotions:function(){this.promotions.music.init()},music:{init:function(){var a=this.promotions.music;(U.isOpen("musicPromotionFixed")||U.isOpen("musicPromotionRotation"))&&(a.didUserRegisterWithMusicCategory(function(b){a.isMusicCategory=b,a.isActive()&&a.displayPopup()}),this.tpa.app.registerOnInstalled(d.constants.MUSIC_PROMO.APP_DEFINITION_ID,a.displayPopup))},isActive:function(){if(U.isOpen("musicPromotionFixed")||U.isOpen("musicPromotionRotation")){var a=this.generalInfo.getSiteOriginalTemplateId(),c=b.includes(d.constants.MUSIC_PROMO.TEMPLATE_IDS,a),e=this.tpa.app.isInstalled(d.constants.MUSIC_PROMO.APP_DEFINITION_ID);return c||e||this.promotions.music.isMusicCategory}return!1},displayPopup:function(){this.panelManager.openPanel("panels.focusPanels.musicPromotionPanel")},didUserRegisterWithMusicCategory:function(a){var d=X+"?fields=post_reg_category,post_reg_sub_category&accept=json";c.ajax(d).complete(function(c,d){if("success"===d){var e=c.responseJSON,f=e.payload&&e.payload.fields,g=b.find(f,{name:"post_reg_category"});a(g&&g.value&&b.includes(g.value.toLowerCase(),"music"))}else a(!1)})}}},showFloatingBubble:function(a,b,c,d){this.editor.showFloatingBubble(a,b,c,d)},hideFloatingBubble:function(){this.editor.hideFloatingBubble(),clearTimeout(aa)},isMouseOverBubble:function(){return this.editor.state.mouseOverBubble},showComponentPreviewRect:function(a){this.editor.setState({pinPreviewRectStyle:a})},hideComponentPreviewRect:function(){var a=this.editor.state.pinPreviewRectStyle;b.assign(a,{opacity:0}),this.editor.setState({pinPreviewRectStyle:a})},blockingLayer:{show:function(){var a=V.R_EDITOR.EDITOR_API.BLOCKING_LAYER_STYLE;this.renderPlugins.setCompsToShowOnTop(b.pluck(this.selection.getSelectedComponents(),"id")),this.renderPlugins.setBlockingLayer(a)},hide:function(){var a=null;this.renderPlugins.setCompsToShowOnTop(null),this.renderPlugins.setBlockingLayer(a)}},blockingPopupLayer:{show:function(){var a=V.R_EDITOR.EDITOR_API.BLOCKING_LAYER_STYLE;this.renderPlugins.setCompsToShowOnTop(b.pluck(this.selection.getSelectedComponents(),"id")),this.renderPlugins.setBlockingPopupLayer(a)},hide:function(){var a=null;this.renderPlugins.setCompsToShowOnTop(null),this.renderPlugins.setBlockingPopupLayer(a)}},editorControls:{hide:function(){this.editor.setState({pinMode:!0,contextMenu:null})},show:function(){this.editor.setState({pinMode:!1})}},pinMode:{open:function(a){this.panelManager.openComponentPanel("compPanels.dynamicPanels.pinnedDockPanel",{origin:a,selectedComponents:this.editor.state.selectedComponents}),this.blockingLayer.show(),this.editorControls.hide()},close:function(){this.panelManager.closePanelByName("compPanels.dynamicPanels.pinnedDockPanel"),this.hideComponentPreviewRect(),this.blockingLayer.hide(),this.editorControls.show()},closeAndCheckSizeRestrictions:function(){this.pinMode.close(),this.pinMode.checkSizeRestrictionsAndShowPopup()},checkSizeRestrictionsAndShowPopup:function(){if(!this.getPreviewMode()){var a=this.components.layout.getDock(this.editor.state.selectedComponents);if(!b.isUndefined(a)){var c=g.pinModeUtils.getDockedDirection(a),d=this.components.layout.get(this.editor.state.selectedComponents);g.pinModeUtils.checkSizeRestrictions(c,d)&&this.openPinModeSizeRestrictionPanel({state:"on pin",title:"Notification_Box_PinToScreen_ElementTooLarge_postPin_Title",content:"Notification_Box_PinToScreen_ElementTooLarge_postPin_Message"})}}},isPinModeOpen:function(){return this.editor.state.pinMode}},getSiteScale:function(){return this.editor.state.siteScale},endMouseMoveActionIfNeeded:function(a){this.editor.state.registeredMouseMoveAction&&this.editor.onMouseUp(a)},isVerticalScrollbarHidden:function(){var a=document.body.clientHeight>window.innerHeight;return!a||a&&document.body.clientWidth===window.innerWidth},toggleEditorStateParam:function(a,b){var c={};c[a]="undefined"==typeof b?!this.editor.state[a]:b,this.editor.setState(c)},toggleMouseOverBubble:function(a){this.toggleEditorStateParam("mouseOverBubble",a)},toolsControl:{toggleHalfOpacityTools:function(a){this.toggleEditorStateParam("halfOpacityTools",a)},toggleHideToolsBtnBlink:function(a){this.toggleEditorStateParam("shouldHideToolsBtnBlink",a)},toggleHideTools:function(a,c){c=b.isBoolean(c)?c:this.editor.state.hideToolsAndMaintainStagePosition;var e="undefined"==typeof a?!this.editor.state.hideTools:a,f="panels.toolPanels.linkPanel",g=this.panelManager.getOpenPanels();return this.hideFloatingBubble(),c||this.updatePreviewTop(e),this.editor.setState({hideToolsAndMaintainStagePosition:e?c:e,hideTools:e,editorConfig:this.editorConfig,halfOpacityTools:!1,shouldHideToolsBtnBlink:!1}),e&&b(g).reject({frameType:d.constants.PANEL_TYPES.COMP}).reject({name:f}).forEach(function(a){this.panelManager.closePanelByName(a.name)},this).value(),e}},blog:{add:function(a,b){T.installApp(this,a||"MediaLeftPage",b)}}}),da}),define("rEditor/rootComps/keyboard/config/topContextShortcuts",["lodash"],function(a){"use strict";var b=function(a){a.preventDefault()},c={esc:b,"ctrl + t, command + t":b,"ctrl + y, command + y":b,"ctrl + d, command + d":b,"ctrl + s, command + s":b,"ctrl + ], command + ]":b,"ctrl + [, command + [":b,"ctrl + shift + ], command + shift + ]":b,"ctrl + shift + [, command + shift + [":b,backspace:b,"ctrl + left, command + left":b,"ctrl + right, command + right":b,"ctrl + shift + left, command + shift + left":b,"ctrl + shift + right, command + shift + right":b,"ctrl + m, command + m":b,"ctrl + shift + m, command + shift + m":b};return{init:a.once(a.noop),shortcuts:c}}),define("rEditor/rootComps/keyboard/config/keyboardShortcutsActionMap",["core"],function(a){"use strict";var b=a.constants.KEYBOARD_SPECIAL_KEY.value,c=a.constants.KEYBOARD_SPECIAL_KEY.label;return{editor:{SELECT_ALL:{key:b+" + a",label:""},GROUP_COMPONENTS:{key:b+" + g",label:""},UNGROUP_COMPONENTS:{key:b+" + shift + g",label:""},COPY:{key:b+" + c",label:c+" + C"},PASTE:{key:b+" + v",label:c+" + V"},CUT:{key:b+" + x",label:c+" + X"},DUPLICATE:{key:b+" + d",label:c+" + D"},UNDO:{key:b+" + z",label:c+" + Z"},REDO:{key:[b+" + y",b+" + shift + z"].join(","),label:c+" + Y"},DELETE:{key:["del","backspace"].join(","),label:"Del"},SAVE:{key:b+" + s",label:c+" + S"},SAVE_AS_TEMPLATE:{key:b+" + alt + t",label:""},SELECT_NEXT_COMP:{key:b+" + m",label:""},SELECT_PREV_COMP:{key:b+" + shift + m",label:""},CLOSE_PANELS:{key:"esc",label:""},MOVE_RIGHT:{key:"right",label:""},SHIFT_RIGHT:{key:"shift + right",label:""},MOVE_LEFT:{key:"left",label:""},SHIFT_LEFT:{key:"shift + left",label:""},MOVE_UP:{key:"up",label:""},SHIFT_UP:{key:"shift + up",label:""},MOVE_DOWN:{key:"down",label:""},SHIFT_DOWN:{key:"shift + down",label:""},SEND_FORWARD:{key:b+" + right",label:c+" + "},SEND_TO_FRONT:{key:b+" + shift + right",label:c+" + Shift + "},SEND_BACKWARD:{key:b+" + left",label:c+" + "},SEND_TO_BACK:{key:b+" + shift + left",label:c+" + Shift + "},TOGGLE_PREVIEW:{key:b+" + p",label:c+" + P"},PUBLISH_SITE:{key:b+" + shift + p",label:c+" + Shift + P"},HIDE_TOOLS:{key:"shift + f",label:"Shift + F"},TOGGLE_RULERS:{key:"shift + r",label:"Shift + R"}},preview:{EXIT_PREVIEW:{key:"esc",label:""},TOGGLE_PREVIEW:{key:b+" + p",label:c+" + P"},PUBLISH_SITE:{key:b+" + shift + p",label:c+" + Shift + P"}},topBar:{CLOSE_DROP_PANEL:{key:"esc",label:""}},imageCrop:{APPLY:{key:"enter",label:"Enter"},CANCEL:{key:"esc",label:"Esc"}}}}),define("rEditor/rootComps/topBar/menuBar/menuBarItemsDefinitions",["lodash","core","util","panels","savePublish","rEditor/rootComps/keyboard/config/keyboardShortcutsActionMap","experiment"],function(a,b,c,d,e,f,g){"use strict";function l(a,b,c){var e=h&&h.generalInfo&&h.generalInfo.isFirstSave();e?d.panelManager.openPanel(j,{title:b,messageBody:c},!0):a()}function m(b,c,d,e){var f=e?a.cloneDeep(c):c;f.fields.status=b?1:0,e&&f.fields.category&&(f.fields.category+=e),h.bi.event(f.type,f.fields),d.call(h)}function n(a,c){var e=c||null,f={panel_name:e,origin:b.constants.BI.HELP.ORIGIN.TOPBAR,learn_more:!1};d.panelManager.openHelpCenter(a,null,null,f)}function o(a,b){var e,c=h.getLanguageCode(),d=b||"//www.";return e="en"===c?b?"www":"//www.":b?c:"//"+c+".",a=a.replace(d,e)}function p(){var j=h.account.getEditorVersionsInfo()||{},p={SITE_BAR:{label:c.translate("TOPBAR_Site_Label"),bi:{type:b.bi.events.topbar.top_bar_click,fields:{category:"site"}},getCounter:function(){return q()?void 0:s()}},EDIT_BAR:{label:c.translate("TOPBAR_Edit_Label"),bi:{type:b.bi.events.topbar.top_bar_click,fields:{category:"edit"}}},VIEW_BAR:{label:c.translate("Topbar_Tools_Label"),bi:{type:b.bi.events.topbar.top_bar_click,fields:{category:"view"}}},SETTINGS:{action:function(){l(function(){h.bi.event(b.bi.events.topbar.top_bar_open_settings_click),h.account.openSettings()},"TOPBAR_SITE_SETTINGS_SAVE_FIRST_MSG_TITLE","TOPBAR_SITE_SETTINGS_SAVE_FIRST_MSG_BODY")},label:c.translate("TOPBAR_Settings_Label"),bi:{type:b.bi.events.topbar.top_bar_SITE_menu_click,fields:{category:"settings"}}},HELP_BAR:{label:c.translate("TOPBAR_HELP_TOOLTIP_TITLE"),bi:{type:b.bi.events.topbar.top_bar_click,fields:{category:"help"}}},HELP_CENTER:{label:c.translate("TOPBAR_HELP_EDITOR_HELP"),action:function(){var a=h.isDesktopEditor(),b=a?"58406e7a-1ad0-4105-8e37-c053b529f9d8":"f8b24a99-cefd-4c55-adda-aa66ec643259";n(b,k.EDITOR)},bi:{type:b.bi.events.topbar.top_bar_HELP_menu_click,fields:{category:"help_center"}}},HELP_KB_SHORTCUTS:{separator:!0,label:c.translate("TOPBAR_HELP_KB_SHORTCUTS"),action:function(){n("5a3238e6-ebe9-4aca-a7a2-1c717598e334",k.KEYBOARD_SHORTCUTS)},bi:{type:b.bi.events.topbar.top_bar_HELP_menu_click,fields:{category:"help_kb_shortcuts"}}},HELP_CONNECT_DOMAIN:{label:c.translate("TOPBAR_HELP_CONNECT_DOMAIN"),action:function(){n("a06941d9-7683-4ced-bce3-bd2cc3c7d6e9",k.CONNECT_DOMAIN)},bi:{type:b.bi.events.topbar.top_bar_HELP_menu_click,fields:{category:"help_connect_domain"}}},HELP_SEO:{separator:!0,label:c.translate("TOPBAR_HELP_SEO"),action:function(){n("ab2c2a83-5bc0-435e-ab82-f2c1036580a7",k.SEO)},bi:{type:b.bi.events.topbar.top_bar_HELP_menu_click,fields:{category:"help_seo"}}},HELP_FEEDBACK:{separator:!0,label:c.translate("Topbar_HELP_FEEDBACK"),action:function(){var a=i.HELP_URLS.FEEDBACK,b=o(a,"{$lang}");window.open(b)},bi:{type:b.bi.events.topbar.top_bar_HELP_menu_click,fields:{category:"help_feedback"}}},TERMS_OF_USE:{label:c.translate("TOPBAR_HELP_TERMS_OF_USE"),action:function(){var a=c.serviceTopology.basePublicUrl+"about/terms-of-use",b=o(a);window.open(b)},bi:{type:b.bi.events.topbar.top_bar_HELP_menu_click,fields:{category:"terms_of_use"}}},PRIVACY_POLICY:{label:c.translate("TOPBAR_HELP_PRIVACY_POLICY"),action:function(){var a=c.serviceTopology.basePublicUrl+"about/privacy",b=o(a);window.open(b)},bi:{type:b.bi.events.topbar.top_bar_HELP_menu_click,fields:{category:"privacy_policy"}}},SAVE:{label:c.translate("TOPBAR_Site_Save"),action:function(){e.save(h,{origin:"top_bar_site_menu"})},bi:{type:b.bi.events.topbar.top_bar_SITE_menu_click,fields:{category:"save"}}},VIEW_SITE:{label:c.translate("TOPBAR_SITE_VIEWSITE"),action:function(){if(!p.VIEW_SITE.disabledChecker()){var a=h.site.getSitePublicUrl();return window.open(a),!0}return!1},disabledChecker:function(){return!h||!h.generalInfo||!h.generalInfo.isSitePublished()},bi:{type:b.bi.events.topbar.top_bar_SITE_menu_click,fields:{category:"view_site"}}},PREVIEW:{label:c.translate("TOPBAR_PREVIEW_TOOLTIP_TITLE"),action:h.togglePreview,bi:[{type:b.bi.events.topbar.top_bar_SITE_menu_click,fields:{category:"preview"}},{type:b.bi.events.preview.PREVIEW_CLICK,fields:{origin:"menubar"}}]},FEEDBACK:{label:c.translate("TOPBAR_GetFeedback_Label"),action:function(){l(d.panelManager.openPanel.bind(null,"panels.focusPanels.feedbackPanel"),"TOPBAR_SITE_FEEDBACK_SAVE_FIRST_MSG_TITLE","TOPBAR_SITE_FEEDBACK_SAVE_FIRST_MSG_BODY")},getCounter:s,bi:[{type:b.bi.events.topbar.top_bar_SITE_menu_click,fields:{category:"feedback"}},{type:b.bi.events.preview.PREVIEW_CLICK,fields:{origin:"menubar"}}],visibilityFunc:function(){return!r()&&h.account.isUserOwner()}},PUBLISH:{label:c.translate("TOPBAR_Site_Publish"),action:function(){e.saveAndPublish(h,"top_bar_site_menu_publish")},bi:[{type:b.bi.events.topbar.top_bar_SITE_menu_click,fields:{category:"publish"}},{type:b.bi.events.publish.PUBLISH_CLICK,fields:{origin:"menubar"}}]},EDITOR_MODE_SWITCH:{separator:!0,labelFunc:function(){return h&&h.isMobileEditor()?c.translate("Topbar_Site_Desktop_Editor"):c.translate("Topbar_Site_Mobile_Editor")},action:function(){h.setEditorMode(!h.isMobileEditor())},bi:{type:b.bi.events.topbar.top_bar_SITE_menu_click,fields:{category:"editor_mode_switch"}}},REVISIONS:{label:c.translate("TOPBAR_Site_Site_Revisions"),action:function(){l(h.account.openRevisions,"TOPBAR_SITE_HISTORY_SAVE_FIRST_MSG_TITLE","TOPBAR_SITE_HISTORY_SAVE_FIRST_MSG_BODY")},bi:{type:b.bi.events.topbar.top_bar_SITE_menu_click,fields:{category:"revisions"}}},SITE_DASHBOARD:{label:c.translate("TOPBAR_SITE_DASHBOARD"),action:function(){l(h.account.manage,"TOPBAR_SITE_SETTINGS_SAVE_FIRST_MSG_TITLE","TOPBAR_SITE_DASHBOARD_SAVE_FIRST_MSG_BODY")},bi:{type:b.bi.events.topbar.top_bar_SITE_menu_click,fields:{category:"site_dashboard"}}},EXIT:{label:c.translate("TOPBAR_Site_Logout"),action:h.exitEditor,bi:{type:b.bi.events.topbar.top_bar_SITE_menu_click,fields:{category:"logout"}}},UNDO:{label:c.translate("TOPBAR_Edit_Undo"),shortcutLabel:f.editor.UNDO.label,action:h.history.undo,bi:{type:b.bi.events.topbar.top_bar_EDIT_menu_click,fields:{category:"undo"}}},REDO:{label:c.translate("TOPBAR_Edit_Redo"),shortcutLabel:f.editor.REDO.label,action:h.history.redo,bi:{type:b.bi.events.topbar.top_bar_EDIT_menu_click,fields:{category:"redo"}}},CUT:{label:c.translate("TOPBAR_Edit_Cut"),shortcutLabel:f.editor.CUT.label,compActionRestrictionNames:["duplicatable","removable"],action:function(){h.selectedComponent.sendSelectedComponentBI(b.bi.events.topbar.top_bar_EDIT_menu_click,{category:"cut"}),h.selectedComponent.cut(),h.history.add("component - cut")}},COPY:{label:c.translate("TOPBAR_Edit_Copy"),shortcutLabel:f.editor.COPY.label,compActionRestrictionNames:["duplicatable"],action:function(){h.selectedComponent.sendSelectedComponentBI(b.bi.events.topbar.top_bar_EDIT_menu_click,{category:"copy"}),h.selectedComponent.copy()}},PASTE:{label:c.translate("TOPBAR_Edit_Paste"),shortcutLabel:f.editor.PASTE.label,compActionRestrictionNames:["duplicatable"],action:function(){h.components.paste(),h.history.add("component - paste")},bi:{type:b.bi.events.topbar.top_bar_EDIT_menu_click,fields:{category:"paste"}}},DUPLICATE:{label:c.translate("TOPBAR_Edit_Duplicate"),shortcutLabel:f.editor.DUPLICATE.label,compActionRestrictionNames:["duplicatable"],action:function(){h.selectedComponent.sendSelectedComponentBI(b.bi.events.topbar.top_bar_EDIT_menu_click,{category:"duplicate"}),h.selectedComponent.duplicate(),h.history.add("component - duplicate")}},DELETE:{labelFunc:function(){return h.isDesktopEditor()?c.translate("TOPBAR_Edit_Delete"):c.translate("TOPBAR_Edit_HIDE")},shortcutLabel:f.editor.DELETE.label,compActionRestrictionNames:["removable"],action:function(){h.selectedComponent.sendSelectedComponentBI(b.bi.events.topbar.top_bar_EDIT_menu_click,{category:"delete"}),h.selectedComponent.remove(),h.history.add("component - remove")}},TOOLBAR:{label:c.translate("TOPBAR_VIEW_TOOLBAR_TITLE"),isCheckbox:!0,menuPropsKey:"toolbarEnabled",action:function(a,b){m(!h.toolbar.isToolbarEnabled(),p.TOOLBAR.biData,h.toolbar.toggleToolbar,b?"(Image)":null)},biData:{type:b.bi.events.topbar.top_bar_VIEW_menu_click,fields:{category:"toolbar",status:null}}},RULERS:{label:c.translate("TOPBAR_VIEW_RULERS1"),isCheckbox:!0,menuPropsKey:"rulersEnabled",visibilityFunc:function(){return g.isOpen("rulers")},action:function(b,c){var d=a.cloneDeep(p.RULERS.biData);d.fields.editor_view_mode=h.getDeviceType(),m(!h.rulers.isRulersEnabled(),d,h.rulers.toggleRulers,c?"(Image)":null)},biData:{type:b.bi.events.topbar.top_bar_VIEW_menu_click,fields:{category:"rulers",status:null,editor_view_mode:null}}},GUIDELINES:{label:c.translate("TOPBAR_VIEW_GRIDLINES_TITLE"),isCheckbox:!0,isDisabled:function(){return!h.isDesktopEditor()},menuPropsKey:"guidelinesEnabled",action:function(a,b){m(!h.grid.guidelines.isGuidelinesEnabled(),p.GUIDELINES.biData,h.grid.guidelines.toggleGuidelines,b?"(Image)":null)},biData:{type:b.bi.events.topbar.top_bar_VIEW_menu_click,fields:{category:"guidelines",status:null}}},SNAP:{label:c.translate("TOPBAR_VIEW_SNAP_TITLE"),isCheckbox:!0,menuPropsKey:"snapToEnabled",action:function(a,b){m(!h.grid.snapTo.isSnapToEnabled(),p.SNAP.biData,h.grid.snapTo.toggleSnapTo,b?"(Image)":null)},biData:{type:b.bi.events.topbar.top_bar_VIEW_menu_click,fields:{category:"snap",status:null}}},SECTIONS:{label:c.translate("TOPBAR_VIEW_SECTIONS"),isCheckbox:!0,menuPropsKey:"sectionsHandlesEnabled",visibilityFunc:function(){return h.isDesktopEditor()},action:function(a,b){m(!h.sectionsHandles.areSectionsHandlesEnabled(),p.SECTIONS.biData,h.sectionsHandles.toggleSectionsHandles,b?"(Image)":null)},biData:{type:b.bi.events.topbar.top_bar_VIEW_menu_click,fields:{category:"sectionshandles",status:null}}}};return g.isOpen("exp171")&&!g.isOpen("imageOptimizationOff")&&(p.IMAGE_OPTIMIZATION={label:c.translate("TOPBAR_SITE_IMAGE_QUALITY"),action:function(){d.panelManager.openPanel("panels.focusPanels.siteImageOptimizationPanel",{panelName:"panels.focusPanels.siteImageOptimizationPanel"})},bi:{type:b.bi.events.topbar.top_bar_SITE_menu_click,fields:{category:"image_optimization"}}}),g.isOpen("developerModeToggle")&&(p.SECTIONS.separator=!0,p.DEVELOPER_MODE={label:c.translate("TOPBAR_VIEW_DEVELOPER_MODE_TITLE"),isCheckbox:!0,menuPropsKey:"developerModeEnabled",action:function(){h.developerMode.toggle()},biData:{type:b.bi.events.topbar.top_bar_VIEW_menu_click,fields:{category:"dev_mode",status:null}}},p.PROPERTIES_TOOLBAR={label:c.translate("TOPBAR_VIEW_DEVELOPER_MODE_PROPERTIES_PANEL_TITLE"),isCheckbox:!0,visibilityFunc:function(){return h.developerMode.isEnabled()},menuPropsKey:"developerToolBarEnabled",action:function(){h.developerToolBar.toggle()},biData:{type:b.bi.events.topbar.top_bar_VIEW_menu_click,fields:{category:"properties_panel",status:null}}},p.HIDDEN_ELEMENTS={label:c.translate("TOPBAR_VIEW_DEVELOPER_MODE_HIDDEN_ELEMENTS_TITLE"),isCheckbox:!0,visibilityFunc:function(){return h.developerMode.isEnabled()},menuPropsKey:"showHiddenComponents",action:function(a){h.documentMode.showHiddenComponents(a),h.updateEditorViewTools("showHiddenComponents",a),h.userPreferences.site.set(b.constants.USER_PREFS.VIEW_TOOLS.SHOW_HIDDEN_COMPS,a)},biData:{type:b.bi.events.topbar.top_bar_VIEW_menu_click,fields:{category:"show_hidden_components",status:null}}}),h.account.isUserOwner()&&(p.UPGRADE={label:c.translate(g.isOpen("spanishUpgradeText")?"UPGRADE_FOR_SPAIN_ONLY":"TOPBAR_Upgrade_Label"),bi:{type:b.bi.events.topbar.top_bar_click,fields:{category:"upgrade"}}},h.wixStores.isSiteInWixStoreTestDrive()||(p.UPGRADE_ITEM={label:c.translate(g.isOpen("spanishUpgradeText")?"UPGRADE_FOR_SPAIN_ONLY":"TOPBAR_Upgrade_Label"),separator:!0,className:"menu-bar-item-upgrade",action:function(){l(h.account.upgrade.bind(h,"edhtml_TOP_BAR_SITE_MENU_UPGRADE"),"TOPBAR_SITE_UPGRADE_SAVE_FIRST_MSG_TITLE","TOPBAR_SITE_UPGRADE_SAVE_FIRST_MSG_BODY")},bi:{type:b.bi.events.topbar.top_bar_SITE_menu_click,fields:{category:"upgrade"}}},p.CONNECT_DOMAIN={label:c.translate("TOPBAR_SITE_CONNECT_DOMAIN"),action:function(){h.generalInfo.isFirstSave()?e.save(h):h.account.openConnectDomain(b.constants.CONNECT_DOMAIN.FLOWS.TOP_BAR)},bi:{type:b.bi.events.topbar.top_bar_SITE_menu_click,fields:{category:"connect_domain"}}})),q()&&(p.BACK_TO_OLD_EDITOR={label:c.translate("Topbar_oldeditor_link"),action:function(){j.isEligibleForSwitch?d.panelManager.openPanel("panels.messagePanels.switchToOldEditorConfirmationPanel",{title:"Notification_Box_ToOldEditor_Title"}):n("85aae89a-84f6-4967-b866-e5c39c91d635",k.BACK_TO_OLD_EDITOR)},bi:{type:b.bi.events.topbar.top_bar_SITE_menu_click,fields:{category:"back_to_old_editor"}},visibilityFunc:q}),p}function q(){var a=h.account.getEditorVersionsInfo()||{};return!a.isNewUser&&"none"===a.userOverride&&a.isEligibleForSwitch&&!h.isSavedInCurrentSession}function r(){var a=h.account.getEditorVersionsInfo()||{};return a.isEligibleForSwitch&&!h.isSavedInCurrentSession&&!h.generalInfo.isTemplate()}function s(){var a=h.feedback.getNewCommentsCounter();return a>99?"99+":a}var h=null,i=b.constants,j="savePublish.panels.save.saveYourSitePanel",k={EDITOR:"editor",KEYBOARD_SHORTCUTS:"kb_shortcuts",SEO:"seo",CONNECT_DOMAIN:"connect_domain",BACK_TO_OLD_EDITOR:"back_to_old_editor"},t={init:a.once(function(b){h=b;var c=p();a.merge(t,c)})};return t}),define("rEditor/rootComps/keyboard/config/topBarShortcuts",["lodash","rEditor/rootComps/topBar/menuBar/menuBarItemsDefinitions"],function(a,b){"use strict";function d(){a.forEach(b,function(a){a&&a.shortcut&&(c[a.shortcut]=a.action)})}var c={};return{init:a.once(function(a){b.init(a),d()}),shortcuts:c}}),define("rEditor/rootComps/keyboard/actions/customActions/column",[],function(){"use strict";return{x:function(a,b,c){0>c?a.columns.move.left(b):c>0&&a.columns.move.right(b)}}}),define("rEditor/rootComps/keyboard/actions/customActions",["rEditor/rootComps/keyboard/actions/customActions/column"],function(a){"use strict";return{"wysiwyg.viewer.components.Column":a}}),define("rEditor/rootComps/keyboard/actions/selectComponentShortcutsActions",["lodash","core","experiment","rEditor/rootComps/keyboard/actions/customActions"],function(a,b,c,d){"use strict";function f(a,b,c){return"x"===c&&a.components.is.horizontallyMovable(b)||"y"===c&&a.components.is.verticallyMovable(b)}function g(a,b){var c=a.components.getType(a.selection.getSelectedComponents()),e=d[c];return e&&e[b]}function h(b){var c=b.pages.getFocusedPageId(),d=b.components.getAllComponents(c),f=a.filter(d,function(b){return!a.includes(e,b.id)});return f}function i(b,d,e){var f=a.findIndex(d,{id:e}),g=f+1===d.length,h=g?0:f+1;return c.isOpen("boxSlideShow")&&!b.components.is.selectable(d[h])?i(b,d,d[h].id):d[h]}function j(b,d,e){var f=a.findIndex(d,{id:e}),g=0===f?d.length-1:f-1;return c.isOpen("boxSlideShow")&&!b.components.is.selectable(d[g])?j(b,d,d[g].id):d[g]}function k(a,b){var c=a.height/2;return Math.max(b-c,0)}function l(a,c){var d=b.utils.stageUtils.getStageLayout(),e=a.components.layout.getRelativeToScreen(c);b.utils.scrollUtils.setScroll({scrollTop:k(d,e.y)})}function m(a,b){a.selection.selectComponentByCompRef(b),l(a,b)}var e=["PAGES_CONTAINER","SITE_PAGES"];return{selectNextComponent:function(a){var b=a.selection.getSelectedComponentId();if(b){var c=i(a,h(a),b);m(a,c)}},selectPreviousComponent:function(a){var b=a.selection.getSelectedComponentId();if(b){var c=j(a,h(a),b);m(a,c)}},moveComponent:function(b,c,d){var e=b.multiselect.getComponentsWhichDontHaveAncestorsInTheArray(b.selection.getSelectedComponents()),h=g(b,c);return h?h(b,a.first(e),d):e&&f(b,e,c)&&b.waitForChangesApplied(function(){var f=b.components.layout.getRelativeToStructure(e),g=a.clone(f);g[c]+=d,10===d?g[c]=10*Math.floor(g[c]/10):-10===d&&(g[c]=10*Math.ceil(g[c]/10)),b.components.layout.updateRelativeToStructure(e,g)}),e}}}),define("rEditor/rootComps/keyboard/util/editorDebugShortcutsUtil",["core","lodash","savePublish"],function(a,b,c){"use strict";function e(a){var e={},f=b(window.editorModel.runningExperiments).pick(function(a){return"new"===a}).keys().value();e["ctrl + alt + shift + v"]=a.openEditorVersionInfoPanel.bind(a),e["ctrl + alt + shift + e"]=function(){window.alert("Active Experiments:\n"+f.join("\n"))};var g=window.location.search&&window.location.search.toLowerCase(),h=b.includes(g,"debug=")||b.includes(g,"isqa=true");return h&&(e[d+" + shift + alt + s"]=c.configureSave,e[d+" + shift + alt + p"]=c.configurePublish.bind(c,a)),e}var d=a.constants.KEYBOARD_SPECIAL_KEY.value;return e}),define("rEditor/rootComps/keyboard/util/sendBIAndActionUtil",["core","lodash"],function(a,b){"use strict";function c(a,c){b.assign(c,a)}function d(a,d,e){if(a&&d){var f=a.selection.getSelectedComponents(),g=a.bi.getComponentsBIParams(f);b.forEach(g,c.bind(null,e)),b.isEmpty(g)&&e&&g.push(e),a.bi.reportBI(d,g)}}return d}),define("rEditor/rootComps/keyboard/config/editorShortcuts",["lodash","core","panels","rEditor/rootComps/keyboard/config/keyboardShortcutsActionMap","rEditor/rootComps/keyboard/actions/selectComponentShortcutsActions","rEditor/rootComps/keyboard/util/editorDebugShortcutsUtil","rEditor/rootComps/keyboard/util/sendBIAndActionUtil"],function(a,b,c,d,e,f,g){"use strict";function j(b){var c={};c[i.GROUP_COMPONENTS.key]=l.bind(null,b),c[i.UNGROUP_COMPONENTS.key]=m.bind(null,b),c[i.COPY.key]=k.bind(null,b),c[i.CUT.key]=o.bind(null,b),c[i.DUPLICATE.key]=n.bind(null,b),c[i.MOVE_RIGHT.key]=p.bind(null,b,"x",1),c[i.MOVE_LEFT.key]=p.bind(null,b,"x",-1),c[i.MOVE_UP.key]=p.bind(null,b,"y",-1),c[i.MOVE_DOWN.key]=p.bind(null,b,"y",1),c[i.SHIFT_RIGHT.key]=p.bind(null,b,"x",10),c[i.SHIFT_LEFT.key]=p.bind(null,b,"x",-10),c[i.SHIFT_UP.key]=p.bind(null,b,"y",-10),c[i.SHIFT_DOWN.key]=p.bind(null,b,"y",10);var d=f(b);a.merge(c,d),a.merge(h,c)}function k(a){var c=b.bi.events.rightClickMenu,d=a.selection.getSelectedComponents(),e=a.components.layout.isPinned(d)?1:0;if(a.selectedComponent.copy(),d){var f=a.components.getType(d);
g(a,c.COPY,{origin:"keyboard",is_component_pinned:e,component_type:f})}}function l(a,b){var c=a.selection.getSelectedComponents();a.components.is.groupable(c)&&a.multiselect.isMultiselect(c)&&a.groupComponents(c),b.preventDefault()}function m(a,b){var c=a.selection.getSelectedComponents();a.components.is.group(c)&&a.components.ungroup(c),b.preventDefault()}function n(a){var c=b.bi.events.rightClickMenu,d=a.selection.getSelectedComponents(),e=a.components.layout.isPinned(d)?1:0;a.selectedComponent.duplicate(),a.history.add("component - duplicate"),g(a,c.DUPLICATE,{origin:"keyboard",is_component_pinned:e})}function o(a){var c=b.bi.events.rightClickMenu,d=a.selection.getSelectedComponents(),e=a.components.layout.isPinned(d)?1:0;a.selectedComponent.cut(),a.history.add("component - cut"),g(a,c.CUT,{origin:"keyboard",is_component_pinned:e})}function p(a,b,c,d){d&&d.preventDefault(),e.moveComponent(a,b,c)}var h={},i=d.editor;return{init:function(a){j(a)},shortcuts:h}}),define("rEditor/rootComps/keyboard/config/previewShortcuts",["lodash","rEditor/rootComps/keyboard/config/keyboardShortcutsActionMap"],function(a,b){"use strict";function d(a){a.preventDefault()}function e(a,b){b.preventDefault(),a.togglePreview()}var c={};return{init:a.once(function(a){c[b.preview.EXIT_PREVIEW.key]=a.togglePreview,c[b.preview.TOGGLE_PREVIEW.key]=e.bind(this,a),c[b.preview.PUBLISH_SITE.key]=d}),shortcuts:c}}),define("rEditor/rootComps/keyboard/config/pinModeShortcuts",["lodash","core","panels","rEditor/rootComps/keyboard/config/keyboardShortcutsActionMap","rEditor/rootComps/keyboard/util/editorDebugShortcutsUtil","rEditor/rootComps/keyboard/actions/selectComponentShortcutsActions"],function(a,b,c,d,e){"use strict";function h(c){var d=b.bi.events.rightClickMenu,h={};h[g.GROUP_COMPONENTS.key]=j,h[g.UNGROUP_COMPONENTS.key]=j,h[g.COPY.key]=i.bind(null,c,d.COPY,{is_component_pinned:1}),h[g.CUT.key]=i.bind(null,c,d.CUT,{is_component_pinned:1}),h[g.DUPLICATE.key]=i.bind(null,c,d.DUPLICATE,{is_component_pinned:1}),h[g.MOVE_RIGHT.key]=j,h[g.MOVE_LEFT.key]=j,h[g.MOVE_UP.key]=j,h[g.MOVE_DOWN.key]=j,h[g.SHIFT_RIGHT.key]=j,h[g.SHIFT_LEFT.key]=j,h[g.SHIFT_UP.key]=j,h[g.SHIFT_DOWN.key]=j;var k=e(c);a.merge(h,k),a.merge(f,h)}function i(b,c,d){if(b&&c){var e=b.selection.getSelectedComponents(),f=b.bi.getComponentsBIParams(e);a.forEach(f,k.bind(null,d)),a.isEmpty(f)&&d&&f.push(d),b.bi.reportBI(c,f)}}function j(a){a.preventDefault()}function k(b,c){a.assign(c,b)}var f={},g=d.editor;return{init:function(a){h(a)},shortcuts:f}}),define("rEditor/rootComps/keyboard/util/commonKeyboardActions",["core","savePublish","rEditor/rootComps/keyboard/util/sendBIAndActionUtil","pLoader!santa:utils"],function(a,b,c,d){"use strict";function e(b){var d=a.bi.events.editor.undo_redo_component_change;b.history.undo(),c(b,d,{type:"undo",origin:"keyboard"})}function f(b){var d=a.bi.events.editor.undo_redo_component_change;b.history.redo(),c(b,d,{type:"redo",origin:"keyboard"})}function g(a){b.save(a,{origin:"keyboard"})}function h(a){b.saveAsTemplate(a,function(){d.log.info("Saved successfully as Template.")})}function i(c,d){d.preventDefault(),c.bi.event(a.bi.events.publish.PUBLISH_CLICK,{origin:"keyboard"}),b.saveAndPublish(c,"keyboard_publish")}return{undoFromKeyboard:e,redoFromKeyboard:f,saveSiteFromKeyboard:g,saveSiteAsTemplateFromKeyboard:h,publishSiteFromKeyboard:i}}),define("rEditor/rootComps/keyboard/config/zoomModeShortcuts",["lodash","rEditor/rootComps/keyboard/util/commonKeyboardActions","rEditor/rootComps/keyboard/config/keyboardShortcutsActionMap"],function(a,b,c){"use strict";function f(c){var f={};f[e.UNDO.key]=b.undoFromKeyboard.bind(null,c),f[e.REDO.key]=b.redoFromKeyboard.bind(null,c),f[e.SAVE.key]=b.saveSiteFromKeyboard.bind(null,c),f[e.SAVE_AS_TEMPLATE.key]=b.saveSiteAsTemplateFromKeyboard.bind(null,c),f[e.PUBLISH_SITE.key]=b.publishSiteFromKeyboard.bind(null,c),a.assign(d,f)}var d={},e=c.editor;return{init:function(a){f(a)},shortcuts:d}}),define("rEditor/rootComps/keyboard/config/imageCropShortcuts",["lodash","core","rEditor/rootComps/keyboard/config/keyboardShortcutsActionMap","rEditor/rootComps/keyboard/actions/selectComponentShortcutsActions"],function(a,b,c){"use strict";function f(b){var c={};c[e.APPLY.key]=g.bind(null,b),c[e.CANCEL.key]=h.bind(null,b),a.merge(d,c)}function g(c){var d=c.selection.getSelectedComponents(),e=c.selection.getSelectedComponentData().crop;c.imageCrop.updateCrop(),c.imageCrop.toggleCropMode(!1),c.waitForChangesApplied(function(){var f=c.components.data.get(d).crop,g=!a.isEqual(e,f);c.bi.event(b.bi.events.imageCrop.apply_crop,{is_changed:g,origin:"enter"})})}function h(a){a.imageCrop.toggleCropMode(!1)}var d={},e=c.imageCrop;return{init:function(a){f(a)},shortcuts:d}}),define("rEditor/rootComps/keyboard/config/baseEditorShortcuts",["lodash","core","panels","experiment!hideAllTools","rEditor/rootComps/keyboard/config/keyboardShortcutsActionMap","rEditor/rootComps/keyboard/actions/selectComponentShortcutsActions","rEditor/rootComps/keyboard/util/editorDebugShortcutsUtil","rEditor/rootComps/keyboard/util/commonKeyboardActions","rEditor/rootComps/keyboard/util/sendBIAndActionUtil"],function(a,b,c,d,e,f,g,h,i){"use strict";function l(b){var c={};c[k.SELECT_ALL.key]=b.selection.selectAll,c[k.PASTE.key]=n.bind(null,b),c[k.UNDO.key]=h.undoFromKeyboard.bind(null,b),c[k.REDO.key]=h.redoFromKeyboard.bind(null,b),c[k.DELETE.key]=p.bind(null,b),c[k.SAVE.key]=h.saveSiteFromKeyboard.bind(null,b),c[k.SAVE_AS_TEMPLATE.key]=h.saveSiteAsTemplateFromKeyboard.bind(null,b),c[k.SELECT_NEXT_COMP.key]=q.bind(null,b),c[k.SELECT_PREV_COMP.key]=r.bind(null,b),c[k.TOGGLE_RULERS.key]=s.bind(null,b),c[k.CLOSE_PANELS.key]=t.bind(null,b),c[k.SEND_TO_FRONT.key]=m.toFront.bind(null,b),c[k.SEND_TO_BACK.key]=m.toBack.bind(null,b),c[k.SEND_FORWARD.key]=m.forward.bind(null,b),c[k.SEND_BACKWARD.key]=m.backward.bind(null,b),c[k.TOGGLE_PREVIEW.key]=o.bind(null,b),c[k.PUBLISH_SITE.key]=h.publishSiteFromKeyboard.bind(null,b),d&&(c[k.HIDE_TOOLS.key]=u.bind(null,b));var e=g(b);a.merge(c,e),a.merge(j,c)}function n(d){var e=b.bi.events.rightClickMenu,f=d.clipboard.getItem(b.constants.EDITOR_CLIPBOARD_TYPES.COMPONENT);if(f){var g=a.pluck(f.components,"serializedComp.layout"),h=d.components.layout.isPinnedBySerializedLayout(g)?1:0;c.panelManager.closeAllPanels(),d.components.paste(),d.history.add("component - paste"),i(d,e.PASTE,{origin:"keyboard",is_component_pinned:h})}}function o(a,c){c.preventDefault(),a.bi.event(b.bi.events.preview.PREVIEW_CLICK,{origin:"keyboard"}),a.togglePreview()}function p(a){var c=a.selection.getSelectedComponents(),d=a.components.layout.isPinned(c)?1:0;a.selectedComponent.remove(),a.history.add("component - remove"),i(a,b.bi.events.editor.component_removed,{removal_method:"keyboard",is_component_pinned:d})}function q(a){a.panelManager.closeAllPanels(),f.selectNextComponent(a)}function r(a){a.panelManager.closeAllPanels(),f.selectPreviousComponent(a)}function s(a){a.rulers.toggleRulers()}function t(a){var e=c.panelManager,f=e.getOpenPanels();f.length>0?e.closeAllPanelsOfType(["leftPanelFrame","compPanelFrame","focusPanelFrame","messagePanelFrame","pagesPanelFrame","toolPanelFrame","tpaSettingsPanelFrame"]):e.getHelpPanelProps()?e.closeHelpCenter():a.selection.isComponentSelected()?a.selection.deselectComponents():d&&(a.toolsControl.toggleHideTools(!1),a.bi.event(b.bi.events.editor.hide_tools.show_controls,{origin:"shortcut"}))}function u(a){var c=a.toolsControl.toggleHideTools(),d=c?"hide_controls":"show_controls";a.bi.event(b.bi.events.editor.hide_tools[d],{origin:"shortcut"})}var j={},k=e.editor,m={toFront:function(a){var c=a.selection.getSelectedComponents();a.components.arrangement.moveToFront(c),i(a,b.bi.events.rightClickMenu.BRING_TO_FRONT,{origin:"keyboard"})},toBack:function(a){var c=a.selection.getSelectedComponents();a.components.arrangement.moveToBack(c),i(a,b.bi.events.rightClickMenu.SEND_TO_BACK,{origin:"keyboard"})},forward:function(a){var c=a.selection.getSelectedComponents();a.components.arrangement.moveForward(c),i(a,b.bi.events.rightClickMenu.MOVE_FORWARD,{origin:"keyboard"})},backward:function(a){var c=a.selection.getSelectedComponents();a.components.arrangement.moveBackward(c),i(a,b.bi.events.rightClickMenu.MOVE_BACKWARDS,{origin:"keyboard"})}};return{init:function(a){l(a)},shortcuts:j}}),define("rEditor/rootComps/keyboard/config/shortcutsConfig",["util","lodash","rEditor/rootComps/keyboard/config/topContextShortcuts","rEditor/rootComps/keyboard/config/topBarShortcuts","rEditor/rootComps/keyboard/config/editorShortcuts","rEditor/rootComps/keyboard/config/previewShortcuts","rEditor/rootComps/keyboard/config/pinModeShortcuts","rEditor/rootComps/keyboard/config/zoomModeShortcuts","rEditor/rootComps/keyboard/config/imageCropShortcuts","rEditor/rootComps/keyboard/config/baseEditorShortcuts"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function l(a,b){return function(){return b(),a.apply(null,arguments)}}function m(a,c){return b.mapValues(a,function(a){return l(a,c)})}function n(a,b){k.registerContext(k.CONTEXTS.TOP_CONTEXT,m(c.shortcuts,b),a);var l=k.extendContext(k.CONTEXTS.TOP_CONTEXT,m(j.shortcuts,b));k.registerContext(k.CONTEXTS.BASE_EDITOR,l,a);var n=k.extendContext(k.CONTEXTS.TOP_CONTEXT,m(f.shortcuts,b));k.registerContext(k.CONTEXTS.PREVIEW,n,a);var o=k.extendContext(k.CONTEXTS.BASE_EDITOR,m(e.shortcuts,b));k.registerContext(k.CONTEXTS.EDITOR,o,a);var p=k.extendContext(k.CONTEXTS.BASE_EDITOR,m(g.shortcuts,b));k.registerContext(k.CONTEXTS.PIN_MODE,p,a);var q=k.extendContext(k.CONTEXTS.EDITOR,m(d.shortcuts,b));k.registerContext(k.CONTEXTS.TOP_BAR,q,a);var r=k.extendContext(k.CONTEXTS.TOP_CONTEXT,m(i.shortcuts,b));k.registerContext(k.CONTEXTS.IMAGE_CROP,r,a);var s=k.extendContext(k.CONTEXTS.TOP_CONTEXT,m(h.shortcuts,b));k.registerContext(k.CONTEXTS.ZOOM_MODE,s,a)}var k=a.keyboardShortcuts;return{init:b.once(function(a){c.init(a),f.init(a),j.init(a),g.init(a),i.init(a),h.init(a),e.init(a),d.init(a),n(a,a.closeRightClickMenu)})}}),define("rEditor/rootComps/topBar/config/topBarData.json",[],function(){return{EDIT:[{comp:"WIX_LOGO",orientation:"left"},{comp:"SEPARATOR",orientation:"left"},{comp:"PAGES_LIST",orientation:"left"},{comp:"SEPARATOR",orientation:"left"},{comp:"MENU",orientation:"left"},{comp:"WIXSTORES_MIGRATION_UPGRADE_SITE",orientation:"left"},{comp:"SEPARATOR",orientation:"right"},{comp:"ZOOMOUT",orientation:"right"},{comp:"SEPARATOR",orientation:"right"},{comp:"UNDO",orientation:"right"},{comp:"SEPARATOR",orientation:"right"},{comp:"REDO",orientation:"right"},{comp:"REDO_SEPARATOR",orientation:"right"},{comp:"EDITOR_MODE_SWITCH",orientation:"right"},{comp:"SEPARATOR",orientation:"right"},{comp:"SAVE",orientation:"right"},{comp:"SEPARATOR",orientation:"right"},{comp:"PREVIEW",orientation:"right"},{comp:"PUBLISH",orientation:"right"}],PREVIEW:[{comp:"WIX_LOGO",orientation:"left"},{comp:"SEPARATOR",orientation:"left"},{comp:"MOBILE_NON_OPTIMIZED_NOTIFICATION",orientation:"center"},{comp:"PREVIEW_NOTIFICATION",orientation:"center"},{comp:"SEPARATOR",orientation:"right"},{comp:"EDITOR_MODE_SWITCH",orientation:"right"},{comp:"SEPARATOR",orientation:"right"},{comp:"PREVIEW_SAVE",orientation:"right"},{comp:"SEPARATOR",orientation:"right"},{comp:"BACK_TO_EDITOR",orientation:"right"}]}}),define("rEditor/rootComps/topBar/menuBar/config/topBarMenuData.json",[],function(){return[{key:"SITE_BAR",children:[{key:"SAVE",rightPanel:{type:"rEditor.panels.topBar.promotionPanel",props:{menuKey:"SAVE",style:{width:192,minHeight:396},title:"TOPBAR_SITE_SAVE_PROMOTION_TITLE",message:"TOPBAR_SITE_SAVE_PROMOTION_TEXT",symbol:"menubarSaveSitePromotion"}}},{key:"PREVIEW",rightPanel:{type:"rEditor.panels.topBar.promotionPanel",props:{menuKey:"PREVIEW",style:{width:192,minHeight:396},title:"TOPBAR_SITE_PREVIEW_PROMOTION_TITLE",message:"TOPBAR_SITE_PREVIEW_PROMOTION_TEXT",symbol:"menubarPreviewSitePromotion"}}},{key:"FEEDBACK",experimentOff:"feedmeIntegrationOff",experiment:"exp171",rightPanel:{type:"rEditor.panels.topBar.promotionPanel",props:{menuKey:"FEEDBACK",style:{width:192,minHeight:396},title:"TOPBAR_GetFeedback_Promotion_Title",message:"TOPBAR_GetFeedback_Promotion_Text",symbol:"menubarfeedbackPromotion"}}},{key:"PUBLISH",rightPanel:{type:"rEditor.panels.topBar.promotionPanel",props:{menuKey:"PUBLISH",style:{width:192,minHeight:396},title:"TOPBAR_SITE_PUBLISH_PROMOTION_TITLE",message:"TOPBAR_SITE_PUBLISH_PROMOTION_TEXT",symbol:"menubarPublishSitePromotion"}}},{key:"VIEW_SITE",rightPanel:{type:"rEditor.panels.topBar.promotionPanel",props:{menuKey:"VIEW-SITE",style:{width:192,minHeight:396},title:"TOPBAR_SITE_VIEW_SITE_PROMOTION_TITLE",message:"TOPBAR_SITE_VIEW_SITE_PROMOTION_TEXT",symbol:"menubarViewPublishedPromotion"}}},{key:"CONNECT_DOMAIN",rightPanel:{type:"rEditor.panels.topBar.promotionPanel",props:{menuKey:"CONNECT-DOMAIN",style:{width:192,minHeight:396},title:"TOPBAR_SITE_CONNECT_PROMOTION_TITLE",message:"TOPBAR_SITE_CONNECT_PROMOTION_TEXT",symbol:"menubarConnectDomainPromotion"}}},{key:"UPGRADE_ITEM",rightPanel:{type:"rEditor.panels.topBar.promotionPanel",props:{menuKey:"UPGRADE",style:{backgroundColor:"#ebdbf6",width:192,minHeight:396},title:"TOPBAR_SITE_UPGRADE_PROMOTION_TITLE",message:"TOPBAR_SITE_UPGRADE_PROMOTION_TEXT",symbol:"menubarUpgradePromotionLight"}}},{key:"EDITOR_MODE_SWITCH",rightPanel:{DESKTOP:{type:"rEditor.panels.topBar.promotionPanel",props:{menuKey:"MOBILE-SWITCH",style:{width:192,minHeight:396},title:"TOPBAR_SITE_MOBILE_PROMOTION_TITLE",message:"TOPBAR_SITE_MOBILE_PROMOTION_TEXT",symbol:"menubarSwitchToMobilePromotion"}},MOBILE:{type:"rEditor.panels.topBar.promotionPanel",props:{menuKey:"DESKTOP-SWITCH",style:{width:192,minHeight:396},title:"TOPBAR_SITE_DESKTOP_PROMOTION_TITLE",message:"TOPBAR_SITE_DESKTOP_PROMOTION_TEXT",symbol:"menubarSwitchToDesktopPromotion"}}}},{key:"IMAGE_OPTIMIZATION",rightPanel:{type:"rEditor.panels.topBar.promotionPanel",props:{menuKey:"IMAGE-OPTIMIZATION",style:{width:192,minHeight:396},title:"TOPBAR_SITE_IMAGE_QUALITY_PROMOTION_TITLE",message:"TOPBAR_SITE_IMAGE_QUALITY_PROMOTION_TEXT",symbol:"imageOptimizationPromotion"}}},{key:"SITE_DASHBOARD",rightPanel:{type:"rEditor.panels.topBar.promotionPanel",props:{menuKey:"SITE-DASHBOARD",style:{width:192,minHeight:396},title:"TOPBAR_SITE_DASHBOARD",message:"TOPBAR_SITE_DASHBOARD_PROMOTION_TEXT",symbol:"menubarMySitesPromotion"}}},{key:"SETTINGS",rightPanel:{type:"rEditor.panels.topBar.promotionPanel",props:{menuKey:"SETTINGS",style:{width:192,minHeight:396},title:"TOPBAR_SITE_SETTINGS_PROMOTION_TITLE",message:"TOPBAR_SITE_SETTINGS_PROMOTION_TEXT",symbol:"menubarSiteSettingsPromotion"}}},{key:"REVISIONS",rightPanel:{type:"rEditor.panels.topBar.promotionPanel",props:{menuKey:"REVISIONS",style:{width:192,minHeight:396},title:"TOPBAR_SITE_HISTORY_PROMOTION_TITLE",message:"TOPBAR_SITE_HISTORY_PROMOTION_TEXT",symbol:"menubarSiteHistoryPromotion"}}},{key:"BACK_TO_OLD_EDITOR",rightPanel:{type:"rEditor.panels.topBar.promotionPanel",props:{menuKey:"BACK-TO-OLD-EDITOR",style:{width:192,minHeight:396},title:"Topbar_oldeditor_promotion_title",message:"topbar_oldeditor_promotion_text2",symbol:"menubarBackToOldEditorPromotionNew"}}},{key:"EXIT",rightPanel:{type:"rEditor.panels.topBar.promotionPanel",props:{menuKey:"EXIT-EDITOR",style:{width:192,minHeight:396},title:"TOPBAR_SITE_EXIT_PROMOTION_TITLE",message:"TOPBAR_SITE_EXIT_PROMOTION_TEXT",symbol:"menubarExitEditorPromotion"}}}],rightPanel:{type:"rEditor.panels.topBar.promotionPanel",props:{menuKey:"SAVE",style:{width:192,minHeight:396},title:"TOPBAR_SITE_SAVE_PROMOTION_TITLE",message:"TOPBAR_SITE_SAVE_PROMOTION_TEXT",symbol:"menubarSaveSitePromotion"}}},{key:"VIEW_BAR",children:[{key:"TOOLBAR",rightPanel:{type:"rEditor.panels.topBar.promotionPanel",props:{menuKey:"TOOLBAR",style:{width:192,minHeight:315},title:"TOPBAR_VIEW_TOOLBAR_TITLE",message:"TOPBAR_VIEW_TOOLBAR_BODY",symbol:"menubarToolbarPromotion"}}},{key:"RULERS",rightPanel:{type:"rEditor.panels.topBar.promotionPanel",props:{menuKey:"RULERS",style:{width:192,minHeight:315},title:"TOPBAR_VIEW_RULERS_TITLE1",message:"TOPBAR_VIEW_RULERS_BODY1",symbol:"menubarRulersPromotion"}}},{key:"GUIDELINES",rightPanel:{type:"rEditor.panels.topBar.promotionPanel",props:{menuKey:"GUIDELINES",style:{width:192,minHeight:315},title:"TOPBAR_VIEW_GRIDLINES_TITLE",message:"TOPBAR_VIEW_GRIDLINES_BODY",symbol:"menubarGuidesPromotion"}}},{key:"SNAP",rightPanel:{type:"rEditor.panels.topBar.promotionPanel",props:{menuKey:"SNAP",style:{width:192,minHeight:315},title:"TOPBAR_VIEW_SNAP_TITLE",message:"TOPBAR_VIEW_SNAP_BODY",symbol:"menubarSnapToObjectPromotion"}}},{key:"SECTIONS",experimentOff:"exp171",rightPanel:{type:"rEditor.panels.topBar.promotionPanel",props:{menuKey:"SECTIONS",style:{width:192,minHeight:315},title:"TOPBAR_SECTIONS_TITLE",message:"TOPBAR_SECTIONS_BODY",symbol:"menubarSectionHandlesPromotion"}}},{key:"DEVELOPER_MODE",rightPanel:{type:"rEditor.panels.topBar.promotionPanel",props:{menuKey:"DEVELOPER_MODE",style:{width:192,minHeight:315},title:"TOPBAR_VIEW_DEVELOPER_MODE_TITLE",message:"TOPBAR_VIEW_DEVELOPER_MODE_BODY",symbol:"menubarToolbarPromotion"}}},{key:"PROPERTIES_TOOLBAR",experimentOff:"zoomModeSectionsRedesign",rightPanel:{type:"rEditor.panels.topBar.promotionPanel",props:{menuKey:"PROPERTIES_TOOLBAR",style:{width:192,minHeight:315},title:"TOPBAR_VIEW_DEVELOPER_MODE_PROPERTIES_PANEL_TITLE",message:"TOPBAR_VIEW_DEVELOPER_MODE_PROPERTIES_PANEL_BODY",symbol:"menubarToolbarPromotion"}}},{key:"HIDDEN_ELEMENTS",experimentOff:"zoomModeSectionsRedesign",rightPanel:{type:"rEditor.panels.topBar.promotionPanel",props:{menuKey:"HIDDEN_ELEMENTS",style:{width:192,minHeight:315},title:"TOPBAR_VIEW_DEVELOPER_MODE_HIDDEN_ELEMENTS_TITLE",message:"TOPBAR_VIEW_DEVELOPER_MODE_HIDDEN_ELEMENTS_BODY",symbol:"menubarToolbarPromotion"}}}],rightPanel:{type:"rEditor.panels.topBar.promotionPanel",props:{menuKey:"TOOLBAR",style:{width:192,minHeight:315},title:"TOPBAR_VIEW_TOOLBAR_TITLE",message:"TOPBAR_VIEW_TOOLBAR_BODY",symbol:"menubarToolbarPromotion"}}},{key:"HELP_BAR",children:[{key:"HELP_CENTER",rightPanel:{type:"rEditor.panels.topBar.promotionPanel",props:{menuKey:"HELP-CENTER",style:{width:192,minHeight:297},classes:{graphics:"graphics-help-center"},title:"TOPBAR_HELP_CENTER_PROMOTION_TITLE",message:"TOPBAR_HELP_CENTER_PROMOTION_TEXT",symbol:"menubarHelpCenterPromotion"}}},{key:"HELP_KB_SHORTCUTS",rightPanel:{type:"rEditor.panels.topBar.promotionPanel",props:{menuKey:"KB-SHORTCUTS",style:{width:192,minHeight:297},classes:{graphics:"graphics-help-center"},title:"TOPBAR_HELP_QUESTION_PROMOTION_TITLE",message:"TOPBAR_HELP_QUESTION_PROMOTION_TEXT",symbol:"menubarHelpCenterPromotion"}}},{key:"HELP_CONNECT_DOMAIN",rightPanel:{type:"rEditor.panels.topBar.promotionPanel",props:{menuKey:"CONNECT-DOMAIN",style:{width:192,minHeight:297},classes:{graphics:"graphics-help-center"},title:"TOPBAR_HELP_CONNECT_PROMOTION_TITLE",message:"TOPBAR_HELP_CONNECT_PROMOTION_TEXT",symbol:"menubarHelpCenterPromotion"}}},{key:"HELP_SEO",rightPanel:{type:"rEditor.panels.topBar.promotionPanel",props:{menuKey:"SEO",style:{width:192,minHeight:297},classes:{graphics:"graphics-help-center"},title:"TOPBAR_HELP_SEO_PROMOTION_TITLE",message:"TOPBAR_HELP_SEO_PROMOTION_TEXT",symbol:"menubarHelpCenterPromotion"}}},{key:"HELP_FEEDBACK",rightPanel:{type:"rEditor.panels.topBar.promotionPanel",props:{menuKey:"FEEDBACK",style:{width:192,minHeight:297},classes:{graphics:"graphics-help-center"},title:"Topbar_HELP_FEEDBACK_PROMOTION_TITLE",message:"Topbar_HELP_FEEDBACK_PROMOTION_TEXT",symbol:"menubarHelpCenterPromotion"}}},{key:"TERMS_OF_USE",rightPanel:{type:"rEditor.panels.topBar.promotionPanel",props:{menuKey:"HELP-CENTER",style:{width:192,minHeight:297},classes:{graphics:"graphics-help-center"},title:"TOPBAR_HELP_TERMS_PROMOTION_TITLE",message:"TOPBAR_HELP_TERMS_PROMOTION_TEXT",symbol:"menubarHelpCenterPromotion"}}},{key:"PRIVACY_POLICY",rightPanel:{type:"rEditor.panels.topBar.promotionPanel",props:{menuKey:"HELP-CENTER",style:{width:192,minHeight:297},classes:{graphics:"graphics-help-center"},title:"TOPBAR_HELP_PRIVACY_PROMOTION_TITLE",message:"TOPBAR_HELP_PRIVACY_PROMOTION_TEXT",symbol:"menubarHelpCenterPromotion"}}}],rightPanel:{type:"rEditor.panels.topBar.promotionPanel",props:{menuKey:"HELP-CENTER",style:{width:192,minHeight:297},classes:{graphics:"graphics-help-center"},title:"TOPBAR_HELP_CENTER_PROMOTION_TITLE",message:"TOPBAR_HELP_CENTER_PROMOTION_TEXT",symbol:"menubarHelpCenterPromotion"}}},{category:"UPGRADE",upgradePanels:{DEFAULT:{key:"UPGRADE",rightPanel:{type:"rEditor.panels.topBar.promotionPanel",props:{menuKey:"UPGRADE-POPUP","class":"right-check-panel-upgrade",style:{backgroundColor:"transparent",width:131,padding:"25px 0"},symbol:"menubarUpgradePromotionDark"}}}}}]}),define("rEditor/rootComps/topBar/buttons/mixins/topBarButtonProgressMixin",["core"],function(a){"use strict";return{isInProgress:function(){return this.props.progressStatus===a.constants.PROGRESS_STATUS.IN_PROGRESS},isProgressDone:function(){return this.isDoneSuccessfully()||this.isDoneUnSuccessfully()},isDoneSuccessfully:function(){return this.props.progressStatus===a.constants.PROGRESS_STATUS.DONE_SUCCESS},isDoneUnSuccessfully:function(){return this.props.progressStatus===a.constants.PROGRESS_STATUS.DONE_FAILED}}}),define("rEditor/rootComps/topBar/buttons/mixins/topBarTooltipMixin",["react","baseUI"],function(a,b){"use strict";var c=b.tooltipManager;return{getTooltipElement:function(){var b=this.props.tooltipData;return b&&b.presenter?a.createElement(b.presenter,b.props):b||!1},getTooltipInteractiveMode:function(){var a=this.props.tooltipData;return a&&a.interactive},hideTooltip:function(a){var b=a||this.props.tooltipData&&this.props.tooltipData.id;c.hide(b)}}}),define("rEditor/rootComps/topBar/dropPanels/topBarDropPanel.rt",["react/addons","lodash"],function(a,b){"use strict";return function(){return a.createElement("div",{className:"top-bar-drop-panel "+(this.props.dropPanelClass||"")},a.createElement("div",{className:"drop-panel-left-side"},this.getLeftContent()),this.hasRightContent()?a.createElement("div",{className:"drop-panel-right-side",key:"rightContent"},this.getRightContent()):null,this.props.bottomContent?a.createElement("div",{className:"drop-panel-bottom-side",key:"bottomContent"},this.props.bottomContent):null)}}),define("rEditor/rootComps/topBar/dropPanels/topBarDropPanel",["react","lodash","rEditor/rootComps/topBar/dropPanels/topBarDropPanel.rt"],function(a,b,c){"use strict";return a.createClass({displayName:"topBarDropPanel",propTypes:{leftContent:a.PropTypes.object.isRequired,bottomContent:a.PropTypes.object,rightContentOptions:a.PropTypes.object,dropPanelClass:a.PropTypes.string,closeHandle:a.PropTypes.func},getInitialState:function(){return{displayedRightContentKey:"main"}},componentWillReceiveProps:function(a){var c=b.keys(this.props.rightContentOptions),d=b.keys(a.rightContentOptions),e=b.intersection(d,c);e.length!==c.length&&this.setState({displayedRightContentKey:"main"})},getLeftContent:function(){return a.addons.cloneWithProps(this.props.leftContent,{onMenuItemHover:this.onSubMenuItemHover,closeDropDownHandle:this.props.closeHandle})},getRightContent:function(){return this.props.rightContentOptions[this.state.displayedRightContentKey]},hasRightContent:function(){return!!this.props.rightContentOptions},onSubMenuItemHover:function(a){a.rightPanel&&this.setState({displayedRightContentKey:a.key})},render:c})}),define("rEditor/rootComps/topBar/buttons/topBarButton/topBarButton.rt",["react/addons","lodash","baseUI"],function(a,b,c){"use strict";function d(d){var e=this.isDoneSuccessfully();return a.createElement("div",{className:"wrapper-to-perserve-ref"},a.createElement(c.button2,{key:"buttonContent-"+this.props.iconSymbol,label:this.props.label,style:this.props.buttonStyle,symbolName:this.props.iconSymbol,customLabelClass:"top-bar-button-label",className:b.keys(b.pick({"top-bar-button-content":!0,"icon-and-label":this.props.iconSymbol&&this.props.label,invisible:e},b.identity)).join(" "),onClick:this.onClick,onMouseOver:this.handleMouseOverButton,onMouseLeave:this.handleMouseLeftButton}),e?a.createElement(c.symbol,{key:"successSymbol",name:"topBarButtonVSign",className:"button-symbol vSign"}):null,this.isInProgress()?a.createElement("div",{key:"progressIndicator",className:"progress-indicator"}):null)}function e(){var b=this.getTooltipElement();return a.createElement(c.tooltip,{id:this.props.tooltipData&&this.props.tooltipData.id,value:b,interactive:this.getTooltipInteractiveMode(),disabled:!b||this.state.isDropDownDisplayed},d.apply(this,[b]))}return function(){return a.createElement("div",{className:this.getClasses(),style:this.props.style},e.apply(this,[]),this.state.isDropDownDisplayed?a.createElement(c.bubble,b.assign({},{key:"topBarButtonDropDown"},this.getDropDownProps())):null)}}),define("rEditor/rootComps/topBar/buttons/topBarButton/topBarButton",["react","lodash","core","util","baseUI","rEditor/rootComps/topBar/buttons/mixins/topBarButtonProgressMixin","rEditor/rootComps/topBar/buttons/mixins/topBarTooltipMixin","rEditor/rootComps/topBar/dropPanels/topBarDropPanel","rEditor/rootComps/topBar/buttons/topBarButton/topBarButton.rt"],function(a,b,c,d,e,f,g,h,i){"use strict";return a.createClass({displayName:"topBarButton",mixins:[a.addons.PureRenderMixin,f,d.singlePassDOMReadWriteMixin,c.mixins.editorAPIMixin,c.mixins.biMixin,g],propTypes:{label:a.PropTypes.string,classes:a.PropTypes.string,iconSymbol:a.PropTypes.string,dropPanelProps:a.PropTypes.object,actions:a.PropTypes.array,bi:a.PropTypes.oneOfType([a.PropTypes.array,a.PropTypes.object]),biFunc:a.PropTypes.func,progressStatus:a.PropTypes.string,isDisabled:a.PropTypes.bool,onMenuOpened:a.PropTypes.func,onMenuClosed:a.PropTypes.func,buttonStyle:a.PropTypes.object},getInitialState:function(){return{isDropDownDisplayed:!1,isMouseOverButton:!1}},getDefaultProps:function(){return{buttonStyle:{}}},getClasses:function(){var a="top-bar-button "+this.props.classes;return this.state.isDropDownDisplayed&&(a+=" top-bar-button-selected"),(this.isInProgress()||this.props.isDisabled)&&(a+=" disabled-button"),a},onClick:function(){if(!this.props.isDisabled){this.props.dropPanelContent&&this.toggleDropDown(),this.hideTooltip();var a=this.getEditorAPI(),c=a.selection.getSelectedComponents(),d=a.bi.getComponentsBIParams(c);this.props.actions&&b.forEach([].concat(this.props.actions),function(a){a()}),this.sendButtonBI(d)}},handleMouseOverButton:function(){this.setState({isMouseOverButton:!0})},handleMouseLeftButton:function(){this.setState({isMouseOverButton:!1})},getDropDownId:function(){return"top-bar-dropdown-"+(this.props.label||this.props.iconSymbol)},getDropDownProps:function(){if(!this.isMounted())return{};var a=this.getDropDownContent();return{id:this.getDropDownId(),value:a,width:"1000px",interactive:!0,closeTriggers:[e.uiConstants.TOOLTIP.TRIGGERS.MOUSE_LEAVE],className:"top-bar-drop-down",overridePositionAdjustments:this.props.dropPanelProps&&this.props.dropPanelProps.overridePositionAdjustments,targetNode:this.getDOMNode(),hideMethod:this.handleDropDownWantsToClose,mouseLeftTargetNode:!this.state.isMouseOverButton,timeoutForMouseOverBubble:500}},getDropDownContent:function(){var b=this.getDropPanelLeftContent(),c={main:this.getDropPanelRightContent()};return b?a.createElement(h,{closeHandle:this.closeDropDown,leftContent:b,rightContentOptions:c,dropPanelClass:this.props.dropPanelProps&&this.props.dropPanelProps.dropPanelClass}):null},getDropPanelLeftContent:function(){var b=this.props.dropPanelContent,c=this.props.dropPanelProps;return b?(c.closeHandle=this.closeDropDown,a.createElement(b,this.props.dropPanelProps)):null},getDropPanelRightContent:function(){var d=this.props.dropPanelProps&&this.props.dropPanelProps.dropPanelPromotion;if(d){var e=b.cloneDeep(d.props);return e=b.merge({moduleName:d.type},e),a.DOM.div({className:d.classes},[a.createElement(c.lazyComponent,e)])}return null},openDropDown:function(){this.setState({isDropDownDisplayed:!0,isMouseOverButton:!0}),this.props.onMenuOpened&&this.props.onMenuOpened()},closeDropDown:function(){this.setState({isDropDownDisplayed:!1}),this.props.onMenuClosed&&this.props.onMenuClosed()},toggleDropDown:function(){this.state.isDropDownDisplayed?this.closeDropDown():this.openDropDown()},handleDropDownWantsToClose:function(){this.isMounted()&&!this.state.isMouseOverButton&&this.closeDropDown()},sendButtonBI:function(a){if(this.props.bi){var c=[].concat(this.props.bi);b.forEach(c,function(a){a.type&&this.sendBI(a.type,a.fields)},this)}this.props.biFunc&&this.props.biFunc(a)},measurePhase:function(){return this.props.measurePhase?this.props.measurePhase():null},patchPhase:function(a){this.props.patchPhase&&this.props.patchPhase(a)},render:i})}),define("rEditor/utils/menuItemsRepository",["lodash"],function(a){"use strict";function b(b,c){if(c){c=c.toLowerCase();var d=function(a){return 0===a.label.toLowerCase().indexOf(c)},e=function(b){var c;return a.forEach(b,function(a){if(d(a))return c=a,!1;var b=e(a.items);return b?(c=b,!1):void 0}),c};return e(b)}}function c(b,c){c=c.toLowerCase();var d=function(a){return-1!==a.label.toLowerCase().indexOf(c)},e=function(b){if(!b||0===b.length)return b;var c=[];return a.forEach(b,function(b){var f=d(b),g=e(b.items),h=g&&g.length>0;if(f||h){var i=a.clone(b,!1);i.items=g,c.push(i)}}),c};return e(b)}return{findFirstFilteredItem:b,filterItems:c}}),define("rEditor/rootComps/topBar/buttons/pagesNavButton/pagesNavButton.rt",["react/addons","lodash","util","baseUI","symbols","experiment!rtlMenu","experiment!autoTextDirection","pLoader!santa:utils"],function(a,b,c,d,e,f,g,h){"use strict";function i(){var b=this.getTooltipElement(),e=this.isPopupsExperiment&&this.isPopupOpened();return a.createElement(d.tooltip,{id:"pageNavButtonTooltip",value:b,interactive:this.getTooltipInteractiveMode(),disabled:!b||this.state.isFiltering||e||this.isPopupsExperiment},a.createElement("div",{className:this.props.classes+(this.isPopupsExperiment&&this.isNavButtonInPopupMode()?" popup-mode":" ")+(this.state.isFiltering?" ":" pages-nav-button-bg ")+(this.props.isSmallVersion?"mini-":"")+"page-nav-with-label ",onClick:this.onClick},a.createElement("div",{ref:"popupTooltipTarget",className:"popup-tooltip-target"},this.state.isFiltering||e?null:a.createElement("div",{key:"page-name",className:"top-bar-page-navigation-select"},this.props.isSmallVersion?null:a.createElement("div",{key:"graphics",className:"page-navigation-button-graphics"},a.createElement(d.symbol,{name:"pages"})),a.createElement("span",{className:(this.props.isSmallVersion?"mini-":"")+"top-bar-page-navigation-pageName"},this.props.isSmallVersion?"":c.translate("Pages_Menu_Title_Title")+":"," ",a.createElement("span",{dir:f?h.textDirectionUtil.getDirection(c.browserUtil.isIE(),this.props.label):"ltr"},this.getPageName())),this.props.isSmallVersion?null:a.createElement("span",{key:"arrow",className:"top-bar-page-navigation-arrow"},a.createElement(d.symbol,{name:"pagesArrow"}))),e&&!this.state.isFiltering?a.createElement("div",{key:"popup-mode",className:"top-bar-page-navigation-select"},a.createElement("span",{},c.translate("PopUps_TopBar_Exit")),a.createElement(d.button,{className:"close",icon:"headerCloseButton"})):null,this.state.isFiltering?a.createElement("div",{key:"page-filter",className:"top-bar-page-navigation-select"},a.createElement("div",{className:"page-navigation-button-graphics"},a.createElement(d.symbol,{name:"pagesSearch"})),a.createElement(d.autoCompleteTextInput,{ref:"filterInput",dir:g?h.textDirectionUtil.getDirection(c.browserUtil.isIE(),this.props.label):"ltr",className:"top-bar-page-filter",placeholder:c.translate("TOPBAR_FIND_PAGE"),cancelIcon:"topBarButtonCancel",complete:this.completePageName,onChange:this.filterChanged,onKeyDown:this.onKeyDown})):null)))}return function(){return i.apply(this,[])}}),define("rEditor/rootComps/topBar/buttons/pagesNavButton/pagesNavButton",["lodash","react","core","panels","baseUI","util","rEditor/utils/menuItemsRepository","rEditor/rootComps/topBar/buttons/mixins/topBarTooltipMixin","rEditor/rootComps/topBar/buttons/pagesNavButton/pagesNavButton.rt","experiment"],function(a,b,c,d,e,f,g,h,i,j){
"use strict";var k=e.tooltipManager,l={displayName:"topBarPageNavButton",propTypes:{isSmallVersion:b.PropTypes.bool,bi:b.PropTypes.object,tooltipData:b.PropTypes.object,clickCallback:b.PropTypes.func},mixins:[c.mixins.editorAPIMixin,c.mixins.biMixin,h],keyCodes:{ENTER:13,ESC:27},getInitialState:function(){return{isFiltering:!1,filter:""}},completePageName:function(a){var b=this.getEditorAPI().mainMenu.getMenuItemsTreeForMainMenu(),c=g.findFirstFilteredItem(b,a);return c?c.label:null},getPageName:function(){return this.getEditorAPI().pages.getCurrentUrlPageTitle()},onClick:function(){this.props.clickCallback&&this.props.clickCallback(),this.openFilteredPagesPanel()},openFilteredPagesPanel:function(){this.openWithFilter(this.state.filter),this.hideTooltip("pageNavButtonTooltip"),this.props.bi&&this.props.bi.type&&this.sendBI(this.props.bi.type,this.props.bi.fields)},filterChanged:function(a){this.openWithFilter(a)},openWithFilter:function(a){this.setState({isFiltering:!0,filter:a}),this.openPagesPanel(a)},navigateToFirst:function(){var a=this.getEditorAPI().mainMenu.getMenuItemsTreeForMainMenu(),b=g.findFirstFilteredItem(a,this.state.filter);b&&b.pageData&&(this.getEditorAPI().pages.navigateTo(b.pageData.id),this.closePagesPanel(),this.closeFiltering())},closeFiltering:function(){this.setState({isFiltering:!1,filter:""})},onKeyDown:function(a){a.keyCode===this.keyCodes.ENTER&&this.state.filter?this.navigateToFirst():a.keyCode===this.keyCodes.ESC&&(this.closePagesPanel(),this.closeFiltering())},componentWillReceiveProps:function(){this.getEditorAPI().isPagesPanelOpen()||this.closeFiltering()},componentDidUpdate:function(a,b){this.state.isFiltering&&!b.isFiltering&&this.refs.filterInput.focus()},openPagesPanel:function(a){var b=this.getEditorAPI(),c={filter:a,pageAdded:function(){this.closeFiltering(),this.openPagesPanel("")}.bind(this),subpagesOpened:function(){this.closeFiltering()}.bind(this)};b.openPagesPanel(c)},closePagesPanel:function(){this.getEditorAPI().closePagesPanel()},render:i};if(j.isOpen("popups")){var m={ADD:{TEASER:"popups/first_time_tour_add",VALUE:{classPath:"baseUI.popoverTemplates.imageAndTextTooltip",props:{imageContainerStyle:{backgroundColor:"#5FBC57",backgroundImage:"url("+f.media.getMediaUrl("rEditor/topBar/popupsExitFirstTime.gif")+")",backgroundPosition:"center",backgroundRepeat:"no-repeat",height:"140px"},text:"Popups_Exit_FirstTime_Text"}}}},n=l.onClick;a.assign(l,{isPopupsExperiment:!0,onClick:function(){return this.isNavButtonInPopupMode()?(this.closePopupMode(),void(this.shouldShowPopupsFirstTime("ADD")&&k.createTooltip(!0,a.assign(this.getPopupsFirstTimeProps("ADD"),{id:"POPUP_ADDED",targetNode:this.refs.popupTooltipTarget.getDOMNode()})))):void n.call(this)},isPopupOpened:function(){var a=this.getEditorAPI().pages.popupPages;return a.isPopupOpened&&a.isPopupOpened()},closePopupMode:function(){var a=this.getEditorAPI().pages.popupPages;a.close()},isNavButtonInPopupMode:function(){return this.isPopupOpened()&&!this.state.isFiltering},getUserPrefs:function(){var a=this.getEditorAPI();return a&&a.getUserPreferences()||{}},setPopupsFirstTimeIsShown:function(a){var b=this.getUserPrefs().site;b&&b.set("closed_teaser_"+m[a].TEASER,!0)},shouldShowPopupsFirstTime:function(a){var b=this.getUserPrefs().site;return b&&!b.get("closed_teaser_"+m[a].TEASER)},getPopupsFirstTimeProps:function(b){return{width:"240px",marginsFromElement:0,alignment:e.uiConstants.TOOLTIP.ALIGNMENT.BOTTOM,openTriggers:[e.uiConstants.TOOLTIP.TRIGGERS.IMMEDIATE],closeTriggers:[e.uiConstants.TOOLTIP.TRIGGERS.OUTER_CLICK],onOpen:a.partial(this.setPopupsFirstTimeIsShown,"ADD"),value:m[b].VALUE}}})}return b.createClass(l)}),define("rEditor/rootComps/topBar/buttons/topBarNotification/topBarNotification.rt",["react/addons","lodash"],function(a,b){"use strict";return function(){return this.props.isShown?a.createElement("div",{key:"topBarNotification",className:this.props.classes+" top-bar-notification"},a.createElement("div",{},this.getMessage())):null}}),define("rEditor/rootComps/topBar/buttons/topBarNotification/topBarNotification",["react","util","rEditor/rootComps/topBar/buttons/topBarNotification/topBarNotification.rt"],function(a,b,c){"use strict";return a.createClass({displayName:"topBarNotification",propTypes:{message:a.PropTypes.string,measurePhase:a.PropTypes.func,patchPhase:a.PropTypes.func},mixins:[b.singlePassDOMReadWriteMixin],emptyMessage:["","",""],getMessage:function(){var b=this.getMessageParts(),c=this.getMessageLinkPart(b[1]);return a.createElement("div",{},[b[0],c,b[2]])},getMessageParts:function(){var a=this.props.message;if(a){var b=this.getAnchorIndexes(a),c=a.substring(0,b[0]),d=a.substring(b[1]+"</a>".length),e=a.substring(b[0]+"<a>".length,b[1]);return[c,e,d]}return this.emptyMessage},getAnchorIndexes:function(a){if(!a)return[0,0];var b=a.indexOf("<a>"),c=a.indexOf("</a>");return(0>b||0>c)&&(b=a.length,c=a.length),[b,c]},getMessageLinkPart:function(b){return b?a.DOM.a({onClick:this.linkAction},b):""},linkAction:function(){this.props.action()},measurePhase:function(){return this.props.measurePhase?this.props.measurePhase():null},patchPhase:function(a){this.props.patchPhase&&this.props.patchPhase(a)},render:c})}),define("rEditor/rootComps/topBar/menuBar/menuBarPanelsDefinitions",["lodash","core","util","savePublish","experiment!spanishUpgradeText"],function(a,b,c,d,e){"use strict";function i(b,d){var e=b.campaigns.personalSale.getDiscountValue(),f=a.template(c.translate(d));return f({discount:e})}function j(a){var b=null,c=p(a);return b=c?k(a):n(a)}function k(a){return null===f&&(f=[{buttonText:c.translate("TOPBAR_UPGRADE_BUTTON_SAVE_SITE"),action:function(){d.save(a)}}]),f}function l(a){var b="TOPBAR_UPGRADE_FREE_ROW_BUTTON_1",d="";return d=a.campaigns.personalSale.isActiveCampaign()?i(a,"TOPBAR_UPGRADE_POPUP_PERSONAL_SALE_BUTTON_DYNAMIC"):c.translate("TOPBAR_UPGRADE_FREE_ROW_BUTTON_2"),{offerButtonText:d,leftButtonText:c.translate(b)}}function m(a){var b="edhtml_TOP_BAR_UPGRADE_MENU_GET_YEARLY_UNLIMITED";return a.campaigns.personalSale.isActiveCampaign()&&(b="edhtml_TOP_BAR_UPGRADE_MENU_PS"),b}function n(a){if(null===g){var c=b.bi.events.topbar,d=l(a),e=m(a);g=[{buttonText:d.leftButtonText,action:o.bind(null,a,c.top_bar_compare_plans_click,"edhtml_TOP_BAR_UPGRADE_MENU_COMPARE_PLANS")},{buttonText:d.offerButtonText,action:o.bind(null,a,c.top_bar_get_yearly_unlimited_click,e)}]}return g}function o(a,b,c){a.bi.event(b),a.account.upgrade(c)}function p(a){return a&&a.generalInfo&&a.generalInfo.isFirstSave()}function q(a,b){b=b||"left",a=s(a);var c=h[a];return c&&c[b]?c[b].panel:null}function r(a,b,c){c=c||"left",a=s(a);var d=h[a];return d&&d[c]?d[c].propsGetter(b):null}function s(b){return a.includes(["SITE_BAR","EDIT_BAR","VIEW_BAR","HELP_BAR"],b)?"ACTIONS_PANEL":b}var f=null,g=null,h={ACTIONS_PANEL:{left:{panel:"rEditor.panels.topBar.menuActionsPanel",propsGetter:function(){return{}}}},UPGRADE:{left:{panel:"rEditor.panels.topBar.checkListPanel",propsGetter:function(b){var d=p(b),f="";return f=b.campaigns.personalSale.isActiveCampaign()?i(b,"TOPBAR_UPGRADE_POPUP_PERSONAL_SALE_LABEL_DYNAMIC"):c.translate(e?"UPGRADE_TO_YEARLY_FOR_SPAIN_ONLY":"TOPBAR_UPGRADE_FREE_US_TITLE"),{type:"upgrade","class":"left-check-panel-upgrade",title:f,comment:d?c.translate("TOPBAR_UPGRADE_SAVE_FIRST_TEXT"):null,description:a.map(["TOPBAR_UPGRADE_FREE_US_LINE_1","TOPBAR_UPGRADE_FREE_US_LINE_2","TOPBAR_UPGRADE_FREE_US_LINE_3","TOPBAR_UPGRADE_FREE_US_LINE_4"],c.translate)}}},bottom:{panel:"rEditor.panels.topBar.checkListPanel",propsGetter:function(a){var b=j(a);return{type:"upgrade","class":"bottom-check-panel-upgrade",footerButtons:b}}}}};return{getMenuPanelProps:r,getMenuPanelType:q}}),define("rEditor/rootComps/topBar/dropPanels/content/menuBarContent.rt",["react/addons","lodash","core"],function(a,b,c){"use strict";function d(){var d=this.getPanelProps(),e=this.getPanelClass();return a.createElement("div",{},a.createElement(c.lazyComponent,b.assign({},{moduleName:e},d)))}return function(){return a.createElement("div",{},this.props.selectedMenu?a.createElement("div",{key:"menuActions"},d.apply(this,[])):null)}}),define("rEditor/rootComps/topBar/dropPanels/content/menuBarContent",["lodash","react","rEditor/rootComps/topBar/menuBar/menuBarPanelsDefinitions","rEditor/rootComps/topBar/dropPanels/content/menuBarContent.rt"],function(a,b,c,d){"use strict";return b.createClass({displayName:"menuBarContent",propTypes:{content:b.PropTypes.string.isRequired,editorAPI:b.PropTypes.object.isRequired,selectedMenu:b.PropTypes.object,closeDropDownHandle:b.PropTypes.func},getPanelProps:function(){var b=null,d=this.props.selectedMenu.key;if(d){b=a.clone(this.props);var e=c.getMenuPanelProps(d,this.props.editorAPI,this.props.content);b=a.merge(b,e)}return b},getPanelClass:function(){var a=this.props.selectedMenu.key;return a?c.getMenuPanelType(a,this.props.content):null},render:d})}),define("rEditor/rootComps/topBar/dropPanels/content/menuBarRightContent.rt",["react/addons","lodash","core"],function(a,b,c){"use strict";return function(){return this.props.panel?a.createElement("div",{className:"promotion",key:"promotionPanel"},a.createElement(c.lazyComponent,b.assign({},{moduleName:this.props.panel.type},b.merge(this.props.panel.props,{editorAPI:this.props.editorAPI,action:this.props.action,bi:this.props.bi})))):null}}),define("rEditor/rootComps/topBar/dropPanels/content/menuBarRightContent",["react","rEditor/rootComps/topBar/dropPanels/content/menuBarRightContent.rt"],function(a,b){"use strict";return a.createClass({displayName:"menuBarRightContent",render:b})}),define("rEditor/rootComps/topBar/menuBar/menuBar.rt",["react/addons","lodash","uiAnimations","baseUI"],function(a,b,c,d){"use strict";function e(a,b,c){this.onMouseOverMenuItem(c)}function f(b,c,d){return a.createElement("li",{ref:"menuItem"+d,className:c["class"],key:c.key,onMouseOver:e.bind(this,b,c,d)},a.createElement("a",{},this.getMenuItemLabel(c.key)),c.counter?a.createElement("div",{key:c.key+"counter",className:"counter"},c.counter):null)}function g(){var c=this.getMenuItems();return a.createElement.apply(this,["ul",{className:b.keys(b.pick({"menubar-items":!0},b.identity)).join(" "),onMouseLeave:this.onMouseLeave},b.map(c,f.bind(this,c))])}return function(){return a.createElement("div",{ref:"menuBar",className:this.props.classes},g.apply(this,[]),a.createElement(c.topBarMenuPanelAnimation,{outAnimationDuration:this.state.mouseOverMenu?0:.2},null!==this.state.indexOfOpenMenu?a.createElement(d.bubble,b.assign({},{key:"menuBarDropDown"},this.getDropDownProps())):null))}}),define("rEditor/rootComps/topBar/menuBar/menuBar",["react","lodash","core","util","baseUI","rEditor/rootComps/topBar/menuBar/menuBarItemsDefinitions","rEditor/rootComps/topBar/dropPanels/content/menuBarContent","rEditor/rootComps/topBar/dropPanels/content/menuBarRightContent","rEditor/rootComps/topBar/dropPanels/topBarDropPanel","rEditor/rootComps/topBar/menuBar/menuBar.rt"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function m(a){var b=d.keyboardShortcuts.CONTEXTS.TOP_BAR,c=d.keyboardShortcuts.extendContext(b,{esc:function(){null!==a.state.indexOfOpenMenu&&a.closeDropDown()},left:function(){var c,b=a.state.indexOfOpenMenu;c=0===b?a.getNumberOfMenuItems()-1:a.state.indexOfOpenMenu-1,a.openDropDown(c)},right:function(){var b=a.state.indexOfOpenMenu,c=(b+1)%a.getNumberOfMenuItems();a.openDropDown(c)}});d.keyboardShortcuts.registerContext(d.keyboardShortcuts.CONTEXTS.MENU_BAR,c)}function n(c,d,e){var f;return f=d.isMobileEditor()?c.MOBILE||c:c.DESKTOP||c,a.createElement(h,b.assign({panel:f,editorAPI:d},e))}function o(a){a&&a.openHandlePID&&(window.clearTimeout(a.openHandlePID),a.openHandlePID=null)}var k=300,l=500;return a.createClass({displayName:"menuBar",mixins:[c.mixins.editorAPIMixin],propTypes:{menuItems:a.PropTypes.array.isRequired,viewTools:a.PropTypes.object.isRequired,tooltipData:a.PropTypes.object,onMenuOpened:a.PropTypes.func,onMenuClosed:a.PropTypes.func},getInitialState:function(){return this.openHandlePID=null,{indexOfOpenMenu:null,mouseOverMenu:!1}},componentDidMount:function(){m(this)},componentWillUnmount:function(){d.keyboardShortcuts.unregisterContext(d.keyboardShortcuts.CONTEXTS.MENU_BAR),this.isMenuBarKeyboardContextActive()&&d.keyboardShortcuts.setContext(this.lastKeyboardContext)},componentDidUpdate:function(a,b){var c=this.state.indexOfOpenMenu!==b.indexOfOpenMenu&&null===this.state.indexOfOpenMenu,e=this.state.indexOfOpenMenu!==b.indexOfOpenMenu&&null===b.indexOfOpenMenu;c?(d.keyboardShortcuts.getContext()===d.keyboardShortcuts.CONTEXTS.MENU_BAR&&d.keyboardShortcuts.setContext(this.lastKeyboardContext),this.props.onMenuClosed&&this.props.onMenuClosed()):e&&this.props.onMenuOpened&&this.props.onMenuOpened()},isMenuBarKeyboardContextActive:function(){return d.keyboardShortcuts.getContext()===d.keyboardShortcuts.CONTEXTS.MENU_BAR},getMenuItems:function(){return b.map(this.props.menuItems,function(a,b){return{key:a.key,"class":this.getMenuItemClasses(a.key,b),counter:this.getMenuItemCounter(a.key)}},this)},getMenuItemClasses:function(a,b){var c=[];return a=a&&a.toLowerCase()||"",c.push("upgrade"!==a?"menu-bar-title":"menu-bar-upgrade-title"),"help"===a&&c.push("top-bar-help-title"),b===this.state.indexOfOpenMenu&&c.push("menu-bar-selected-item"),c.join(" ")},getMenuItemLabel:function(a){return f[a].label},getMenuItemCounter:function(a){return b.isFunction(f[a].getCounter)&&f[a].getCounter()},getNumberOfMenuItems:function(){return this.props.menuItems.length},getDropDownProps:function(){var a=this.state.indexOfOpenMenu;return this.isMounted()?{key:"menuDropDown-"+a,value:this.getDropDownContent(a),width:"1000px",closeTriggers:this.getDropDownTooltipCloseTriggers(),className:"top-bar-drop-down",overridePositionAdjustments:{type:e.uiConstants.TOOLTIP.ALIGNMENT.LEFT,value:70},targetNode:this.refs["menuItem"+a].getDOMNode(),hideMethod:this.handleDropDownWantsToClose,mouseLeftTargetNode:!this.state.mouseOverMenu,timeoutForMouseOverBubble:l}:{}},handleDropDownWantsToClose:function(){this.isMounted()&&!this.state.mouseOverMenu&&this.setState({indexOfOpenMenu:null})},getDropDownTooltipCloseTriggers:function(){return[e.uiConstants.TOOLTIP.TRIGGERS.MOUSE_LEAVE]},getDropDownContent:function(b){var c=this.getDropDownBottomContent(b),d=this.getDropDownLeftContent(b,this.props.viewTools),e=this.getMenuRightContentOptions(b);return a.createElement(i,{closeHandle:this.closeDropDown,bottomContent:c,leftContent:d,rightContentOptions:e,dropPanelClass:"menubar-drop-panel"})},getDropDownBottomContent:function(b){var c=this.props.menuItems[b];return a.createElement(g,{content:"bottom",selectedMenu:c,closeDropDownHandle:this.closeDropDown,editorAPI:this.getEditorAPI()})},getDropDownLeftContent:function(b,c){var d=this.props.menuItems[b];return a.createElement(g,{content:"left",selectedMenu:d,action:f[d.key].action,viewTools:c,closeDropDownHandle:this.closeDropDown,editorAPI:this.getEditorAPI()})},getMenuRightContentOptions:function(a){var c=this.getEditorAPI(),d=this.props.menuItems[a],e={};return e.main=n(d.rightPanel,c),b.forEach(d.children,function(a){if(a&&f[a.key]&&a.rightPanel){var b=this.handleClickOnRightPanel.bind(this,a),d=f[a.key].bi,g={action:b,bi:d};e[a.key]=n(a.rightPanel,c,g)}},this),e},handleClickOnRightPanel:function(a){var c=f[a.key],d=c.action;if(d){var e=d.apply(null,b.rest(arguments))!==!1;!c.isCheckbox&&e&&this.closeDropDown()}},openDropDown:function(a){null===this.state.indexOfOpenMenu&&(this.lastKeyboardContext=d.keyboardShortcuts.getContext(),d.keyboardShortcuts.setContext(d.keyboardShortcuts.CONTEXTS.MENU_BAR)),this.setState({indexOfOpenMenu:a})},closeDropDown:function(){this.setState({indexOfOpenMenu:null})},onMouseOverMenuItem:function(a){var b=!this.state.mouseOverMenu,c=null!==this.state.indexOfOpenMenu,d=b&&!c,e=c&&this.state.indexOfOpenMenu!==a;if(b&&this.setState({mouseOverMenu:!0}),d){o(this);var f=this;this.openHandlePID=setTimeout(function(){f.isMounted()&&f.openDropDown(a)},k)}else e&&this.openDropDown(a)},onMouseLeave:function(){o(this),this.setState({mouseOverMenu:!1})},render:j})}),define("rEditor/rootComps/topBar/dropPanels/editorModesPanel.rt",["react/addons","lodash","baseUI"],function(a,b,c){"use strict";return function(){return a.createElement("div",{className:"editor-modes-panel"},a.createElement("div",{className:"editor-modes-panel-top-part"},a.createElement("div",{},a.createElement(c.radioList,{options:[{label:"TOPBAR_MobileDesktop_Desktopview",symbolName:"desktop",className:"editor-mode-option-desktop",symbolClass:"editor-mode-option-symbol",value:"desktop"},{label:"TOPBAR_MobileDesktop_MobileView",symbolName:"mobile",className:"editor-mode-option-mobile",symbolClass:"editor-mode-option-symbol",value:"mobile"}],value:this.props.desktopModeSelected?"desktop":"mobile",onChange:this.setEditorMode,highlightOnHover:!0}))),a.createElement("div",{className:"optimized-view-row"},a.createElement(c.toggle,{label:"TOPBAR_MobileDesktop_MobileOptimized",labelAfterSymbol:!0,value:this.props.isMobileOptimized,onChange:this.toggleOptimized})))}}),define("rEditor/rootComps/topBar/dropPanels/editorModesPanel",["react","lodash","core","util","rEditor/rootComps/topBar/dropPanels/editorModesPanel.rt"],function(a,b,c,d,e){"use strict";var f="EDITOR_MODES_SWITCH";return a.createClass({displayName:"editorModesPanel",propTypes:{editorAPI:a.PropTypes.object.isRequired,isMobileOptimized:a.PropTypes.bool.isRequired,desktopModeSelected:a.PropTypes.bool.isRequired,closeHandle:a.PropTypes.func},biData:{desktop:{editor_view_mode:"desktop"},mobile:{editor_view_mode:"mobile"}},getDefaultProps:function(){return{closeHandle:b.noop}},componentDidMount:function(){this.registerKeyboardShortcuts(),this.lastKeyboardContext=d.keyboardShortcuts.getContext(),d.keyboardShortcuts.setContext(f)},componentWillUnmount:function(){d.keyboardShortcuts.setContext(this.lastKeyboardContext)},setEditorMode:function(a){var b=this.props.editorAPI;"desktop"===a?(this.sendModeChangeBI("desktop"),b.setDesktopEditor()):(this.sendModeChangeBI("mobile"),b.setMobileEditor()),this.props.closeHandle&&this.props.closeHandle()},toggleOptimized:function(){var a=this.props.isMobileOptimized,b=!a;this.sendToggleBI(this.props.editorAPI.getPreviewMode(),b),this.props.editorAPI.setMobileOptimizedSite(b)},sendToggleBI:function(a,b){var d=c.bi.events.topbar.mobile_view_mode_toggle,e=a?"top bar preview":"top bar editor",f={origin:e,status:b?1:0};this.props.editorAPI.bi.event(d,f)},sendModeChangeBI:function(a){var b=this.props.editorAPI;if(b){var d=c.bi.events.topbar.top_bar_editor_view_mode_click;b.getPreviewMode()&&(d=c.bi.events.topbar.top_bar_preview_page_editor_view_mode_click),b.bi.event(d,{editor_view_mode:a}),b.bi.event(c.bi.events.topbar.editor_view_mode_switch,{origin:"site_menu",mode:a})}},registerKeyboardShortcuts:function(){var a=this,b={esc:function(){a.props.closeHandle()}};d.keyboardShortcuts.registerContext(f,b)},render:e})}),define("rEditor/rootComps/topBar/dropPanels/menuPanels/checkListPanel.rt",["react/addons","lodash","baseUI"],function(a,b,c){"use strict";function d(d,e,f){return a.createElement("li",{key:f},a.createElement("div",{className:b.keys(b.pick({check:!d,"check-purple":d},b.identity)).join(" ")},a.createElement(c.symbol,{name:"check"})),a.createElement("div",{className:"text"},e))}function e(a,b,c){this.onClick(b.action)}function f(d,f,g){return a.createElement(c.button,{className:b.keys(b.pick({"action-button":!d,"action-button-purple1":d&&g%2===0,"action-button-purple2":d&&g%2!==0},b.identity)).join(" "),label:f.buttonText,shouldTranslate:!1,key:"key-"+f.buttonText,onClick:e.bind(this,d,f,g)})}function g(){var c="upgrade"===this.props.type;return a.createElement.apply(this,["div",{className:this.props["class"]},this.props.title?a.createElement("div",{key:"title",className:"title"},this.props.title):null,1===b.size(this.props.description)?a.createElement("div",{key:"single",className:"description"},this.props.description):null,b.size(this.props.description)>1?a.createElement("div",{key:"multiple",className:"description"},a.createElement.apply(this,["ul",{},b.map(this.props.description,d.bind(this,c)),this.props.comment?a.createElement("li",{key:"comment",className:"comment"},this.props.comment):null])):null,b.map(this.props.footerButtons,f.bind(this,c))])}return function(){return g.apply(this,[])}}),define("rEditor/rootComps/topBar/dropPanels/menuPanels/checkListPanel",["react","rEditor/rootComps/topBar/dropPanels/menuPanels/checkListPanel.rt"],function(a,b){"use strict";return a.createClass({displayName:"checkListPanel",propTypes:{editorAPI:a.PropTypes.object.isRequired,closeDropDownHandle:a.PropTypes.func.isRequired},onClick:function(a){a&&a(this.props.editorAPI),this.props.closeDropDownHandle()},render:b})}),define("rEditor/rootComps/topBar/topBarWidgetsDefinitions",["jquery","lodash","util","core","rEditor/rootComps/topBar/config/topBarData.json","rEditor/rootComps/topBar/menuBar/config/topBarMenuData.json","rEditor/rootComps/topBar/buttons/topBarButton/topBarButton","rEditor/rootComps/topBar/buttons/pagesNavButton/pagesNavButton","rEditor/rootComps/topBar/buttons/topBarNotification/topBarNotification","rEditor/rootComps/topBar/menuBar/menuBar","rEditor/rootComps/topBar/dropPanels/editorModesPanel","baseUI","panels","savePublish","experiment","experiment!spanishUpgradeText","rEditor/rootComps/topBar/menuBar/menuBarPanelsDefinitions","rEditor/rootComps/topBar/dropPanels/menuPanels/checkListPanel"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){"use strict";function r(a,b){function f(){e.panelManager.openPanel("savePublish.panels.common.failPanel",{titleKey:"WixCode_PreviewSaveFail_Title",description:"SAVE_PUBLISH_ERROR_BODY_DESCRIPTION",stepsTitle:"SAVE_PUBLISH_ERROR_BODY_DESCRIPTION_BOLD",steps:["SAVE_PUBLISH_ERROR_OPTION_1","WixCode_PreviewSaveFail_Step2_Text","WixCode_DeveloperModeFail_Step3_Text"],helpMessage:"WixCode_PreviewSaveFail_Learn_More_Label",helpLinkMessage:"WixCode_PreviewSaveFail_Learn_More_Link",helpLink:"",errorCode:"1234"}),i()}function g(){i(),s(a,b)}function h(){a.areActionsLocked||a.lockActions()}function i(){a.unlockActions()}function j(){e.toggleEditorStateParam(c,d.constants.PROGRESS_STATUS.IDLE)}var c="previewingStatus",e=a.getEditorAPI();e.wixCode.isLoaded()?(h(),e.toggleEditorStateParam(c,d.constants.PROGRESS_STATUS.IN_PROGRESS),e.wixCode.saveAPI.save().then(g)["catch"](f).done(j)):g()}function s(a,b){a.areActionsLocked||(a.lockActions(),a.getEditorAPI().togglePreview(),setTimeout(a.unlockActions,b||1))}function t(a){return c.media.getMediaUrl("rEditor/topBar/"+a)}function u(a){return!a||a.generalInfo&&a.generalInfo.isFirstSave()}function v(b){var c=a(b.refs.topBarSideWrapperLeft.getDOMNode()),d=a(b.refs.topBarSideWrapperRight.getDOMNode());return{leftWidth:c.width(),rightWidth:d.width()}}function w(b,c){var d=a(b.refs.topBarSideWrapperCenter.getDOMNode());d.css({left:c.leftWidth,right:c.rightWidth,width:"auto"})}function x(b,c,d,e){e=e||0;var f=c===q.RIGHT?"topBarSideWrapperRight":"topBarSideWrapperLeft",g=b.refs[f].getDOMNode();return a(g.childNodes[d]).width()||e}function y(b,c){var d=b.refs.topBarBackToEditorButton;c=H.PREVIEW.measuredWidth+H.PUBLISH.measuredWidth,d&&c>0&&a(d.getDOMNode()).width(c)}function C(a){var b="save-button-tooltip";return{compClass:g,actions:null,compProps:function(c,e,f,g){var h=c.state.appearance>=c.APPEARANCE.SAVE_AND_MOBILE_CHANGE_ICONS,i=c.getEditorAPI(),j=g&&"PREVIEW"===g.toUpperCase(),k=j?d.bi.events.topbar.top_bar_Preview_Page_Save_click:A("save"),l=u(i),m=l?"-notSaved":"";return H.SAVE.actions=H.SAVE.actions||[n.save.bind(n,i,{origin:"top_bar"})],{label:h?null:"TOPBAR_Site_Save",iconSymbol:h?"save":null,classes:["top-bar-menu-item","top-bar-save",J(e),K(e,f)].join(" "),actions:H.SAVE.actions,isDisabled:n.isPublishInProgress()||n.isSaveInProgress(),progressStatus:c.props.savingStatus,tooltipData:B((a?b:b)+m,!0,"TOPBAR_SAVE_TOOLTIP_TITLE","TOPBAR_SAVE_TOOLTIP_BODY",l?null:"TOPBAR_SAVE_TOOLTIP_LINK",l?null:function(){i.account.openRevisions()}),bi:k}}}}function D(a){return{compClass:"div",compProps:function(b,c){var d=!a||a(b,c);return{className:["top-bar-separator","top-bar-menu-item",J(c),d?"":"hidden"].join(" ")}}}}function E(a){a.panelManager.closeAllPanels(),a.toolsControl.toggleHideTools(!0,!0),setTimeout(function(){a.zoomMode.enterZoomMode(),a.bi.event(d.bi.events.topbar.top_bar_zoom_mode_click,{editor_view_mode:a.getDeviceType()})},400)}function F(a){var b=!a.isMobileEditor(),c={origin:"top_bar",mode:a.getDeviceType()};a.bi.event(d.bi.events.topbar.editor_view_mode_switch,c),a.setEditorMode(b)}function G(){return o.isOpen("exp171")&&!o.isOpen("zoomModeSectionsRedesignOff")?{compClass:g,actions:null,bi:[A("zoomout"),{type:d.bi.events.preview.PREVIEW_CLICK,fields:{origin:"topbar"}}],compProps:function(a,b,c){var d=a.getEditorAPI();return H.ZOOMOUT.actions=H.ZOOMOUT.actions||[E.bind(null,d)],H.ZOOMOUT.classes=H.ZOOMOUT.classes||["top-bar-menu-item","top-bar-preview-icon",K(b,c),J(b)].join(" "),{iconSymbol:"zoomOut",actions:H.ZOOMOUT.actions,classes:H.ZOOMOUT.classes,tooltipData:B("topBarZoomOutTooltipID",!1,"TOPBAR_ZoomOut_Tooltip_Title","TOPBAR_ZoomOut_Tooltip_Body"),bi:H.ZOOMOUT.bi,ref:"topBarZoomOutButton"}}}:null}function I(a,c,e){var f={type:c,origin:"topbar"};b.isEmpty(e)?e=[f]:b.forEach(e,function(a){b.assign(a,f)}),a.bi.reportBI(d.bi.events.editor.undo_redo_component_change,e)}function J(a){var b="top-bar-menu-item-";return a&&a===q.RIGHT?b+"right":b+"left"}function K(a,b){var c=[];return a===q.LEFT&&0===b?c.push("top-bar-item-right-margin"):a===q.RIGHT&&0===b?c.push("top-bar-item-left-margin"):c.push("top-bar-item-margin"),c}var q={LEFT:"left",RIGHT:"right"},z=function(){var a=null;return function(b){return null===a&&(a={onMenuOpened:b.onMenuOpened,onMenuClosed:b.onMenuClosed}),a}}(),A=function(){var a={};return function(b){return a[b]||(a[b]={type:d.bi.events.topbar.top_bar_click,fields:{category:b}}),a[b]}}(),B=function(){var a={};return function(b,c,d,e,f,g){var h=a[b];return h||(h={presenter:l.popoverTemplates.titleBodyAndLinkTooltip,id:b,interactive:c,props:{title:d,text:e,link:f,linkAction:g}},a[b]=h),h}}(),H={WIX_LOGO:{compClass:g,compProps:function(a,b){return{iconSymbol:"wixLogo",classes:["top-bar-wix-logo",J(b)].join(" "),bi:A("wix_logo")}}},PAGES_LIST:{compClass:h,compProps:function(a,c,d){var e=a.state.appearance>=a.APPEARANCE.TRIM_PAGES_NAV_BUTTON,f=z(a);return b.assign({},f,{label:"pages",isSmallVersion:e,classes:["top-bar-menu-item",K(c,d),J(c)].join(" "),tooltipData:B("pagesTooltipID",!1,null,"TOPBAR_PAGES_TOOLTIP_TITLE"),bi:A("pages")})}},REDO_SEPARATOR:D(function(a){return a.state.appearance<a.APPEARANCE.HIDE_REDO}),SEPARATOR:D(),ZOOMOUT:G(),UNDO:{compClass:g,actions:null,biFunc:null,classes:null,compProps:function(a,b,c){var d=a.getEditorAPI(),e=H.UNDO;return e.actions=e.actions||[d.history.undo],e.biFunc=e.biFunc||I.bind(null,d,"undo"),e.classes=e.classes||["top-bar-undo",K(b,c),J(b)].join(" "),{iconSymbol:"undo2",classes:H.UNDO.classes,actions:H.UNDO.actions,tooltipData:B("topBarUndoTooltipID",!1,null,"TOPBAR_UNDO_TOOLTIP_TITLE"),biFunc:H.UNDO.biFunc}}},REDO:{compClass:g,actions:null,biFunc:null,compProps:function(a,c,d){var e=a.getEditorAPI();H.REDO.actions=H.REDO.actions||[e.history.redo],H.REDO.biFunc=H.REDO.biFunc||I.bind(null,e,"redo");var f=a.state.appearance>=a.APPEARANCE.HIDE_REDO;return{iconSymbol:"redo2",classes:b.compact(["top-bar-redo","top-bar-responsive-1024",K(c,d),J(c)],f?"hidden":"").join(" "),actions:H.REDO.actions,tooltipData:B("topBarRedoTooltipID",!1,null,"TOPBAR_REDO_TOOLTIP_TITLE"),biFunc:H.REDO.biFunc}}},PREVIEW:{compClass:g,actions:null,measuredWidth:0,bi:[A("preview"),{type:d.bi.events.preview.PREVIEW_CLICK,fields:{origin:"topbar"}}],compProps:function(a,b,c){var d=a.state.appearance>=a.APPEARANCE.PREVIEW_CHANGE_TO_ICON;return o.isOpen("developerModeToggle")?H.PREVIEW.actions=H.PREVIEW.actions||[r.bind(null,a,500)]:H.PREVIEW.actions=H.PREVIEW.actions||[s.bind(null,a,500)],H.PREVIEW.classes=H.PREVIEW.classes||["top-bar-menu-item","top-bar-preview-icon",K(b,c),J(b)].join(" "),{label:d?null:"TOPBAR_PREVIEW_TOOLTIP_TITLE",iconSymbol:d?"preview":null,actions:H.PREVIEW.actions,classes:H.PREVIEW.classes,progressStatus:a.props.previewingStatus,tooltipData:B("topBarPreviewTooltipID",!1,"TOPBAR_PREVIEW_TOOLTIP_TITLE","TOPBAR_PREVIEW_TOOLTIP_BODY"),bi:H.PREVIEW.bi,ref:"topBarPreviewButton",measurePhase:function(d){H.PREVIEW.measuredWidth=x(a,b,c,d)}}}},EDITOR_MODE_SWITCH:{compClass:g,getDropPanelProps:function(){var a={};return function(b,c,d,e){var f=(b?"mobile-":"desktop-")+(c?"optimized-":"non-optimized-")+d,g=a[f];return g||(g={overridePositionAdjustments:{type:l.uiConstants.TOOLTIP.ALIGNMENT.RIGHT,value:70},desktopModeSelected:!b,isMobileOptimized:c,editorAPI:e,dropPanelPromotion:{type:"rEditor.panels.topBar.promotionPanel",classes:"promotion editor-mode-switch-promotion",props:{menuKey:"editor-mode-switch",key:"editor-mode-switch",title:"TOPBAR_MOBILE_PROMOTION_TITLE",message:"TOPBAR_MOBILE_PROMOTION_BODY",image:t(d>=2?"mobileDesktopIllustration@x2.png":"mobileDesktopIllustration.png"),classes:{graphics:"editor-mode-switch-graphics",title:"editor-mode-switch-title",message:"editor-mode-switch-message"}}},dropPanelClass:"editor-modes-panel-container"},a[f]=g),g}}(),compProps:function(a,d,e,f){var g=c.browserUtil.getDevicePixelRatio(),h=a.props.isMobileEditor?"desktop":"mobile",i=a.state.appearance>=a.APPEARANCE.SAVE_AND_MOBILE_CHANGE_ICONS,j=z(a),l=o.isOpen("oneClickEditorModeToggle"),m=a.getEditorAPI();return b.assign({},j,{iconSymbol:h,classes:[i?"mini-editor-mode-switch":"editor-mode-switch",K(d,e),J(d)].join(" "),actions:l?[F.bind(null,m)]:null,dropPanelContent:l?null:k,dropPanelProps:H.EDITOR_MODE_SWITCH.getDropPanelProps(a.props.isMobileEditor,a.props.isMobileOptimized,g,m),tooltipData:B("editorModeSwitchTooltipId-"+f,!1,"TOPBAR_MOBILE_TOOLTIP_TITLE","TOPBAR_MOBILE_TOOLTIP_BODY"),bi:A("editor_view_mode")})}},PUBLISH:{compClass:g,label:"TOPBAR_Site_Publish",measuredWidth:0,actions:null,bi:[A("publish"),{type:d.bi.events.publish.PUBLISH_CLICK,fields:{origin:"topbar"}}],classes:null,compProps:function(a,b,c){var d=a.getEditorAPI(),e=d.generalInfo&&d.generalInfo.isSitePublished()||!1,f="publish-button-tooltip-id-"+(e?"published":"notPublished");return H.PUBLISH.actions=H.PUBLISH.actions||[function(){a.areActionsLocked||n.saveAndPublish(d,"top_bar_publish")}],H.PUBLISH.classes=H.PUBLISH.classes||[J(b),"top-bar-item-margin","top-bar-textual-button"].join(" "),{label:H.PUBLISH.label,right:!1,classes:H.PUBLISH.classes,actions:H.PUBLISH.actions,isDisabled:n.isPublishInProgress()||n.isSaveInProgress(),progressStatus:a.props.publishingStatus,tooltipData:B(f,!0,e?"TOPBAR_POSTPUBLISH_TOOLTIP_TITLE":"TOPBAR_PREPUBLISH_TOOLTIP_TITLE",e?"TOPBAR_POSTPUBLISH_TOOLTIP_BODY":"TOPBAR_PREPUBLISH_TOOLTIP_BODY",e?"SAVE_PUBLISH_BUTTON_VIEW":null,e?function(){var a=d.site.getSitePublicUrl();window.open(a)}:null),bi:H.PUBLISH.bi,ref:"topBarPublishButton",measurePhase:function(d){H.PUBLISH.measuredWidth=x(a,b,c,d)}}}},SAVE:C(!1),PREVIEW_SAVE:C(!0),WIXSTORES_MIGRATION_UPGRADE_SITE:{compClass:g,compProps:function(a,b,c){var e=a.getEditorAPI();return e.wixStores.isSiteInWixStoreTestDrive()?{label:"TOPBAR_Site_Migration_Upgrade",classes:["top-bar-menu-item","top-bar-wixstores-migration-upgrade-button",J(b),K(b,c)].join(" "),actions:[function(){m.panelManager.openPanel("wixStore.migration.wixStoreSwitchPopup",{},!0),e.bi.event(d.bi.events.wixstores.WIXSTORES_MIGRATION_UPGRADE_CLICKED,{origin:"top panel"})}]}:null}},MENU:{compClass:j,compProps:function(a){var d=z(a),e=a.getMenuBarItems(f),g=b.assign({},d,{menuItems:e,viewTools:a.props.viewTools,classes:"top-bar-menu-item-left menu-bar",onMenuOpened:a.onMenuOpened,onMenuClosed:a.onMenuClosed,tooltipData:B("topBarMenuTooltipId",!1,null,"TOPBAR_MENU_TOOLTIP_TITLE"),bi:A("menu")});if(p){var h=b.find(g.menuItems,{key:"SITE_BAR"}),i=b.find(h.children,{key:"UPGRADE_ITEM"
}).rightPanel;i.props.title=c.translate("UPGRADE_FOR_SPAIN_ONLY"),i.props.message=c.translate("TOPBAR_SITE_UPGRADE_PROMOTION_TEXT"),i.props.shouldTranslate=!1}return g}},BACK_TO_EDITOR:{compClass:g,actions:null,bi:{type:d.bi.events.topbar.top_bar_Preview_Page_Back_to_Editor_click,fields:{origin:"thumb"}},compProps:function(a,b){return H.BACK_TO_EDITOR.actions=H.BACK_TO_EDITOR.actions||[s.bind(null,a,500)],{label:"TOPBAR_BACK_TO_EDITOR",right:!0,classes:[J(b),"top-bar-item-back-to-editor"].join(" "),actions:H.BACK_TO_EDITOR.actions,bi:H.BACK_TO_EDITOR.bi,ref:"topBarBackToEditorButton",patchPhase:y.bind(null,a)}}},MOBILE_NON_OPTIMIZED_NOTIFICATION:{compClass:i,action:null,compProps:function(a,b){var d=H.MOBILE_NON_OPTIMIZED_NOTIFICATION;return d.action=d.action||function(){var b=a.getEditorAPI();b.togglePreview(),b.openMobileElementsPanel({mobileElementId:"mobileView"})},{classes:[K(b),J(b)].join(" "),isShown:a.props.isMobileEditor&&!a.props.isMobileOptimized,message:c.translate("mobile_preview_notification_text1")+" <a>"+c.translate("mobile_preview_notification_link")+"</a> "+c.translate("mobile_preview_notification_text2"),action:d.action}}},PREVIEW_NOTIFICATION:{compClass:i,compProps:function(a,b,d,e){var f=a.props.isMobileEditor&&!a.props.isMobileOptimized,g="PREVIEW"===e.toUpperCase();return{classes:[K(b),J(b)].join(" "),isShown:g&&!f,message:c.translate("Topbar_PREVIEW_TITLE"),measurePhase:v.bind(null,a),patchPhase:w.bind(null,a)}}}};return{ORIENTATION:q,TOP_BARS:e,widgetMapping:H}}),define("rEditor/rootComps/topBar/util/campaignUtil",["lodash","core","util"],function(a,b,c){"use strict";function d(b){return a.chain(b).find({key:"SITE_BAR"}).get("children").find({key:"UPGRADE_ITEM"}).value()}function e(b){return a.find(b,{key:"UPGRADE"})}function f(b){var d=b.campaigns.personalSale.getAssetPath(),e=b.campaigns.personalSale.getDiscountValue(),f=[d,"menubarSitePanel_"+e+".svg"].join("/"),g=a.template(c.translate("TOPBAR_UPGRADE_POPUP_PERSONAL_SALE_LABEL_DYNAMIC"));return{symbol:"",image:c.media.getAssetUrl(f),message:g({discount:e}),title:c.translate("TOPBAR_SITE_UPGRADE_PROMOTION_TITLE"),shouldTranslate:!1}}function g(a){var b=a.campaigns.personalSale.getAssetPath(),d=a.campaigns.personalSale.getDiscountValue(),e=[b,"menubarUpgradePanel_"+d+".svg"].join("/");return{symbol:"",image:c.media.getAssetUrl(e)}}function h(b,c){var h=d(c),i=e(c);a.assign(h.rightPanel.props,f(b)),a.assign(i.rightPanel.props,g(b))}return{updateMenuBarItemsAccordingToPersonalSaleCampaign:h}}),define("rEditor/rootComps/topBar/zoomModeBar.rt",["react/addons","lodash","baseUI","symbols","uiAnimations","util","rEditor/rootComps/topBar/buttons/topBarButton/topBarButton"],function(a,b,c,d,e,f,g){"use strict";function h(){this.exitZoomMode()}return function(){return a.createElement(e.contentSlideCSS,{distance:"60px"},this.inZoomMode()?a.createElement("div",{className:"zoom-bar-wrapper",key:"zoomModeBarWrapper",ref:"zoomModeBarWrapper",style:{width:"calc("+(100*this.getSiteScale()+"% - "+this.getVerticalScrollWidth())+")",left:"calc(50% - "+this.getVerticalScrollWidth()+")"}},a.createElement("div",{className:b.keys(b.pick({"zoom-mode-bar":!0},b.identity)).join(" "),key:"zoom-mode-bar"},a.createElement("div",{className:"left-zoom-bar",onClick:h.bind(this)},a.createElement("span",{className:"zoom-bar-text"},f.translate("TOPBAR_Exit_ZoomOut")),a.createElement(g,{iconSymbol:"zoomClose",classes:"zoom-bar-symbol",actions:[this.exitZoomMode]})),a.createElement("div",{className:"right-zoom-bar"},a.createElement(g,{iconSymbol:"undo2",classes:"zoom-bar-btn-seperator top-bar-item-margin",actions:[this.callUndo],tooltipData:this.getTooltipData("topBarUndoTooltipID","TOPBAR_UNDO_TOOLTIP_TITLE")}),a.createElement(g,{iconSymbol:"redo2",classes:"zoom-bar-btn-seperator top-bar-item-margin",actions:[this.callRedo],tooltipData:this.getTooltipData("topBarRedoTooltipID","TOPBAR_REDO_TOOLTIP_TITLE")}),a.createElement(g,{iconSymbol:"zoomBarHelp",classes:"zoom-bar-btn",actions:[this.openHelp],tooltipData:this.getTooltipData("zoomBarHelpTooltipID","gfpp_tooltip_help")})))):null)}}),define("rEditor/rootComps/topBar/zoomModeBar",["react","lodash","core","util","baseUI","panels","rEditor/rootComps/topBar/zoomModeBar.rt"],function(a,b,c,d,e,f,g){"use strict";return a.createClass({displayName:"zoomModeBar",mixins:[c.mixins.editorAPIMixin],exitZoomMode:function(){var a=this.getEditorAPI();this.getEditorAPI().zoomMode.exitZoomMode(),a.bi.event(c.bi.events.topbar.zoombar.zoom_mode_bar_exit_zoom_mode,{editor_view_mode:a.getDeviceType()}),setTimeout(function(){a.toolsControl.toggleHideTools(!1,!0)},300)},inZoomMode:function(){return this.getEditorAPI().zoomMode.isInZoomMode()},callUndo:function(){this.getEditorAPI().history.undo()},callRedo:function(){this.getEditorAPI().history.redo()},getSiteScale:function(){return this.getEditorAPI().getSiteScale()},openHelp:function(){var a="DESKTOP"===this.getEditorAPI().viewMode.get()?"00d369ed-aedf-4fbd-b11c-3fcc51459cef":"65ff699a-dc0c-4c42-b2af-8df5e022d350";f.panelManager.openHelpCenter(a)},getTooltipData:function(a,b){return{presenter:e.popoverTemplates.titleBodyAndLinkTooltip,id:a,props:{text:b}}},getVerticalScrollWidth:function(){return 0===d.uiUtils.getScrollbarWidth()?"0px":"6px"},render:g})}),define("rEditor/rootComps/topBar/topBar.rt",["react/addons","lodash","experiment!topBarB","experiment!hideAllTools","baseUI","symbols","rEditor/rootComps/topBar/zoomModeBar","experiment!zoomModeSectionsRedesignOff","experiment!exp171"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(){this.toggleHideTools()}return function(){return a.createElement("div",{className:this.topBarClassName+" "+(c?"top-bar-b":""),onClick:this.handleTopBarClick,onContextMenu:this.props.onContextMenu},a.createElement("div",{className:b.keys(b.pick({"top-bar-editor":!0,"top-bar-preview-show":this.props.previewMode,"is-hidden":this.props.isHidden,"is-hidden-completely":i&&!h&&this.hideForZoomMode()},b.identity)).join(" "),style:{zIndex:this.state.zIndex}},this.props.previewMode?a.createElement("div",{"data-target":this.topBarClassName,key:"top-bar-preview",className:"top-bar-container top-bar-preview"},this.getTopBarByMode("PREVIEW")):null,this.props.previewMode?null:a.createElement("div",{"data-target":this.topBarClassName,key:"top-bar-edit",className:"top-bar-container top-bar-edit"},this.getTopBarByMode("EDIT")),this.props.isEnabled?null:a.createElement("div",{className:"top-bar-overlay",key:"overlay"})),i&&!h?a.createElement(g,{key:"zoomModeBar"}):null,!d||this.props.previewMode||this.props.isMobileEditor?null:a.createElement(e.tooltip,{value:this.getHideToolsTooltip(),key:"hideAllTools"},a.createElement("div",{onClick:j.bind(this),style:{zIndex:this.state.zIndex},className:b.keys(b.pick({"hide-tools-button":!0,"tools-hidden":this.props.isHidden,"stand-out":this.props.shouldHideToolsBtnBlink},b.identity)).join(" ")},a.createElement(f.symbol,{className:"hide-tools-symbol",name:"hideToolsArrow"}))))}}),define("rEditor/rootComps/topBar/topBar",["jquery","react","lodash","core","util","rEditor/rootComps/topBar/topBarWidgetsDefinitions","rEditor/rootComps/topBar/util/campaignUtil","experiment","rEditor/rootComps/topBar/topBar.rt"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(a){return a>0?1:0>a?-1:0}function l(a){return c.filter(a.children,function(a){return(!a.experiment||h.isOpen(a.experiment))&&(!a.experimentOff||!h.isOpen(a.experimentOff))})}var k=null;return b.createClass({displayName:"topBar",topBarClassName:"top-bar",mixins:[d.mixins.editorAPIMixin,e.outerClickMixin,e.singlePassDOMReadWriteMixin],propTypes:{height:b.PropTypes.number.isRequired,isEnabled:b.PropTypes.bool,isMobileEditor:b.PropTypes.bool.isRequired,isMobileOptimized:b.PropTypes.bool.isRequired,previewMode:b.PropTypes.bool.isRequired,viewTools:b.PropTypes.object.isRequired,previewingStatus:b.PropTypes.string.isRequired,savingStatus:b.PropTypes.string.isRequired,publishingStatus:b.PropTypes.string.isRequired,onTopBarClicked:b.PropTypes.func,isHidden:b.PropTypes.bool},TOP_BAR_REFS:{LEFT_SIDE:"topBarSideWrapperLeft",RIGHT_SIDE:"topBarSideWrapperRight",CENTER:"topBarSideWrapperCenter"},MIN_GAP_BETWEEN_LEFT_AND_RIGHT_CONTAINERS:30,APPEARANCE:{FULL:0,SAVE_AND_MOBILE_CHANGE_ICONS:1,PREVIEW_CHANGE_TO_ICON:2,HIDE_REDO:3,TRIM_PAGES_NAV_BUTTON:4,HIDE_UPGRADE_IN_MENU:5},MINIMAL_APPEARANCE_INDEX:5,areActionsLocked:!1,getInitialState:function(){return{appearance:this.APPEARANCE.FULL,zIndex:"auto"}},shouldComponentUpdate:function(a){return!a.performingMouseMoveAction},lockActions:function(){this.areActionsLocked=!0},unlockActions:function(){this.areActionsLocked=!1},measurePhase:function(){var b=this.didWindowSizeChange();return k=a(window).width(),b},patchPhase:function(a){0!==a&&this.updateTopBarWidth(a)},componentDidUpdate:function(a,b){var c=j(b.appearance-this.state.appearance);0!==c&&this.updateTopBarWidth(c)},toggleHideTools:function(){var a=this.getEditorAPI(),b=a.toolsControl.toggleHideTools(),c=b?d.bi.events.editor.hide_tools.hide_controls:d.bi.events.editor.hide_tools.show_controls;a.bi.event(c,{origin:"handle"})},getHideToolsTooltip:function(){return this.props.isHidden?"Toolbars_show_hover_label":"Toolbars_hide_hover_label"},updateTopBarWidth:function(a){var b=this.state.appearance;a>0&&(b=this.APPEARANCE.FULL);var c=this.getNonOverlappingAppearanceIndex(b);c!==this.state.appearance&&this.setState({appearance:c})},didWindowSizeChange:function(){var b=a(window).width();return j(b-k)},getNonOverlappingAppearanceIndex:function(a){if(!this.props.previewMode){var b=this.getGapBetweenLeftAndRightContainers(),c=b<this.MIN_GAP_BETWEEN_LEFT_AND_RIGHT_CONTAINERS;c&&(a=Math.min(a+1,this.MINIMAL_APPEARANCE_INDEX))}return a},getGapBetweenLeftAndRightContainers:function(){var b=a(this.refs[this.TOP_BAR_REFS.LEFT_SIDE].getDOMNode()),c=a(this.refs[this.TOP_BAR_REFS.RIGHT_SIDE].getDOMNode()),d=c.offset().left,e=b.offset().left+b.width();return d-e},onOuterClick:function(){if(e.keyboardShortcuts.getContext()===e.keyboardShortcuts.CONTEXTS.TOP_BAR){var a=e.keyboardShortcuts.CONTEXTS;e.keyboardShortcuts.setContext(this.props.previewMode?a.PREVIEW:a.EDITOR)}},handleTopBarClick:function(a){this.getEditorAPI().imageCrop.toggleCropMode(!1),this.isClickOnTopBarEmptySpace(a)&&this.setTopBarKeyboardContext(),this.props.onTopBarClicked&&this.props.onTopBarClicked()},isClickOnTopBarEmptySpace:function(a){var b=a.target.dataset;return b&&b.target===this.topBarClassName},setTopBarKeyboardContext:function(){e.keyboardShortcuts.setContext(e.keyboardShortcuts.CONTEXTS.TOP_BAR)},getTopBarByMode:function(a){var b=f.TOP_BARS[a],c=this.sortTopBarItemsByOrientation(b),d=this.createTopBarItems(c.left,this.createLeftTopBarItem,a,"left"),e=this.createTopBarItems(c.center,this.createLeftTopBarItem,a,"center"),g=this.createTopBarItems(c.right.reverse(),this.createRightTopBarItem,a,"right");return[].concat(e,d,g)},sortTopBarItemsByOrientation:function(a){var b={left:[],right:[],center:[]};return c.forEach(a,function(a){var c=this.getWidgetDefinitionByKey(a);c&&(a.orientation===f.ORIENTATION.LEFT?b.left.push(c):a.orientation===f.ORIENTATION.RIGHT?b.right.push(c):b.center.push(c))},this),b},getWidgetDefinitionByKey:function(a){return f.widgetMapping[a.comp]},createTopBarItems:function(a,b,d,e){var f=c.map(a,function(a,c){return b(a,c,d)});return this.createElementsWrapper(f,d,e)},createElementsWrapper:function(a,c,d){var e="topbar-side-"+c+"-"+d,f={displayName:"topBarSideWrapper",className:"top-bar-side-wrapper",key:e};return"right"===d?(f.style={right:0},f.ref=this.TOP_BAR_REFS.RIGHT_SIDE):"left"===d?(f.style={left:0},f.ref=this.TOP_BAR_REFS.LEFT_SIDE):"center"===d&&(f.style={width:"100%",textAlign:"center"},f.ref=this.TOP_BAR_REFS.CENTER),b.createElement("div",f,a)},createLeftTopBarItem:function(a,b,c){return this.createDynamicMenuItem(a,f.ORIENTATION.LEFT,b,c)},createRightTopBarItem:function(a,b,c){return this.createDynamicMenuItem(a,f.ORIENTATION.RIGHT,b,c)},createDynamicMenuItem:function(a,d,e,g){if(a&&a.compClass){d=d||f.ORIENTATION.LEFT;var h=a.compProps(this,d,e,g);if(h){var i=c.assign(h,{key:this.createTopBarWidgetKey(d,g,e)});return b.createElement(a.compClass,i)}}return null},createTopBarWidgetKey:function(a,b,c){return["topbar-w",a,b,c].join("-")},getMenuBarItems:function(a){var b=c.cloneDeep(a),d=this.popUpgradePackagesEntry(b),e=this.getEditorAPI();if(d&&this.isUpgradeShowing()){var f=d.upgradePanels.DEFAULT;f&&b.push(f)}return e.campaigns.personalSale.isActiveCampaign()&&this.isUpgradeShowing()&&g.updateMenuBarItemsAccordingToPersonalSaleCampaign(e,b),c.forEach(b,function(a){a.children=l(a)}),b},isUpgradeShowing:function(){var a=this.isUserPermittedToUpgrade()&&!this.getEditorAPI().wixStores.isSiteInWixStoreTestDrive();return a?this.isUpgradeSupportedInAppearanceState():!1},isUserPermittedToUpgrade:function(){return this.getEditorAPI().account.isUserOwner()},isUpgradeSupportedInAppearanceState:function(){return this.state.appearance<this.APPEARANCE.HIDE_UPGRADE_IN_MENU},onMenuOpened:function(){this.setState({zIndex:1750})},onMenuClosed:function(){this.setState({zIndex:"auto"})},popUpgradePackagesEntry:function(a){return c.first(c.remove(a,function(a){return a&&"UPGRADE"===a.category}))},hideForZoomMode:function(){return this.getEditorAPI().editor.state.hideToolsAndMaintainStagePosition},render:i})}),define("rEditor/rootComps/leftBar/leftBarButton/leftBarButton.rt",["react/addons","lodash","symbols"],function(a,b,c){"use strict";return function(){return a.createElement("li",{className:this.getButtonClasses(),onClick:this.handleOnClick},this.shouldShowSelectedSvg()?a.createElement(c.symbol,b.assign({},{key:"selectedSvg"},this.getSelectedButtonSvgProps())):null,a.createElement(c.symbol,{name:this.props.symbolName,className:"icon"}),a.createElement("span",{className:"mask"}),a.createElement("span",{className:"text"},this.props.label),this.props.notificationCount>0?a.createElement("span",{key:"notificationCount",className:"notifications"},this.props.notificationCount):null)}}),define("rEditor/rootComps/leftBar/leftBarButton/leftBarButton",["lodash","react","core","rEditor/rootComps/leftBar/leftBarButton/leftBarButton.rt","symbols"],function(a,b,c,d){"use strict";var e="/left_bar_button_clicked";return b.createClass({displayName:"leftBarButton",mixins:[c.mixins.editorAPIMixin],propTypes:{className:b.PropTypes.string.isRequired,symbolName:b.PropTypes.string.isRequired,label:b.PropTypes.string.isRequired,isSelected:b.PropTypes.bool.isRequired,isMobileEditor:b.PropTypes.bool.isRequired,onClick:b.PropTypes.func.isRequired,isMenuCollapsed:b.PropTypes.bool,notificationCount:b.PropTypes.number.isRequired,isFirstPanel:b.PropTypes.bool,collapseOnClick:b.PropTypes.bool,isButtonOpen:b.PropTypes.bool},getInitialState:function(){return{wasButtonClicked:this.props.isMenuCollapsed&&this.props.isButtonOpen&&this.getEditorAPI().getUserPreferences().site.get(this.props.className+e)}},getButtonClasses:function(){var a=[];return a.push("left-bar-item"),a.push(this.props.className),this.props.isSelected&&a.push("selected"),this.props.isFirstPanel&&a.push("first-panel"),this.props.collapseOnClick&&!this.state.wasButtonClicked&&a.push("wait-for-click"),a.join(" ")},handleOnClick:function(){this.props.collapseOnClick&&(this.setState({wasButtonClicked:!0}),this.getEditorAPI().getUserPreferences().site.set(this.props.className+e,!0)),this.props.onClick&&this.props.onClick()},getSelectedButtonSvgProps:function(){var a,b;return this.props.isFirstPanel?(a="leftBarButtonEarTop",b="ear-top"):(a="leftBarButtonEarMiddle",b="ear-middle"),{name:a,className:"ear "+b}},shouldShowSelectedSvg:function(){return this.props.isMenuCollapsed&&this.props.isSelected},render:d})}),define("rEditor/rootComps/leftBar/leftBar.rt",["react/addons","lodash","rEditor/rootComps/leftBar/leftBarButton/leftBarButton","util"],function(a,b,c,d){"use strict";function e(a){this.checkOverlap(b.clone(a))}function f(){this.resetQuickTip()}function g(a,b,c){this.handleOnClick(a.panelName,a.panelProps)}function h(b,e){return a.createElement(c,{key:b.panelName,label:d.translate(b.label),isMenuCollapsed:this.isMenuCollapsed(),className:b.className,symbolName:b.symbolName,isMobileEditor:this.props.isMobileEditor,isSelected:this.state.activePanelName===b.panelName,onClick:g.bind(this,b,e),isFirstPanel:0===e,collapseOnClick:b.collapseOnClick,",":!0,isButtonOpen:b.isButtonOpen,notificationCount:this.getNotificationCount(b.panelName)})}return function(){return a.createElement("div",{className:b.keys(b.pick({"left-bar":!0,"is-hidden":this.props.isHidden,"half-opacity":this.props.halfOpacityTools,"menu-collapsed-wrapper":this.isMenuCollapsed()},b.identity)).join(" "),style:{left:this.getLeftOffset()},onContextMenu:this.props.onContextMenu,onMouseMove:e.bind(this),onMouseEnter:f.bind(this),ref:"checkOverlapTarget"},a.createElement.apply(this,["ul",{ref:"buttons",className:b.keys(b.pick({"left-bar-items":!0,"menu-collapsed":this.isMenuCollapsed(),"menu-opened":this.isMenuOpened()},b.identity)).join(" ")},b.map(this.getMenuItems(),h.bind(this))]))}}),define("rEditor/rootComps/leftBar/config/leftBarData",["util"],function(a){"use strict";return{desktop:[{panelName:"rEditor.panels.backgroundPanel",panelProps:{},label:"LEFTBAR_BACKGROUND_LABEL",className:"bg-panel",symbolName:"leftBarBackgroundPanel"},{panelName:"addPanelInfra.addPanel",panelProps:{},label:"LEFTBAR_ADD_LABEL",className:"add-panel",symbolName:"leftBarAddPanel"},{panelName:"tpa.compPanels.appMarketPanel",panelProps:{urlParams:{openMarketOrigin:"market_button"},openPanelBiEvent:a.bi.events.OPEN_MARKET_CLICK,openPanelBiParams:{referral_info:"market_button"}},label:"app_market_button_text",className:"app-market-panel",symbolName:"leftBarAppMarketPanel"},{panelName:"rEditor.panels.myMediaPanel",panelProps:{},label:"LEFTBAR_MY_UPLOADS_LABEL",className:"my-uploads-panel",symbolName:"leftBarMyUploadsPanel"}],mobile:[{panelName:"rEditor.panels.backgroundPanel",panelProps:{},label:"LEFTBAR_BACKGROUND_LABEL",className:"bg-panel",symbolName:"leftBarBackgroundPanel"},{panelName:"mobileEditor.mobileElementsPanel",panelProps:{},label:"mobile_elements_panel_title",className:"mobile-elements-panel",symbolName:"mobileView"},{panelName:"mobileEditor.hiddenItemsPanel",panelProps:{},label:"mobile_hidden_items_panel_title",className:"hidden-items-panel",symbolName:"hiddenComp"}]}}),define("rEditor/rootComps/mixins/findOverlappedComponentMixin",["lodash","jquery","react","util","core","baseUI","experiment!hideAllToolsQuickTip"],function(a,b,c,d,e,f,g){"use strict";var h=3e3,i=15e3,j=70;return{intersectionComp:null,hideQuickTipTimer:null,getComponentsLayoutByMouseEvent:function(b){var c=this.getEditorAPI(),d=c.components,e=c.selection.getComponentsUnderClick(b.pageX,b.pageY);return a.map(e,function(a){return d.layout.getRelativeToScreenConsideringScroll(a).bounding})},calcOverlapPercentage:function(a,b){var c=d.math.getSquaresIntersection(b,{x:a.offsetLeft,y:a.offsetTop-this.getEditorAPI().editorConfig.editingAreaLayout.top,width:a.offsetWidth,height:a.offsetHeight});return c?(this.intersectionComp=b,c.width*c.height/(b.height*b.width)*100):0},isOverlapping:function(a){var b=this.getComponentsLayoutByMouseEvent(a),c=0,d=this.refs.checkOverlapTarget;if(!d)return!1;var e=d.getDOMNode();for(var f in b)if(b.hasOwnProperty(f)&&(c=this.calcOverlapPercentage(e,b[f]),c>j))return!0;return!1},hideQuickTip:function(){clearTimeout(this.hideQuickTipTimer),this.getEditorAPI().toolsControl.toggleHalfOpacityTools(!1),this.getEditorAPI().hideFloatingBubble()},showQuickTip:function(a){var d=this.getEditorAPI(),g=b(window).width()/2,h=a.pageX<g?2:-2,i=c.createElement(f.popoverTemplates.quickTip,{text:"toolbars_hide_tooltip_text",linkActionText:"toolbars_hide_tooltip_link",linkAction:this.quickTipLinkAction,linkMouseEnter:this.quickTipLinkMouseEnter,linkMouseLeave:this.quickTipLinkMouseLeave,symbol:"idea-bulb",closeAction:this.quickTipCloseAction}),j={height:100,width:this.intersectionComp.width,top:a.pageY-d.ui.scroll.getScroll().scrollTop,left:this.intersectionComp.x+h},k={noArrow:!0,shake:!0,behindPopUps:!0,hideMethod:d.toolsControl.toggleHalfOpacityTools.bind(this,!1),alignment:f.uiConstants.TOOLTIP.ALIGNMENT.RIGHT},l=!0;d.showFloatingBubble(i,j,k,l),d.bi.event(e.bi.events.editor.hide_tools.show_controls_tooltip_appearance)},moveQuickTip:function(){var a=this.getEditorAPI(),d=b(window).width()/2,e=284,g=c.createElement(f.popoverTemplates.quickTip,{text:"toolbars_show_tooltip_text",symbol:"idea-bulb",closeAction:this.quickTipCloseAction}),h={height:a.editorConfig.editingAreaLayout.top+30,width:e,top:0,left:d-e/2},i={noArrow:!0,behindPopUps:!0,shouldHaveTransition:!0},j=!0;a.showFloatingBubble(g,h,i,j),a.toolsControl.toggleHideToolsBtnBlink(!0)},quickTipCloseAction:function(){var a=this.getEditorAPI();this.hideQuickTip(),a.bi.event(e.bi.events.editor.hide_tools.show_controls_tooltip_close);var b=a.userPreferences.session.get("hideToolsQuickTipShown")||0;a.userPreferences.session.set("hideToolsQuickTipShown",b+1)},quickTipLinkAction:function(){var a=this.getEditorAPI(),b=a.toolsControl;b.toggleHalfOpacityTools(!1),b.toggleHideTools(!0),a.bi.event(e.bi.events.editor.hide_tools.hide_controls,{origin:"tooltip"}),this.moveQuickTip(),a.userPreferences.site.set("hideToolsQuickTipShown",!0)},quickTipLinkMouseEnter:function(){this.getEditorAPI().toolsControl.toggleHalfOpacityTools(!0)},quickTipLinkMouseLeave:function(){this.getEditorAPI().toolsControl.toggleHalfOpacityTools(!1)},decideWhetherToHideQuickTip:function(){this.getEditorAPI().isMouseOverBubble()?(clearTimeout(this.hideQuickTipTimer),this.hideQuickTipTimer=setTimeout(this.decideWhetherToHideQuickTip,i)):this.hideQuickTip()},resetQuickTip:function(){this.setState({quickTipAlreadyShown:!1})},checkOverlap:function(a){var b=this.getEditorAPI(),c=b.userPreferences.session,d=b.userPreferences.site,e=d.get("hideToolsQuickTipShown")||c.get("hideToolsQuickTipShown")>4;g&&(e||this.state.quickTipAlreadyShown||!this.isOverlapping(a)||(this.showQuickTip(a),this.setState({quickTipAlreadyShown:!0}),this.hideQuickTipTimer=setTimeout(this.decideWhetherToHideQuickTip,i)))},componentDidMount:function(){var b=this.getEditorAPI(),c={leading:!1};b.registeredHideBubbleOnPreview||(b.registerToGoToPreview(this.hideQuickTip),b.registeredHideBubbleOnPreview=!0),this.checkOverlap=a.throttle(this.checkOverlap,h,c)}}}),define("rEditor/rootComps/leftBar/leftBar",["lodash","react","jquery","core","panels","baseUI","rEditor/rootComps/leftBar/leftBar.rt","rEditor/rootComps/leftBar/config/leftBarData","rEditor/rootComps/mixins/findOverlappedComponentMixin","experiment"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function m(b){return a.reject(b,{label:l})}var k={panelName:"rEditor.panels.myMediaPanel",panelProps:{},label:"LEFTBAR_MY_UPLOADS_LABEL",className:"my-uploads-panel",symbolName:"leftBarMyUploadsPanel"},l="LEFTBAR_BACKGROUND_LABEL";return b.createClass({displayName:"leftBar",mixins:[d.mixins.editorAPIMixin,i],propTypes:{leftBarState:b.PropTypes.object.isRequired,isMobileEditor:b.PropTypes.bool.isRequired,openPanels:b.PropTypes.array.isRequired,isEnabled:b.PropTypes.bool.isRequired,isHidden:b.PropTypes.bool,isBgExcluded:b.PropTypes.bool},getInitialState:function(){return{activePanelName:void 0}},componentDidMount:function(){this.props.isHidden&&c(this.getDOMNode()).css({left:this.getLeftOffset()})},shouldComponentUpdate:function(b,c){return!a.isEqual(this.props,b)||!a.isEqual(this.state,c)},getMenuItems:function(){var b=[],c=this.props.leftBarState.superApps,d=[];return j.isOpen("enableMyUploadsButton")&&d.push(k),b=this.props.isMobileEditor?h.mobile.concat(d,a.sortBy(c.mobile,"order")):h.desktop.concat(d,a.sortBy(c.desktop,"order")),j.isOpen("popups")&&this.props.isBgExcluded&&(b=m(b)),b.forEach(function(a,b){a.panelProps=a.panelProps||{},a.panelProps.panelIndex=b}),a.compact(b)},getNotificationCount:function(a){return this.props.leftBarState.notifications[a]||0},componentWillReceiveProps:function(b){var c=a.find(b.openPanels,{frameType:"leftPanelFrame"});c?(this.setState({activePanelName:c.name}),this.props.leftBarState.isCollapsed||this.getEditorAPI().leftBar.collapseMenu()):this.setState({activePanelName:void 0})},handleOnClick:function(a,b){var c=this.getEditorAPI();this.props.isEnabled&&a!==this.state.activePanelName&&(c.leftBar.collapseMenu(),e.panelManager.openPanel(a,b),b.openPanelBiEvent&&c.bi.event(b.openPanelBiEvent,b.openPanelBiParams)),c.hideFloatingBubble()},isMenuCollapsed:function(){return this.props.leftBarState.isCollapsed},isMenuOpened:function(){return!!this.state.activePanelName},getButtonsBoundingRect:function(){return this.isMenuCollapsed()?f.uiConstants.LEFTBAR_BTN_WIDTH_COLLAPSED:this.refs.buttons.getDOMNode().getBoundingClientRect()},getLeftOffset:function(){var a="-1000px",b=8;if(this.props.isHidden){if(this.isMounted()){var c=this.getDOMNode().offsetWidth;return-(c+b)+"px"}return a}return""},render:g})}),define("rEditor/rootComps/mixins/hiddenableMixin",["jquery","lodash","util"],function(a,b,c){"use strict";var d=c.singlePassDOMReadWriteMixin;return{mixins:[d],componentWillMount:function(){this.lastCustomXPosition=null,this.shouldCompSlideRight=!0},componentWillReceiveProps:function(b){!b.toolsHidden&&this.props.toolsHidden&&this.state.isCustomPosition&&a(this.getDOMNode()).css({left:this.lastCustomXPosition})},measurePhase:function(){return this.shouldCompSlideRight=this.shouldSlideRight(),this.getComponentPosition(this.lastCustomXPosition)},patchPhase:function(b){a(this.getDOMNode()).css(b)},shouldSlideRight:function(){var b=a(this.getDOMNode()),c=b.offset().left,d=b.width()/2,e=a(window).width()/2;return c+d>e},updateLastCustomXPosition:function(a){this.lastCustomXPosition=a},getHiddenableClasses:function(){return{"hide-tools":this.props.toolsHidden,"show-tools":!this.props.toolsHidden,"slide-right":this.shouldCompSlideRight,"slide-left":!this.shouldCompSlideRight,"half-opacity":this.props.halfOpacityTools}}}}),define("rEditor/rootComps/mixins/keepInViewportMixin",["lodash","util","core"],function(a,b,c){"use strict";return{fitPositionToScreen:function(a,c,d){var e=this.getDragLimits(c),f=this.getDOMNode(),g=f.getBoundingClientRect(),h=g.top,i=a||g.left,j=e.x[1]-g.width-d+c,k=b.math.ensureWithinLimits(i,e.x[0],j),l=b.math.ensureWithinLimits(h,e.y[0],e.y[1]);return{left:k,top:l}},getDragLimits:function(a){var b=c.utils.stageUtils.getStageLayout(),d=c.constants.PANELS.PANEL_SIZE_TO_KEEP_IN_VIEW,e=this.getDOMNode(),f=e.clientHeight;return{x:[b.left+a,b.right-a],y:[b.top+a,b.bottom+f-d]}}}}),define("rEditor/rootComps/toolBar/toolSelector.rt",["react/addons","lodash","baseUI"],function(a,b,c){"use strict";return function(){return a.createElement("div",{className:b.keys(b.pick(this.getClasses(),b.identity)).join(" "),style:{position:"relative"}},this.state.isMenuDisplayed?a.createElement("div",{className:b.keys(b.pick(this.getDropDownClasses(),b.identity)).join(" "),key:"menuDropDown",onMouseLeave:this.hideMenu},this.props.children):null,a.createElement(c.tooltip,{disabled:!this.props.tooltip,value:this.props.tooltip,className:this.props.tooltipClass,delay:"600"},a.createElement("span",{className:b.keys(b.pick({button:!0,disabled:this.props.disabled},b.identity)).join(" "),onClick:this.displayMenu},a.createElement(c.symbol,{name:this.props.symbol}))),this.props.children&&this.props.children.length>1?a.createElement("div",{key:"smallIndicator",className:"small-indicator"}):null)}}),define("rEditor/rootComps/toolBar/toolSelector",["react","lodash","rEditor/rootComps/toolBar/toolSelector.rt"],function(a,b,c){"use strict";return a.createClass({displayName:"toolSelector",propTypes:{symbol:a.PropTypes.string.isRequired,columns:a.PropTypes.number,onShow:a.PropTypes.func,tooltipClass:a.PropTypes.string,disabled:a.PropTypes.bool},getInitialState:function(){return{isMenuDisplayed:!1}},getDefaultProps:function(){return{columns:3,disable:!1}},displayMenu:function(){this.props.disabled||(this.setState({isMenuDisplayed:!0}),b.isFunction(this.props.onShow)&&this.props.onShow())},hideMenu:function(){var a=this;setTimeout(function(){a.setState({isMenuDisplayed:!1})},300)},getDropDownClasses:function(){var a={"drop-down":!0,disabled:this.props.disabled};return a["grid-"+this.props.columns+"-col"]=!0,a},getClasses:function(){var a={"tool-selector":!0};if(this.props.className){var c=this.props.className.split(" ");b.forEach(c,function(b){a[b]=!0})}return this.props.disabled&&(a.disabled=!0),a},render:c})}),define("rEditor/rootComps/toolBar/toolbarTop.rt",["react/addons","lodash","baseUI","rEditor/rootComps/keyboard/config/keyboardShortcutsActionMap","core","rEditor/rootComps/toolBar/toolSelector"],function(a,b,c,d,e,f){"use strict";function g(a,b,c){this.moveForward()}function h(a,b,c){this.moveBackward()}function i(a,b,c){this.moveToFront()}function j(a,b,c){this.moveToBack()}function k(a,b,c){this.align("left")}function l(a,b,c){this.align("center")}function m(a,b,c){this.align("right")}function n(a,b,c){this.align("top")}function o(a,b,c){this.align("middle")}function p(a,b,c){this.align("bottom")}function q(a,b,c){this.distribute("horizontal")}function r(a,b,c){this.distribute("verticalAndHorizontal")}function s(a,b,c){this.distribute("vertical")}function t(a,b,c){this.matchSize("width")}function u(a,b,c){this.matchSize("heightAndWidth")}function v(a,b,c){this.matchSize("height")}function w(){var w=this.props.restrictions,x=e.bi,y=d.editor;return a.createElement("div",{},a.createElement("div",{className:"inner button-grid"},a.createElement(c.tooltip,{value:this.getShortcutTooltip("toolbar_tooltip_copy",y.COPY.label),styleType:c.uiConstants.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},a.createElement("span",{className:b.keys(b.pick({button:!0,disabled:!w.duplicatable},b.identity)).join(" "),onClick:this.handleCopy},a.createElement(c.symbol,{name:"toolbarCopy"}))),a.createElement(c.tooltip,{value:this.getShortcutTooltip("toolbar_tooltip_paste",y.PASTE.label),styleType:c.uiConstants.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},a.createElement("span",{className:b.keys(b.pick({button:!0,disabled:!this.props.pasteEnabled},b.identity)).join(" "),onClick:this.handlePaste},a.createElement(c.symbol,{name:"toolbarPaste"}))),a.createElement(c.tooltip,{value:this.getShortcutTooltip("toolbar_tooltip_duplicate",y.DUPLICATE.label),styleType:c.uiConstants.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},a.createElement("span",{className:b.keys(b.pick({button:!0,disabled:!w.duplicatable},b.identity)).join(" "),onClick:this.handleDuplicate},a.createElement(c.symbol,{name:"toolbarDuplicate"}))),a.createElement(c.tooltip,{value:this.getDeleteTooltipText(),styleType:c.uiConstants.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},a.createElement("span",{className:b.keys(b.pick({button:!0,disabled:!w.removable},b.identity)).join(" "),onClick:this.handleDelete},this.isMobileEditor()?null:a.createElement(c.symbol,{key:"deleteSymbol",name:"toolbarDelete"}),this.isMobileEditor()?a.createElement(c.symbol,{key:"hideSymbol",name:"gfpp_hide"}):null))),a.createElement("div",{className:"seperator"}),a.createElement("div",{className:"inner button-grid"},a.createElement(f,{disabled:!(w.canMoveForward||w.canMoveBackward),symbol:"toolbarMoveForward",columns:2,tooltip:this.getInfoTooltip("toolbar_tooltip_arrange","toolbar_tooltip_arrange_info"),tooltipClass:"control-tooltip-small"},a.createElement(c.tooltip,{value:this.getShortcutTooltip("toolbar_tooltip_arrange_move_forward",y.SEND_FORWARD.label),styleType:c.uiConstants.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},a.createElement("span",{className:b.keys(b.pick({button:!0,disabled:!w.canMoveForward},b.identity)).join(" "),onClick:g.bind(this,w,x,y)},a.createElement(c.symbol,{name:"toolbarMoveForward"}))),a.createElement(c.tooltip,{value:this.getShortcutTooltip("toolbar_tooltip_arrange_move_backward",y.SEND_BACKWARD.label),styleType:c.uiConstants.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},a.createElement("span",{className:b.keys(b.pick({button:!0,disabled:!w.canMoveBackward
},b.identity)).join(" "),onClick:h.bind(this,w,x,y)},a.createElement(c.symbol,{name:"toolbarMoveBackward"}))),a.createElement(c.tooltip,{alignment:"bottom",value:this.getShortcutTooltip("toolbar_tooltip_arrange_bring_to_front",y.SEND_TO_FRONT.label),styleType:c.uiConstants.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},a.createElement("span",{className:b.keys(b.pick({button:!0,disabled:!w.canMoveForward},b.identity)).join(" "),onClick:i.bind(this,w,x,y)},a.createElement(c.symbol,{name:"toolbarMoveToFront"}))),a.createElement(c.tooltip,{alignment:"bottom",value:this.getShortcutTooltip("toolbar_tooltip_arrange_send_to_back",y.SEND_TO_BACK.label),styleType:c.uiConstants.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},a.createElement("span",{className:b.keys(b.pick({button:!0,disabled:!w.canMoveBackward},b.identity)).join(" "),onClick:j.bind(this,w,x,y)},a.createElement(c.symbol,{name:"toolbarMoveToBack"})))),a.createElement(f,{disabled:!this.isAlignEnabled(),symbol:"toolbarAlignRight",columns:3,onShow:this.reportBI.bind(this,x.events.toolbar.TOOL_BAR_ALIGNMENT_CLICK,{}),tooltip:this.getInfoTooltip("toolbar_tooltip_align","toolbar_tooltip_align_info"),tooltipClass:"control-tooltip-small"},a.createElement(c.tooltip,{value:this.getShortcutTooltip("toolbar_tooltip_align_left"),styleType:c.uiConstants.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},a.createElement("span",{className:"button",onClick:k.bind(this,w,x,y)},a.createElement(c.symbol,{name:"toolbarAlignLeft"}))),a.createElement(c.tooltip,{value:this.getShortcutTooltip("toolbar_tooltip_align_center"),styleType:c.uiConstants.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},a.createElement("span",{className:"button",onClick:l.bind(this,w,x,y)},a.createElement(c.symbol,{name:"toolbarAlignCenter"}))),a.createElement(c.tooltip,{value:this.getShortcutTooltip("toolbar_tooltip_align_right"),styleType:c.uiConstants.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},a.createElement("span",{className:"button",onClick:m.bind(this,w,x,y)},a.createElement(c.symbol,{name:"toolbarAlignRight"}))),a.createElement(c.tooltip,{alignment:"bottom",value:this.getShortcutTooltip("toolbar_tooltip_align_top"),styleType:c.uiConstants.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},a.createElement("span",{className:"button",onClick:n.bind(this,w,x,y)},a.createElement(c.symbol,{name:"toolbarAlignTop"}))),a.createElement(c.tooltip,{alignment:"bottom",value:this.getShortcutTooltip("toolbar_tooltip_align_middle"),styleType:c.uiConstants.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},a.createElement("span",{className:"button",onClick:o.bind(this,w,x,y)},a.createElement(c.symbol,{name:"toolbarAlignMiddle"}))),a.createElement(c.tooltip,{alignment:"bottom",value:this.getShortcutTooltip("toolbar_tooltip_align_bottom"),styleType:c.uiConstants.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},a.createElement("span",{className:"button",onClick:p.bind(this,w,x,y)},a.createElement(c.symbol,{name:"toolbarAlignBottom"})))),a.createElement(f,{key:"distributeButtons",disabled:!this.isDistributeEnabled(),symbol:"distribute-vertical-btn-bld",columns:3,onShow:this.reportBI.bind(this,x.events.toolbar.TOOL_BAR_DISTRIBUTION_CLICK,{}),tooltip:this.getInfoTooltip("toolbar_tooltip_distribute","toolbar_tooltip_distribute_info"),tooltipClass:"control-tooltip-small"},a.createElement(c.tooltip,{value:this.getShortcutTooltip("toolbar_tooltip_distribute_horizontally"),styleType:c.uiConstants.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},a.createElement("span",{className:"button",onClick:q.bind(this,w,x,y)},a.createElement(c.symbol,{name:"distribute-horizontal-btn-bld"}))),a.createElement(c.tooltip,{value:this.getShortcutTooltip("toolbar_tooltip_distribute_both"),styleType:c.uiConstants.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},a.createElement("span",{className:"button",onClick:r.bind(this,w,x,y)},a.createElement(c.symbol,{name:"distribute-hw-btn-bld"}))),a.createElement(c.tooltip,{value:this.getShortcutTooltip("toolbar_tooltip_distribute_vertically"),styleType:c.uiConstants.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},a.createElement("span",{className:"button",onClick:s.bind(this,w,x,y)},a.createElement(c.symbol,{name:"distribute-vertical-btn-bld"})))),a.createElement(f,{key:"matchSizeButtons",disabled:!this.isMatchSizeEnabled(),symbol:"mech-to-height-btn-bld",columns:3,onShow:this.reportBI.bind(this,x.events.toolbar.TOOL_BAR_MATCH_SIZE_CLICK,{}),tooltip:this.getInfoTooltip("toolbar_tooltip_match_size","toolbar_tooltip_match_size_info"),tooltipClass:"control-tooltip-small"},a.createElement(c.tooltip,{value:this.getShortcutTooltip("toolbar_tooltip_match_size_width"),styleType:c.uiConstants.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},a.createElement("span",{className:"button",onClick:t.bind(this,w,x,y)},a.createElement(c.symbol,{name:"mech-to-width-btn-bld"}))),a.createElement(c.tooltip,{value:this.getShortcutTooltip("toolbar_tooltip_match_size_both"),styleType:c.uiConstants.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},a.createElement("span",{className:"button",onClick:u.bind(this,w,x,y)},a.createElement(c.symbol,{name:"mech-hw-btn-bld"}))),a.createElement(c.tooltip,{value:this.getShortcutTooltip("toolbar_tooltip_match_size_height"),styleType:c.uiConstants.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},a.createElement("span",{className:"button",onClick:v.bind(this,w,x,y)},a.createElement(c.symbol,{name:"mech-to-height-btn-bld"}))))))}return function(){return w.apply(this,[])}}),define("rEditor/rootComps/toolBar/toolbarTop",["react","lodash","baseUI","panels","core","util","rEditor/rootComps/toolBar/toolbarTop.rt","experiment"],function(a,b,c,d,e,f,g,h){"use strict";var i=e.bi;return a.createClass({displayName:"toolbarTop",mixins:[e.mixins.editorAPIMixin],propTypes:{restrictions:a.PropTypes.object,selectedComponent:a.PropTypes.arrayOf(a.PropTypes.object)},shouldComponentUpdate:function(a){return!b.isEqual(a,this.props)},getShortcutTooltip:function(b,d){return a.createElement(c.popoverTemplates.keyboardShortcutTooltip,{label:b,shortcut:d})},getDeleteTooltipText:function(){var a=this.isMobileEditor()?"toolbar_tooltip_hide":"toolbar_tooltip_delete";return this.props.restrictions.removable?this.getShortcutTooltip(a,f.translate("toolbar_tooltip_delete_shortcut")):this.getDisabledDeleteTooltipText(a,f.translate("toolbar_tooltip_delete_shortcut"))},getDisabledDeleteTooltipText:function(a,b){var c=this.getEditorAPI(),d=c.tooltipTextService.getComponentTooltipText(this.props.selectedComponent,"DELETE");return d?d:this.getShortcutTooltip(a,b)},getInfoTooltip:function(b,d){return a.createElement(c.popoverTemplates.titleBodyAndLinkTooltip,{title:b,text:d})},handleCopy:function(){if(this.props.restrictions.duplicatable){var a=this.getEditorAPI(),c=a.bi.getComponentsBIParams(this.props.selectedComponent);b.forEach(c,this.assignToolbarSpecificBI.bind(null,"origin")),a.bi.reportBI(i.events.rightClickMenu.COPY,c),this.getEditorAPI().components.copy(this.props.selectedComponent)}},handlePaste:function(){if(this.props.pasteEnabled){var a=this.getEditorAPI(),c=a.bi.getComponentsBIParams(this.props.selectedComponent);b.forEach(c,this.assignToolbarSpecificBI.bind(null,"origin")),d.panelManager.closeAllPanels(),a.components.paste(),a.history.add("component - paste"),a.bi.reportBI(i.events.rightClickMenu.PASTE,c)}},handleDuplicate:function(){if(this.props.restrictions.duplicatable){var a=this.getEditorAPI(),c=a.selection.getSelectedComponents(),d=a.bi.getComponentsBIParams(c);b.forEach(d,this.assignToolbarSpecificBI.bind(null,"origin")),a.components.duplicate(c),a.history.add("component - duplicate"),a.bi.reportBI(i.events.rightClickMenu.DUPLICATE,d)}},handleDelete:function(){if(this.props.restrictions.removable){var a=this.getEditorAPI(),c=a.bi.getComponentsBIParams(this.props.selectedComponent);b.forEach(c,this.assignToolbarSpecificBI.bind(null,"removal_method")),a.components.remove(this.props.selectedComponent),a.history.add("component - remove"),a.bi.reportBI(i.events.editor.component_removed,c)}},isMobileEditor:function(){return this.getEditorAPI().isMobileEditor()},moveToFront:function(){var a=this.getEditorAPI();a.components.arrangement.moveToFront(this.props.selectedComponent),a.bi.event(i.events.rightClickMenu.BRING_TO_FRONT,{origin:"toolbar"})},moveForward:function(){var a=this.getEditorAPI();a.components.arrangement.moveForward(this.props.selectedComponent),a.bi.event(i.events.rightClickMenu.MOVE_FORWARD,{origin:"toolbar"})},moveToBack:function(){var a=this.getEditorAPI();a.components.arrangement.moveToBack(this.props.selectedComponent),a.bi.event(i.events.rightClickMenu.SEND_TO_BACK,{origin:"toolbar"})},moveBackward:function(){var a=this.getEditorAPI();a.components.arrangement.moveBackward(this.props.selectedComponent),a.bi.event(i.events.rightClickMenu.MOVE_BACKWARDS,{origin:"toolbar"})},isAlignEnabled:function(){var a=!h.isOpen("se_screenWidthOff")&&h.isOpen("exp171");return a?!!this.props.selectedComponent&&b.every(e.constants.COMP_ALIGNMENT_OPTIONS,this.getEditorAPI().components.alignment.canAlign.bind(this,this.props.selectedComponent)):this.props.restrictions.alignable},align:function(a){var b=this.getEditorAPI();b.components.alignment.align(this.props.selectedComponent,a),b.bi.event(i.events.toolbar.TOOL_BAR_ALIGNMENT_MENU_CLICK,{category:a})},isDistributeEnabled:function(){var a=!h.isOpen("se_screenWidthOff")&&h.isOpen("exp171");return a?!!this.props.selectedComponent&&b.every(e.constants.COMP_ALIGNMENT_OPTIONS,this.getEditorAPI().components.multiComponents.canDistribute.bind(this,this.props.selectedComponent)):this.getEditorAPI().multiselect.count(this.props.selectedComponent)>2},distribute:function(a){var b=this.getEditorAPI();b.components.multiComponents.distribute(this.props.selectedComponent,a),b.bi.event(i.events.toolbar.TOOL_BAR_DISTRIBUTION_MENU_CLICK,{category:a})},isMatchSizeEnabled:function(){var a=!h.isOpen("se_screenWidthOff")&&h.isOpen("exp171");return a?!!this.props.selectedComponent&&b.every(e.constants.COMP_MATCH_SIZE_OPTIONS,this.getEditorAPI().components.multiComponents.canMatchSize.bind(this,this.props.selectedComponent)):this.getEditorAPI().multiselect.isMultiselect(this.props.selectedComponent)},matchSize:function(a){var b=this.getEditorAPI();b.components.multiComponents.matchSize(this.props.selectedComponent,a),b.bi.event(i.events.toolbar.TOOL_BAR_MATCH_SIZE_MENU_CLICK,{category:a})},assignToolbarSpecificBI:function(a,c){var d={};d[a]="toolbar",b.assign(c,d)},reportBI:function(a,b){this.getEditorAPI().bi.event(a,b)},render:g})}),define("rEditor/rootComps/toolBar/toolBar.rt",["react/addons","lodash","baseUI","util","rEditor/rootComps/toolBar/toolbarTop"],function(a,b,c,d,e){"use strict";function f(a,c){this.checkOverlap(b.clone(c))}function g(a){this.resetQuickTip()}function h(a,b){this.startDrag(b,this.getDragLimits())}function i(a,b){this.rotateComponent("rotationInDegrees",b)}function j(a,b){this.resizeComponent("width",b)}function k(a,b){this.resizeComponent("height",b)}function l(a,b){this.moveComponent("x",b)}function m(a,b){this.moveComponent("y",b)}function n(){var n=this.compLayout;return a.createElement("div",{className:b.keys(b.pick(this.getClasses(),b.identity)).join(" "),onMouseMove:f.bind(this,n),onMouseEnter:g.bind(this,n),ref:"checkOverlapTarget",onContextMenu:this.props.onContextMenu},a.createElement("div",{className:"header"},a.createElement("div",{className:"drag-zone",onMouseDown:h.bind(this,n)},a.createElement("span",{className:"drag-handle"},a.createElement(c.symbol,{name:"toolbarDragHandle"}))),a.createElement("button",{className:"help",onClick:this.onHelp},"?"),a.createElement("span",{className:"close",onClick:this.onClose},a.createElement(c.symbol,{name:"toolbarClose"}))),a.createElement("div",{className:"header-seperator"}),a.createElement(e,{restrictions:this.restrictions,selectedComponent:this.props.selectedComponent,pasteEnabled:this.isPasteEnabled()}),a.createElement("div",{className:"seperator"}),a.createElement("div",{className:"inner form"},a.createElement("label",{"data-input-title":"input_rotation",className:"row"},a.createElement(c.tooltip,{value:"toolbar_tooltip_rotation",styleType:c.uiConstants.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},a.createElement("span",{},a.createElement(c.symbol,{name:"toolbarRotation"}))),a.createElement(c.stepper,{className:"small degrees",disabled:!this.restrictions.rotatable,min:-(1/0),max:1/0,value:parseInt(n.rotationInDegrees,10),units:"",onChange:i.bind(this,n)}))),a.createElement("div",{className:"seperator"}),a.createElement("div",{className:"inner form"},a.createElement("span",{className:"layout-title"},d.translate("toolbar_size")),a.createElement("label",{className:"row"},a.createElement(c.tooltip,{value:"toolbar_tooltip_width",styleType:c.uiConstants.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},a.createElement("span",{className:"label",style:{paddingRight:"4px"}},d.translate("toolbar_width")+":")),a.createElement(c.stepper,{disabled:!this.restrictions.horizontallyResizable,className:"small",value:parseInt(n.width,10),min:-(1/0),max:1/0,onChange:j.bind(this,n)})),a.createElement("label",{className:"row"},a.createElement(c.tooltip,{value:"toolbar_tooltip_height",styleType:c.uiConstants.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},a.createElement("span",{className:"label"},d.translate("toolbar_height")+":")),a.createElement(c.stepper,{disabled:!this.restrictions.verticallyResizable,className:"small",min:-(1/0),max:1/0,value:parseInt(n.height,10),onChange:k.bind(this,n)}))),a.createElement("div",{className:"seperator"}),a.createElement("div",{className:"inner form"},a.createElement("span",{className:"layout-title"},d.translate("toolbar_position")),a.createElement("label",{"data-input-title":"input_x",className:"row"},a.createElement(c.tooltip,{value:"toolbar_tooltip_x_position",styleType:c.uiConstants.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},a.createElement("span",{className:"label"},d.translate("toolbar_x")+":")),a.createElement(c.stepper,{disabled:!this.restrictions.horizontallyMovable,className:"small",min:-(1/0),max:1/0,value:parseInt(n.bounding.x,10),onChange:l.bind(this,n)})),a.createElement("label",{"data-input-title":"input_y",className:"row"},a.createElement(c.tooltip,{value:"toolbar_tooltip_y_position",styleType:c.uiConstants.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},a.createElement("span",{className:"label"},d.translate("toolbar_y")+":")),a.createElement(c.stepper,{disabled:!this.restrictions.verticallyMovable,className:"small",min:-(1/0),max:1/0,value:parseInt(n.bounding.y,10),onChange:m.bind(this,n)}))),a.createElement("div",{className:"seperator",key:"seperator-inner-form"}),a.createElement("div",{className:"inner form",key:"inner-form"},this.restrictions.canBeFixed?null:a.createElement("div",{key:"containable"},a.createElement("span",{className:"layout-title show-on-all-pages-title"},d.translate("toolbar_show_on_all_pages")),a.createElement("label",{className:"row show-on-all-pages-row"},a.createElement(c.toggle,{name:"switch",className:"show-on-all-pages",key:"showOnAllPages",disabled:null===this.props.selectedComponent||!this.restrictions.canToggleShowOnAllPages,value:this.isShowOnAllPages(),onChange:this.handleShowOnAllPages,size:"medium"}))),this.restrictions.canBeFixed?a.createElement("div",{key:"canBeFixed"},a.createElement("span",{className:"layout-title show-on-all-pages-title"},d.translate("toolbar_fixed_position")),a.createElement("label",{className:"row show-on-all-pages-row"},a.createElement(c.toggle,{name:"switch",className:"show-on-all-pages",key:"fixedPosition",value:this.restrictions.isFixed,onChange:this.handleFixed,size:"medium"}))):null))}return function(){return n.apply(this,[])}}),define("rEditor/rootComps/toolBar/toolBar",["react","lodash","jquery","util","panels","core","baseUI","rEditor/rootComps/mixins/findOverlappedComponentMixin","rEditor/rootComps/mixins/hiddenableMixin","rEditor/rootComps/mixins/keepInViewportMixin","rEditor/rootComps/toolBar/toolBar.rt"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";function p(a,b,c){return a[b]+c-a.bounding[b]}function q(a){var b=this.getEditorAPI(),c=b.components.layout.isHorizontallyStretchedToScreen(a);this.getLayout=c?b.components.layout.getRelativeToScreen:b.components.layout.getRelativeToStructure,this.updateLayout=c?b.components.layout.updateRelativeToScreen:b.components.layout.updateRelativeToStructure,this.updateLayoutProportionally=c?b.components.layout.updateRelativeToScreenAndPreserveProportions:b.components.layout.updateRelativeToStructureAndPreserveProportions}function r(a){var b=c(a).height(),d=(window.innerHeight-b)/2;return{right:m,top:d}}var l=f.bi,m=84,n=10,o={rotationInDegrees:0,width:0,height:0,x:0,y:0,bounding:{x:0,y:0}};return a.createClass({displayName:"toolBar",mixins:[f.mixins.editorAPIMixin,d.draggableMixin,i,j,h],propTypes:{selectedComponent:a.PropTypes.arrayOf(a.PropTypes.object),toolsHidden:a.PropTypes.bool},getInitialState:function(){var a=this.getEditorAPI();return this.props.selectedComponent?(q.call(this,this.props.selectedComponent),this.compLayout=this.getLayout(this.props.selectedComponent),this.restrictions=a.getCompRestrictions(this.props.selectedComponent)):this.updateNoSelectedComponent(),{}},componentWillReceiveProps:function(a){var b=a.selectedComponent,c=this.getEditorAPI();b?(q.call(this,b),this.compLayout=this.getLayout(b),this.restrictions=c.getCompRestrictions(b)):this.updateNoSelectedComponent()},getComponentPosition:function(a){return this.state.isCustomPosition?this.fitPositionToScreen(a,n,m):r(this.getDOMNode())},onDragEnd:function(){this.updateLastCustomXPosition(this.draggable.nodePosition.x)},getClasses:function(){return b.assign({"rootcomp-toolbar":!0,hidden:this.props.hidden},this.getHiddenableClasses())},updateNoSelectedComponent:function(){this.compLayout=o,this.restrictions={}},resizeComponent:function(a,b){this.getEditorAPI().bi.event(l.events.editBox.RESIZE,{origin:"toolbar"}),this.setComponentLayoutChange(a,b)},moveComponent:function(a,b){this.setComponentLayoutChange(a,b)},rotateComponent:function(a,b){var c=parseInt(b,10);0===c?this.getEditorAPI().bi.event(l.events.editBox.CANCEL_ROTATE_COMPONENT):this.getEditorAPI().bi.event(l.events.editBox.ROTATE_COMPONENT,{origin:"toolbar",value:c}),this.setComponentLayoutChange(a,b)},setComponentLayoutChange:function(a,c){var d=this.getEditorAPI();if(c=parseInt(c,10),isNaN(c))return void this.forceUpdate();"y"!==a&&"x"!==a||(c=p(this.compLayout,a,c));var e=d.multiselect.getComponentsWhichDontHaveAncestorsInTheArray(this.props.selectedComponent),f=this.getLayout(e);if(f[a]!==c){var g={};if(g[a]=c,d.multiselect.isMultiselect(e)||d.components.is.group(e)){var h=f.width/f.height,i=d.components.layout.getProportionStructure(e);"height"===a?g.width=c*h:"width"===a&&(g.height=c/h),g=b.mapValues(g,b.round),this.updateLayoutProportionally(e,g,i,!0)}else this.updateLayout(e,g,!0);d.history.add("toolbar - set selected component layout - "+a)}},onClose:function(){this.getEditorAPI().toolbar.toggleToolbar()},onHelp:function(){var a={origin:f.constants.BI.HELP.ORIGIN.TOOLBAR,component:this.getEditorAPI().selection.getSelectedComponentType(),learn_more:!1};e.panelManager.openHelpCenter("4ab49cd7-2ea4-4873-904e-f65d17d2f1dd",null,null,a)},handleShowOnAllPages:function(){var a=this.getEditorAPI();if(this.props.selectedComponent&&this.restrictions.canShowOnAllPages){var b=a.components.toggleShowOnAllPages(this.props.selectedComponent);a.bi.event(l.events.rightClickMenu.SHOW_ON_ALL_PAGES,{new_status:b,origin:"toolbar"})}},isShowOnAllPages:function(){if(null===this.props.selectedComponent||void 0===this.props.selectedComponent)return!1;var a=this.getEditorAPI();return a.components.isShowOnAllPages(this.props.selectedComponent)},handleFixed:function(){this.getEditorAPI().selectedComponent.toggleFixedPosition()},isPasteEnabled:function(){var a=this.getEditorAPI();return a.clipboardContainsComp()&&a.isDesktopEditor()&&!a.components.layout.isPinned(this.props.selectedComponent)},render:k})}),define("rEditor/rootComps/gfpp/gfppModel",["lodash","gfppData","constants","experiment"],function(a,b,c,d){"use strict";function k(a,b){if(1===b.length&&d.isOpen("se_hoverBox")){var e=b[0],f=a.components.getContainer(e),g=a.components.modes.getModes(f);if(g&&g.length>0)return{panelAction:c.ACTIONS.MODE_IN,panelExitAction:c.ACTIONS.MODE_EXIT,shouldAddExit:!0}}return{}}function l(b,c,d){return a.isFunction(b)?b(c,d):b}function m(b,c,d){return b?(b=a.cloneDeep(b),a.forEach(b,function(b){a.forEach(b,function(e,g){a.includes(f,g)||(b[g]=l(e,c,d))})}),b):null}function n(a,b,c){var d=b.isMobileEditor(),e=d?a.mobileMainActions:a.mainActions;return e=l(e,b,c),m(e,b,c)}function o(a,b,c){var d=b.isMobileEditor(),e=d?a.mobileExtraActions:a.extraActions;return e=l(e,b,c),m(e,b,c)}function p(b,c,d){var e=c.isMobileEditor(),f=e?b.mobileEnabledActions:b.enabledActions;f=a.clone(l(f,c,d)||[]),f=a.union(f,g);var h=l(b.presetActions,c,d);return h=a.merge({},a.pick(j,f),a.pick(h,f)),m(h,c,d)}function q(c,d){var e=c.isMobileEditor();return d.helpId=e?d.mobileHelpId:d.helpId,d.isSelected=a.isUndefined(d.isSelected)?b.utils.isHelpPanelOpen(d.helpId):d.isSelected,d}function r(b,c){return a.last(b.components.getType(c).split("."))}function s(a,c){var d=r(a,c),e=b.getComponentData(d)||i,f=n(e,a,c),g=o(e,a,c),h=p(e,a,c);return h.help&&(h.help=q(a,h.help)),h=t(h,a,c),{mainActions:f,extraActions:g,presetActions:h}}function t(b,c,f){var g=[];if(b[e.ACTIONS.HIDE]&&(c.components.is.removable(f)||g.push(e.ACTIONS.HIDE)),b[e.ACTIONS.ANIMATION]){var h=a.some(e.ANIMATION_TYPES,function(a){return c.components.is.animatable(f,a)});h&&c.multiselect.areComponentsOfSamePage(f)||g.push(e.ACTIONS.ANIMATION)}if(b[e.ACTIONS.STRETCH]){var i=!d.isOpen("se_screenWidthOff")&&d.isOpen("exp171")&&c.components.layout.canBeStretched(f)&&!c.isMobileEditor();i||g.push(e.ACTIONS.STRETCH)}return b[e.ACTIONS.PIN_MODE]&&(c.components.layout.isPinned(f)||g.push(e.ACTIONS.PIN_MODE)),g.length?a.omit(b,g):b}var e=b.consts,f=["onClick","template","onTemplatePropsChange"],g=[e.ACTIONS.PIN_MODE,e.ACTIONS.STRETCH],h=[e.ACTIONS.SETTINGS,e.ACTIONS.LAYOUT,e.ACTIONS.ANIMATION,e.ACTIONS.HELP].concat(g),i={enabledActions:h},j={settings:{isSelected:b.utils.getPanelStateFn("settings"),tooltip:"gfpp_tooltip_settings",icon:"settings",onClick:b.utils.getTogglePanelFn("settings")},design:{isSelected:b.utils.getPanelStateFn("design"),tooltip:"gfpp_tooltip_design",icon:"design",onClick:b.utils.getTogglePanelFn("design")},layout:{isSelected:b.utils.getPanelStateFn("layout"),tooltip:"gfpp_tooltip_layout",icon:"layout",onClick:b.utils.getTogglePanelFn("layout")},filters:{isSelected:b.utils.getPanelStateFn("filters"),tooltip:"gfpp_tooltip_image_filters",icon:"filters",onClick:b.utils.getTogglePanelFn("filters",{origin:"gfpp"})},stretch:{isSelected:b.utils.getPanelStateFn("stretching"),tooltip:"gfpp_tooltip_stretch",icon:"gfpp_stretch",onClick:b.utils.getTogglePanelFn("stretching")},stretchForColumns:{isSelected:b.utils.getPanelStateFn("stretching"),tooltip:"gfpp_tooltip_stretch",icon:"gfpp_stretch",onClick:b.utils.getTogglePanelFn("stretching")},upgrade:{isSelected:!1,tooltip:"gfpp_tooltip_upgrade",icon:"",onClick:b.utils.getTogglePanelFn("upgrade")},crop:{isSelected:!1,isDisabled:function(a,c){return!b.utils.isCropAllowed(a,c)},tooltip:function(a,c){return b.utils.isCropAllowed(a,c)?"gfpp_tooltip_crop":"gfpp_tooltip_crop_disabled"},icon:"effects",onClick:function(a,c){b.utils.isCropAllowed(a,c)&&b.utils.openImageCrop(a,c)}},aviary:{isSelected:!1,tooltip:"gfpp_tooltip_imageeffects",icon:"effects",onClick:b.utils.openAviaryPanel},animation:{isSelected:b.utils.getPanelStateFn("animation"),isApplied:!1,tooltip:"gfpp_tooltip_animation",tooltip_active:"gfpp_tooltip_applied_animation",icon:"animation",onClick:function(a,c){var d=k(a,c);b.utils.getTogglePanelFn("animation",d)(a)}},link:{isSelected:b.utils.getPanelStateFn("link"),isApplied:b.utils.getDataDefinedFn("link"),tooltip:"gfpp_tooltip_linkto",tooltip_active:"gfpp_tooltip_applied_linkto",icon:"link",onClick:b.utils.openLinkPanel},hide:{isSelected:!1,tooltip:"gfpp_tooltip_mobile_hide",icon:"gfpp_hide",onClick:function(a){a.selectedComponent.remove(),a.history.add("component - remove")}},help:{tooltip:"gfpp_tooltip_help",icon:"gfpp_help",mobileHelpId:"b6d9a270-f9c5-4837-995b-c3818b13a643"},pinMode:{isSelected:b.utils.getPanelStateFn("panels.pinnedDockPanel"),tooltip:"gfpp_tooltip_PinToScreen",icon:"gfpp_pin",className:"gfpp-pin",onClick:function(a){a.pinMode.open("gfpp")}}};return d.isOpen("fastStyling")&&(j.customizeDesign={isSelected:b.utils.getPanelStateFn("customizeDesign"),tooltip:"gfpp_tooltip_customize",icon:"gfpp_customize_design_drop",onClick:b.utils.getTogglePanelFn("customizeDesign")}),{getData:s}}),define("rEditor/rootComps/rightClickMenu/util/rcmDataParser",["lodash","rEditor/rootComps/gfpp/gfppModel","experiment","experiment!layoutTractor"],function(a,b,c,d){"use strict";function f(){return{enabled:!0}}function g(a){return e.components.is.duplicatable(a)&&!e.components.layout.isPinned(a)}function h(a){return g(a)?{enabled:!0}:null}function i(a){return g(a)?{enabled:!0}:null}function j(a){if(a)return null;var b=!!e.clipboard.getItem(e.clipboard.types.COMPONENT);return{enabled:b}}function k(a){return g(a)?{enabled:!0}:null}function l(a){var b=e.components.is.styleCanBeApplied(a);return b?{enabled:!0}:null}function m(a){var b=e.hasExternalDesign(a);return b?null:{enabled:!0}}function n(a){var b=e.hasExternalDesign(a);if(b)return null;var c=!!e.clipboard.getItem(e.clipboard.types.COMPONENT_DESIGN);return{enabled:c}}function p(b){var c=e.getCompMoveRestrictions(b),d=c.canMoveBackward||c.canMoveForward,f=e.components.is.fixed(b)&&a.includes(o,e.components.getType(b));return!d||f?null:{type:"subItems",enabled:!0,subItems:q(b)}}function q(a){var b=e.getCompMoveRestrictions(a);return{moveToFront:{icon:{svgName:"bringToFront"},enabled:b.canMoveForward},moveToBack:{icon:{svgName:"sendToBack"},enabled:b.canMoveBackward},moveForward:{icon:{svgName:"moveForward"},enabled:b.canMoveForward},moveBackward:{icon:{svgName:"moveBackward"},enabled:b.canMoveBackward}}}function r(a,b){var c=s(b);return c.length>1||1===c.length&&e.utils.isPage(a)?{type:"subItems",shouldShowCount:!0,enabled:!0,subItems:c}:null}function s(b){return a(b).reject(function(b){return a.includes(["SITE_PAGES","PAGES_CONTAINER"],b.id)||e.utils.isPage(b)}).map(function(a){return{component:a,key:"overlappingSubItem_"+a.id,icon:e.components.getIconInfo(a),label:e.components.getDisplayName(a),enabled:!0}}).value()}function t(a){var b=e.tpa.isTpaByCompType(e.components.getType(a)),c=e.components.is.removable(a);return b||c?{enabled:c,operationKey:"DELETE"}:null}function u(a){return{value:c.isOpen("boxSlideShow")?e.components.isShownOnAllStates(a):!1,enabled:c.isOpen("boxSlideShow")?e.components.canBeShownOnAllStates(a):!1,operationKey:"SHOW_ON_ALL_SLIDES"}}function v(a){var b=e.components.is.fixed(a),c=e.tpa.isTpaByCompType(e.components.getType(a)),d=c&&b;return e.components.canToggleShowOnAllPages(a)||d?{value:d||e.components.isShowOnAllPages(a),enabled:!d,operationKey:"SHOW_ON_ALL_PAGES"}:null}function w(a){return e.components.layout.canBeFixedPosition(a)?{value:e.components.is.fixed(a),enabled:!0}:null}function x(a,b){return b||!e.components.is.pinnable(a)?null:{value:e.components.is.fixed(a),enabled:!0}}function y(){return d?{enabled:!0}:null}function z(){var b=e.focusBox.getFocusedContainer();if(!b)return null;var c=e.components.modes.getModes(b);return!c||a.isEmpty(c)?null:{enabled:!0,label:"HOVER_BOX_APPLY_TO_OTHER_VIEW"}}function A(d){var f=b.getData(e,d),g=["settings","design","customizeDesign","layout","upgrade","aviary","animation","link"];c.isOpen("exp171")&&!c.isOpen("imageCropFiltersOff")&&(g.splice(a.indexOf(g,"animation"),0,"filters"),g[a.indexOf(g,"aviary")]="crop");var h=(f.mainActions||[]).concat(a(f.presetActions).pick(g).toArray().value());return a.transform(h,function(b,c){c.onClick&&b.push({shouldTranslate:a.isBoolean(c.shouldTranslate)?c.shouldTranslate:!0,item:{enabled:!c.isDisabled,label:c.label||c.tooltip},onClick:function(){c.onClick(e,d),e.closeRightClickMenu()}})},[])}function B(b){if(c.isOpen("themeStyle")){var d=e.components.getType(b),f=e.components.COMPONENT_DEFINITION_MAP[d],g=f&&f.styles&&a.keys(f.styles);if(g)return{enabled:!0,styleIds:g}}return null}function C(a,b,c){return a?{undo:f(),copy:i(a),paste:j(c),cut:h(a),duplicate:k(a),copyDesign:m(a),pasteDesign:n(a),arrange:p(a),overlappingItems:r(a,b),remove:t(a),showOnAllPages:v(a),showOnAllStates:u(a),fixedPosition:w(a),gfppItems:A(a),styleCanBeApplied:l(a),pin:x(a,c),layoutTractor:y(),applyToAllModes:z(),saveToTheme:B(a)}:{paste:j(c),undo:f()}}var e,o=["wysiwyg.viewer.components.tpapps.TPAGluedWidget"],D={buildMenuItems:function(a,b,c){return e=a,C(c,b,e.isMobileEditor())},buildShowOnAllPagesItem:function(a,b){return e=a,v(b)},buildFixedPositionItem:function(a,b){return e=a,w(b)},buildArrangeMenu:function(a,b){return e=b,p(a)}};return D}),define("rEditor/rootComps/rightClickMenu/customActions/stripColumnsContainer",[],function(){"use strict";return[{label:"Add Column",enabled:function(a,b){return a.columns.canAdd(b)},onClick:function(a,b){a.columns.addColumn(b)}}]}),define("rEditor/rootComps/rightClickMenu/customActions/column",[],function(){"use strict";return[{label:"RightClick_Menu_Move_Column_Left_Label",enabled:function(a,b){return a.components.arrangement.canMoveBackward(b)},onClick:function(a,b){a.columns.move.left(b)}},{label:"RightClick_Menu_Move_Column_Right_Label",enabled:function(a,b){return a.components.arrangement.canMoveForward(b)},onClick:function(a,b){a.columns.move.right(b)}}]}),define("rEditor/rootComps/rightClickMenu/customActions",["rEditor/rootComps/rightClickMenu/customActions/stripColumnsContainer","rEditor/rootComps/rightClickMenu/customActions/column"],function(a,b){"use strict";return{"wysiwyg.viewer.components.StripColumnsContainer":a,"wysiwyg.viewer.components.Column":b}}),define("rEditor/rootComps/rightClickMenu/menuItems/rcmItemBasic.rt",["react/addons","lodash","baseUI"],function(a,b,c){"use strict";function d(){var d=this.isEnabled();return a.createElement("li",{className:b.keys(b.pick({"item-basic":!0,disabled:!d,hoverable:d},b.identity)).join(" "),onClick:d?this.props.onClick:function(){},onContextMenu:d?this.props.onClick:function(){},onMouseEnter:this.props.onMouseEnter||b.noop,onMouseLeave:this.props.onMouseLeave||b.noop},this.props.item.icon?a.createElement("span",{className:"icon",key:"icon"},this.props.item.icon.svgName?a.createElement(c.symbol,{name:this.props.item.icon.svgName,key:"svg"}):null,this.props.item.icon.css?a.createElement("span",{style:this.getImageIconStyle(),key:"style"}):null):null,a.createElement("span",{className:"label"},this.translateIfNeeded(this.props.item.label)))}return function(){return d.apply(this,[])}}),define("rEditor/rootComps/rightClickMenu/menuItems/rcmItemBasic",["react","lodash","util","rEditor/rootComps/rightClickMenu/menuItems/rcmItemBasic.rt"],function(a,b,c,d){"use strict";return a.createClass({displayName:"rcmItemBasic",mixins:[c.translationMixin],getImageIconStyle:function(){return b.merge({},this.props.item.icon.css,{backgroundImage:"url("+this.props.item.icon.src+")"})},isEnabled:function(){return b.isFunction(this.props.enabled)?this.props.enabled():this.props.item.enabled},render:d})}),define("rEditor/rootComps/rightClickMenu/menuItems/rcmItemWithShortcut.rt",["react/addons","lodash","baseUI"],function(a,b,c){"use strict";return function(){return a.createElement(c.tooltip,{value:this.getTooltipText(),alignment:"right",disabled:!this.getTooltipText()},a.createElement("li",{className:b.keys(b.pick({"item-shortcut":!0,disabled:!this.props.item.enabled,hoverable:this.props.item.enabled},b.identity)).join(" "),onClick:this.props.item.enabled?this.props.onClick:function(){},onContextMenu:this.props.item.enabled?this.props.onClick:function(){}},this.props.item.icon?a.createElement("span",{className:"icon",key:"icon"},this.props.item.icon.svgName?a.createElement(c.symbol,{name:this.props.item.icon.svgName,key:"svg"}):null):null,a.createElement("span",{
className:"label label-shortcut"},this.translateIfNeeded(this.props.label)),a.createElement("span",{className:"action action-shortcut"},this.props.shortcut)))}}),define("rEditor/rootComps/rightClickMenu/menuItems/rcmItemWithShortcut",["react","core","lodash","util","rEditor/rootComps/rightClickMenu/menuItems/rcmItemWithShortcut.rt"],function(a,b,c,d,e){"use strict";return a.createClass({displayName:"rcmItemWithShortcut",mixins:[d.translationMixin,b.mixins.editorAPIMixin],getTooltipText:function(){var a=this.getEditorAPI(),b=a.tooltipTextService.getSelectedComponentTooltipText(this.props.item.operationKey);return b},render:e})}),define("rEditor/rootComps/rightClickMenu/menuItems/rcmItemWithSubItems.rt",["react/addons","lodash","rEditor/rootComps/rightClickMenu/menuItems/rcmItemWithShortcut"],function(a,b,c){"use strict";return function(){return a.createElement("li",{className:b.keys(b.pick({disabled:!this.props.item.enabled,hoverable:this.props.item.enabled},b.identity)).join(" ")},a.createElement("span",{className:"label label-sub-item"},a.createElement("span",{},this.translateIfNeeded(this.props.label)),this.props.item.shouldShowCount?a.createElement("span",{key:"count"}," ("+a.Children.count(this.props.children)+")"):null),a.createElement("span",{className:"action action-expand"}),a.createElement("div",{className:"rightClickMenu subMenu"},a.createElement("ul",{},this.props.children)))}}),define("rEditor/rootComps/rightClickMenu/menuItems/rcmItemWithSubItems",["react","lodash","util","rEditor/rootComps/rightClickMenu/menuItems/rcmItemWithSubItems.rt"],function(a,b,c,d){"use strict";return a.createClass({displayName:"rcmItemWithSubItems",mixins:[c.translationMixin],render:d})}),define("rEditor/rootComps/rightClickMenu/menuItems/rcmItemWithSubItemsRecursive.rt",["react/addons","lodash","rEditor/rootComps/rightClickMenu/menuItems/rcmItemWithShortcut"],function(a,b,c){"use strict";return function(){return a.createElement("li",{className:b.keys(b.pick({disabled:!this.props.item.enabled,hoverable:this.props.item.enabled},b.identity)).join(" "),onClick:this.props.onClick},a.createElement("span",{className:"label label-sub-item"},a.createElement("span",{},this.translateIfNeeded(this.props.label)),this.props.item.shouldShowCount?a.createElement("span",{key:"count"}," ("+a.Children.count(this.props.children)+")"):null),a.createElement("span",{className:b.keys(b.pick({action:!0,"action-expand":this.props.items.length>0},b.identity)).join(" ")}),a.createElement("div",{className:"rightClickMenu subMenu"},a.createElement("ul",{},this.getChildren())))}}),define("rEditor/rootComps/rightClickMenu/menuItems/rcmItemWithSubItemsRecursive",["react","lodash","util","rEditor/rootComps/rightClickMenu/menuItems/rcmItemWithSubItemsRecursive.rt"],function(a,b,c,d){"use strict";var e=a.createClass({displayName:"rcmItemWithSubItems",mixins:[c.translationMixin],getChildren:function(){return b.map(this.props.items,function(b){return a.createElement(e,b)})},render:d});return e}),define("rEditor/rootComps/rightClickMenu/menuItems/rcmItemWithToggle.rt",["react/addons","lodash","baseUI"],function(a,b,c){"use strict";return function(){return a.createElement(c.tooltip,{value:this.getTooltipText(),alignment:"right",disabled:!this.getTooltipText()},a.createElement("li",{className:b.keys(b.pick({disabled:!this.props.item.enabled},b.identity)).join(" ")},a.createElement("span",{className:"label label-toggle"},this.translateIfNeeded(this.props.label)),a.createElement(c.toggle,b.assign({},{className:this.props.className+" action",value:this.props.value,onChange:this.props.item.enabled?this.props.onChange:b.noop,size:this.props.size},{disabled:!this.props.item.enabled}))))}}),define("rEditor/rootComps/rightClickMenu/menuItems/rcmItemWithToggle",["react","core","lodash","util","rEditor/rootComps/rightClickMenu/menuItems/rcmItemWithToggle.rt"],function(a,b,c,d,e){"use strict";return a.createClass({displayName:"rcmItemWithToggle",mixins:[d.translationMixin,b.mixins.editorAPIMixin],getTooltipText:function(){var a=this.getEditorAPI(),b=a.tooltipTextService.getSelectedComponentTooltipText(this.props.item.operationKey);return b},render:e})}),define("rEditor/rootComps/rightClickMenu/rightClickMenu.rt",["react/addons","lodash","rEditor/rootComps/rightClickMenu/menuItems/rcmItemBasic","rEditor/rootComps/rightClickMenu/menuItems/rcmItemWithShortcut","rEditor/rootComps/rightClickMenu/menuItems/rcmItemWithSubItems","rEditor/rootComps/rightClickMenu/menuItems/rcmItemWithSubItemsRecursive","rEditor/rootComps/rightClickMenu/menuItems/rcmItemWithToggle","rEditor/rootComps/keyboard/config/keyboardShortcutsActionMap","experiment!rightClickDebug","experiment!applyStyle"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(b,d,e,f,g,h,i){return a.createElement(c,{shouldTranslate:h.shouldTranslate,item:h.item,label:h.item.label,key:h.item.label,onClick:h.onClick})}function l(d,e,f,g,h,i,j){return a.createElement(c,{key:i.label,item:i,onClick:i.onClick.bind(null,e,h),enabled:b.isFunction(i.enabled)&&i.enabled.bind(null,e,h)})}function m(a,b,c,d,e,f,g){this.openApplyToDialog(f)}function n(b,d,e,f,g,h,i){return a.createElement(c,{key:"rcmApplyStyle",label:"RightClick_Menu_Copy_Design_Label",item:this.getApplyToInfoItem(),onClick:m.bind(this,b,d,e,f,g,h,i)})}function o(b,d,e,f,g,h,i){return a.createElement(c,{item:h,label:h.label,key:h.key,onClick:this.onOverlappingItemClick.bind(this,h),shouldTranslate:!1,onMouseEnter:this.onOverlappingItemMouseEnter.bind(this,h),onMouseLeave:this.onOverlappingItemMouseLeave})}function p(a,b,c,d,e,f,g){this.saveStyleToTheme(this.props.selectedComponents[0],f)}function q(b,d,e,f,g,h,i){return a.createElement(c,{shouldTranslate:!1,item:{label:h,enabled:!0},key:this.props.selectedComponents[0]+"_themeStyle_"+h,onClick:p.bind(this,b,d,e,f,g,h,i)})}function r(b,c,d,e,g,h,i){return a.createElement(f,{shouldTranslate:!1,key:h.id,label:"Debug - "+c.components.getDisplayName(h)+" - "+h.id,item:{enabled:!0},items:this.getDebugItems(h)})}function s(a,b,c,d,e,f,g){this.exportDebugInfo(f)}function t(b,d,e,f,g,h,i){return a.createElement(c,{shouldTranslate:!1,item:this.getExportDebugInfoItem(h),key:h.id+".debugInfo",onClick:s.bind(this,b,d,e,f,g,h,i)})}function u(){var f=this.state.menuItems,m=this.getEditorAPI(),p=h.editor,s=this.getCustomActions(),u=b.first(this.props.selectedComponents);return a.createElement("div",{style:{top:this.state.position.y,left:this.state.position.x},className:b.keys(b.pick(this.getClasses(),b.identity)).join(" "),onContextMenu:this.onRightClick,key:"rcm"},this.props.selectedComponents?null:a.createElement("ul",{key:"noCompSelectedItems"},f.paste?a.createElement(d,{item:f.paste,label:"RightClick_Menu_Paste_Label",shortcut:p.PASTE.label,onClick:this.pasteComponent,key:"noCompSelectedPaste"}):null),this.props.selectedComponents?a.createElement("div",{key:"selectedCompItems"},b.isEmpty(f.gfppItems)?null:a.createElement.apply(this,["ul",{key:"gfppItems","data-section":"gfppItems"},b.map(f.gfppItems,k.bind(this,f,m,p,s,u))]),s.length?a.createElement.apply(this,["ul",{key:"customActions"},b.map(s,l.bind(this,f,m,p,s,u))]):null,a.createElement.apply(this,["ul",{},f.applyToAllModes?a.createElement(c,{item:f.applyToAllModes,onClick:this.applyToAllModes,key:"rcmApplyToAllModes"}):null,a.createElement(d,{item:f.undo,label:"TOPBAR_Edit_Undo",shortcut:p.UNDO.label,onClick:this.undo}),f.cut?a.createElement(d,{item:f.cut,label:"RightClick_Menu_Cut_Label",shortcut:p.CUT.label,onClick:this.cutComponent,key:"rcmCut"}):null,f.copy?a.createElement(d,{item:f.copy,label:"RightClick_Menu_Copy_Label",shortcut:p.COPY.label,onClick:this.copyComponent,key:"rcmCopy"}):null,j&&f.styleCanBeApplied?b.map(this.props.selectedComponents,n.bind(this,f,m,p,s,u)):null,f.paste?a.createElement(d,{item:f.paste,label:"RightClick_Menu_Paste_Label",shortcut:p.PASTE.label,onClick:this.pasteComponent,key:"rcmPaste"}):null,f.duplicate?a.createElement(d,{item:f.duplicate,label:"RightClick_Menu_Duplicate_Label",shortcut:p.DUPLICATE.label,onClick:this.duplicateComponent,key:"rcmDuplicate"}):null]),f.arrange||f.overlappingItems?a.createElement("ul",{key:"rcmArrangeOverlapping"},f.overlappingItems?a.createElement.apply(this,[e,{label:"RightClick_Menu_Overlapping_Items_Label",item:f.overlappingItems,key:"rcmOverlapping"},b.map(f.overlappingItems.subItems,o.bind(this,f,m,p,s,u))]):null,f.arrange?a.createElement(e,{item:f.arrange,label:"RightClick_Menu_Arrange_Label",key:"rcmArrange",onMouseOver:this.onArrangeHover},a.createElement(d,{item:f.arrange.subItems.moveToFront,label:"RightClick_Menu_Bring_to_Front_Label",shortcut:p.SEND_TO_FRONT.label,onClick:this.moveToFront}),a.createElement(d,{item:f.arrange.subItems.moveToBack,label:"RightClick_Menu_Send_to_Back_Label",shortcut:p.SEND_TO_BACK.label,onClick:this.moveToBack}),a.createElement(d,{item:f.arrange.subItems.moveForward,label:"RightClick_Menu_Move_Forward_Label",shortcut:p.SEND_FORWARD.label,onClick:this.moveForward}),a.createElement(d,{item:f.arrange.subItems.moveBackward,label:"RightClick_Menu_Move_Backward_Label",shortcut:p.SEND_BACKWARD.label,onClick:this.moveBackward})):null):null,f.remove?a.createElement("ul",{key:"rcmRemove"},a.createElement(d,{item:f.remove,label:this.getEditorAPI().isMobileEditor()?"RightClick_Menu_Mobile_Hide_Label":"RightClick_Menu_Delete_Label",shortcut:"Del",onClick:this.removeComponent})):null,f.pin?a.createElement("ul",{key:"rcmPin"},f.pin?a.createElement(d,{item:f.pin,label:this.getPinLabel(),value:f.pin.value,onClick:this.handlePinClick,key:"rcmPin"}):null):null,f.layoutTractor?a.createElement("ul",{key:"layoutTractor"},a.createElement(d,{item:f.layoutTractor,shouldTranslate:!1,label:"Layout Tractor (UI)",onClick:this.openLayoutTractor})):null,f.saveToTheme&&1===this.props.selectedComponents.length?a.createElement("ul",{key:"themeStylesExperiment"},a.createElement.apply(this,[e,{item:{enabled:!0},label:"Save to theme",shouldTranslate:!1,key:"saveToTheme"},b.map(f.saveToTheme.styleIds,q.bind(this,f,m,p,s,u))])):null,f.showOnAllPages||f.fixedPosition||f.showOnAllStates.enabled?a.createElement("ul",{key:"rcmShowOnAllPagesFixPosition"},f.showOnAllPages?a.createElement(g,{size:"medium",item:f.showOnAllPages,className:"show-on-all-pages",label:"RightClick_Menu_Show_On_All_Pages_Label",value:f.showOnAllPages.value,onChange:this.toggleShowOnAllPages,key:"rcmShowOnAllPages"}):null,f.fixedPosition?a.createElement(g,{size:"medium",item:f.fixedPosition,label:"RightClick_Menu_Fixed_Position_Label",value:f.fixedPosition.value,onChange:this.toggleFixedPosition,key:"rcmFixPosition"}):null):null,i?a.createElement.apply(this,["ul",{key:"debug"},b.map(this.props.selectedComponents,r.bind(this,f,m,p,s,u)),b.map(this.props.selectedComponents,t.bind(this,f,m,p,s,u))]):null):null)}return function(){return this.state.menuItems?u.apply(this,[]):null}}),define("rEditor/rootComps/rightClickMenu/rightClickMenu",["react","lodash","jquery","core","rEditor/rootComps/rightClickMenu/util/rcmDataParser","rEditor/rootComps/rightClickMenu/customActions","util","experiment","rEditor/rootComps/rightClickMenu/rightClickMenu.rt","pLoader!santa:utils"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function o(a,c){return b.findIndex(c,function(c){return b.isEqual(c,a)})>-1}function p(a,c){var d=k.selection.getComponentsUnderClick(a,c);return h.isOpen("boxSlideShow")?b.reject(d,function(a){return!k.components.is.selectable(a)}):d}function q(a,c,d){return b.map(b.keys(c),function(e){var f=c[e],g=d.concat(e);return{key:e,label:e,onClick:function(b){j.log.info(a,g.join("."),f),b.stopPropagation()},items:b.isString(f)||b.isNumber(f)?[]:q(a,f,g),item:{enabled:!0}}})}function r(a,b,c){var d=c,e=b.outerHeight(),f=d+e;if(f>a.bottomY){var g=d-e;return g<a.y?a.y:g}return d}function s(a,b,c){var d=c,e=b.outerWidth(),f=d+e;if(f-window.pageXOffset>a.rightX){var g=d-e;return g<a.x?d+a.x:g}return d}function t(a,b){var c=d.utils.stageUtils.getViewPort(),e=s(c,a,b.x),f=r(c,a,b.y);return{x:e,y:f}}function u(a,e){var f=d.utils.stageUtils.getViewPort(),g=a.find(".subMenu");if(0===g.length)return!1;var h=c(b.max(g,function(a){return c(a).outerWidth()}));return e.x+a.outerWidth()+h.outerWidth()>f.rightX}function v(a){var b=this.state.menuItems;b.arrange=e.buildArrangeMenu(a,this.getEditorAPI()),this.setState({menuItems:b})}function w(a,b){a.components.layout.unDock(b),a.components.layout.setFixed(b,!1),a.bi.event(d.bi.events.pinToScreen.UNPIN,{origin:"rcm",component_type:a.getComponentType(b)}),g.keyboardShortcuts.setContext(g.keyboardShortcuts.CONTEXTS.EDITOR)}function x(a,c,d){b.set(d,a,c)}var k,l=d.bi,m="rcm",n="RCMOpensPinPanel";return a.createClass({displayName:"rightClickMenu",mixins:[d.mixins.editorAPIMixin,g.outerClickMixin],compType:null,propTypes:{selectedComponents:a.PropTypes.array},onOuterClick:function(){k.closeRightClickMenu()},getInitialState:function(){return k=this.getEditorAPI(),this.shouldMeasureRCMRelativeToViewPort=!0,{position:this.props.position,openSubMenuToLeft:!1,menuItems:this.getAllMenuItems(this.props.selectedComponents,this.props.position)}},componentDidMount:function(){this.updatePositionRelativeToViewPort(),this.compType=k.components.getType(this.props.selectedComponents),k.bi.event(l.events.rightClickMenu.RIGHT_CLICK_MENU_OPEN,{component:this.compType})},getAllMenuItems:function(a,b){var c=p(b.x,b.y);return e.buildMenuItems(k,c,a)},rebuildItemsForSameComponent:function(a){var c=b.pick({showOnAllPages:e.buildShowOnAllPagesItem(k,a),fixedPosition:e.buildFixedPositionItem(k,a)},function(a,c){return!b.isEqual(a,this.state.menuItems[c])},this);if(!b.isEmpty(c)){var d=b.assign({},this.state.menuItems,c);this.setState({menuItems:d})}},componentWillReceiveProps:function(a){if(a.selectedComponents){var c=b.isEqual(a.selectedComponents,this.props.selectedComponents);c?this.rebuildItemsForSameComponent(a.selectedComponents):(this.shouldMeasureRCMRelativeToViewPort=!0,this.setState({menuItems:this.getAllMenuItems(a.selectedComponents,a.position)}))}},componentDidUpdate:function(){this.shouldMeasureRCMRelativeToViewPort&&this.updatePositionRelativeToViewPort()},componentWillUnmount:function(){k.bi.event(l.events.rightClickMenu.RIGHT_CLICK_MENU_CLOSE,{origin:m,component:this.compType})},updatePositionRelativeToViewPort:function(){var a=c(this.getDOMNode()),b=t(a,this.state.position),d=u(a,this.state.position);this.shouldMeasureRCMRelativeToViewPort=!1,this.setState({position:b,openSubMenuToLeft:d})},onOverlappingItemMouseEnter:function(a){k.bi.event(l.events.rightClickMenu.OVERLAPPING_ITEMS_HOVER,{component:o(a.component,this.props.selectedComponents)?"selected":"other"}),k.hoverBox.set(a.component,!0)},onOverlappingItemMouseLeave:function(){k.hoverBox.clear()},getClasses:function(){return{rightClickMenu:!0,"open-sub-menu-left":this.state.openSubMenuToLeft,"fixed-position":this.getEditorAPI().components.layout.isShowOnFixedPosition(this.props.selectedComponents)}},onRightClick:function(a){a.preventDefault()},undo:function(){this.getEditorAPI().history.undo(),k.closeRightClickMenu()},cutComponent:function(){var a=k.bi.getComponentsBIParams(this.props.selectedComponents);b.forEach(a,b.partial(x,"origin",m)),k.selectedComponent.cut(),k.closeRightClickMenu(),k.history.add("cut component via rightClickMenu"),k.bi.reportBI(l.events.rightClickMenu.CUT,a)},copyComponent:function(){var a=k.bi.getComponentsBIParams(this.props.selectedComponents);b.forEach(a,b.partial(x,"origin",m)),k.selectedComponent.copy(),k.closeRightClickMenu(),k.bi.reportBI(l.events.rightClickMenu.COPY,a)},pasteComponent:function(){var a=k.bi.getComponentsBIParams(this.props.selectedComponents);b.forEach(a,b.partial(x,"origin",m));var c=k.ui.scroll.getScroll(),d={x:this.props.position.x-k.site.getXPos()+c.scrollLeft,y:this.props.position.y-k.components.layout.get(k.siteSegments.getPagesContainer()).y+c.scrollTop};k.components.paste(d,!0),k.closeRightClickMenu(),k.history.add("paste component via rightClickMenu"),k.bi.reportBI(l.events.rightClickMenu.PASTE,a)},duplicateComponent:function(){var a=k.bi.getComponentsBIParams(this.props.selectedComponents);b.forEach(a,b.partial(x,"origin",m)),k.selectedComponent.duplicate(),k.closeRightClickMenu(),k.history.add("duplicate component via rightClickMenu"),k.bi.reportBI(l.events.rightClickMenu.DUPLICATE,a)},copyDesign:function(){k.selectedComponent.copyStyle(),k.bi.event(l.events.rightClickMenu.COPY_DESIGN,{category:"",component:""})},pasteDesign:function(){k.selectedComponent.pasteStyle(),k.bi.event(l.events.rightClickMenu.PASTE_DESIGN,{category:"",component:""})},lockComponent:function(){k.selectedComponent.lock(),k.closeRightClickMenu(),k.bi.event(l.events.rightClickMenu.LOCK,{category:"",component:""})},removeComponent:function(){var a=k.bi.getComponentsBIParams(this.props.selectedComponents);b.forEach(a,b.partial(x,"removal_method",m)),k.selectedComponent.remove(function(){k.history.add("removed component via rightClickMenu")}),k.closeRightClickMenu(),k.bi.reportBI(l.events.editor.component_removed,a)},toggleShowOnAllPages:function(){k.components.toggleShowOnAllPages(this.props.selectedComponents),k.waitForChangesApplied(function(){var a=k.components.isShowOnAllPages(this.props.selectedComponents);k.bi.event(l.events.rightClickMenu.SHOW_ON_ALL_PAGES,{new_status:a,origin:m})}.bind(this))},toggleShowOnAllStates:function(){k.components.toggleShowOnAllStates(this.props.selectedComponents);var a=this.state.menuItems;a.showOnAllStates.value=!a.showOnAllStates.value,this.setState({menuItems:a})},toggleFixedPosition:function(){k.selectedComponent.toggleFixedPosition(),k.waitForChangesApplied(function(){var a=k.components.is.fixed(this.props.selectedComponents),b=k.components.getType(this.props.selectedComponents[0]);k.bi.event(l.events.rightClickMenu.FIXED_POSITION,{origin:m,new_status:a,component:b})}.bind(this))},handlePinClick:function(){k.closeRightClickMenu();var a=k.components.layout.isPinned(this.props.selectedComponents);h.isOpen(n)?k.pinMode.open(a?"rcm_reopen":"rcm"):a?w(k,this.props.selectedComponents):k.pinMode.open("rcm")},moveForward:function(){k.components.arrangement.moveForward(this.props.selectedComponents),v.call(this,this.props.selectedComponents),k.bi.event(l.events.rightClickMenu.MOVE_FORWARD,{origin:m})},moveBackward:function(){k.components.arrangement.moveBackward(this.props.selectedComponents),v.call(this,this.props.selectedComponents),k.bi.event(l.events.rightClickMenu.MOVE_BACKWARDS,{origin:m})},moveToFront:function(){k.components.arrangement.moveToFront(this.props.selectedComponents),v.call(this,this.props.selectedComponents),k.bi.event(l.events.rightClickMenu.BRING_TO_FRONT,{origin:m})},moveToBack:function(){k.components.arrangement.moveToBack(this.props.selectedComponents),v.call(this,this.props.selectedComponents),k.history.add("component - move to back"),k.bi.event(l.events.rightClickMenu.SEND_TO_BACK,{origin:m})},onArrangeHover:function(){k.bi.event(l.events.rightClickMenu.ARRANGE_HOVER,{origin:m})},onOverlappingItemClick:function(a){k.selection.selectComponentByCompRef(a.component),k.selection.setIsHiddenComponentDraggedNext(!0),k.bi.event(l.events.rightClickMenu.OVERLAPPING_ITEM_CLICK,{component:o(a.component,this.props.selectedComponents)?"selected":"other"})},getDebugItems:function(a){var b=k.components.serialize(a);return q(a.id,b,["structure"])},getExportDebugInfoItem:function(a){return{label:"Debug - export ["+a.id+"] to console",enabled:!0}},exportDebugInfo:function(a){var c=k.components.serialize(a);window.selectedComp=b.cloneDeep(c),j.log.info("Exported ["+a.id+"] to window.selectedComp"),k.closeRightClickMenu()},getApplyToInfoItem:function(){return{label:"RightClick_Menu_Copy_Design_Label",enabled:!0}},openApplyToDialog:function(a){k.bi.event(d.bi.events.applyStyle.COPY_STYLE_RCM_CLICK,{component_id:a.id,component_type:k.components.getType(a)}),k.styles.openApplyStylePanel(a)},getPinLabel:function(){if(h.isOpen(n))return"RightClick_Menu_PinToScreen";var a=k.components.layout.isPinned(k.selection.getSelectedComponents());return a?"RightClick_Menu_UnPinElement":"RightClick_Menu_PinToScreen"},openLayoutTractor:function(){k.panelManager.openComponentPanel("compPanels.dynamicPanels.layoutTractor",{selectedComponents:this.props.selectedComponents}),k.closeRightClickMenu()},applyToAllModes:function(){k.components.modes.applyCurrentToAllModes(k.selection.getSelectedComponents()),k.closeRightClickMenu()},getCustomActions:function(){return f[k.components.getType(this.props.selectedComponents)]||[]},saveStyleToTheme:function(a,c){var d=k.theme.styles.get(c),e=k.theme.styles.get(k.components.style.getId(a)),f=b.assign(e,b.pick(d,["id","type","styleType"]));k.theme.styles.update(c,f),k.components.style.setId(a,c)},render:i})}),define("rEditor/rootComps/panels/openedPanels.rt",["react/addons","lodash","core","uiAnimations","panels"],function(a,b,c,d,e){"use strict";function f(d,e){return a.createElement(c.lazyComponent,b.assign({},{moduleName:d.name,key:d.name,onLoad:this.forceUpdate.bind(this)},this.getPanelProps(d)))}return function(){return a.createElement("div",{className:"opened-panels"},a.createElement.apply(this,[d.panelsAnimation,{},this.props.editorState.helpProps?a.createElement(e.frames.helpPanelFrame,b.assign({},{key:"helpPanel",isMobileEditor:this.props.editorState.isMobileEditor},this.props.editorState.helpProps)):null,b.map(this.props.openPanels,f.bind(this))]))}}),define("rEditor/rootComps/panels/openedPanels",["react","core","lodash","rEditor/rootComps/panels/openedPanels.rt"],function(a,b,c,d){"use strict";function e(a){var c=a.key;return b.lazyComponent.isLoaded(a.name)&&(c+="-loading"),c}return a.createClass({displayName:"openedPanels",propTypes:{editorState:a.PropTypes.object.isRequired,openPanels:a.PropTypes.array},getPanelProps:function(a){return c.assign({},a.props,{editorState:this.props.editorState,key:e(a.props)})},render:d})}),define("rEditor/rootComps/portal/portal.rt",["react/addons","lodash"],function(a,b){"use strict";return function(){return a.createElement("div",{id:"portal"},this.getChildren())}}),define("rEditor/rootComps/portal/portal",["react","lodash","rEditor/rootComps/portal/portal.rt"],function(a,b,c){"use strict";function d(c,d){return b.map(c,function(c){return a.createElement(c.reactClass,b.assign(c.props,{origin:d}))})}return a.createClass({displayName:"Portal (AKA Comps Day-Care)",propTypes:{comps:a.PropTypes.object},getChildren:function(){return b.reduce(this.props.comps,function(a,b,c){return a.concat(d(b,c))},[])},render:c})}),define("rEditor/utils/mouseMoveActions/mouseMoveActionTypes",[],function(){"use strict";return{DRAG:"DRAG",SPACER:"SPACER",ROTATE:"ROTATE",RESIZE:"RESIZE",SECTION_DRAG:"SECTION_DRAG",LASSO:"LASSO",DRAG_ATTEMPT:"DRAG_ATTEMPT"}}),define("rEditor/rootComps/gfpp/gfppButton.rt",["react/addons","lodash","baseUI"],function(a,b,c){"use strict";function d(){var b=this.translateIfNeeded;return a.createElement("li",{className:"gfpp-btn "+this.props.className,onClick:this.onClick},this.props.icon?a.createElement(c.symbol,{key:"gfppButtonIcon",name:this.props.icon}):null,this.props.label?a.createElement("span",{key:"gfppButtonLabel",className:"gfpp-label"},b(this.props.label)):null)}return function(){return a.createElement(c.tooltip,{value:this.props.tooltip,styleType:"small",disabled:!this.props.tooltip,shouldTranslate:this.props.shouldTranslate},d.apply(this,[]))}}),define("rEditor/rootComps/gfpp/gfppButton",["react","lodash","core","util","rEditor/rootComps/gfpp/gfppButton.rt"],function(a,b,c,d,e){"use strict";return a.createClass({displayName:"GFPP Button",propTypes:{selectedComponent:a.PropTypes.arrayOf(a.PropTypes.object).isRequired},mixins:[c.mixins.editorAPIMixin],translateIfNeeded:function(a){return b.isBoolean(this.props.shouldTranslate)&&!this.props.shouldTranslate?a:d.translate(a)},onClick:function(){var a=this.getEditorAPI(),d=this.props.selectedComponent;if(a.components.is.exist(d)){var e=(d.length?b.first(d):d).id,f=a.components.getType(d);this.props.onClick(a,d,c.constants.USER_ACTIONS.ORIGIN.GFPP),a.bi.event(c.bi.events.gfpp.GFPP_BUTTON_CLICK,{action_name:this.props.label||this.props.tooltip,component_id:e,component_type:f,icon:this.props.tooltip})}},render:e})}),define("rEditor/rootComps/gfpp/gfppCustomButton",["react"],function(a){"use strict";return a.createClass({displayName:"gfppCustomButton",render:function(){return a.createElement(this.props.template,this.props)}})}),define("rEditor/rootComps/gfpp/gfppButtonGenerator",["react","lodash","rEditor/rootComps/gfpp/gfppButton","rEditor/rootComps/gfpp/gfppCustomButton"],function(a,b,c,d){"use strict";return a.createClass({displayName:"gfppButtonGenerator",render:function(){return a.createElement(this.props.template?d:c,b.assign({},this.props))}})}),define("rEditor/rootComps/gfpp/gfpp.rt",["react/addons","lodash","uiAnimations","baseUI","rEditor/rootComps/gfpp/gfppButtonGenerator"],function(a,b,c,d,e){"use strict";function f(c,d){return a.createElement(e,b.assign({},{key:c.icon||c.label||c.tooltip,className:b.keys(b.pick({selected:c.isSelected,disabled:c.isDisabled},b.identity)).join(" ")},this.getButtonProps(c)))}return function(){return a.createElement(c.gfppAnimation,{},a.createElement.apply(this,["ul",b.assign({},{id:"gfpp",ref:"gfpp",className:b.keys(b.pick({gfpp:!0},b.identity)).join(" "),key:this.getKey(),onMouseDown:this.stopEventPropagation,onMouseUp:this.stopEventPropagation,onDoubleClick:this.stopEventPropagation,onContextMenu:this.stopEventPropagation,onMouseMove:this.stopEventPropagation,onClick:this.stopEventPropagation},this.getTopLevelProps()),b.map(this.state.mainButtons,f.bind(this))]))}}),define("rEditor/rootComps/gfpp/gfpp",["lodash","react","core","panels","pLoader!santa:utils","rEditor/rootComps/gfpp/gfppModel","rEditor/rootComps/gfpp/gfpp.rt","experiment"],function(a,b,c,d,e,f,g,h){"use strict";function j(){var b=i.slice(0);return h.isOpen("switchLayoutDesignOrder")&&k(b),h.isOpen("exp171")&&!h.isOpen("imageCropFiltersOff")&&(b.splice(a.indexOf(b,"animation"),0,"filters"),b[a.indexOf(b,"aviary")]="crop"),b}function k(b){var c=a.indexOf(b,"layout"),d=a.indexOf(b,"design"),e=b[c];b[c]=b[d],b[d]=e}function l(b,c){var d=a.map(c,function(a){return b[a]});return a.compact(d)}function m(a,b){var c=f.getData(a,b),d=c.mainActions||[],e=c.extraActions||[],g=l(c.presetActions,j()),h=d.concat(g).concat(e);return{mainButtons:h}}function n(b,e){return function(){var f=a.get(b.selection.getSelectedComponentData(),"appPartName"),g=b.selection.getSelectedComponentType(),h={component:f||g,origin:c.constants.BI.HELP.ORIGIN.GFPP,learn_more:!1};d.panelManager.openHelpCenter(e,null,null,h)}}var i=["settings","layout","design","customizeDesign","upgrade","aviary","animation","link","hide","stretch","stretchForColumns","help","pinMode"];return b.createClass({displayName:"GFPP",mixins:[c.mixins.editorAPIMixin],propTypes:{selectedComponent:b.PropTypes.arrayOf(b.PropTypes.object).isRequired},getInitialState:function(){return m(this.getEditorAPI(),this.props.selectedComponent)},componentWillReceiveProps:function(a){this.setState(m(this.getEditorAPI(),a.selectedComponent))},getTopLevelProps:function(){return a.pick(this.props,["style"])},getButtonProps:function(b){return b.isApplied&&a.assign(b,{label:b.label_active||b.label,icon:b.icon_active||b.icon,tooltip:b.tooltip_active||b.tooltip}),b.helpId&&a.isUndefined(b.onClick)&&(b.onClick=n(this.getEditorAPI(),b.helpId)),b.selectedComponent=this.props.selectedComponent,b},getSize:function(){if(this.refs.gfpp){var b=e.domMeasurements.getBoundingRect(this.refs.gfpp.getDOMNode());return a.pick(b,["width","height"])}},stopEventPropagation:function(a){a.stopPropagation()},getKey:function(){return a.first([].concat(this.props.selectedComponent)).id+"_"+a.size([].concat(this.props.selectedComponent))},render:g})}),define("rEditor/rootComps/selectionBox/selectionBoxCommons",["lodash","experiment"],function(a,b){"use strict";function c(b,c,e){for(var f=a.first(c);f&&!d(e,f);)f=b.components.getContainer(f);return f}function d(b,c){return a.some(b,function(a){return a(c)})}function e(a,b){return b&&a.components.layout.isShowOnFixedPosition(b)?"fixed":"absolute"}function f(c,d,f,g){var h=0,i=0;a.size(f)>1&&(h=2,i=2*h);var j=d.bounding,k={position:e(c,f),top:d.bounding.y-g-h,left:d.bounding.x-g-h,width:j.width+i,height:j.height+i};if(b.isOpen("se_editBoxPerformance")){var l="translate3d("+(j.x-g-h)+"px,"+(j.y-g-h)+"px,0)";k.top=0,k.left=0,k.WebkitTransform=l,k.transform=l}return k}return{getPosition:e,getBoundingStyle:f,findFirstContainerMatchingConditions:c}}),define("rEditor/rootComps/selectionBox/controllers/tabsController.rt",["react/addons","lodash"],function(a,b){"use strict";function c(a,b){this.props.onTabClick(a)}function d(d,e){return a.createElement("label",{key:d.id,className:"label-controller tab "+this.getLeftMostClass(e)+" "+b.keys(b.pick({active:d.active},b.identity)).join(" "),onClick:c.bind(this,d,e)},"\n        ",this.getTabLabel(d),"\n    ")}return function(){return a.createElement.apply(this,["div",{className:"tabs-controller "+(this.props.className||"")},b.map(this.getReversedTabs(),d.bind(this))])}}),define("rEditor/rootComps/selectionBox/controllers/tabsController",["lodash","react","util","rEditor/rootComps/selectionBox/controllers/tabsController.rt"],function(a,b,c,d){"use strict";return b.createClass({displayName:"tabsController",propTypes:{tabs:b.PropTypes.arrayOf(b.PropTypes.objectOf({id:b.PropTypes.string.isRequired,label:b.PropTypes.string.isRequired,active:b.PropTypes.bool.isRequired})).isRequired,translate:b.PropTypes.bool,onTabClick:b.PropTypes.func.isRequired},getReversedTabs:function(){return a(this.props.tabs).cloneDeep().reverse()},getLeftMostClass:function(a){return a===this.props.tabs.length-1?"left-most-tab":""},getTabLabel:function(a){return this.props.translate?c.translate(a.label):a.label},render:d})}),define("rEditor/rootComps/selectionBox/controllers/dropDownController.rt",["react/addons","lodash"],function(a,b){"use strict";return function(){return a.createElement("div",{},"Hello RT!")}}),define("rEditor/rootComps/selectionBox/controllers/dropDownController",["react","lodash","rEditor/rootComps/selectionBox/controllers/dropDownController.rt"],function(a,b,c){"use strict";return a.createClass({displayName:"dropDownContoller",render:c})}),define("rEditor/rootComps/selectionBox/controllers/paginationController.rt",["react/addons","lodash"],function(a,b){"use strict";return function(){return a.createElement("div",{className:"pagination-controller "+(this.props.className||"")},a.createElement("span",{className:"arrow prev-arrow",onClick:this.onPrev}),a.createElement("span",{className:"middle-label",onClick:this.onLabelClick},this.getLabel()),a.createElement("span",{className:"arrow next-arrow",onClick:this.onNext}))}}),define("rEditor/rootComps/selectionBox/controllers/paginationController",["react","lodash","core","util","rEditor/rootComps/selectionBox/controllers/paginationController.rt"],function(a,b,c,d,e){"use strict";return a.createClass({displayName:"paginationController",render:e,mixins:[c.mixins.editorAPIMixin,d.translationMixin],propTypes:{label:a.PropTypes.string.isRequired,labelParams:a.PropTypes.object.isRequired,onNext:a.PropTypes.func.isRequired,onPrev:a.PropTypes.func.isRequired,onLabelClick:a.PropTypes.func.isRequired},getLabel:function(){return this.translateTemplate(this.props.label,this.props.labelParams,this.getEditorAPI())},onNext:function(){this.props.onNext()},onPrev:function(){this.props.onPrev()},onLabelClick:function(){this.props.onLabelClick()}})}),define("rEditor/rootComps/selectionBox/navControls.rt",["react/addons","lodash","util","baseUI","rEditor/rootComps/selectionBox/controllers/tabsController","rEditor/rootComps/selectionBox/controllers/dropDownController","rEditor/rootComps/selectionBox/controllers/paginationController"],function(a,b,c,d,e,f,g){"use strict";function h(a,c){var d=b.assign({},a,c);return a.hasOwnProperty("style")&&(d.style=b.defaults(d.style,a.style)),
a.hasOwnProperty("className")&&c.hasOwnProperty("className")&&(d.className=c.className+" "+a.className),d}return function(){return a.createElement("div",{onMouseDown:this.stopEventPropagation,onMouseUp:this.stopEventPropagation,onDoubleClick:this.stopEventPropagation,onContextMenu:this.stopEventPropagation,onMouseMove:this.stopEventPropagation,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,style:this.getCalculatedStyle(),className:"nav-controls"},this.props.navType===d.uiConstants.NAVIGATION_TYPES.TABS?a.createElement(e,h({key:"tabsController",className:this.getControllerClass()},this.props.content)):null,this.props.navType===d.uiConstants.NAVIGATION_TYPES.DROPDOWN?a.createElement(f,{key:"dropDownController",className:this.getControllerClass()}):null,this.props.navType===d.uiConstants.NAVIGATION_TYPES.PAGINATION?a.createElement(g,h({key:"paginationController",className:this.getControllerClass()},this.props.content)):null)}}),define("rEditor/rootComps/selectionBox/navControls",["react","lodash","core","baseUI","uiConstants","rEditor/rootComps/selectionBox/navControls.rt"],function(a,b,c,d,e,f){"use strict";return a.createClass({displayName:"navControls",mixins:[c.mixins.editorAPIMixin],propTypes:{navType:a.PropTypes.oneOf(b.values(d.uiConstants.NAVIGATION_TYPES)),content:a.PropTypes.object.isRequired,style:a.PropTypes.object,onMouseEnterControls:a.PropTypes.func,onMouseLeaveControls:a.PropTypes.func},onMouseEnter:function(){b.isFunction(this.props.onMouseEnterControls)&&this.props.onMouseEnterControls()},onMouseLeave:function(){b.isFunction(this.props.onMouseLeaveControls)&&this.props.onMouseLeaveControls()},stopEventPropagation:function(a){a.stopPropagation()},getControllerClass:function(){return b.get(this.props,"style.top")===e.NAVIGATION_CONTROLS_POS.BOTTOM?"comp-bottom":"comp-top"},getCalculatedStyle:function(){var a={marginLeft:this.props.style&&this.props.style.left||0};return a},render:f})}),define("rEditor/rootComps/selectionBox/focusBox.rt",["react/addons","lodash","rEditor/rootComps/selectionBox/navControls"],function(a,b,c){"use strict";function d(){var e=(this.getFocusedContainerLayout(),this.getNavControlsContent());return a.createElement("div",{className:"focusbox "+b.keys(b.pick({"fade-frame":this.isFrameFaded()},b.identity)).join(" "),style:this.getFocusBoxStyle()},a.createElement(c,{ref:"navControls",style:this.props.navControlsStyle,navType:this.getNavType(),content:e,onMouseEnterControls:this.onMouseEnterControls,onMouseLeaveControls:this.onMouseLeaveControls}),a.createElement("div",{className:"focus-frame"}))}return function(){return d.apply(this,[])}}),define("rEditor/rootComps/selectionBox/focusBox",["react","lodash","core","baseUI","rEditor/rootComps/selectionBox/selectionBoxCommons","experiment","rEditor/rootComps/selectionBox/focusBox.rt"],function(a,b,c,d,e,f,g){"use strict";function i(a,c){return f.isOpen("se_hoverBox")?!b.isEmpty(a.components.modes.getModes(c)):!1}function j(a,c){var d=a.components.modes.getComponentActiveModeIds(c),e=a.components.modes.getModes(c),f={modeId:h,type:"NORMAL"};return b.map([f].concat(e),k.bind(null,d))}function k(a,c){return c.modeId===h?c.label="HOVER_BOX_STATE_REGULAR":"HOVER"===c.type&&(c.label="HOVER_BOX_STATE_HOVER"),c.active=!!a[c.modeId]||c.modeId===h&&b.isEmpty(a),c}function l(a,c,d){var e=a.components.modes.getComponentActiveModeIds(c),f=b.isEmpty(e);e[d.modeId]||d.modeId===h&&f?a.selection.selectComponentByCompRef(c):d.modeId!==h?a.components.modes.activateComponentMode(c,d.modeId):a.components.modes.deactivateAllComponentModes(c)}function m(a,b){var c=j(a,b);return{tabs:c,translate:!0,onTabClick:function(c){return l(a,b,c)}}}var h="REGULAR_MODE_ID";return a.createClass({displayName:"focusBox",mixins:[c.mixins.editorAPIMixin],PropTypes:{focusedContainer:a.PropTypes.object.isRequired,selectedComponents:a.PropTypes.oneOfType([a.PropTypes.object,a.PropTypes.arrayOf(a.PropTypes.object)]).isRequired},getInitialState:function(){return{mouseOverNavControls:!1}},getFocusedContainerLayout:function(){var a=this.getEditorAPI(),b=a.components.layout.getRelativeToScreen(this.props.focusedContainer);return e.getBoundingStyle(a,b,[this.props.focusedContainer],0)},getFocusBoxStyle:function(){var a=this.getFocusedContainerLayout();return"fixed"===a.position&&(a.top+=this.getEditorAPI().editorConfig.topBarHeight),a},isFrameFaded:function(){var a=this.props.focusedContainer.id!==b.first(this.props.selectedComponents).id;return a&&!this.state.mouseOverNavControls},getNavControlsSize:function(){return!!this.refs.navControls},onMouseEnterControls:function(){this.state.mouseOverNavControls||this.setState({mouseOverNavControls:!0})},onMouseLeaveControls:function(){this.state.mouseOverNavControls&&this.setState({mouseOverNavControls:!1})},getNavType:function(){return i(this.getEditorAPI(),this.props.focusedContainer)?d.uiConstants.NAVIGATION_TYPES.TABS:this.getEditorAPI().components.is.focusBoxNavType(this.props.focusedContainer)},getNavControlsContent:function(){var a=this.getEditorAPI(),b=this.props.focusedContainer;return i(a,b)?m(a,b):this.getEditorAPI().components.is.focusBoxNavContent(b)},render:g})}),define("rEditor/utils/mouseMoveActions/baseResize",["lodash","core","rEditor/utils/mouseMoveActions/mouseMoveActionTypes","util"],function(a,b,c,d){"use strict";function t(a){return s[a]}function u(a){return r[a]}function v(a){return{x:a.pageX,y:a.pageY}}function w(b){var c=n.components.getType(b),d=a.has(q,c);return d}function x(b){var c=n.components.getType(b),d=q[c],e=a.isFunction(d)?d(g):!!d,f=a.pick(r,["topRight","topLeft","bottomRight","bottomLeft"]),h=a.includes(f,l);return!i&&h&&e}function y(){return n.components.layout.isPinned(g)?!1:w(g)?x(g):(i||n.components.is.group(g)||n.multiselect.isMultiselect(g))&&n.components.is.proportionallyResizable(g)}function z(a){var b=v(a),c=t(j),d=n.components.layout.getRelativeToScreen(g);m=y(),h=new f.Resize(d,b,c,m),o=n.components.layout.getProportionStructure(g,c)}function A(a){var b=k.getClosestLayoutDistance(n,a,l);Math.abs(b.x)<5&&(l.right?(y()&&a.height&&(a.height+=b.x),a.width+=b.x):l.left&&(y()&&a.height&&(a.height-=b.x),a.x+=b.x,a.width-=b.x)),Math.abs(b.y)<5&&(l.top?(y()&&a.width&&(a.width-=b.y),a.y+=b.y,a.height-=b.y):l.bottom&&(y()&&a.width&&(a.width+=b.y),a.height+=b.y))}function B(a){if(l.right)a.width-=a.width%5;else if(l.left){var b=a.x%5;a.x-=b,a.width+=b}if(l.top){var c=a.y%5;a.y-=c,a.height+=c}else l.bottom&&(a.height-=a.height%5)}function C(a){var b=k.getSnapData(a,l);n.snapData.set(b)}function D(b,c){n=b,g=n.multiselect.getComponentsWhichDontHaveAncestorsInTheArray(c.comps);var d=a.map(g,"id");n.renderPlugins.setCompsToShowOnTop(d),i=c.evt.shiftKey,j=c.directionName,k=new e(n,c.comps),l=u(c.directionName),z(c.evt)}function E(a){var b=v(a);i!==a.shiftKey&&(i=a.shiftKey,z(a));var c=h.getLayout(b);n.getViewTools().snapToEnabled&&0===c.rotationInDegrees&&A(c),m?n.components.layout.updateRelativeToScreenAndPreserveProportions(g,c,o):n.components.layout.updateRelativeToScreen(g,c,!0),n.waitForChangesApplied(function(){if(k){var b=n.components.layout.getRelativeToScreen(g);a.altKey?B(b):n.getViewTools().snapToEnabled&&0===b.rotationInDegrees&&C(b)}})}function F(){if(k=null,n.snapData.clear(),n.renderPlugins.setCompsToShowOnTop(null),n.history.add("Resize component"),n.components.layout.isPinned(g)){var a=n.components.layout.getDock(g),b=d.pinModeUtils.getDockedDirection(a),c=n.components.layout.get(g);d.pinModeUtils.checkSizeRestrictions(b,c)&&n.openPinModeSizeRestrictionPanel({state:"on resize",title:"Notification_Box_PinToScreen_ElementTooLarge_postPin_Title",content:"Notification_Box_PinToScreen_ElementTooLarge_postPin_Message"})}}var g,h,i,j,k,l,m,n,o,e=b.utils.SnapToHandler,f=b.utils.layoutTransitionsUtil,p=["fill","fitWidth"],q={"wysiwyg.viewer.components.WPhoto":function(b){var c=n.components.properties.get(b);return a.includes(p,c.displayMode)},"wysiwyg.viewer.components.SiteButton":!0,"wysiwyg.common.components.imagebutton.viewer.ImageButton":!0,"wysiwyg.viewer.components.ClipArt":!0,"wysiwyg.viewer.components.svgshape.SvgShape":!0,"wysiwyg.viewer.components.MatrixGallery":!0,"tpa.viewer.components.Thumbnails":!0,"wysiwyg.viewer.components.PaginatedGridGallery":!0,"wysiwyg.viewer.components.SlideShowGallery":!0,"wysiwyg.viewer.components.Video":!0,"wysiwyg.viewer.components.mobile.TinyMenu":!0},r={right:{right:!0},left:{left:!0},top:{top:!0},bottom:{bottom:!0},topRight:{top:!0,right:!0},topLeft:{top:!0,left:!0},bottomRight:{bottom:!0,right:!0},bottomLeft:{bottom:!0,left:!0}},s={right:{x:1,y:0},left:{x:-1,y:0},top:{x:0,y:-1},bottom:{x:0,y:1},topRight:{x:1,y:-1},topLeft:{x:-1,y:-1},bottomRight:{x:1,y:1},bottomLeft:{x:-1,y:1}};return{start:D,on:E,end:F,type:c.RESIZE}}),define("rEditor/utils/mouseMoveActions/baseResizeAndPush",["lodash","core","rEditor/utils/mouseMoveActions/mouseMoveActionTypes"],function(a,b,c){"use strict";function h(a){return{x:a.pageX,y:a.pageY}}function i(b,c){f=b,e=c.comps,f.selection.setIsMouseUpSelectionEnabled(!1);var i=a.map(e,"id");f.renderPlugins.setCompsToShowOnTop(i);var j=h(c.evt),k=f.components.layout.getRelativeToScreen(e);g=new d.Resize(k,j,{x:0,y:1},!1)}function j(b){var c=h(b),d=g.getLayout(c),i=f.components.layout.getMinDimensions(e);d.bounding=f.utils.getBoundingLayout(d),d.height>=i.height&&f.components.layout.updateRelativeToScreenAndAdjustLayout(e,a.pick(d,["height","width"]),!0)}function k(){f.renderPlugins.setCompsToShowOnTop(null),f.history.add("Resize component")}var e,f,g,d=b.utils.layoutTransitionsUtil;return{start:i,on:j,end:k,type:c.RESIZE}}),define("rEditor/utils/mouseMoveActions/baseRotate",["lodash","core","rEditor/utils/mouseMoveActions/mouseMoveActionTypes"],function(a,b,c){"use strict";function m(a){n(a),i.components.layout.updateRelativeToScreen(h,a,!0)}function n(a){a.rotationInDegrees<0&&(a.rotationInDegrees+=360);var b=a.rotationInDegrees%k;j>=b?a.rotationInDegrees-=b:b>=k-j&&(a.rotationInDegrees+=k-b)}function o(a){var b=Math.floor(0>f?f+360:f),c=Math.floor(a.rotationInDegrees<0?a.rotationInDegrees+360:a.rotationInDegrees),d=c-b,e=Math.floor(d/l);a.rotationInDegrees=f+e*l,i.components.layout.updateRelativeToScreen(h,a,!0)}function p(b,c){h=c.comps,i=b,i.selection.setIsMouseUpSelectionEnabled(!1);var e=a.map(h,"id");i.renderPlugins.setCompsToShowOnTop(e);var f=i.components.layout.getRelativeToScreen(h),j=a.defaults({y:f.y+i.editorConfig.editingAreaLayout.top,x:f.x+i.editorConfig.editingAreaLayout.left},f),k={x:c.evt.pageX,y:c.evt.pageY};g=new d.Rotate(f,k,j)}function q(a){var b={x:a.pageX,y:a.pageY},c=g.getLayout(b);a.shiftKey?(e||(f=i.components.layout.getRelativeToScreen(h).rotationInDegrees),o(c)):m(c),e=a.shiftKey}function r(){i.waitForChangesApplied(function(){var a=i.components.layout.get(h).rotationInDegrees;i.bi.event(b.bi.events.editBox.ROTATE_COMPONENT,{value:parseInt(a,10),origin:"editBox"})}),i.renderPlugins.setCompsToShowOnTop(null),i.history.add("Rotate component")}var f,g,h,i,d=b.utils.layoutTransitionsUtil,e=!1,j=3,k=90,l=15;return{start:p,on:q,end:r,type:c.ROTATE}}),define("rEditor/utils/mouseMoveActions/baseDoubleClick",["lodash","core","gfppData"],function(a,b,c){"use strict";function d(d,e){var f=d.components.getType(e.comp),g=d.pluginService.getPlugin(d.pluginService.pluginConstants.DOUBLE_CLICK,f);if(a.isFunction(g))g(d,e);else{var h=c.getComponentMainActionClick(d,e.comp);a.isFunction(h)&&h(d,e.comp,b.constants.USER_ACTIONS.ORIGIN.DOUBLE_CLICK)}}return d}),define("rEditor/utils/mouseMoveActions/baseDragAndPush",["lodash","core","rEditor/utils/mouseMoveActions/mouseMoveActionTypes"],function(a,b,c){"use strict";function k(a,b){var c=b.x+b.width<=a.x,d=b.x>=a.x+a.width,e=!(c||d);return e&&b.y+b.height<=a.y}function l(b){var c=g.components.getSiblings(f),d=a(c).map(function(a){return g.components.layout.getRelativeToScreen(a)}).filter(function(a){return k(b,a)}).value();if(0===d.length)return 0;var e=a.max(d,function(a){return a.y+a.height});return e.y+e.height}function m(a){var b=g.components.getContainer(f),c=g.components.layout.getRelativeToScreen(b),d=l(a);return Math.max(d,c.y)}function n(b,c){g=b,f=c.comps,j=c.onDragAndPushEnd;var h=a.map(f,"id");g.renderPlugins.setCompsToShowOnTop(h);var k=a.omit(g.components.layout.getRelativeToScreen(f),"bounding"),l=a.map(f,function(b){return a.omit(g.components.layout.getRelativeToScreen(b),"bounding")});i=m(k);var n={x:c.evt.pageX,y:c.evt.pageY};e=new d.Drag(k,n,l)}function o(b){var c={x:b.pageX,y:b.pageY},d=e.getLayout(c);d.y=Math.max(d.y,i),h=e.getBoundComponentLayouts(d);for(var j=0;j<f.length;j++)g.components.layout.updateRelativeToScreenAndAdjustLayout(f[j],a.pick(h[j],"y"))}function p(){if(h){for(var b=0;b<f.length;b++)g.components.layout.updateRelativeToScreen(f[b],a.pick(h[b],"y"));h=null}g.renderPlugins.setCompsToShowOnTop(null),a.isFunction(j)&&j()}var e,f,g,h,j,d=b.utils.layoutTransitionsUtil,i=0;return{start:n,on:o,end:p,type:c.DRAG}}),define("rEditor/rootComps/selectionBox/groupSelectionFrame.rt",["react/addons","lodash"],function(a,b){"use strict";return function(){return a.createElement("div",{},this.ancestorToStyle?a.createElement("div",{key:"markContainer",className:b.keys(b.pick({layout:!0,"secondary-component":!0},b.identity)).join(" "),style:this.boundingContainerStyle}):null)}}),define("rEditor/rootComps/selectionBox/groupSelectionFrame",["react","lodash","core","rEditor/rootComps/selectionBox/selectionBoxCommons","rEditor/rootComps/selectionBox/groupSelectionFrame.rt"],function(a,b,c,d,e){"use strict";function f(a,b){var c=a.multiselect.isMultiselect(b);return!c&&a.components.is.groupedComponent(b)}function g(a,b){return f(a,b)?d.findFirstContainerMatchingConditions(a,b,[a.components.is.group]):null}return a.createClass({displayName:"groupSelectionFrame",mixins:[c.mixins.editorAPIMixin],PropTypes:{selectedComponents:a.PropTypes.oneOfType([a.PropTypes.object,a.PropTypes.arrayOf(a.PropTypes.object)]).isRequired},componentWillUpdate:function(){var a=this.getEditorAPI();if(this.ancestorToStyle=g(a,this.props.selectedComponents),this.ancestorToStyle){var b=a.components.layout.getRelativeToScreen(this.ancestorToStyle);this.boundingContainerStyle=d.getBoundingStyle(a,b,this.props.selectedComponents,1)}},render:e})}),define("rEditor/rootComps/selectionBox/editBox.rt",["react/addons","lodash","core","baseUI","util","rEditor/rootComps/selectionBox/groupSelectionFrame","rEditor/rootComps/selectionBox/navControls"],function(a,b,c,d,e,f,g){"use strict";function h(c,d,e,f,g,h){return a.createElement("div",{className:b.keys(b.pick({layout:!0,"secondary-component":e,"show-on-all-pages":this.isCompShowOnAllPages(g)},b.identity)).join(" "),key:h,style:this.getSubComponentStyle(g)})}function i(b,c,d,e){var f=this.getPaddingStyle();return a.createElement("div",{className:"padding-wrapper",key:"paddingWrapper",style:f.wrapper},a.createElement("div",{className:"left-padding",style:f.left},a.createElement("div",{className:"min-indicator-margin",style:{top:this.getMarginLabelTop()}},this.possibleLayoutActionsMap.resizable&&this.isHorizontallyStretchedToScreen?a.createElement("span",{className:"indicator resizing",key:"resizeBoundingStyleLeft"},this.getMarginValue("left"),"\n                "):null)),a.createElement("div",{className:"right-padding",style:f.right},a.createElement("div",{className:"min-indicator-margin",style:this.layout.x<56?{right:0,position:"absolute",top:this.getMarginLabelTop()}:{top:this.getMarginLabelTop()}},this.possibleLayoutActionsMap.resizable&&this.isHorizontallyStretchedToScreen?a.createElement("span",{className:"indicator resizing",key:"resizeBoundingStyleRight"},this.getMarginValue("right"),"\n                "):null)))}function j(c,e,f,g){var h=this.getComponentData(this.props.selectedComponents);return a.createElement(d.tooltip,{id:this.getLinkedToTooltipId(h),key:this.getLinkedToTooltipId(h),value:this.getLinkDescriptionFromData(h),alignment:"right",delay:"500",width:"260px",marginsFromElement:9,disabled:!this.shouldShowLinkedToTooltip(e,h),shouldTranslate:!1,openTriggers:[d.uiConstants.TOOLTIP.TRIGGERS.IMMEDIATE,d.uiConstants.TOOLTIP.TRIGGERS.MOUSE_ENTER]},a.createElement("div",{className:b.keys(b.pick({layout:!0,"secondary-component":e,"show-on-all-pages":this.isCompShowOnAllPages(this.props.selectedComponents)},b.identity)).join(" "),style:e?this.getBoundingStyle():this.getLayoutStyle()},!this.isHorizontallyStretchedToScreen&&c.top&&c.left?a.createElement("span",{className:this.getResizeHandleCursorClass("TOP_LEFT")+" handle handle-resize-corner top left","data-direction-name":"topLeft",onMouseDown:this.startResize,key:"resizeTopLeft"}):null,c.top?a.createElement("span",{className:this.getResizeHandleCursorClass("TOP")+" handle handle-resize-side top","data-direction-name":"top",onMouseDown:this.startResize,key:"resizeTopCenter"}):null,!this.isHorizontallyStretchedToScreen&&c.top&&c.right?a.createElement("span",{className:this.getResizeHandleCursorClass("TOP_RIGHT")+" handle handle-resize-corner top right","data-direction-name":"topRight",onMouseDown:this.startResize,key:"resizeTopRight"}):null,c.right?a.createElement("span",{className:this.getResizeHandleCursorClass("RIGHT")+" handle handle-resize-side right","data-direction-name":"right",onMouseDown:this.startResize,key:"resizeMiddleRight"}):null,!this.isHorizontallyStretchedToScreen&&c.bottom&&c.right?a.createElement("span",{className:this.getResizeHandleCursorClass("BOTTOM_RIGHT")+" handle handle-resize-corner bottom right","data-direction-name":"bottomRight",onMouseDown:this.startResize,key:"resizeBottomRight"}):null,c.bottom?a.createElement("span",{className:this.getResizeHandleCursorClass("BOTTOM")+" handle handle-resize-side bottom","data-direction-name":"bottom",onMouseDown:this.startResize,key:"resizeBottomCenter"}):null,!this.isHorizontallyStretchedToScreen&&c.bottom&&c.left?a.createElement("span",{className:this.getResizeHandleCursorClass("BOTTOM_LEFT")+" handle handle-resize-corner bottom left","data-direction-name":"bottomLeft",onMouseDown:this.startResize,key:"resizeBottomLeft"}):null,c.left?a.createElement("span",{className:this.getResizeHandleCursorClass("LEFT")+" handle handle-resize-side left","data-direction-name":"left",onMouseDown:this.startResize,key:"resizeMiddleLeft"}):null,c.rotate?a.createElement("span",{className:"handle handle-rotate",onMouseDown:this.startRotate,key:"rotate",ref:"rotate"},a.createElement(d.symbol,{name:"rotate"})):null,c.rotate&&this.isComponentRotated()?a.createElement("span",{className:"handle handle-rotate-cancel",onMouseDown:this.cancelRotation,style:{transform:"rotate("+(360-this.layout.rotationInDegrees)+"deg) translate3d(0,0,0)"},key:"cancelRotate",ref:"cancelRotate"},a.createElement(d.symbol,{name:"rotateCancel"})):null,c.dragAndPush&&!this.isComponentRotated()?a.createElement(d.tooltip,{id:"dragWithAnchorsVerticalTooltip",key:"dragWithAnchorsVerticalTooltip",value:"ONSTAGE_DragHandle_Tooltip",alignment:"top",openTriggers:[],closeTriggers:[]},a.createElement("span",{className:"handle handle-push handle-drag-with-anchors",onMouseEnter:this.showDragWithAnchorsKnobTooltip,onMouseLeave:this.hideDragWithAnchorsKnobTooltip,onMouseDown:this.startDragAndPush,key:"dragWithAnchorsVertical"},a.createElement(d.symbol,{name:"pushAndEnforceAnchors"}))):null,!c.resizeAndPush||this.isComponentRotated()||f?null:a.createElement(d.tooltip,{id:"resizeWithAnchorsBottomTooltip",key:"resizeWithAnchorsBottomTooltip",value:"OnStage_StretchHandle_Tooltip",alignment:"bottom",openTriggers:[],closeTriggers:[]},a.createElement("span",{className:"handle handle-push handle-resize-with-anchors",onMouseEnter:this.showResizeWithAnchorsKnobTooltip,onMouseLeave:this.hideResizeWithAnchorsKnobTooltip,onMouseDown:this.startResizeAndPush,key:"resizeWithAnchorsBottom"},a.createElement(d.symbol,{name:"resizeAndEnforceAnchors"}))),this.possibleLayoutActionsMap.rotatable?a.createElement("span",{className:"indicator",style:{transform:"rotate("+(360-this.layout.rotationInDegrees)+"deg) translate3d(0,0,0)"},key:"rotationIndicator"},Math.floor(this.layout.rotationInDegrees),"\n        "):null))}function k(){var c=this.getAllowedKnobsMap(),g=this.isMultiselect(),k=this.getEditorAPI().components.is.group(this.props.selectedComponents),l=e.translate;return a.createElement.apply(this,["div",{className:b.keys(b.pick(this.getEditBoxClasses(),b.identity)).join(" "),onContextMenu:this.props.onContextMenu,onDoubleClick:this.onDoubleClick},this.hasSubComponents()?b.map(this.getSubComponents(),h.bind(this,c,g,k,l)):null,a.createElement(f,{selectedComponents:this.props.selectedComponents}),this.shouldShowPadding()?i.apply(this,[c,g,k,l]):null,a.createElement("div",{className:b.keys(b.pick({bounding:!0,"show-on-all-pages":this.isCompShowOnAllPages(this.props.selectedComponents)},b.identity)).join(" "),style:this.getBoundingStyle()},this.possibleLayoutActionsMap.movable?a.createElement("span",{className:"indicator dragging",key:"dragBoundingStyle"}," x: ",parseInt(this.relativeToStructureLayout.bounding.x,10),", y: ",parseInt(this.relativeToStructureLayout.bounding.y,10),"\n        "):null,this.possibleLayoutActionsMap.resizable&&!this.isHorizontallyStretchedToScreen?a.createElement("span",{className:"indicator resizing",key:"resizeBoundingStyle"}," W: ",parseInt(this.relativeToStructureLayout.bounding.width,10),", H: ",parseInt(this.relativeToStructureLayout.bounding.height,10),"\n        "):null),j.apply(this,[c,g,k,l]),this.canBeMovedToFooter()?a.createElement("span",{className:"move-to-footer",key:"moveToFooter",style:this.getMoveToFooterStyle(),onMouseDown:this.moveToFooter},l("OnStage_MoveToFooter_Button"),"\n\n            ",a.createElement(d.symbol,{name:"moveToFooterArrow"})):null])}return function(){return k.apply(this,[])}}),define("rEditor/rootComps/selectionBox/editBox",["react","lodash","core","baseUI","experiment","rEditor/utils/mouseMoveActions/baseResize","rEditor/utils/mouseMoveActions/baseResizeAndPush","rEditor/utils/mouseMoveActions/baseRotate","rEditor/utils/mouseMoveActions/baseDoubleClick","rEditor/utils/mouseMoveActions/baseDragAndPush","util","rEditor/rootComps/selectionBox/selectionBoxCommons","rEditor/rootComps/selectionBox/editBox.rt","rEditor/utils/mouseMoveActions/mouseMoveActionTypes"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";function t(a){return b.some(a,function(a){return b.includes(o,a.id)})}function u(a,b,d){c.utils.mouseScaleHandler.fitMouseCoordinatesToScale(a,b,d)}function v(a,b){var c=a.components.layout.getRelativeToScreen(b);return a.components.layout.isShowOnFixedPosition(b)&&(c.y+=a.editorConfig.editingAreaLayout.top,c.bounding.y+=a.editorConfig.editingAreaLayout.top,c.x+=a.editorConfig.editingAreaLayout.left,c.bounding.x+=a.editorConfig.editingAreaLayout.left),c}function w(a,b,c,d){if(a.isMobileEditor()||a.isCurrentPageLandingPage()||a.components.layout.isShowOnFixedPosition(b))return!1;var e=a.siteSegments.getPagesContainer(),f=a.components.layout.getRelativeToScreen(e),g=f.y+f.height-(c.bounding.y+c.bounding.height),h=g>=0&&n>=g;return h&&!d&&a.components.canShowOnAllPages(b)&&!a.text.isEditingText()}function x(a,b){return a.getCompRestrictions(a.components.is.page(b)?a.siteSegments.getPagesContainer():b)}function y(a){return!a||!b.isUndefined(a.left.px)&&0!==a.left.px?!1:0===a.left.vw}var n=21,o=["SITE_HEADER","SITE_FOOTE/**/R"],p=800,q={px:"px",pct:"%",vw:"%"},r=["TOP_LEFT","TOP","TOP_RIGHT","RIGHT","BOTTOM_RIGHT","BOTTOM","BOTTOM_LEFT","LEFT"],s=["top-left-resize-cursor","top-resize-cursor","top-right-resize-cursor","right-resize-cursor","bottom-right-resize-cursor","bottom-resize-cursor","bottom-left-resize-cursor","left-resize-cursor"];return a.createClass({displayName:"editBox",mixins:[c.mixins.editorAPIMixin],propTypes:{selectedComponents:a.PropTypes.oneOfType([a.PropTypes.object,a.PropTypes.arrayOf(a.PropTypes.object)]).isRequired,focusedContainer:a.PropTypes.object,isPinMode:a.PropTypes.bool,isDim:a.PropTypes.bool,isResizing:a.PropTypes.bool,isDragging:a.PropTypes.bool,isRotating:a.PropTypes.bool},prepareData:function(a){var b=this.getEditorAPI();this.layout=v.call(this,b,a.selectedComponents),this.relativeToStructureLayout=b.components.layout.getRelativeToStructure(a.selectedComponents),this.isShowOnAllPages=b.components.isShowOnAllPages(a.selectedComponents),this.possibleLayoutActionsMap=x(b,a.selectedComponents),this.isHorizontallyStretchedToScreen=b.components.layout.isHorizontallyStretchedToScreen(this.props.selectedComponents)},componentWillMount:function(){this.prepareData(this.props)},getEditBoxClasses:function(){return{"edit-box":!0,"edit-box-for-pin-mode":this.props.isPinMode,"edit-box-dim":this.props.isDim,movable:this.possibleLayoutActionsMap.horizontallyMovable||this.possibleLayoutActionsMap.verticallyMovable,"show-move-to-footer-button":this.shouldShowMoveToFooterButton,horizontallyStretched:this.isHorizontallyStretchedToScreen,"full-stretched":this.isHorizontallyStretchedToScreen&&y(this.layout.docked),dragging:this.props.isDragging,resizing:this.props.isResizing,rotating:this.props.isRotating,"small-width-component":this.layout.width<=50,"multi-select":this.isMultiselect()}},getLayoutStyle:function(a){a=a||this.layout;var b="rotate("+a.rotationInDegrees+"deg)",c={position:l.getPosition(this.getEditorAPI(),this.props.selectedComponents),top:a.y-1,left:a.x-1,width:a.width,height:a.height,transform:b,WebkitTransform:b};if(e.isOpen("se_editBoxPerformance")){var d="translate3d("+(a.x-1)+"px,"+(a.y-1)+"px,0) "+b;c.left=0,c.top=0,c.transform=d,c.WebkitTransform=d}return c},isComponentRotated:function(){return 0!==this.layout.rotationInDegrees},getMoveToFooterStyle:function(a){a=a||this.layout;var b=a.bounding.y+a.bounding.height,c=a.bounding.x+a.bounding.width/2;return{top:b-14,left:c}},getBoundingStyle:function(a){return l.getBoundingStyle(this.getEditorAPI(),a||this.layout,this.props.selectedComponents,1)},shouldShowPadding:function(){var a=!e.isOpen("se_screenWidthOff")&&e.isOpen("exp171"),b=a&&e.isOpen("se_screenWidthEditBox");return b&&this.isHorizontallyStretchedToScreen},getPaddingStyle:function(){var a=this.getEditorAPI().components.layout.isShowOnFixedPosition(this.props.selectedComponents)?"fixed":"absolute",b={top:this.layout.y-1,height:this.layout.height+2,position:a},c={top:0,bottom:0,left:0,width:this.layout.x},d={top:0,bottom:0,left:this.layout.x+this.layout.width,right:0};return{wrapper:b,left:c,right:d}},componentWillReceiveProps:function(a){this.prepareData(a);var b=this.getEditorAPI();this.props.isResizing||this.props.isRotating||this.props.isPinMode||!b.utils.isSameRef(this.props.selectedComponents,a.selectedComponents)?this.shouldShowMoveToFooterButton=!1:this.props.isDragging&&(this.shouldShowMoveToFooterButton=w(b,a.selectedComponents,this.layout,this.isShowOnAllPages))},getResizeHandleCursorClass:function(a){var c=b.indexOf(r,a),d=this.layout.rotationInDegrees+22.5;d>=360&&(d-=360);var e=Math.floor(d/45),f=c+e;f>=s.length&&(f-=s.length);var g=s[f];return g},getAllowedKnobsMap:function(){var a=this.getEditorAPI(),c=this.props.selectedComponents,d=this.possibleLayoutActionsMap,e=a.components.layout.RESIZE_SIDES;return{top:b.includes(d.resizeableSides,e.TOP)&&!t(c),bottom:b.includes(d.resizeableSides,e.BOTTOM)&&!t(c),left:b.includes(d.resizeableSides,e.LEFT),right:b.includes(d.resizeableSides,e.RIGHT),dragAndPush:a.multiselect.containsSiblingsOnly(c)&&(d.verticallyMovable||d.canMoveUp)&&!a.components.layout.isPinned(c),resizeAndPush:!a.multiselect.isMultiselect(c)&&d.verticallyResizable&&!a.components.layout.isPinned(c),rotate:d.rotatable&&!a.components.layout.isPinned(c)}},startResize:function(a){var d=this.getEditorAPI();u(d,a,this.props.siteScale);var e=a.target.getAttribute("data-direction-name");d.registerMouseMoveAction(f,{evt:b.clone(a),directionName:e,comps:this.props.selectedComponents});var g=d.multiselect.isMultiselect(this.props.selectedComponents)?"multiselect":d.getComponentType(this.props.selectedComponents);d.bi.event(c.bi.events.editBox.RESIZE,{origin:"editBox",handle_value:e,component_type:g}),a.stopPropagation()},startRotate:function(a){var c=this.getEditorAPI();u(c,a,this.props.siteScale),this.getEditorAPI().registerMouseMoveAction(h,{evt:b.clone(a),comps:this.props.selectedComponents}),a.stopPropagation()},cancelRotation:function(a){var b=this.getEditorAPI();u(b,a,this.props.siteScale),b.selection.setIsMouseUpSelectionEnabled(!1),b.components.layout.update(this.props.selectedComponents,{rotationInDegrees:0}),b.bi.event(c.bi.events.editBox.CANCEL_ROTATE_COMPONENT),b.history.add("Rotation canceled"),a.stopPropagation()},canBeMovedToFooter:function(){var a=this.getEditorAPI(),b=!a.components.is.groupedComponent(this.props.selectedComponents),c=a.multiselect.areComponentsOfSamePage(this.props.selectedComponents);return b&&c},startDragAndPush:function(a){var d=this.getEditorAPI();u(d,a,this.props.siteScale);var e=d.components.is.page(this.props.selectedComponents)?[d.siteSegments.getPagesContainer()]:d.multiselect.getComponentsWhichDontHaveAncestorsInTheArray(this.props.selectedComponents);d.registerMouseMoveAction(j,{evt:b.clone(a),comps:e}),d.bi.event(c.bi.events.editBox.DRAG_BY_HANDLE,{component_type:d.getComponentType(this.props.selectedComponents)}),this.hideKnobTooltip("dragWithAnchorsVerticalTooltip"),a.stopPropagation()},startResizeAndPush:function(a){var d=this.getEditorAPI();u(d,a,this.props.siteScale),d.registerMouseMoveAction(g,{evt:b.clone(a),comps:this.props.selectedComponents}),d.bi.event(c.bi.events.editBox.RESIZE_BY_HANDLE,{component_type:d.getComponentType(this.props.selectedComponents)}),this.hideKnobTooltip("resizeWithAnchorsBottomTooltip"),a.stopPropagation()},onDoubleClick:function(a){var b=this.getEditorAPI();if(u(b,a,this.props.siteScale),!b.selection.isMultiSelectKeyPressed(a)){var c={evt:a,comp:this.props.selectedComponents};i(b,c)}},showKnobTooltip:function(a){this.props.isResizing||this.props.isDragging||(this.showTooltipTimeout=setTimeout(function(){d.tooltipManager.show(a)},p))},hideKnobTooltip:function(a){this.showTooltipTimeout&&(clearTimeout(this.showTooltipTimeout),this.showTooltipTimeout=null),d.tooltipManager.hide(a)},showDragWithAnchorsKnobTooltip:function(){this.showKnobTooltip("dragWithAnchorsVerticalTooltip")},showResizeWithAnchorsKnobTooltip:function(){this.showKnobTooltip("resizeWithAnchorsBottomTooltip")},hideDragWithAnchorsKnobTooltip:function(){this.hideKnobTooltip("dragWithAnchorsVerticalTooltip")},hideResizeWithAnchorsKnobTooltip:function(){this.hideKnobTooltip("resizeWithAnchorsBottomTooltip")},moveToFooter:function(a){var b=this.getEditorAPI();u(b,a,this.props.siteScale);var d=b.multiselect.getComponentsWhichDontHaveAncestorsInTheArray(this.props.selectedComponents);b.components.moveToFooter(d),b.bi.event(c.bi.events.editBox.MOVE_TO_FOOTER,{component_type:b.getComponentType(this.props.selectedComponents)}),this.shouldShowMoveToFooterButton=!1,a.stopPropagation()},hasSubComponents:function(){return this.getEditorAPI().components.is.group(this.props.selectedComponents)||this.isColumnsContainer()||this.isMultiselect()},isColumnsContainer:function(){var a="wysiwyg.viewer.components.StripColumnsContainer",b=this.props.selectedComponents;return this.getEditorAPI().components.getType(b)===a},getSubComponentStyle:function(a){var b=v.call(this,this.getEditorAPI(),a);return this.getLayoutStyle(b)},getSubComponents:function(){var a=this.getEditorAPI();return this.isMultiselect()?this.props.selectedComponents:a.components.getChildren(this.props.selectedComponents)},isCompShowOnAllPages:function(a){return this.getEditorAPI().components.isShowOnAllPages(a)||e.isOpen("boxSlideShow")&&this.getEditorAPI().components.isShownOnAllStates(a)},isMultiselect:function(){return this.getEditorAPI().multiselect.isMultiselect(this.props.selectedComponents)},getRotateKnobRect:function(){return this.layout.rotationInDegrees?this.refs.cancelRotate&&this.refs.cancelRotate.getDOMNode().getBoundingClientRect():this.refs.rotate&&this.refs.rotate.getDOMNode().getBoundingClientRect();
},doesAncestorHaveStates:function(){return!!this.getAncestorCompWithStates()},getAncestorCompWithModes:function(){if(this.isMultiselect())return null;for(var a=this.getEditorAPI(),c=b.first([].concat(this.props.selectedComponents));c&&!a.components.modes.getModes(c);)c=a.components.getContainer(c);return c},getMarginLabelTop:function(){return this.layout.height/2-30},getComponentData:function(a){var c=this.getEditorAPI(),d=b.first(a);return c.components.data.get(d)},getLinkedToTooltipId:function(a){return a?"linkedTo-"+a.id:"linkedTo"},getLinkDescriptionFromData:function(b){if(!b)return"";var c=k.translate("mobile_link_notification_tooltip"),e=k.link.getLinkValueAsString(this.getEditorAPI(),b.link);return a.createElement(d.popoverTemplates.iconAndText,{text:c+" "+e,icon:"mobileCompWithLink",shouldTranslate:!1})},shouldShowLinkedToTooltip:function(a,b){var c=this.getEditorAPI();return c.viewMode.get()!==c.viewMode.VIEW_MODES.MOBILE?!1:this.props.isDragging||this.props.isResizing||this.props.isRotating?!1:a?!1:b?!!b.link:!1},getMarginValue:function(a){var b=this.layout.docked&&this.layout.docked[a].px>=0?"px":"vw";return this.layout.docked&&this.layout.docked[a][b]+q[b]},render:m})}),define("rEditor/rootComps/compControls/compControls.rt",["react/addons","lodash","rEditor/rootComps/gfpp/gfpp","rEditor/rootComps/selectionBox/focusBox","rEditor/rootComps/selectionBox/editBox","core"],function(a,b,c,d,e,f){"use strict";return function(){return a.createElement("div",{style:{visibility:1===this.props.siteScale?"visible":"hidden"},onMouseEnter:this.props.clearHoverBox},this.props.panel?a.createElement(f.lazyComponent,b.assign({},{ref:"compPanel",moduleName:this.props.panel.name,key:f.lazyComponent.isLoaded(this.props.panel.name)?this.props.panel.name:"loading",onLoad:this.forceUpdate.bind(this)},this.getPanelProps())):null,this.getColumnsContainer()?a.createElement(f.lazyComponent,b.assign({},{moduleName:"columnsControls",key:"columnsControls"},this.getColumnsControlsProps())):null,this.shouldShowFocusBox()?a.createElement(d,{key:"focusBox",ref:"focusBox",navControlsStyle:this.state.navControlsStyle,focusedContainer:this.props.focusedContainer,selectedComponents:this.props.selectedComponents}):null,this.shouldShowAttachFocusBox()?a.createElement(d,{key:"attachFocusBox",navControlsStyle:this.state.attachCandidateNavControlsStyle,focusedContainer:this.props.attachCandidate,selectedComponents:this.props.selectedComponents}):null,this.shouldRenderEditBox()?a.createElement(e,{ref:"editBox",key:"editBox",isDragging:this.props.isDragging,isResizing:this.props.isResizing,isRotating:this.props.isRotating,isPinMode:this.props.isPinMode,isDim:this.isDesignPanelOpen(),selectedComponents:this.props.selectedComponents,focusedContainer:this.props.focusedContainer,performingMouseMoveAction:this.props.performingMouseMoveAction,onContextMenu:this.props.onContextMenu,siteScale:this.props.siteScale}):null,this.shouldShowGfpp()?a.createElement(c,{key:"gfpp",ref:"gfpp",style:this.state.gfppStyle,selectedComponent:this.props.selectedComponents}):null)}}),define("rEditor/rootComps/compControls/compControls",["react","lodash","core","jquery","uiConstants","pLoader!santa:utils","experiment","rEditor/rootComps/compControls/compControls.rt"],function(a,b,c,d,e,f,g,h){"use strict";function n(a,b,c){return c=c||0,Math.abs(a-b)<=c}function o(a,b){return Math.ceil(a-b+l)}function p(a,b){if(!b)return m;var c={top:o(a.y,b.top),bottom:o(b.bottom,a.y+a.height),left:o(a.x,b.left),right:o(b.right,a.x+a.width)};return c}function q(a){var b=a.siteSegments.getPagesContainer();return a.components.layout.getRelativeToScreen(b).x}function r(a,b){return a.x<=0&&a.width>=b}function s(a,c){var d=!b.isEqual(a.hoveredComp,c.hoveredComp),e=!b.isEqual(a.selectedComponents,c.selectedComponents),f=!c.performingMouseMoveAction||a.performingMouseMoveAction!==c.performingMouseMoveAction;return f&&(!d||e)}function t(a,b,d,f,g){var h=!b.fixedPosition,i=c.utils.stageUtils.getViewPort(h,d);return f&&a.height>b.height+2*e.VIEWPORT_VERTICAL_MARGINS&&(i.y=Math.max(i.y,a.y+e.VIEWPORT_VERTICAL_MARGINS),i.height=Math.min(i.height,a.height-2*e.VIEWPORT_VERTICAL_MARGINS),i.bottomY=Math.min(i.bottomY,a.y+a.height-e.VIEWPORT_VERTICAL_MARGINS)),!f&&g&&(i.y=h?c.utils.scrollUtils.getScroll().scrollTop+e.VIEWPORT_VERTICAL_MARGINS_NAV_CONTROLS:e.VIEWPORT_VERTICAL_MARGINS_NAV_CONTROLS),i}function u(a,b,c,d){var f,h,e=this.getEditorAPI();this.isCompRequiresCustomGfppPos(a,this.props.selectedComponents)&&(f=this.props.lastSelectionClickPos);var j=r(a,e.site.getSiteWidth()),k=q(e),l=e.getLeftBarButtonsBoundingRect(),m=this.props.focusedContainer&&this.props.focusedContainer.id!==this.props.selectedComponents[0].id,n=this.refs.focusBox?this.refs.focusBox.getNavControlsSize():null,o=this.props.focusedContainer&&this.getBoundingLayoutRelativeToScreen(this.props.focusedContainer),p=t(o,a,l,m,n);if(j&&(!g.isOpen("popups")||e.pages.popupPages.getCurrentPopupId()!==this.props.selectedComponents[0].id))return i.getFullWidthCompPositions(a,p,b,c,k,n,f);if(m){var s=t(o,a,l,!1,n);h=i.getCompControlsPositions(c,null,b,a,p,d,f);var u=i.getCompControlsPositions(null,n,b,o,s,d,f);h.navControlsStyle=u.navControlsStyle}else h=i.getCompControlsPositions(c,n,b,a,p,d,f);return h}var i=c.utils.compControlsMeasurer,j=["wysiwyg.common.components.anchor.viewer.Anchor"],k=["wysiwyg.viewer.components.WRichText","wysiwyg.viewer.components.HoverBox","wysiwyg.viewer.components.BoxSlideShow","wysiwyg.viewer.components.StripContainerSlideShow",f.constants.POPUP.POPUP_CONTAINER.COMPONENT_TYPE],l=3,m={top:0,bottom:0,left:0,right:0};return a.createClass({displayName:"compControls",mixins:[c.mixins.editorAPIMixin],propTypes:{panel:a.PropTypes.shape({name:a.PropTypes.string,props:a.PropTypes.object}),isDragging:a.PropTypes.bool,isResizing:a.PropTypes.bool,isRotating:a.PropTypes.bool,isSectionDragging:a.PropTypes.bool,selectedComponents:a.PropTypes.arrayOf(a.PropTypes.object).isRequired,focusedContainer:a.PropTypes.object,hoveredComp:a.PropTypes.oneOfType([a.PropTypes.bool,a.PropTypes.object]),clearHoverBox:a.PropTypes.func,performingMouseMoveAction:a.PropTypes.bool,lastSelectionClickPos:a.PropTypes.object,onContextMenu:a.PropTypes.func,editingAreaLayout:a.PropTypes.object,attachCandidate:a.PropTypes.object},getInitialState:function(){return this.panelReady=!1,this.lastMeasuredPanelHeight=0,this.throttledSetCompsStyle=b.throttle(this.setCompsStyle,50,{leading:!1,trailing:!0}),{gfppStyle:{top:0,left:0,visibility:"hidden",position:"absolute"},compPanelStyle:{top:0,left:0,opacity:0,visibility:"hidden"},navControlsStyle:{top:0,left:0}}},isCompsStyleSet:function(){return!this.props.panel||"hidden"!==this.state.compPanelStyle.visibility&&!!this.lastMeasuredPanelHeight&&0!==this.state.compPanelStyle.left&&0!==this.state.compPanelStyle.top},shouldShowGfpp:function(){return!this.props.isDragging&&!this.props.isResizing&&!this.props.isRotating},getBoundingLayoutRelativeToScreen:function(a){var c=this.getEditorAPI(),d=c.components.layout.getRelativeToScreen(a);return b.assign(d.bounding,{fixedPosition:c.components.layout.isShowOnFixedPosition(a),rotationInDegrees:d.rotationInDegrees})},getCompControlsStyles:function(a,c,d,e,f){var g=this.getEditorAPI(),h=this.props.panel&&(a||!this.isCompsStyleSet()),i=u.call(this,e,d,c,f);if(i.gfppStyle.visibility="inherit",i.gfppStyle.visibility="inherit",h){if(i.compPanelStyle.top+=this.props.editingAreaLayout.top,b.has(i.compPanelStyle,"left")&&(i.compPanelStyle.left+=this.props.editingAreaLayout.left),!e.fixedPosition){var j=g.ui.scroll.getScroll();i.compPanelStyle.top-=j.scrollTop}b.assign(i.compPanelStyle,this.getPanelStyle())}else i=b.pick(i,"gfppStyle","navControlsStyle");return e.fixedPosition?(i.gfppStyle.top+=this.props.editingAreaLayout.top,b.has(i.gfppStyle,"left")&&(i.gfppStyle.left+=this.props.editingAreaLayout.left),i.gfppStyle.position="fixed"):i.gfppStyle.position="absolute",this.props.isPinMode&&(i.gfppStyle.visibility="hidden"),i},getPanelStyle:function(){var a={};return this.panelReady?(a.visibility="inherit",a.opacity=1):(a.visibility="hidden",a.opacity=0),a},isCompRequiresCustomGfppPos:function(a){var c=this.getEditorAPI(),d=b.includes(k,c.components.getType(this.props.selectedComponents));if(d)return!1;var f=e.CUSTOM_GFPP_POS.HEIGHT_TO_APPLY;return a.height>=f},getRotateKnobRect:function(){return this.refs.editBox&&this.refs.editBox.getRotateKnobRect()},isDesignPanelOpen:function(){var a=this.getEditorAPI().panelManager.getOpenPanels();return!!b.find(a,{name:c.constants.componentPanels.design})},getRotateKnobMargins:function(a){if(!a.rotationInDegrees)return m;var b=this.getRotateKnobRect();if(!b)return m;var c=this.getEditorAPI().ui.scroll.getScroll(),d=c.scrollTop-this.props.editingAreaLayout.top,e=c.scrollLeft-this.props.editingAreaLayout.left;return b={top:b.top+d,bottom:b.bottom+d,left:b.left+e,right:b.right+e},p(a,b)},setCompsStyle:function(a){var c=this.refs.gfpp?this.refs.gfpp.getSize():null;if(this.props.isPinMode&&(c={width:0,height:0}),c){var e=this.refs.compPanel?this.refs.compPanel.getDOMNode():null;this.lastMeasuredPanelHeight=e?d(e).height():0;var f=this.getBoundingLayoutRelativeToScreen(this.props.selectedComponents),g=this.getRotateKnobMargins(f),h=this.getCompControlsStyles(a,c,e,f,g);this.lastMeasuredPanelHeight||(h.compPanelStyle={top:0,left:0,opacity:0,visibility:"hidden"});var i=b.pick(this.state,b.keys(h)),j=b.every(h,function(a,c){var d=i[c];return b.every(a,function(a,c){var e=d[c];return b.isNumber(e)&&b.isNumber(a)?n(e,a,2):e===a})});j||this.setState(h)}},onWindowScroll:function(){this.setCompsStyle()},onWindowResize:function(){this.debouncedSetCompsStyle||(this.debouncedSetCompsStyle=b.debounce(this.setCompsStyle,200)),this.debouncedSetCompsStyle(!0)},shouldShowFocusBox:function(){var a=b.get(this.props,"focusedContainer.id")===b.first(this.props.selectedComponents).id;return this.props.focusedContainer&&!(this.props.performingMouseMoveAction&&a)},shouldShowAttachFocusBox:function(){return this.getEditorAPI().selection.getParentToFocus([this.props.attachCandidate])},shouldRenderEditBox:function(){if(!this.props.selectedComponents||this.props.isSectionDragging)return!1;var a=this.getEditorAPI().components.getType(this.props.selectedComponents);return!b.includes(j,a)},componentDidMount:function(){this.throttledSetCompsStyle();var a=this.getEditorAPI();a.ui.scroll.addListener(this.onWindowScroll),window.addEventListener("resize",this.onWindowResize)},componentWillUnmount:function(){var a=this.getEditorAPI();a.ui.scroll.removeListener(this.onWindowScroll),window.removeEventListener("resize",this.onWindowResize)},componentWillReceiveProps:function(a){var c={},d=!b.get(a.panel,["props","useLastPanelPosition"]);!b.isEqual(this.props.panel,a.panel)&&d&&(c.compPanelStyle={top:0,left:0,opacity:0,visibility:"hidden"},a.panel||(this.panelReady=!1));var e=!this.getEditorAPI().utils.isSameRef(this.props.selectedComponents,a.selectedComponents),f=!this.props.performingMouseMoveAction&&a.performingMouseMoveAction;(e||f)&&(c.gfppStyle={top:0,left:0,visibility:"hidden",position:"absolute"},c.compPanelStyle={top:0,left:0,opacity:0,visibility:"hidden"}),b.isEmpty(c)||this.setState(c)},setAttachCandidateNavControlsStyle:function(){var a=this.refs.compPanel?this.refs.compPanel.getDOMNode():null,b=this.getBoundingLayoutRelativeToScreen(this.props.attachCandidate),d=!b.fixedPosition,e=this.getEditorAPI().getLeftBarButtonsBoundingRect(),f=c.utils.stageUtils.getViewPort(d,e),g=i.getCompControlsPositions(null,!0,a,b,f);this.setState({attachCandidateNavControlsStyle:g.navControlsStyle})},componentDidUpdate:function(a){var c=!b.get(this.props.panel,["props","useLastPanelPosition"]);s(a,this.props)&&c&&this.throttledSetCompsStyle(),!b.isEqual(a.attachCandidate,this.props.attachCandidate)&&this.shouldShowAttachFocusBox()&&this.setAttachCandidateNavControlsStyle()},onPanelDragEnd:function(a){this.setState({compPanelStyle:a})},onCompPanelLoaded:function(){this.panelReady=!0,this.throttledSetCompsStyle()},getPanelProps:function(){return b.assign({onDragEnd:this.onPanelDragEnd,onCompPanelLoaded:this.onCompPanelLoaded,style:this.state.compPanelStyle,selectedComponent:this.props.selectedComponents,compType:this.getEditorAPI().components.getType(this.props.selectedComponents)},this.props.panel.props)},isColumnsContainer:function(a){var b="wysiwyg.viewer.components.StripColumnsContainer";return this.getEditorAPI().components.getType(a)===b},getColumnsContainer:function(){var a=this.props.selectedComponents;if(!g.isOpen("columns"))return null;if(this.isColumnsContainer(a))return a;var b=this.getEditorAPI().utils.findAncestorMatchesCondition(a,this.isColumnsContainer);return b?b:null},getColumnsControlsProps:function(){return{selectedComponents:this.props.selectedComponents,columnsContainer:this.getColumnsContainer()}},render:h})}),define("rEditor/rootComps/attachHighlight/attachHighlight.rt",["react/addons","lodash","experiment!attachImprovements"],function(a,b,c){"use strict";return function(){return a.createElement("div",{},c?a.createElement("div",{key:"attach-highlight",className:"attach-highlight"},a.createElement("div",{className:b.keys(b.pick({"highlight-container-exp":!0,master:this.isShowOnAllPages(),box:this.isBoxContainer()},b.identity)).join(" "),style:this.getBoxPosition()},a.createElement("label",{},this.translateIfNeeded(this.getAttachTranslationKey(this.state.compLabel)))),a.createElement("div",{style:this.getAttachOverlayLayoutStyle(),className:"attach-overlay"})):null,c?null:a.createElement("div",{key:"attachImprovements",className:b.keys(b.pick({"highlight-container":!0,master:this.isShowOnAllPages()},b.identity)).join(" "),style:this.getPosition()},a.createElement("label",{},this.translateIfNeeded(this.getAttachTranslationKey(this.state.compLabel)))))}}),define("rEditor/rootComps/attachHighlight/attachHighlight",["react","core","lodash","rEditor/rootComps/attachHighlight/attachHighlight.rt","util","experiment!attachImprovements","rEditor/rootComps/selectionBox/selectionBoxCommons"],function(a,b,c,d,e,f,g){"use strict";function i(a,b){return a.components.layout.getRelativeToScreen(b)}function j(a){var b=a.selection.getSelectedComponents()[0];return i(a,b)}function k(a,b){var c=a.components.layout.getRelativeToScreen(b);return a.components.layout.isShowOnFixedPosition(b)&&(c.y+=a.editorConfig.editingAreaLayout.top,c.bounding.y+=a.editorConfig.editingAreaLayout.top,c.x+=a.editorConfig.editingAreaLayout.left,c.bounding.x+=a.editorConfig.editingAreaLayout.left),c}var h={HeaderContainer:"OnStage_AttachTo_Header",Page:"OnStage_AttachTo_Page",FooterContainer:"OnStage_AttachTo_Footer",Container:"OnStage_AttachTo_Box",HoverBox:"OnStage_AttachTo_Hover_Box",BoxSlideShowSlide:"OnStage_AttachTo_Slide",StripContainerSlideShowSlide:"OnStage_AttachTo_Slide",StripContainer:"OnStage_AttachTo_Strip",Column:"OnStage_AttachTo_Column",PopupContainer:"OnStage_AttachTo_PopUp"},l={displayName:"attachHighlight",mixins:[b.mixins.editorAPIMixin,e.translationMixin],getInitialState:function(){var a=c.last(this.getEditorAPI().components.getType(this.props.comp).split("."));return{compLabel:this.props.comp&&h[a]}},componentWillReceiveProps:function(a){this.setState({compLabel:a.comp&&h[c.last(this.getEditorAPI().components.getType(this.props.comp).split("."))]})},isShowOnAllPages:function(){return this.getEditorAPI().components.isShowOnAllPages(this.props.comp)},getAttachTranslationKey:function(){var a=c.last(this.getEditorAPI().components.getType(this.props.comp).split("."));return h[a]},getPosition:function(){var a=this.getEditorAPI(),b=k(a,this.props.comp),c=g.getPosition(a,this.props.comp);return{top:b.y-2,left:b.x-2,height:b.height,width:b.width,position:c}},render:d};return f&&c.assign(l,{getBoxPosition:function(){var a=i(this.getEditorAPI(),this.props.comp);return{top:a.y,left:a.x,height:a.height,width:a.width}},getAttachOverlayLayoutStyle:function(){var a=j(this.getEditorAPI());return{top:a.y,left:a.x,width:a.width,height:a.height}},isBoxContainer:function(){return"mobile.core.components.Container"===this.getEditorAPI().components.getType(this.props.comp)}}),a.createClass(l)}),define("rEditor/rootComps/constraintArea/constraintArea.rt",["react/addons","lodash"],function(a,b){"use strict";return function(){return a.createElement("div",{className:"constraint-area",style:this.getPosition()},a.createElement("div",{className:"box"},a.createElement("label",{},this.translateIfNeeded("mobilemenu_Settings_fixed_area_label"))))}}),define("rEditor/rootComps/constraintArea/constraintArea",["react","core","lodash","util","rEditor/rootComps/constraintArea/constraintArea.rt"],function(a,b,c,d,e){"use strict";return a.createClass({displayName:"constraintArea",mixins:[b.mixins.editorAPIMixin,d.translationMixin],getPosition:function(){var a=this.props.area;return{top:a.top,left:a.left,height:a.height,width:a.width}},render:e})}),define("rEditor/rootComps/snapLayer/snapLayer.rt",["react/addons","lodash"],function(a,b){"use strict";function c(c,d){return a.createElement("rect",{className:b.keys(b.pick({"show-on-all-pages":c.isShowOnAllPages},b.identity)).join(" "),x:c.x,y:c.y,height:c.height,width:c.width,key:"rectDrawData"+d})}function d(b,c){return a.createElement("line",{x1:b[0].x,y1:b[0].y,x2:b[1].x,y2:b[1].y,key:"snapLine"+c})}return function(){return this.props.snapData?a.createElement("div",{className:"snap-layer",key:"layer"},a.createElement.apply(this,["svg",{},b.map(this.getRectanglesDrawData(),c.bind(this)),b.map(this.getLines(),d.bind(this))])):null}}),define("rEditor/rootComps/snapLayer/snapLayer",["react","lodash","rEditor/rootComps/snapLayer/snapLayer.rt"],function(a,b,c){"use strict";return a.createClass({displayName:"snapLayer",propTypes:{snapData:a.PropTypes.array},getRectanglesDrawData:function(){var a=b(this.props.snapData).pluck("rectanglesDrawData").flatten().value();return a},getLines:function(){return b.pluck(this.props.snapData,"line")},render:c})}),define("rEditor/rootComps/anchor/anchor.rt",["react/addons","lodash","baseUI"],function(a,b,c){"use strict";return function(){return a.createElement("div",{className:"anchorWrapper",style:{top:this.getTopPosition()}},a.createElement("div",{className:"anchor-line before"}),a.createElement("div",{className:"anchor "+(this.props.isSelected?"anchor-selected":"")},a.createElement("div",{className:"anchorContent",onMouseDown:this.onMouseDown,onContextMenu:this.props.onContextMenu,onDoubleClick:this.onDoubleClick},a.createElement(c.symbol,{className:"anchorIcon",name:"anchor"}),a.createElement("div",{className:"anchorName"},this.getAnchorName()),a.createElement(c.symbol,{className:"rightIcon",name:this.isLocked()?"anchorLock":"anchorDragHandle"}))),a.createElement("div",{className:"anchor-line after-with-sections-reorganize"}))}}),define("rEditor/rootComps/anchor/anchor",["react","lodash","core","rEditor/utils/mouseMoveActions/baseDoubleClick","rEditor/rootComps/anchor/anchor.rt"],function(a,b,c,d,e){"use strict";return a.createClass({displayName:"anchor",propTypes:{compRef:a.PropTypes.object.isRequired,isSelected:a.PropTypes.bool.isRequired},mixins:[c.mixins.editorAPIMixin],getInitialState:function(){return this.editorAPI=this.getEditorAPI(),{}},getAnchorName:function(){var a=this.editorAPI.components.data.get(this.props.compRef);return a.name},onDoubleClick:function(a){var b={evt:a,comp:[this.props.compRef]};d(this.getEditorAPI(),b)},getTopPosition:function(){return this.editorAPI.components.layout.getRelativeToStructure(this.props.compRef).y},isLocked:function(){return!1},render:e})}),define("rEditor/rootComps/anchor/anchorsContainer.rt",["react/addons","lodash","rEditor/rootComps/anchor/anchor"],function(a,b,c){"use strict";function d(b,d){return a.createElement(c,{key:"anchor"+d,compRef:b,onContextMenu:this.props.onContextMenu,isSelected:this.isSelectedComp(b)})}return function(){return a.createElement.apply(this,["div",{className:b.keys(b.pick({"anchors-container":!0,"mobile-editor":this.editorAPI.isMobileEditor()},b.identity)).join(" ")},b.map(this.getAnchors(),d.bind(this))])}}),define("rEditor/rootComps/anchor/anchorsContainer",["react","lodash","core","rEditor/rootComps/anchor/anchorsContainer.rt"],function(a,b,c,d){"use strict";var e="wysiwyg.common.components.anchor.viewer.Anchor";return a.createClass({displayName:"stageComps",mixins:[c.mixins.editorAPIMixin],getInitialState:function(){return this.editorAPI=this.getEditorAPI(),{}},getAnchors:function(){var a=this.editorAPI.pages.getReference(this.editorAPI.pages.getFocusedPageId());return this.editorAPI.components.get.byType(e,a)},isSelectedComp:function(a){return this.editorAPI.selection.isComponentSelected(a)},render:d})}),define("rEditor/rootComps/selectionBox/hoverBox.rt",["react/addons","lodash","baseUI"],function(a,b,c){"use strict";return function(){return a.createElement("div",{style:this.getHoverBoxStyles(),className:b.keys(b.pick(this.getClasses(),b.identity)).join(" ")},a.createElement("span",{ref:"label",className:b.keys(b.pick(this.getLabelClasses(),b.identity)).join(" "),style:this.getHoverBoxLabelStyles()},this.isCompPinned()?a.createElement(c.symbol,{name:"pinModeIndicator",key:"pinModeIndicator",className:b.keys(b.pick(this.getIndicatorClasses(),b.identity)).join(" ")}):null,a.createElement("span",{className:"actual-label"},this.getComponentLabel())))}}),define("rEditor/rootComps/selectionBox/hoverBox",["lodash","react","jquery","core","rEditor/rootComps/selectionBox/hoverBox.rt"],function(a,b,c,d,e){"use strict";function f(a,b){var c=a.components.layout.getRelativeToScreen(b);return a.components.layout.isShowOnFixedPosition(b)&&(c.y+=a.editorConfig.editingAreaLayout.top,c.bounding.y+=a.editorConfig.editingAreaLayout.top,c.x+=a.editorConfig.editingAreaLayout.left,c.bounding.x+=a.editorConfig.editingAreaLayout.left),c}function g(a,b){return a.outerWidth()/b.outerWidth()<2}function h(a,b){var c=d.utils.stageUtils.getViewPort();return a.offset().left-b.width()>c.x}function i(a,b){return"SITE_FOOTER"===b.id||"SITE_HEADER"===b.id||b.id===a.pages.getFocusedPageId()}function j(a,b){return g(a,b)?h(a,b)?k.LEFT:k.RIGHT:k.INNER}var k={INNER:"inner",LEFT:"left",RIGHT:"right"},l=2;return b.createClass({displayName:"hoverBox",mixins:[d.mixins.editorAPIMixin],getInitialState:function(){return{labelPosition:k.INNER,shouldCalculateLabelPosition:!0}},componentWillMount:function(){this.isMovable=this.getEditorAPI().components.is.verticallyMovable(this.props.hoveredComp)||this.getEditorAPI().components.is.horizontallyMovable(this.props.hoveredComp)},componentDidMount:function(){if(this.state.shouldCalculateLabelPosition){var a=c(this.getDOMNode()),b=c(this.refs.label.getDOMNode());this.setState({labelPosition:j(a,b),shouldCalculateLabelPosition:!1})}},componentDidUpdate:function(){if(this.state.shouldCalculateLabelPosition){var a=c(this.getDOMNode()),b=c(this.refs.label.getDOMNode());this.setState({labelPosition:j(a,b),shouldCalculateLabelPosition:!1})}},componentWillReceiveProps:function(a){a.hoveredComp.id!==this.props.hoveredComp.id&&(this.isMovable=this.getEditorAPI().components.is.verticallyMovable(a.hoveredComp)||this.getEditorAPI().components.is.horizontallyMovable(a.hoveredComp),this.setState({shouldCalculateLabelPosition:!0}))},getComponentLabel:function(){var a=this.getEditorAPI(),b=a.selection.getSelectedComponents(),c=a.utils.isSameRef(b,this.props.hoveredComp);return c?"":a.components.getDisplayName(this.props.hoveredComp)},getHoverBoxStyles:function(){var b=f(this.getEditorAPI(),this.props.hoveredComp),c={top:b.y-1,left:b.x-1,width:b.width,height:b.height};if(b.rotationInDegrees){var d="rotate("+b.rotationInDegrees+"deg)";a.assign(c,{transform:d,WebkitTransform:d})}var e=this.getEditorAPI().components.is.fullWidth(this.props.hoveredComp);return e&&a.assign(c,{borderLeft:0,borderRight:0}),c},getClasses:function(){var a=this.getEditorAPI(),b=this.props.hoveredComp,c={"hover-box":!0,"show-on-all-pages":a.components.isShowOnAllPages(b),"fixed-position":a.components.layout.isShowOnFixedPosition(b),overlay:this.props.overlay};return c},getHoverBoxLabelStyles:function(){var a=this.getEditorAPI();if(a.components.is.fullWidth(this.props.hoveredComp)){var b=a.isMobileEditor()?0:a.siteSegments.getPagesContainerAbsLayout().x+l;return{left:b}}},getLabelClasses:function(){var a=i(this.getEditorAPI(),this.props.hoveredComp);return{"comp-label":!0,"label-large":a,"label-inner":!a&&this.state.labelPosition===k.INNER,"label-left":!a&&this.state.labelPosition===k.LEFT,"label-right":!a&&this.state.labelPosition===k.RIGHT}},getIndicatorClasses:function(){return{"show-on-all-pages":this.getEditorAPI().components.isShowOnAllPages(this.props.hoveredComp)}},isCompPinned:function(){return this.getEditorAPI().components.layout.isPinned(this.props.hoveredComp)},render:e})}),define("rEditor/rootComps/lasso/lasso.rt",["react/addons","lodash"],function(a,b){"use strict";function c(c,d){return a.createElement("rect",b.assign({},{className:b.keys(b.pick({"lasso-candidate":!0,"show-on-all-pages":this.getEditorAPI().components.isShowOnAllPages(c.component)},b.identity)).join(" "),key:d},c.layout.bounding))}return function(){return a.createElement("div",{className:"lasso-layer"},a.createElement.apply(this,["svg",{className:"lasso-highlights"},a.createElement("rect",b.assign({},{className:"lasso-rect"},this.props.lassoLayout)),b.map(this.props.candidates,c.bind(this))]))}}),define("rEditor/rootComps/lasso/lasso",["react","lodash","core","rEditor/rootComps/lasso/lasso.rt"],function(a,b,c,d){"use strict";return a.createClass({displayName:"lasso",mixins:[c.mixins.editorAPIMixin],propTypes:{lassoLayout:a.PropTypes.shape({x:a.PropTypes.number,y:a.PropTypes.number,width:a.PropTypes.number,height:a.PropTypes.number}),candidates:a.PropTypes.arrayOf(a.PropTypes.shape({component:a.PropTypes.object,layout:a.PropTypes.object}))},render:d})}),define("rEditor/rootComps/mouseCatcher.rt",["react/addons","lodash","uiConstants","rEditor/rootComps/compControls/compControls","rEditor/rootComps/attachHighlight/attachHighlight","rEditor/rootComps/constraintArea/constraintArea","rEditor/rootComps/snapLayer/snapLayer","rEditor/rootComps/anchor/anchorsContainer","rEditor/rootComps/selectionBox/hoverBox","rEditor/rootComps/lasso/lasso"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(){var b=this.getMarginsIndicatorStyles(this.getCompToShowMarginsIndicator());return a.createElement("div",{key:"marginsIndicator",className:"margins-indicator",style:b.indicator},b.marginLeft?a.createElement("div",{key:"leftMarginIndicator",className:"left",style:{width:b.marginLeft+c.FOCUS_FRAME_BORDER_WIDTH}}):null,b.marginRight?a.createElement("div",{key:"rightMarginIndicator",className:"right",style:{width:b.marginRight-c.FOCUS_FRAME_BORDER_WIDTH}}):null)}return function(){return a.createElement("div",{className:b.keys(b.pick({parentSizeAbs:!0,mouseCatcher:!0,draggable:this.isCompDraggable()},b.identity)).join(" "),onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onDoubleClick:this.onDoubleClick,onContextMenu:this.props.onContextMenu,onMouseMove:this.onMouseMove,onMouseLeave:this.clearHoverBox},this.props.editorState.constraintArea?a.createElement(f,{key:"constraintArea",area:this.props.editorState.constraintArea}):null,this.props.editorState.attachCandidate?a.createElement(e,{key:"attachHighlight",comp:this.props.editorState.attachCandidate}):null,this.props.editorState.lassoLayout?a.createElement(j,{key:"lassoLayout",lassoLayout:this.props.editorState.lassoLayout,candidates:this.props.editorState.lassoCandidates}):null,1===this.props.editorState.siteScale&&this.props.hoveredComp&&this.getEditorAPI().components.is.exist(this.props.hoveredComp)&&!this.props.editorState.pinMode?a.createElement(i,{overlay:this.props.hoverBoxOverlay,hoveredComp:this.props.hoveredComp,key:"hoverBox"}):null,1===this.props.editorState.siteScale&&this.props.selectedComponents?a.createElement(d,{key:"compControls",isDragging:this.props.isDragging,isResizing:this.props.isResizing,isRotating:this.props.isRotating,performingMouseMoveAction:this.props.performingMouseMoveAction,selectedComponents:this.props.selectedComponents,focusedContainer:this.props.focusedContainer,hoveredComp:this.props.hoveredComp,clearHoverBox:this.clearHoverBox,lastSelectionClickPos:this.props.editorState.lastSelectionClickPos,panel:this.props.compPanel,editingAreaLayout:this.props.editingAreaLayout,siteScale:this.props.siteScale,isPinMode:this.props.isPinMode,onContextMenu:this.props.onContextMenu,isSectionDragging:this.props.isSectionDragging,attachCandidate:this.props.editorState.attachCandidate}):null,a.createElement(g,{key:"snapLayer",snapData:this.props.editorState.snapData}),this.props.editorState.previewMode||!this.props.editorIsInit||this.props.editorState.pinMode?null:a.createElement(h,{key:"anchorsContainer",onContextMenu:this.props.onContextMenu}),this.showMarginsIndicator()?k.apply(this,[]):null)}}),define("rEditor/utils/mouseMoveActions/baseDrag",["core","lodash","rEditor/utils/mouseMoveActions/mouseMoveActionTypes","experiment!attachImprovements"],function(a,b,c,d){"use strict";function A(a){return q=s&&(q||Math.abs(a.pageX-v.x)>2||Math.abs(a.pageY-v.y)>2)}function B(a){if(x){var b=x.getClosestLayoutDistance(u,a.bounding,p);Math.abs(b.x)<5&&(a.x+=b.x,a.bounding.x+=b.x),Math.abs(b.y)<5&&(a.y+=b.y,a.bounding.y+=b.y)}}function C(a){a.x-=a.x%5,a.y-=a.y%5}function D(a){if(x){var b=x.getSnapData(a.bounding,p);u.snapData.set(b)}}function E(a){var c=b.some(a,function(a){return u.components.is.groupedComponent(a)},this);return!c}function F(a){return b.map(a,function(a){var b={component:a,attachUtil:new f(u,{comp:a,layout:u.components.layout.getRelativeToScreen(a)},f.TYPES.COMP)};return b})}function G(a,c){if(a&&!a.isShiftPressed)return!0;var d=!1;if(a&&a.isShiftPressed&&!b.isEmpty(c))for(var e=H(c),f=a.x-u.editorConfig.editingAreaLayout.left,g=a.y-u.editorConfig.editingAreaLayout.top,h=0;h<e.length&&!d;h++){var i=e[h];d=d||I(f,g,i)}return d}function H(a){return b.map(a,function(a){return u.components.layout.getRelativeToScreen(a)})}function I(a,b,c){return c&&a>=c.x&&a<=c.x+c.width&&b>=c.y&&b<=c.y+c.height}function J(a){var b=w?w:v;return{x:Math.abs(b.x-a.x),y:Math.abs(b.y-a.y)}}function K(a){var b=J(a);return b.x>e||b.y>e}function L(){return m&&!u.multiselect.isMultiselect(l)}function M(){if(m){var a=[],c=b.map(o,function(b){var c=b.attachUtil.getCurrentAttachCandidate(),d=b.component;if(c){var e=u.components.setContainer(d,c);return a.push(c),e}return d});u.selection.selectComponentByCompRef(c)}}function N(a){if(m){var b={x:a.clientX,y:a.clientY},c=n.getCurrentAttachCandidate(null,b);if(c){var d=u.components.setContainer(l,c);u.selection.selectComponentByCompRef(d)}}}function O(a,c){if(u=u||a,q=!1,l=c.selectedComp,v=c.initMousePosition,w=null,y=u.components.is.horizontallyMovable(c.selectedComp),z=u.components.layout.getRelativeToScreen(l),!c.initMousePosition||!G(v,l))return void(s=!1);s=!0;var e=u.components.layout.getRelativeToScreen(l),p=b.map(l,function(a){return u.components.layout.getRelativeToScreen(a)});m=E(l),u.multiselect.isMultiselect(l)?o=F(l):n=d?new g(u,{layout:e,comp:l},f.TYPES.COMP):new f(u,{layout:e,comp:l},f.TYPES.COMP),t=new j(u,l),x=new h(u,l),k=new i.Drag(z,v,p)}function P(c){var d={x:c.pageX,y:c.pageY};if(A(c)){if(u.selection.setIsMouseUpSelectionEnabled(!1),!r){var e=b.map(l,"id");u.renderPlugins.setCompsToShowOnTop(e),r=!0}var f={x:c.pageX,y:c.pageY,isShiftPressed:c.shiftKey},g=k.getLayout(f);u.multiselect.isMultiselect(l)&&(g=a.utils.updateLayoutUtil.getLayoutRelativeToScreenAfterConstraints(u,l,g,z)),y||(g.x=z.x),c.altKey?C(g):u.getViewTools().snapToEnabled&&(K(d)?u.snapData.clear():(g.bounding=u.utils.getBoundingLayout(g),B(g),D(g)));var h;if(L()){var i={x:c.clientX,y:c.clientY};h=n.getCurrentAttachCandidate(null,i),n.highlightAttachCandidate(h),t.highlightDragConstraints()}for(var j=k.getBoundComponentLayouts(g),m=0;m<l.length;m++)u.components.layout.updateRelativeToScreen(l[m],j[m],!0);
}w=d}function Q(a){A(a)&&(u.multiselect.isMultiselect(l)?M():(N(a),n.highlightAttachCandidate(null)),t.removeHighlightDragConstraints(),x=null,u.snapData.clear(),u.history.add("Dragged component"),u.openCompOutOfGridPanelIfNeeded(l)),u.renderPlugins.setCompsToShowOnTop(null),r=!1,v=null}var k,l,m,n,o,t,u,v,w,x,y,z,e=15,f=a.utils.AttachHandler,g=a.utils.AttachHandlerExperimentAttachImprovements,h=a.utils.SnapToHandler,i=a.utils.layoutTransitionsUtil,j=a.utils.DragConstraintsHandler,p={top:!0,right:!0,bottom:!0,left:!0,centerX:!0,centerY:!0},q=!1,r=!1,s=!1;return{start:O,on:P,end:Q,type:c.DRAG}}),define("rEditor/utils/mouseMoveActions/dragAttempt",["lodash","core","rEditor/utils/mouseMoveActions/mouseMoveActionTypes","experiment"],function(a,b,c,d){"use strict";function j(a,b){return a>=i||b>=i}function k(a,b){h=a,e=!1,f=b.initMousePosition,g=b.selectedComp}function l(a){var b=Math.abs(a.pageX-f.x),c=Math.abs(a.pageY-f.y);e=e||j(b,c),e&&h.selection.setIsMouseUpSelectionEnabled(!1)}function m(){e&&h.components.layout.isPinned(g)&&!h.pinMode.isPinModeOpen()&&(d.isOpen("OpenPinPanelOnDrag")&&h.pinMode.open("on_drag"),h.bi.event(b.bi.events.pinToScreen.DRAG_ATTEMPT,{component_type:h.getComponentType(g)}))}var e,f,g,h,i=5;return{start:k,on:l,end:m,type:c.DRAG_ATTEMPT}}),define("rEditor/utils/lassoMouseMoveActions/lassoDrag",["core","lodash","util","rEditor/utils/mouseMoveActions/mouseMoveActionTypes"],function(a,b,c,d){"use strict";function q(a){if(k)return!0;var b=a.pageY-l.editorConfig.editingAreaLayout.top,c=a.pageX-l.editorConfig.editingAreaLayout.left,d=Math.abs(c-j.x),e=Math.abs(b-j.y);return k=d>f&&e>f}function r(a){var b=a.pageY-l.editorConfig.editingAreaLayout.top,c=a.pageX-l.editorConfig.editingAreaLayout.left,d=Math.min(c,j.x),e=Math.min(b,j.y),f=Math.max(c,j.x),g=Math.max(b,j.y);return{x:d,y:e,width:f-d,height:g-e}}function s(a){var b=l.components.layout.getRelativeToScreen(a);return"wysiwyg.viewer.components.WRichText"===l.components.getType(a)&&t(a,b),{component:a,layout:b}}function t(a,b){var c=l.components.layout.getEffectiveTextDimensions(a);return c&&(b.width=c.width,b.height=c.height,b.bounding.width=c.width,b.bounding.height=c.height,b.x+=c.dx,b.y+=c.dy,b.bounding.x+=c.dx,b.bounding.y+=c.dy),b}function u(a){return l.components.is.fullWidth(a.component)||l.components.layout.isHorizontallyStretchedToScreen(a.component)?"fullWidth":"standard"}function v(a,b){return b.y<=a.bounding.y&&b.y+b.height>=a.bounding.y+a.bounding.height}function w(a,c){l=a;var d=l.pages.getFocusedPageId();n=c.selectedComponents;var f=e.concat(b.pluck(n,"id")),q=l.components.getAllComponents(d,function(a){return!b.includes(f,a.id)&&!l.components.is.page(a)});m=c.prevSelectedComps,o=m!==n&&c.initMousePosition.isSpecialKeyPressed,p=l.selection.isSingleSelectionComponent(n),j=b.clone(c.initMousePosition),j.y-=l.editorConfig.editingAreaLayout.top,j.x-=l.editorConfig.editingAreaLayout.left,k=!1,h=[],i=b.pick(j,["x","y"]),g=b(q).map(s).groupBy(u).value()}function x(a){if(q(a)){p&&(l.selection.deselectComponents(),p=!1),o&&(l.selection.selectComponentByCompRef(m),o=!1),i=r(a),h=b.filter(g.standard,function(a){return c.layoutUtils.isLayoutContainedWithinRect(a.layout.bounding,i)},this);var d=b.filter(g.fullWidth,function(a){return v(a.layout,i)},this);h=h.concat(d),l.lasso.setCandidates(h),l.lasso.setLayout(i)}}function y(d){var e=c.browserUtil.isSpecialKeyPressed(d);if(!b.isEmpty(h)){var f=b.map(h,"component");f.length>1&&(f=b.reject(f,l.selection.isSingleSelectionComponent)),(f.length>1||1===f.length&&m&&m.length>0)&&l.bi.event(a.bi.events.selection.MULTISELECT,{num_of_elements_selected:f.length,selection_method:"lasso"}),l.closeCompPanelIfExists(),e?l.selection.addComponentToSelectionByRef(f):l.selection.selectComponentByCompRef(f)}l.lasso.clear()}var g,h,i,j,k,l,m,n,o,p,e=["SITE_PAGES","PAGES_CONTAINER","SITE_HEADER","SITE_FOOTER"],f=4;return{start:w,on:x,end:y,type:d.LASSO}}),define("rEditor/rootComps/mouseCatcher",["react","jquery","lodash","rEditor/rootComps/mouseCatcher.rt","core","panels","util","rEditor/utils/mouseMoveActions/baseDrag","rEditor/utils/mouseMoveActions/dragAttempt","rEditor/utils/lassoMouseMoveActions/lassoDrag","experiment!activateLassoOnContainers"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";function m(a,b){return p(a,b)?h:i}function o(a,b){return a.selection.isHiddenComponentDraggedNext()?!1:a.components.is.siteSegment(b)||a.components.is.page(b)?!0:k?!a.selection.isComponentSelected(b)&&a.components.is.container(b):!a.selection.isComponentSelected(b)&&a.components.is.container(b)&&a.components.is.fullWidth(b)}function p(a,b){var c=a.getCompDragRestrictions(b);return c.horizontallyMovable||c.verticallyMovable}function q(a,b){var c=a.selection.getComponentUnderClickToBeSelected(b.clientX,b.clientY);return a.selection.isComponentSelected(c)}function r(a,b){var c=a.selection.getSelectedComponents();if(a.selection.isSelectedCompUnderCursorAndBeneathSiteSegment(c,b))return!1;var d=a.selection.getComponentUnderClickToBeSelected(b.clientX,b.clientY),e=g.browserUtil.isSpecialKeyPressed(b);return e||o(a,d)}function s(a,b){var d=a.selection.getSelectedComponents(),e=a.components.getType(b);return(!a.selection.isComponentSelected(b)||a.multiselect.isMultiselect(d))&&!c.includes(l,e)}function t(a){return!!a.editor.state.lassoLayout}function u(a,b){var d=a.components.is.delegateDragToParent;return c(b).map(function(b){return d(b)?a.utils.findAncestorMatchesCondition(b,c.negate(d)):b}).thru(a.multiselect.getComponentsWhichDontHaveAncestorsInTheArray).value()}var l=["wysiwyg.viewer.components.PagesContainer","wysiwyg.viewer.components.PageGroup","wysiwyg.common.components.anchor.viewer.Anchor"],n=1;return a.createClass({displayName:"mouseCatcher",mixins:[e.mixins.editorAPIMixin],propTypes:{selectedComponents:a.PropTypes.oneOfType([a.PropTypes.object,a.PropTypes.arrayOf(a.PropTypes.object)]),focusedContainer:a.PropTypes.object,config:a.PropTypes.object,onContextMenu:a.PropTypes.func,performingMouseMoveAction:a.PropTypes.bool,hoveredComp:a.PropTypes.oneOfType([a.PropTypes.bool,a.PropTypes.object]),isDragging:a.PropTypes.bool,isResizing:a.PropTypes.bool,isRotating:a.PropTypes.bool,isPinMode:a.PropTypes.bool,compPanel:a.PropTypes.object,editingAreaLayout:a.PropTypes.object},componentWillMount:function(){this.compsBeforeSelection=null,this.shouldStartDragging=!1,this.shouldStartLasso=!1,this.initMousePosition=null},componentDidMount:function(){b(this.getDOMNode()).on("mouseenter",this.onMouseEnter)},componentWillUnmount:function(){b(this.getDOMNode()).off("mouseenter",this.onMouseEnter)},componentWillReceiveProps:function(a){var b=this.getEditorAPI(),c=m(b,a.selectedComponents);if(this.shouldStartDragging&&c){var d=u(b,a.selectedComponents);b.registerMouseMoveAction(c,{initMousePosition:this.initMousePosition,selectedComp:d})}else this.shouldStartLasso&&b.registerMouseMoveAction(j,{initMousePosition:this.initMousePosition,prevSelectedComps:this.compsBeforeSelection,selectedComponents:a.selectedComponents});this.shouldStartDragging=!1,this.shouldStartLasso=!1},onMouseDown:function(a){var b=this.getEditorAPI();e.utils.mouseScaleHandler.fitMouseCoordinatesToScale(b,a,this.props.siteScale),this.initMousePosition={x:a.pageX,y:a.pageY,isShiftPressed:a.shiftKey,isSpecialKeyPressed:g.browserUtil.isSpecialKeyPressed(a),isAltKeyPressed:a.altKey},this.shouldStartLasso=r(b,a),this.shouldStartDragging=!this.shouldStartLasso&&(!b.selection.isMultiSelectKeyPressed(a)||q(b,a)),b.selection.isHiddenComponentDraggedNext()?b.selection.setIsHiddenComponentDraggedNext(!1):t(b)||(this.compsBeforeSelection=this.props.selectedComponents,b.selection.selectComponentByClick(a)),b.closeRightClickMenu(),f.panelManager.notifyMouseDown(a)},onMouseUp:function(a){var b=this.getEditorAPI();e.utils.mouseScaleHandler.fitMouseCoordinatesToScale(b,a,this.props.siteScale);var c=2===a.button;c||(this.deselectClickedCompIfNeeded(a),b.selection.getIsMouseUpSelectionEnabled()&&!t(b)&&b.selection.selectNonGroupCompUnderCursor(a,this.props.siteScale)),b.selection.setIsMouseUpSelectionEnabled(!1),this.initMousePosition=null,this.shouldStartDragging=!1,this.shouldStartLasso=!1},onMouseMove:function(a){this.props.registeredMouseMoveAction||this.updateHoverBox(a),this.props.mouseMoveCallback(a,a.pageX,a.pageY)},onMouseEnter:function(a){a.which!==n&&this.getEditorAPI().endMouseMoveActionIfNeeded(c.clone(a))},updateHoverBox:function(a){var b=this.getEditorAPI(),d=c.clone(a);e.utils.mouseScaleHandler.fitMouseCoordinatesToScale(b,d,this.props.siteScale),b.waitForChangesApplied(function(){var a=b.selection.getComponentToBeMarkedByHoverBox(d.clientX,d.clientY),c=this.props.hoverBoxOverlay;!this.props.hoveredComp&&a?s(b,a)&&this.props.setHoverBox(a,c):this.props.hoveredComp&&!a?this.props.clearHoverBox():this.props.hoveredComp&&a&&(s(b,a)?this.props.hoveredComp.id!==a.id&&this.props.setHoverBox(a,c):this.props.clearHoverBox())}.bind(this))},clearHoverBox:function(){this.props.clearHoverBox()},deselectClickedCompIfNeeded:function(a){var b=this.getEditorAPI();if(b.selection.isMultiSelectKeyPressed(a)&&this.initMousePosition){var d=b.selection.getComponentUnderClickToBeSelected(a.clientX,a.clientY),e=!!c.find(this.compsBeforeSelection,d),f=!this.isPointsDistanceBiggerThan(this.initMousePosition,{x:a.pageX,y:a.pageY},2);e&&f&&(b.selection.setIsMouseUpSelectionEnabled(!1),b.selection.deselectComponents(d))}},isPointsDistanceBiggerThan:function(a,b,c){var d=Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2);return Math.sqrt(d)>c},isComponentSelected:function(){return this.getEditorAPI().selection.isComponentSelected()},getComponentLabel:function(){return this.getEditorAPI().getComponentType(this.props.selectedComponents)},isCompDraggable:function(){var a=this.getEditorAPI(),b=this.props.hoveredComp;return b?s(a,b)&&a.components.is.draggable(b):!1},getCompToShowMarginsIndicator:function(){var a=this.getEditorAPI();return this.props.editorState.attachCandidate?this.props.editorState.attachCandidate:this.props.isDragging?a.components.getContainer(this.getEditorAPI().selection.getSelectedComponents()):null},showMarginsIndicator:function(){var a=this.getEditorAPI(),b=this.getCompToShowMarginsIndicator();return b&&a.components.is.showMarginsIndicator(b)},getMarginsIndicatorStyles:function(a){var b=this.getEditorAPI(),c=b.components.layout.getRelativeToScreen(a),d=b.components.layout.getRelativeToStructure(a),e=c.width-d.width,f=b.site.getSiteX(),g=d.x+f-c.x,h=e-g;return{indicator:{top:c.y,left:c.x,width:c.width,height:c.height},marginLeft:Math.max(0,g),marginRight:Math.max(0,h),inlineWidth:d.width}},getFocusBoxGridLines:function(){var a=this.getMarginsIndicatorStyles(this.props.focusedContainer);return{left:a.marginLeft,right:a.marginLeft+a.inlineWidth}},render:d})}),define("rEditor/rootComps/textEditor.rt",["react/addons","lodash","textControls"],function(a,b,c){"use strict";return function(){return a.createElement(c.richTextInput,{ref:"richTextInput",valueLink:{value:this.state.textData,requestChange:this.handleTextChange},themeColors:this.getThemeColors(),themeFonts:this.getThemeFonts(),documentType:this.getDocumentType(),languages:this.getLanguages(),layout:this.getTextEditorLayout(),onHeightChange:this.handleTextHeightChange,fonts:this.getCurrentSelectableFontsWithParams(),hideToolbar:!0,className:"text-editor",onShow:this.handleShowTextEditor,openLinkDialog:this.openLinkDialog,openColorPicker:this.openTextColorPicker,selectAllOnInit:!0,isResizing:this.props.isResizing,panelManager:this.getPanelManager(),shouldLimitTextLength:!0})}}),define("rEditor/rootComps/textEditor",["react","lodash","rEditor/rootComps/textEditor.rt","core","textControls","panelUtils"],function(a,b,c,d,e,f){"use strict";return a.createClass({displayName:"textEditor",render:c,mixins:[d.mixins.editorAPIMixin,f.linkColorPickerMixin],getComponentData:function(){return this.getEditorAPI().components.data.get(this._textComponent)},setComponentData:function(a){var c=this.getComponentData();b.forOwn(a,function(a,b){c[b]=a}),this.getEditorAPI().components.data.update(this._textComponent,c,!0)},setComponentLayout:function(a){this.getEditorAPI().components.layout.updateRelativeToScreenAndAdjustLayout(this._textComponent,a)},_cacheSelectedComponent:function(){this._textComponent=this.getEditorAPI().text.getTextCompForEdit()},getInitialState:function(){return this._cacheSelectedComponent(),{textData:{text:this.getComponentData().text.replace(/\n/g,""),linkList:this.getComponentData().linkList}}},getThemeColors:function(){return this.getEditorAPI().theme.colors.getAll()},getThemeFonts:function(){return this.getEditorAPI().theme.fonts.getAll()},getDocumentType:function(){return this.getEditorAPI().generalInfo.getDocumentType()},getLanguages:function(){return this.getEditorAPI().theme.fonts.getCharacterSet()},getTextEditorLayout:function(){var a=this.getEditorAPI(),b=a.components.layout.getRelativeToScreen(this._textComponent),c=a.components.layout.isShowOnFixedPosition(this._textComponent),d={top:b.y,left:b.x,width:b.width,height:b.height,position:c?"fixed":"absolute"};return c&&(d.top+=a.editorConfig.editingAreaLayout.top,d.left+=a.editorConfig.editingAreaLayout.left),d},takeSnapshot:function(){this.snapshotTimeoutHandle&&clearTimeout(this.snapshotTimeoutHandle);var a=this;this.snapshotTimeoutHandle=setTimeout(function(){a.getEditorAPI().history.add("RT:Change"),delete a.snapshotTimeoutHandle},1e3)},handleTextChange:function(a){var b=this.getEditorAPI();this.setComponentData(a),b.waitForChangesApplied(this.takeSnapshot),this.setState({textData:a})},handleTextHeightChange:function(a){this.setComponentLayout({height:a})},getCurrentSelectableFontsWithParams:function(){return e.fontUtils.getCurrentSelectableFontsWithParams(this.getEditorAPI())},handleShowTextEditor:function(a){this._cacheSelectedComponent();var c=this.getEditorAPI(),d=this._textComponent,e=b.now();c.waitForChangesApplied(function(){setTimeout(function(){var e=b.first(c.selection.getSelectedComponents());e===d?(c.renderPlugins.setHideTextComponent(d.id),a&&a(),c.openComponentPanel("textSettingsPanel")):(c.text.stopEditing(),c.closePanelByName("textSettingsPanel"))},Math.max(250-b.now()+e,0))})},componentDidMount:function(){this.getEditorAPI().text.setCurrentTextEditor(this.refs.richTextInput)},componentWillUnmount:function(){clearTimeout(this.panelTimeout),this.snapshotTimeoutHandle&&(clearTimeout(this.snapshotTimeoutHandle),this.getEditorAPI().history.add("RT:Change")),this.getEditorAPI().text.setCurrentTextEditor(null)},openLinkDialog:function(a,b){var c=this.getEditorAPI();c.openLinkPanel({link:a,callback:b})},openTextColorPicker:function(a,b,c,d){this.openColorPicker(b,a,!0,c,d)},getPanelManager:function(){return this.getEditorAPI().panelManager}})}),define("rEditor/rootComps/funTextEditor.rt",["react/addons","lodash","textControls"],function(a,b,c){"use strict";return function(){return this.isReady()?a.createElement(c.richTextInput,b.assign({},{key:"richTextInput",ref:"richTextInput",valueLink:{value:this.getValue(),requestChange:this.handleTextChange},themeColors:this.getThemeColors(),themeFonts:this.getThemeFonts(),documentType:this.getDocumentType(),languages:this.getLanguages(),layout:this.getTextEditorLayout(),fonts:this.getCurrentSelectableFontsWithParams(),hideToolbar:!0,className:"text-editor",openLinkDialog:this.openLinkDialog,openColorPicker:this.openTextColorPicker,isResizing:this.props.isResizing,panelManager:this.getPanelManager(),shouldLimitTextLength:!0,isFocusOnInit:!1,isTextEditorOpen:this.state.isTextEditorOpen},this.getRichTextProps())):null}}),define("rEditor/rootComps/funTextEditor",["react","lodash","rEditor/rootComps/funTextEditor.rt","textControls","core","panels","panelUtils","experiment"],function(a,b,c,d,e,f,g,h){"use strict";function j(a,c){if(!c)return!1;if(c.length>1)return!1;var d=b.first(c),e=a.components.data.get(d),f=e&&e.type;return"StyledText"===f}var i=!1;return a.createClass({displayName:"funTextEditor",render:c,mixins:[e.mixins.editorAPIMixin,g.linkColorPickerMixin],getThemeColors:function(){return this.getEditorAPI().theme.colors.getAll()},getThemeFonts:function(){return this.getEditorAPI().theme.fonts.getAll()},getDocumentType:function(){return this.getEditorAPI().generalInfo.getDocumentType()},getLanguages:function(){return this.getEditorAPI().theme.fonts.getCharacterSet()},getTextEditorLayout:function(){var a={};if(j(this.getEditorAPI(),this.props.selectedComponents)){var b=this.getEditorAPI(),c=this.getTextComponentFromProps(),d=b.components.layout.getRelativeToScreen(c),e=b.components.layout.isShowOnFixedPosition(c);a={top:d.y,left:d.x,width:d.width,height:d.height,position:e?"fixed":"absolute"},e&&(a.top+=b.editorConfig.editingAreaLayout.top,a.left+=b.editorConfig.editingAreaLayout.left)}return this.props.isOpenTextEditor||(a.visibility="hidden"),a},getCurrentSelectableFontsWithParams:function(){return d.fontUtils.getCurrentSelectableFontsWithParams(this.getEditorAPI())},openLinkDialog:function(a,b){var c=this.getEditorAPI();c.openLinkPanel({link:a,callback:b})},openTextColorPicker:function(a,b,c,d){this.openColorPicker(b,a,!0,c,d)},isReady:function(){return this.getEditorAPI().isPreviewReady()&&"ready"===b.get(window,"CKEDITOR.WIX.status")},getComponentDataFromProps:function(a){return this.getEditorAPI().components.data.get(this.getTextComponentFromProps(a))},getTextComponentFromProps:function(a){return a=a||this.props,b.first(a.selectedComponents)},getValue:function(){if(j(this.getEditorAPI(),this.props.selectedComponents)){var a=this.getComponentDataFromProps();return{text:a.text,linkList:a.linkList}}return{text:"",linkList:[]}},getPanelManager:function(){return this.getEditorAPI().panelManager},renderWhenReady:function(){this.isReady()&&this.refs.richTextInput?(this.getEditorAPI().text.setCurrentTextEditor(this.refs.richTextInput),this.forceUpdate()):setTimeout(this.renderWhenReady,100)},deleteTextEditorComponentIfEmpty:function(a){var b=this.getEditorAPI().components.data.get(a);if(b){var c=b.text;d.dataUtils.isEmptyHtmlText(c)&&this.getEditorAPI().components.remove(a)}},getInitialState:function(){return{isTextEditorOpen:!1}},componentWillReceiveProps:function(a){this.props.isOpenTextEditor!==a.isOpenTextEditor&&this.setState({isTextEditorOpen:a.isOpenTextEditor})},componentWillUpdate:function(a){(!b.isEqual(this.props.selectedComponents,a.selectedComponents)||this.props.isOpenTextEditor&&!a.isOpenTextEditor)&&this.stopTextEditing()},componentDidUpdate:function(a){!a.isOpenTextEditor&&this.props.isOpenTextEditor&&(this.getEditorAPI().renderPlugins.setHideTextComponent(this.getTextComponentFromProps().id),this.refs.richTextInput.focus(),this.refs.richTextInput.selectAll(),this.refs.richTextInput.resetUndo(),this.getEditorAPI().openComponentPanel("textSettingsPanel"))},componentDidMount:function(){var a=this.getEditorAPI();this.renderWhenReady(),a.registerToGoToPreview(this.stopTextEditing)},stopTextEditing:function(){if(!i){i=!0;var a=this.getEditorAPI(),b=this;this.clearUnusedLinks(),this.getEditorAPI().renderPlugins.setHideTextComponent(null);var c=this.getTextComponentFromProps();a.waitForChangesApplied(function(){b.deleteTextEditorComponentIfEmpty(c),i=!1}),this.getEditorAPI().text.stopEditing()}},clearUnusedLinks:function(){var a=this.refs.richTextInput;a&&a.clearUnusedLinks()},handleTextChange:function(a){var b=this.getEditorAPI();this.setComponentData(a),b.waitForChangesApplied(this.takeSnapshot)},setComponentData:function(a){var c=this.getComponentDataFromProps();b.forOwn(a,function(a,b){c[b]=a}),this.getEditorAPI().components.data.update(this.getTextComponentFromProps(),c,!0)},takeSnapshot:function(){this.snapshotTimeoutHandle&&clearTimeout(this.snapshotTimeoutHandle);var a=this;this.snapshotTimeoutHandle=setTimeout(function(){a.getEditorAPI().history.add("RT:Change"),delete a.snapshotTimeoutHandle},1e3)},getRichTextProps:function(){var a=this.getEditorAPI(),c={};return h.isOpen("se_fontsRefactor")&&b.merge(c,{fontsUrls:a.fonts.css.getUrls(),themeFontsCss:a.theme.fonts.getThemeStyles(),themeColorsCss:a.theme.colors.getCss()}),c}})}),define("rEditor/rootComps/gridLines/gridLines.rt",["react/addons","lodash"],function(a,b){"use strict";function c(b,c){return a.createElement("line",{key:c+"backLine",x1:b.x1,y1:b.y1,x2:b.x2,y2:b.y2,className:"backLine"})}function d(b,c){return a.createElement("line",{key:c+"frontLine",x1:b.x1,y1:b.y1,x2:b.x2,y2:b.y2,className:"frontLine"})}return function(){return a.createElement.apply(this,["svg",{className:"gridLines "+b.keys(b.pick({fade:this.props.fade},b.identity)).join(" ")},b.map(this.props.gridLines,c.bind(this)),b.map(this.props.gridLines,d.bind(this))])}}),define("rEditor/rootComps/gridLines/gridLines",["react","lodash","core","rEditor/rootComps/gridLines/gridLines.rt"],function(a,b,c,d){"use strict";return a.createClass({displayName:"gridLines",mixins:[c.mixins.editorAPIMixin],propTypes:{gridLines:a.PropTypes.arrayOf(a.PropTypes.object),fade:a.PropTypes.bool},getDefaultProps:function(){return{fade:!1}},render:d})}),define("rEditor/rootComps/rulers/guide.rt",["react/addons","lodash","core","baseUI","uiConstants","symbols"],function(a,b,c,d,e,f){"use strict";function g(a){this.onContainerMouseDown(a)}return function(){return a.createElement("div",{className:this.props.rulerDirection+"-guide-container",style:this.getGuideContainerStyle()},a.createElement("div",{className:this.props.rulerDirection+"-guide",style:this.getGuideStyle()}),a.createElement("div",{ref:"guide",className:this.props.rulerDirection+"-guide-catcher",onClick:this.handleGuideClick,onMouseDown:g.bind(this),onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},a.createElement("div",{className:this.props.rulerDirection+"-guide-handler"},a.createElement(f.symbol,{name:this.getGuideHandlerSymbolName(),key:"guideHandler"}))),this.getBubbleMode()?a.createElement(d.bubble,b.assign({},{ref:"hoverBubble",key:"hoverBubble"},this.getBubbleProps())):null)}}),define("rEditor/rootComps/rulers/rulersComputations",["lodash","jquery"],function(a,b){"use strict";function d(a,b,c,d){var e=0,f="vertical"===a?Math.floor(c.width/100):Math.round((c.height+c.y)/100);return b&&"horizontal"===a&&(f=Math.floor(d.previewHeight+d.editingAreaLayout.top)/100),b||"horizontal"!==a||(e=Math.floor(c.y/100)+1),[e,f]}function e(a,b,c,e){for(var f=d(e,a,b,c),g=f[0],h=f[1],i=[],j=g;h>=j;j++)i.push(100*j);return i}function f(a,b,d){var e,f,g,h;e=a?0:-b.x,f=a?b.width:d.stageLayout.width-b.x-c,g=a?0:c,h=d.maxBottomY+d.marginBottom;var i=a?d.scrollTop:d.scrollTop+c;return{vertical:{min:e,max:f,minInView:e},horizontal:{min:g,max:h,minInView:i}}}function g(a,b,c,d,e,g){var h=f(a,b,c);return h="vertical"===d?h.vertical:h.horizontal,g?e<h.minInView||e>h.max:e<h.min||e>h.max}function h(a,b){return a?b?b.maxBottomY+b.marginBottom:0:"calc(100% - "+c+"px)"}function i(a,b){return a?b.width:"calc(100% - "+c+"px)"}function j(a,b,c){if("vertical"===b)return c.clientX-a.siteSegments.getPagesContainerAbsLayout().x;var d=c.pageY-a.editorConfig.editingAreaLayout.top+a.site.getScroll().y;return d}function k(a,b){var c=a.siteSegments.getPagesContainerAbsLayout();return a.isMobileEditor()?b:b+c.x}function l(a,c){var d=b(c).offset().top-parseInt(b(c).css("top"),10);return a-d}var c=22;return{getRulerNumbers:e,isGuideOutOfLimits:g,getHorizontalTicksHeight:h,calcNewGuidePosition:j,calcHorizontalDraggingPosition:l,getVerticalTicksWidth:i,getVerticalGuidePosition:k}}),define("rEditor/rootComps/rulers/guide",["react","lodash","baseUI","core","panels","util","uiConstants","rEditor/rootComps/rulers/guide.rt","rEditor/rootComps/rulers/rulersComputations"],function(a,b,c,d,e,f,g,h,i){"use strict";var j="guideToolTipTrash",k="smallVApproval",l=700,m=900,n=10,o=20,p=3,q=6,r=-5,s=5,t=600,u=500;return a.createClass({displayName:"guide",mixins:[d.mixins.editorAPIMixin,f.draggableMixin],propTypes:{rulerDirection:a.PropTypes.string.isRequired,guidePosition:a.PropTypes.number.isRequired,guideId:a.PropTypes.string.isRequired,isSelected:a.PropTypes.bool,isGuideOutOfLimitsFunc:a.PropTypes.func.isRequired,isMouseOverRulers:a.PropTypes.bool,changeDraggingStateFunc:a.PropTypes.func.isRequired,toolsHidden:a.PropTypes.bool},getInitialState:function(){return this.preventClickAfterDragEnd=!1,{isDragging:!1,isHoverBubble:!1,mouseOverGuide:!1,guidePosition:this.props.guidePosition,stepperSymbol:j,stepperValueInvalid:!1,selectedDueToHoverBubbleClick:!1,isFirstRender:!0}},componentWillReceiveProps:function(a){this.setState({stepperValueInvalid:!1,guidePosition:a.guidePosition})},componentWillUpdate:function(a,b){!this.state.isHoverBubble&&b.isHoverBubble&&this.getEditorAPI().rulers.sendBIEvent("GUIDE_TOOLTIP_APPEAR",{})},setGuideSelected:function(a){this.state.isFirstRender&&this.setState({isFirstRender:!1}),this.getEditorAPI().rulers.selectGuide(this.props.guideId,a),this.setState({stepperValueInvalid:!1,stepperSymbol:j})},getGuideHandlerSymbolName:function(){return this.state.isDragging||this.state.mouseOverGuide||this.props.isSelected?"guidesHandler_selected":"guidesHandler_regular"},getGuideContainerStyle:function(){return"horizontal"===this.props.rulerDirection?{top:this.state.guidePosition}:{left:i.getVerticalGuidePosition(this.getEditorAPI(),this.state.guidePosition)}},getGuideStyle:function(){var a=this.getEditorAPI();if("horizontal"===this.props.rulerDirection){var b=a.getPreviewSize().width;return{left:-b,width:b}}var c=a.isMobileEditor()?a.getPreviewSize().height+g.MOBILE_PREVIEW_TOP:a.getPreviewSize().height;return{height:c}},removeGuide:function(){var a=this.getEditorAPI();a.rulers.removeGuideById(this.props.guideId)},onDragStart:function(){this.props.changeDraggingStateFunc(!0),this.setState({isDragging:!0,stepperValueInvalid:!1,stepperSymbol:j})},getDragPosition:function(b){var c=a.findDOMNode(this);return"horizontal"===this.props.rulerDirection?i.calcHorizontalDraggingPosition(b.top,c):b.left-this.getEditorAPI().siteSegments.getPagesContainerAbsLayout().x},whileDrag:function(a){var b=this.getDragPosition(a);this.props.isGuideOutOfLimitsFunc(b)?(this.changeStatesToEndDrag(),this.getEditorAPI().rulers.sendBIEvent("GUIDE_DELETED",{origin:"drag_outside"}),this.removeGuide()):this.setState({guidePosition:b})},onDragEnd:function(a){this.changeStatesToEndDrag();var b=this.getDragPosition(a);this.changeGuidePosition(b,!0),this.preventClickAfterDragEnd=!0},changeStatesToEndDrag:function(){if(this.props.changeDraggingStateFunc(!1),!this.props.isMouseOverRulers){var a=this.getEditorAPI();a.rulers.updateEditorRulersState("isHovered",!1)}this.setState({isDragging:!1})},getDragLimits:function(){return"horizontal"===this.props.rulerDirection?{lockedX:!0}:{lockedY:!0}},changeGuidePosition:function(a,b){if(this.props.isGuideOutOfLimitsFunc(a))return!1;b&&this.sendDragBIEvent(this.props.guidePosition,a);var c=this.getEditorAPI();return c.rulers.changeGuidePosition(this.props.rulerDirection,this.props.guideId,a),!0},sendDragBIEvent:function(a,b){var c={xCoordinate_new:0,xCoordinate_old:0,yCoordinate_new:0,yCoordinate_old:0};"vertical"===this.props.rulerDirection?(c.xCoordinate_new=b,c.xCoordinate_old=a):(c.yCoordinate_new=b,c.yCoordinate_old=a),this.getEditorAPI().rulers.sendBIEvent("GUIDE_DRAGGED",c)},closeHoverBubble:function(){this.setState({isHoverBubble:!1})},setGuideUnselected:function(){this.state.isDragging||this.getEditorAPI().rulers.deselectGuide()},onStepperValueChangeApproval:function(a){var b=this.changeGuidePosition(parseInt(a,10));b?(this.setState({stepperSymbol:k,stepperValueInvalid:!1}),setTimeout(this.setGuideUnselected.bind(this),l)):this.setState({stepperSymbol:j,stepperValueInvalid:!0})},onStepperSteppingValueChange:function(a){var c=this.changeGuidePosition(b.parseInt(a));this.sendStepperValueChangeBIEvent(a,c),this.setState({stepperValueInvalid:!c}),c||setTimeout(function(){this.setState({stepperValueInvalid:!1})}.bind(this),m)},sendStepperValueChangeBIEvent:function(a,b){var c={type:this.props.rulerDirection,value:a,valid_value:b?"accepted":"denied"};this.getEditorAPI().rulers.sendBIEvent("VALUE_CHANGE_IN_GUIDE_TOOLTIP",c)},stepperSymbolClickFunc:function(){this.state.stepperSymbol===j&&(this.getEditorAPI().rulers.sendBIEvent("GUIDE_DELETED",{origin:"trash_icon"}),this.removeGuide())},stepperClick:function(){this.state.isHoverBubble?(this.setState({isHoverBubble:!1,stepperValueInvalid:!1,stepperSymbol:j,selectedDueToHoverBubbleClick:!0}),this.setGuideSelected("click_on_tooltip")):this.setState({stepperValueInvalid:!1,stepperSymbol:j})},getStepperWithSVGProps:function(){return{showSymbol:this.props.isSelected&&!this.state.isFirstRender,stepperClickFunc:this.stepperClick,symbolClickFunc:this.stepperSymbolClickFunc,symbolName:this.state.stepperSymbol,stepperProps:{min:-99999,max:99999,step:1,selectedUnits:"px",units:"px",afterBlur:this.onStepperValueChangeApproval,isInvalidValue:this.state.stepperValueInvalid,valueLink:{value:this.state.guidePosition,requestChange:this.onStepperSteppingValueChange},dynamicInputSize:{characterWidth:n,minWidth:o},inputInFocus:this.state.selectedDueToHoverBubbleClick}}},getOverridePositionAdjustments:function(a){return"horizontal"!==this.props.rulerDirection?{type:g.TOOLTIP.ALIGNMENT.TOP,value:"hover"===a?p:q}:void 0},getBubbleMode:function(){return this.props.isSelected&&!this.state.isFirstRender?"selected":this.state.isHoverBubble&&!this.props.toolsHidden?"hover":null},getHoverBubbleProps:function(){return{closeTrigger:[],hideMethod:this.closeHoverBubble,timeoutForMouseOverBubble:t,mouseLeftTargetNode:!this.state.isDragging&&!this.state.mouseOverGuide||this.props.isSelected,className:"hover-bubble"}},getSelectedBubbleProps:function(){return{closeTrigger:[g.TOOLTIP.TRIGGERS.OUTER_CLICK],hideMethod:this.setGuideUnselected,timeoutForMouseOverBubble:0,mouseLeftTargetNode:null,className:"selected-bubble"}},getBubbleProps:function(){var a=this.getBubbleMode(),b="hover"===a?this.getHoverBubbleProps():this.getSelectedBubbleProps(),c=this.getOverridePositionAdjustments(a),d="horizontal"===this.props.rulerDirection?s:r,e="horizontal"===this.props.rulerDirection?g.TOOLTIP.ALIGNMENT.LEFT:g.TOOLTIP.ALIGNMENT.RIGHT;return{value:{classPath:"baseUI.stepperWithSVG",props:this.getStepperWithSVGProps()},styleType:g.TOOLTIP.STYLE_TYPE.NORMAL,alignment:e,noArrow:!0,targetNode:this.refs.guide.getDOMNode(),closeTriggers:b.closeTrigger,hideMethod:b.hideMethod,marginsFromWindow:0,mouseLeftTargetNode:b.mouseLeftTargetNode,marginsFromElement:d,timeoutForMouseOverBubble:b.timeoutForMouseOverBubble,overridePositionAdjustments:c,customClasses:[b.className]}},onContainerMouseDown:function(a){a.stopPropagation(),this.props.toolsHidden||this.startDrag(a,this.getDragLimits())},onMouseLeave:function(){this.setState({mouseOverGuide:!1})},activateHoverBubble:function(){this.state.mouseOverGuide&&this.setState({isHoverBubble:!0,selectedDueToHoverBubbleClick:!1})},onMouseEnter:function(){var a=!this.props.isSelected&&!this.props.toolsHidden||this.props.isSelected&&this.state.isFirstRender;a&&(this.setState({mouseOverGuide:!0}),setTimeout(this.activateHoverBubble,u))},handleGuideClick:function(a){return a.stopPropagation(),this.state.isHoverBubble&&this.setState({isHoverBubble:!1}),this.preventClickAfterDragEnd?void(this.preventClickAfterDragEnd=!1):void(this.props.toolsHidden||this.setGuideSelected("click_on_guide"))},render:h})}),define("rEditor/rootComps/rulers/rulers.rt",["react/addons","lodash","core","util","rEditor/rootComps/rulers/guide"],function(a,b,c,d,e){"use strict";function f(a){a.preventDefault()}function g(b,c){return a.createElement("div",{key:"number-"+b,className:"ruler-number"},b)}function h(b,c){return a.createElement(e,{key:b.guideId,rulerDirection:this.props.rulerDirection,guidePosition:b.guidePosition,guideId:b.guideId,isSelected:this.props.selectedGuide===b.guideId,isGuideOutOfLimitsFunc:this.isGuideOutOfLimits,isMouseOverRulers:this.isMouseOver,changeDraggingStateFunc:this.changeDraggingState,toolsHidden:this.props.toolsHidden
})}return function(){return a.createElement.apply(this,["div",{className:b.keys(b.pick({rulers:!0,"mobile-editor-rulers":this.getEditorAPI().isMobileEditor(),"vertical-ruler":"vertical"===this.props.rulerDirection,"horizontal-ruler":"horizontal"===this.props.rulerDirection},b.identity)).join(" "),style:this.getRulersStyle(),onContextMenu:f.bind(this)},this.props.toolsHidden?null:a.createElement("div",{className:this.props.rulerDirection+"-ticks",key:this.props.rulerDirection+"-ruler",onMouseDown:this.handleMouseDown,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},this.getEditorAPI().isMobileEditor()||"vertical"!==this.props.rulerDirection?null:a.createElement("div",{className:"rulers-separator-blocker",key:"rulers-separator-blocker"}),this.getEditorAPI().isMobileEditor()||"horizontal"!==this.props.rulerDirection?null:a.createElement("div",{className:"rulers-separator "+b.keys(b.pick({"rulers-separator-hover":this.props.isHovered},b.identity)).join(" "),key:"rulers-separator"}),a.createElement("div",{className:"rulers-background "+b.keys(b.pick({"rulers-background-hover":this.props.isHovered,"rulers-background-mobile":this.getEditorAPI().isMobileEditor()},b.identity)).join(" ")},a.createElement("div",{className:"rulers-"+this.props.rulerDirection+"-ticks",style:this.getTicksPositionInBackgroundStyle()}),a.createElement.apply(this,["div",{className:"ruler-numbers-container",style:this.getRulersNumbersStyle()},b.map(this.getRulerNumbers(),g.bind(this))]))),b.map(this.props.guidesInRuler,h.bind(this))])}}),define("rEditor/rootComps/rulers/rulers",["jquery","react","lodash","baseUI","core","util","rEditor/rootComps/rulers/rulers.rt","rEditor/rootComps/rulers/rulersComputations"],function(a,b,c,d,e,f,g,h){"use strict";var i=4,j="5px -21px",k="5px 0";return b.createClass({displayName:"rulers",mixins:[e.mixins.editorAPIMixin],propTypes:{rulerDirection:b.PropTypes.string.isRequired,guidesInRuler:b.PropTypes.array.isRequired,selectedGuide:b.PropTypes.string,isHovered:b.PropTypes.bool,toolsHidden:b.PropTypes.bool,selectedComponents:b.PropTypes.array},getInitialState:function(){return this.isDragging=!1,this.isMouseOver=!1,this.previewHeight=this.getEditorAPI().getPreviewSize().height,this.viewPort=e.utils.stageUtils.getViewPort(!0),{}},componentWillMount:function(){var a=f.keyboardShortcuts.extendContext(f.keyboardShortcuts.CONTEXTS.EDITOR,this.getEditorAPI().rulers.getRulersKeyboardShortcuts());f.keyboardShortcuts.registerContext(f.keyboardShortcuts.CONTEXTS.RULERS,a),this.horizontalTicksHeight=h.getHorizontalTicksHeight(this.getEditorAPI().isMobileEditor(),this.viewPort)},shouldComponentUpdate:function(a){!this.props.isHovered&&a.isHovered&&"vertical"===this.props.rulerDirection&&this.getEditorAPI().rulers.sendBIEvent("RULERS_HOVER",{});var b=this.previewHeight;this.previewHeight=this.getEditorAPI().getPreviewSize().height;var d=this.viewPort;return this.viewPort=e.utils.stageUtils.getViewPort(!0),b!==this.previewHeight||d!==this.viewPort||!c.isEqual(a,this.props)},componentWillUpdate:function(){this.horizontalTicksHeight=h.getHorizontalTicksHeight(this.getEditorAPI().isMobileEditor(),this.viewPort)},componentDidUpdate:function(a){c.isEmpty(a.selectedComponents)&&!c.isEmpty(this.props.selectedComponents)&&this.props.selectedGuide&&this.getEditorAPI().rulers.deselectGuide()},componentWillUnmount:function(){f.keyboardShortcuts.unregisterContext(f.keyboardShortcuts.CONTEXTS.RULERS)},changeDraggingState:function(a){this.isDragging=a},getRulerNumbers:function(){var a=this.getEditorAPI(),b=a.siteSegments.getPagesContainerAbsLayout();return h.getRulerNumbers(a.isMobileEditor(),b,a.editorConfig,this.props.rulerDirection)},getRulersNumbersStyle:function(){var a=this.getEditorAPI(),b=a.siteSegments.getPagesContainerAbsLayout();return"vertical"===this.props.rulerDirection?{left:a.isMobileEditor()?i:b.x+i}:{top:a.isMobileEditor()?1:100*Math.floor(b.y/100)+80+1}},getRulersStyle:function(){if("vertical"===this.props.rulerDirection){var a=this.getEditorAPI(),b=a.siteSegments.getPagesContainerAbsLayout(),c={width:h.getVerticalTicksWidth(a.isMobileEditor(),b)};return a.isMobileEditor()&&(c.left=b.x),c}return{height:this.horizontalTicksHeight}},getTicksPositionInBackgroundStyle:function(){var a=this.getEditorAPI();if("vertical"===this.props.rulerDirection){var b=a.siteSegments.getPagesContainerAbsLayout();return{backgroundPosition:a.isMobileEditor()?0:b.x+1}}return a.isMobileEditor()?{backgroundPosition:k}:{backgroundPosition:j}},isGuideOutOfLimits:function(a,b){var c=this.getEditorAPI(),d=c.siteSegments.getPagesContainerAbsLayout();return h.isGuideOutOfLimits(c.isMobileEditor(),d,this.viewPort,this.props.rulerDirection,a,b)},handleMouseEnter:function(b){if(!a(b.target).hasClass("vertical-guide")&&!a(b.target).hasClass("horizontal-guide")){this.isMouseOver=!0;var c=this.getEditorAPI();c.rulers.updateEditorRulersState("isHovered",!0)}},handleMouseLeave:function(){if(this.isMouseOver=!1,!this.isDragging){var a=this.getEditorAPI();a.rulers.updateEditorRulersState("isHovered",!1)}},handleMouseDown:function(a){if(c.includes(["rulers-vertical-ticks","rulers-horizontal-ticks","ruler-number","ruler-numbers-container"],a.target.className)){var b=h.calcNewGuidePosition(this.getEditorAPI(),this.props.rulerDirection,a);this.isGuideOutOfLimits(b,!0)||this.setNewGuide(b)}},setNewGuide:function(a){var b=this.getEditorAPI(),c={};"vertical"===this.props.rulerDirection?(b.rulers.setVerticalGuide(a),c={xCoordinate:a,yCoordinate:0}):(b.rulers.setHorizontalGuide(a),c={xCoordinate:0,yCoordinate:a}),this.getEditorAPI().rulers.sendBIEvent("RULERS_CLICKED",c)},render:g})}),define("rEditor/rootComps/mobileFrame/mobileFrame.rt",["react/addons","lodash"],function(a,b){"use strict";return function(){return a.createElement("div",{className:b.keys(b.pick({"mobile-frame":!0,previewMode:this.props.previewMode},b.identity)).join(" "),style:this.getFrameStyle()},a.createElement("div",{className:"block-layer bottom"}),a.createElement("div",{className:"mobile-frame-top"}),a.createElement("div",{className:"site-shadow",key:"mobile-site-shadow"}),a.createElement("div",{className:"mobile-frame-bottom"}))}}),define("rEditor/rootComps/mobileFrame/mobileFrame",["react","core","rEditor/rootComps/mobileFrame/mobileFrame.rt"],function(a,b,c){"use strict";return a.createClass({displayName:"mobileFrame",propTypes:{displayShadow:a.PropTypes.bool,siteScale:a.PropTypes.number,previewMode:a.PropTypes.bool.isRequired},mixins:[b.mixins.editorAPIMixin],getMobilePreviewLeft:function(){return this.getEditorAPI().site.getXPos()},getFrameStyle:function(){var a={left:this.getMobilePreviewLeft()};return this.props.previewMode||1===this.props.siteScale||(a.height=Math.round(100/this.props.siteScale)+"%",a.transform="scale("+this.props.siteScale+")"),a},render:c})}),define("rEditor/utils/mouseMoveActions/baseSpace",["lodash","core","rEditor/utils/mouseMoveActions/mouseMoveActionTypes","experiment"],function(a,b,c,d){"use strict";function n(a,b){var c=b.x+b.width<=a.x,d=b.x>=a.x+a.width,e=!(c||d);return e&&b.y+b.height<=a.y}function o(b){var c=i.components.getSiblings(g),d=a(c).map(function(a){return i.components.layout.getRelativeToScreen(a)}).filter(function(a){return n(b,a)}).value();if(0===d.length)return 0;var e=a.max(d,function(a){return a.y+a.height});return e.y+e.height}function p(a){var b=i.components.getContainer(g),c=i.components.layout.getRelativeToScreen(b),d=o(a);return Math.max(d,c.y)}function q(b,c){i=b,g=c.compsToPush,h=c.snapThreshold||0;var j=a.pluck(g,"id");i.renderPlugins.setCompsToShowOnTop(j);var n=a.omit(i.components.layout.getRelativeToScreen(g),"bounding"),o=a.map(g,function(b){return a.omit(i.components.layout.getRelativeToScreen(b),"bounding")});k=d.isOpen("exp171")&&!d.isOpen("zoomModeSectionsRedesignOff")?c.minY:p(n),l=c.onSpaceEnd,m=c.onSpace;var q={x:c.evt.pageX,y:c.evt.pageY};f=new e.Drag(n,q,o)}function r(b){var c={x:b.pageX,y:b.pageY},d=f.getLayout(c);d.y=Math.max(d.y,k),d.y-h<=k&&(d.y=k),j=f.getBoundComponentLayouts(d);for(var e=0;e<g.length;e++)i.components.layout.updateRelativeToScreenAndAdjustLayout(g[e],a.pick(j[e],"y"));a.isFunction(m)&&m(c.x,c.y)}function s(){if(j){for(var b=0;b<g.length;b++)i.components.layout.updateRelativeToScreen(g[b],a.pick(j[b],"y"));j=null}i.renderPlugins.setCompsToShowOnTop(null),a.isFunction(l)&&l()}var f,g,h,i,j,k,l,m,e=b.utils.layoutTransitionsUtil;return{start:q,on:r,end:s,type:c.SPACER}}),define("rEditor/rootComps/sectionsReorganize/reorganizeSection.rt",["react/addons","lodash","baseUI","core"],function(a,b,c,d){"use strict";return function(){return a.createElement("div",{className:b.keys(b.pick(this.getClass(),b.identity)).join(" "),style:this.getStyle(),onMouseDown:this.onMainActionClick,onClick:this.onClick},a.createElement(c.tooltip,{id:this.props.tooltipId,value:"ONSTAGE_DRAG_STRIP_TOOLTIP",alignment:c.uiConstants.TOOLTIP.ALIGNMENT.LEFT,delay:"0",disabled:this.props.dragging},a.createElement("div",{className:"handle-wrapper",onMouseEnter:this.onMouseEnterHandle,onMouseLeave:this.onMouseLeaveHandle},a.createElement("div",{className:"handle"},a.createElement("div",{className:"graphic"},this.showFullHandleGraphic()?a.createElement(c.symbol,{name:"handle-arrow",className:"top",key:"handleArrowTop"}):null,a.createElement(c.symbol,{name:"handle-dots",className:this.showFullHandleGraphic()?"light":"dark",customDimensions:this.getHandleDimension()}),this.showFullHandleGraphic()?a.createElement(c.symbol,{name:"handle-arrow",className:"bottom",key:"handleArrowBottom"}):null),1===this.props.siteScale?a.createElement("div",{className:"half top",key:"halfTop"},a.createElement("div",{className:"action",onMouseDown:this.onTopActionClick})):null,1===this.props.siteScale?a.createElement("div",{className:"half bottom",key:"halfBottom"},a.createElement("div",{className:"action",onMouseDown:this.onBottomActionClick})):null))),a.createElement("div",{className:"block"},a.createElement("div",{className:"lines left",style:{width:"calc("+100*(1-this.props.siteScale)/2+"vw - "+(this.props.verticalScrollbarHidden?0:5)+"px)"}}),a.createElement("div",{className:"lines right",style:{width:"calc("+100*(1-this.props.siteScale)/2+"vw - "+(this.props.verticalScrollbarHidden?2*d.constants.SECTIONS_REORGANIZE.STRIP_WIDTH:5+d.constants.SECTIONS_REORGANIZE.STRIP_WIDTH)+"px - "+(this.props.verticalScrollbarHidden?0:1)+"vw)"}})),this.props.selected&&this.props.spacing&&this.props.mousePositionY>0?a.createElement("div",{key:"spaceBox",className:"space-box",style:this.getSpaceBoxStyle()}):null)}}),define("rEditor/rootComps/sectionsReorganize/reorganizeSection",["react","core","lodash","baseUI","rEditor/rootComps/sectionsReorganize/reorganizeSection.rt"],function(a,b,c,d,e){"use strict";function i(a){return a>60?6:a>50?5:a>45?4:a>40?3:a>35?2:1}function j(a){return 4*i(a)-2}var f=200,g=4200,h=b.bi.events.sectionReorganize;return a.createClass({displayName:"reorganizeSection",mixins:[b.mixins.editorAPIMixin],getInitialState:function(){return{handleHovered:!1}},componentWillReceiveProps:function(a){this.props.dragging&&!a.dragging&&this.setState({handleHovered:!1})},getClass:function(){return{section:!0,selected:this.isSelected(),hovered:this.isHovered(),scaled:1!==this.props.siteScale}},getStyle:function(){return{top:this.props.layout.y*this.props.siteScale,height:this.props.layout.height*this.props.siteScale}},onClick:function(){window.clearTimeout(this.timeout),this.timeout=null},onMainActionClick:function(a){this.timeout=window.setTimeout(this.props.onMainActionClick.bind(this,c.clone(a)),f),this.hideTooltip(),a.stopPropagation()},onTopActionClick:function(a){this.props.onTopActionClick(a),this.reportBI(h.SPACE_TOP_DRAG),this.hideTooltip(),a.stopPropagation()},onBottomActionClick:function(a){this.props.onBottomActionClick(a),this.reportBI(h.SPACE_BOTTOM_DRAG),this.hideTooltip(),a.stopPropagation()},onMouseEnterHandle:function(){this.setState({handleHovered:!0}),setTimeout(this.hideTooltip,g),this.reportBI(h.HOVER_SECTION_HANDLE)},onMouseLeaveHandle:function(){this.setState({handleHovered:!1}),this.hideTooltip()},hideTooltip:function(){d.tooltipManager.hide(this.props.tooltipId)},isSelected:function(){return this.props.spacing||this.props.draggingAndPushing||this.props.dragging?this.props.selected:this.state.handleHovered},isHovered:function(){return this.props.spacing||this.props.draggingAndPushing||this.props.dragging?this.props.selected:this.props.hovered},showFullHandleGraphic:function(){return this.isSelected()||this.isHovered()},getHandleDimension:function(){var a=j(this.props.layout.height);return{height:a+"px",viewBox:"0 0 10 "+a}},getSpaceBoxStyle:function(){var a=this.props.layout.y+this.props.layout.height,b=this.props.mousePositionY-a;return{bottom:Math.min(0,-1*b),height:Math.abs(b)}},reportBI:function(a){var c=this.getEditorAPI();c.bi.event(a,{page_id:c.pages.getFocusedPageId(),section_size:b.utils.sectionsReorganizeUtil.getSectionSizeForBI(this.props.layout.height)})},render:e})}),define("rEditor/rootComps/sectionsReorganize/sectionsReorganize.rt",["react/addons","lodash","baseUI","rEditor/rootComps/sectionsReorganize/reorganizeSection"],function(a,b,c,d){"use strict";function e(a,c,d){this.checkOverlap(b.clone(d))}function f(a,b){this.resetQuickTip()}function g(a,b,c,d,e){this.startSectionDrag(e,a,c)}function h(a,b,c,d,e){this.startDragAndPush(e,a,c)}function i(a,b,c,d,e){this.startSpacing(e,a,c)}function j(b,c,e,f){return a.createElement(d,{key:"section"+f,section:e,selected:this.isSectionSelected(e),hovered:this.isSectionHovered(e),layout:this.getSectionLayout(e),dragging:this.props.isSectionDragging,spacing:this.state.isSpacing,draggingAndPushing:this.state.isDraggingAndPushing,siteScale:this.props.siteScale,onMainActionClick:g.bind(this,b,c,e,f),onTopActionClick:h.bind(this,b,c,e,f),onBottomActionClick:i.bind(this,b,c,e,f),tooltipId:"reorganize-section-tooltip-"+f,mousePositionY:this.state.spaceY-this.editorAPI.editorConfig.editingAreaLayout.top,verticalScrollbarHidden:c})}function k(){var c=this.getSections(),d=this.editorAPI.isVerticalScrollbarHidden();return a.createElement.apply(this,["div",{className:b.keys(b.pick({"sections-reorganize":!0,"hidden-scrollbar":d,"is-hidden":this.props.isHidden,"half-opacity":this.props.halfOpacityTools,"wide-strip":this.shouldShowWideStrip()},b.identity)).join(" "),onContextMenu:this.props.onContextMenu,onMouseMove:e.bind(this,c,d),key:"sectionsReorganizeWrapper"},c&&c.length?a.createElement("div",{key:"strip",className:"reorganize-strip",ref:"checkOverlapTarget",onMouseEnter:f.bind(this,c,d)}):null,b.map(c,j.bind(this,c,d))])}return function(){return this.getSections().length>1?k.apply(this,[]):null}}),define("rEditor/rootComps/sectionsReorganize/sectionsReorganize",["react","lodash","core","rEditor/utils/mouseMoveActions/baseSpace","rEditor/utils/mouseMoveActions/baseDragAndPush","rEditor/rootComps/mixins/findOverlappedComponentMixin","rEditor/rootComps/sectionsReorganize/sectionsReorganize.rt"],function(a,b,c,d,e,f,g){"use strict";function l(a){return a.height>=h?a:{y:a.y-h/2,height:30}}function m(a){return a.siteSegments.getPagesContainerAbsLayout().y}var h=30,i=.9,j=c.utils.sectionDrag,k=c.bi.events.sectionReorganize;return a.createClass({displayName:"sectionsReorganize",mixins:[c.mixins.editorAPIMixin,f],propTypes:{onContextMenu:a.PropTypes.func,isSectionDragging:a.PropTypes.bool,sections:a.PropTypes.array,selectedSection:a.PropTypes.object,draggedAddPanelComp:a.PropTypes.array,isHidden:a.PropTypes.bool,halfOpacityTools:a.PropTypes.bool},getInitialState:function(){return this.editorAPI=this.getEditorAPI(),this.sectionsCount=0,{isDraggingAndPushing:!1,isSpacing:!1,isDraggingSection:!1,spaceY:0,mousePosition:{x:0,y:0}}},getSections:function(){var a;return this.props.sections?this.props.sections:(a=c.utils.sectionsReorganizeUtil.getPageSections(this.editorAPI),this.sectionsCount<=1&&a.length>1&&this.reportBI(k.SECTION_APPEARANCE),this.sectionsCount=a.length,a)},startDragAndPush:function(a,c,d){this.setState({isDraggingAndPushing:!0}),this.editorAPI.registerMouseMoveAction(e,{evt:b.clone(a),comps:d.comps,onDragAndPushEnd:this.onDragAndPushEndCallback}),this.editorAPI.setPageSections(c,d)},startSpacing:function(a,c,e){var f=this.editorAPI,g=e.comps,h=f.components.layout.getRelativeToStructure(g).y+f.components.layout.get(g).height,i=f.components.getSiblings(g[0]),j=b.filter(i,function(a){var b=f.components.layout.getRelativeToStructure(a);return b.y>=h});b.isEmpty(j)||(f.registerMouseMoveAction(d,{evt:b.clone(a),compsToPush:j,onSpace:this.onSpaceCallback,onSpaceEnd:this.onSpaceEndCallback}),a.stopPropagation(),this.setState({isSpacing:!0}),this.editorAPI.setPageSections(c,e))},onSpaceCallback:function(a,b){this.setState({spaceY:b})},onSpaceEndCallback:function(){this.editorAPI.clearPageSections(),this.setState({isSpacing:!1,spaceY:0})},onDragAndPushEndCallback:function(){this.editorAPI.clearPageSections(),this.setState({isDraggingAndPushing:!1})},startSectionDrag:function(a,b,d){var e=this.editorAPI.ui.scroll.getScroll().scrollTop;this.reportBI(k.SECTION_ZOOM_OUT,{scale:Math.round(100*c.constants.SECTIONS_REORGANIZE.ZOOM_OUT_SCALE)}),this.editorAPI.registerMouseMoveAction(j,{sections:b,evt:a,minY:m(this.editorAPI),draggedSection:d,onDragEnd:this.onSectionDragEnd.bind(this,d,d.position.top),onDragStart:this.onSectionDragStart.bind(this,a,d,b)},!0),this.props.setSiteScale(c.constants.SECTIONS_REORGANIZE.ZOOM_OUT_SCALE,e*c.constants.SECTIONS_REORGANIZE.ZOOM_OUT_SCALE)},onSectionDragStart:function(a,b,c){this.editorAPI.documentMode.allowShowingFixedComponents(!1),this.editorAPI.setPageSections(c,b),this.setState({isDraggingSection:!0})},onSectionDragEnd:function(a,b){a=this.props.selectedSection||a,this.reportBI(k.REORDER_SECTION,{position_before:b,position_after:a.position.top,section_size:c.utils.sectionsReorganizeUtil.getSectionSizeForBI(a.position.bottom-a.position.top)});var d=a.position,e=d.bottom-d.top,f=d.top-(window.innerHeight-e)/2+this.editorAPI.editorConfig.editingAreaLayout.top;this.editorAPI.clearPageSections(),setTimeout(function(){this.reportBI(k.SECTION_ZOOM_IN,{scale:Math.round(100*c.constants.SECTIONS_REORGANIZE.ZOOM_IN_SCALE)}),this.props.setSiteScale(c.constants.SECTIONS_REORGANIZE.ZOOM_IN_SCALE,f,this.editorAPI.documentMode.allowShowingFixedComponents.bind(this,!0))}.bind(this),c.constants.SECTIONS_REORGANIZE.ZOOM_IN_DELAY_MS),this.setState({isDraggingSection:!1})},isSectionSelected:function(a){return this.props.selectedSection&&b.isEqual(a.comps,this.props.selectedSection.comps)},isSectionHovered:function(a){var b=this.state.mousePosition.y-this.editorAPI.editorConfig.editingAreaLayout.top;return b>=a.position.top&&b<=a.position.bottom},shouldShowWideStrip:function(){return this.state.isDraggingSection?!0:this.editorAPI.isPerformingMouseMoveAction()?!1:this.state.mousePosition.x>window.innerWidth*i},updateMousePosition:function(a){this.setState({mousePosition:a})},getSectionLayout:function(a){if(a.layout)return a.layout;if((this.props.isSectionDragging||this.state.isSpacing||this.state.isDraggingAndPushing)&&!b.isEmpty(a.comps)){var c=this.getEditorAPI().components.layout.getRelativeToScreen(a.comps);return c.bounding||c}return l({y:a.position.top,height:a.position.bottom-a.position.top})},reportBI:function(a,c){c=b.assign({page_id:this.editorAPI.pages.getFocusedPageId()},c),this.editorAPI.bi.event(a,c)},render:g})}),define("rEditor/rootComps/sectionsReorganize/sectionControlsButton.rt",["react/addons","lodash","baseUI"],function(a,b,c){"use strict";function d(){this.onClick()}return function(){return a.createElement(c.tooltip,{value:this.props.tooltip,styleType:"small",disabled:!this.props.tooltip},a.createElement("div",{className:"section-controls-button "+(this.props.label?"with-label":"")+" "+(this.props.isDisabled?"disabled":""),onClick:d.bind(this),onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave},a.createElement(c.symbol,{name:this.props.symbol}),a.createElement("span",{},this.props.label)))}}),define("rEditor/rootComps/sectionsReorganize/sectionControlsButton",["react","lodash","rEditor/rootComps/sectionsReorganize/sectionControlsButton.rt"],function(a,b,c){"use strict";return a.createClass({displayName:"sectionControlsButton",propTypes:{onClick:a.PropTypes.func,tooltip:a.PropTypes.string,symbol:a.PropTypes.string.isRequired,isDisabled:a.PropTypes.bool},onClick:function(){this.isDisabled||this.props.onClick()},render:c})}),define("rEditor/rootComps/sectionsReorganize/sectionControls.rt",["react/addons","lodash","uiConstants","baseUI","util","rEditor/rootComps/sectionsReorganize/sectionControlsButton"],function(a,b,c,d,e,f){"use strict";function g(){var g=this.getSectionStyle();return a.createElement("div",{className:b.keys(b.pick(this.getSectionControlsClasses(),b.identity)).join(" "),style:g},a.createElement("div",{className:"highlight "+(this.props.isDragging?"with-shadow":""),style:this.getHighlightStyle(),onMouseDown:this.props.onDragHandleMouseDown}),this.props.isHeader||this.props.isFooter||this.props.isGap||this.props.isDragging?null:a.createElement("div",{key:"reorder-buttons",className:"section-buttons-wrapper",style:this.getButtonsWrapperStyle()},a.createElement("div",{className:"section-buttons"},a.createElement(f,b.assign({},{onClick:this.props.onUpClicked,tooltip:"ZoomOut_Section_Tooltip_Move_Up",symbol:"sectionMoveUp",",":!0,isDisabled:this.props.isFirstSection},this.getControlButtonProps())),a.createElement(f,b.assign({},{onClick:this.props.onDownClicked,tooltip:"ZoomOut_Section_Tooltip_Move_Down",symbol:"sectionMoveDown",isDisabled:this.props.isLastSection,",":!0},this.getControlButtonProps())),this.props.isMobileEditor?null:a.createElement(f,b.assign({},{key:"duplicate_btn",onClick:this.props.onDuplicateClicked,tooltip:"ZoomOut_Section_Tooltip_Copy_Section",symbol:"sectionDuplicate"},this.getControlButtonProps())),a.createElement(f,b.assign({},{onClick:this.props.onDeleteClicked,tooltip:this.props.isMobileEditor?"ZoomOut_Section_Tooltip_Hide_Section":"ZoomOut_Section_Tooltip_Delete_Section",symbol:this.props.isMobileEditor?"sectionMobileHide":"sectionDelete"},this.getControlButtonProps())))),this.props.isGap?a.createElement("div",{key:"gap-delete",className:"section-buttons-wrapper",style:this.getButtonsWrapperStyle()},a.createElement("div",{className:"section-buttons"},a.createElement(f,b.assign({},{onClick:this.props.onDeleteClicked,symbol:"sectionDelete",label:e.translate("ZoomOut_Delete_Space_Tooltip")},this.getControlButtonProps())))):null,this.props.isHeader||this.props.isFooter?a.createElement("div",{key:"header-footer-info",className:"section-buttons-wrapper",style:this.getButtonsWrapperStyle()},a.createElement("div",{className:"section-buttons"},this.showHeader()?a.createElement(d.tooltip,{key:"header-info",value:"ZoomOut_Header_Tooltip",styleType:"small",alignment:c.TOOLTIP.ALIGNMENT.BOTTOM},a.createElement("div",{className:"header-footer-info",onMouseEnter:this.onHeaderOver},a.createElement(d.symbol,{name:"infoIcon",className:"info-icon"}),a.createElement("span",{className:"info-text"},e.translate("ZoomOut_Header")))):null,this.showFooter()?a.createElement(d.tooltip,{key:"footer-info",value:"ZoomOut_Footer_Tooltip",styleType:"small",alignment:c.TOOLTIP.ALIGNMENT.TOP},a.createElement("div",{className:"header-footer-info",onMouseEnter:this.onFooterOver},a.createElement(d.symbol,{name:"infoIcon",className:"info-icon"}),a.createElement("span",{className:"info-text"},e.translate("ZoomOut_Footer")))):null)):null)}return function(){return g.apply(this,[])}}),define("rEditor/rootComps/sectionsReorganize/sectionControls",["react","lodash","core","rEditor/rootComps/sectionsReorganize/sectionControls.rt"],function(a,b,c,d){"use strict";return a.createClass({displayName:"sectionControls",propTypes:{isMobileEditor:a.PropTypes.bool,layout:a.PropTypes.object.isRequired,siteScale:a.PropTypes.number.isRequired,showDragHighlight:a.PropTypes.bool,isDragging:a.PropTypes.bool,isSpacing:a.PropTypes.bool,isHeader:a.PropTypes.bool,isFooter:a.PropTypes.bool,onDragHandleMouseDown:a.PropTypes.func,onUpClicked:a.PropTypes.func,onDownClicked:a.PropTypes.func,onDuplicateClicked:a.PropTypes.func,onDeleteClicked:a.PropTypes.func},getDefaultProps:function(){return{isMobileEditor:!1,showDragHighlight:!1}},getInitialState:function(){return{isHoveringControlButton:!1}},componentWillMount:function(){this._setControlButtonHoverState=b.debounce(this.setControlButtonHoverState,100),this.throttledBi=b.throttle(this.bi,50,{leading:!1,trailing:!0})},getSectionControlsClasses:function(){return{"section-controls":!0,"show-highlight":this.props.showDragHighlight||this.state.isHoveringControlButton,"no-drag-handle":this.state.isHoveringControlButton||this.props.isSpacing,"header-footer-blocker":this.props.isHeader||this.props.isFooter}},getSectionStyle:function(){return{top:this.props.layout.y*this.props.siteScale,height:this.props.layout.height*this.props.siteScale}},getHighlightStyle:function(){var a=this.props.isMobileEditor?"320px":"100%",b={width:"calc("+a+" * "+this.props.siteScale+" + 2px)"};return 1===this.props.siteScale&&(b.pointerEvents="none"),b},setControlButtonHoverState:function(a){this.state.isHoveringControlButton!==a&&this.setState({isHoveringControlButton:a})},getControlButtonProps:function(){var a=this;return{onMouseEnter:function(){a._setControlButtonHoverState(!0)},onMouseLeave:function(){a._setControlButtonHoverState(!1)}}},getButtonsWrapperStyle:function(){var a="calc(25% + 100% * "+this.props.siteScale+" + 36px)";return this.props.isMobileEditor&&(a="calc(50% + 320px / 2 * "+this.props.siteScale+" + 36px)"),{height:this.props.layout.height*this.props.siteScale,left:a}},bi:function(a){this.props.editorAPI.bi.event(a,{editor_view_mode:this.props.editorAPI.getDeviceType()})},showHeader:function(){return this.props.isHeader?(this.throttledBi(c.bi.events.sectionReorganize.header_label_appear),!0):!1},showFooter:function(){return this.props.isFooter?(this.throttledBi(c.bi.events.sectionReorganize.footer_label_appear),!0):!1},onHeaderOver:function(){this.throttledBi(c.bi.events.sectionReorganize.header_tooltip_hover)},onFooterOver:function(){this.throttledBi(c.bi.events.sectionReorganize.footer_tooltip_hover)},render:d})}),define("rEditor/rootComps/sectionsReorganize/sectionsReorganizeExp.rt",["react/addons","lodash","baseUI","rEditor/rootComps/sectionsReorganize/sectionControls"],function(a,b,c,d){"use strict";function e(b,c,d,e,f){return a.createElement("line",{key:"separator-"+f,className:"section-separator",x1:e.x1,x2:e.x2,y1:e.y,y2:e.y})}function f(){var f=this.getSections(),g=this.getSpacerProps(f),h=this.getSectionControlsProps(f,g);return a.createElement("div",{className:"sections-reorganize-exp"},a.createElement.apply(this,["svg",{className:"section-separators"},b.map(this.getSeparatorLines(f),e.bind(this,f,g,h))]),h&&!this.state.isSpacing?a.createElement(d,b.assign({},{key:h.layout.y+"_"+h.layout.height,isMobileEditor:this.props.isMobileEditor},h)):null,!g||this.props.isMobileEditor&&1===this.props.siteScale?null:a.createElement(c.tooltip,{key:"spacer_tooltip",id:"zoom_mode_spacer_id",value:"ZoomOut_Change_Space_Tooltip",alignment:c.uiConstants.TOOLTIP.ALIGNMENT.CENTER,delay:"0",disabled:this.state.isSpacing},a.createElement("div",{key:"spacer",className:"spacer-handle",style:g.style,onMouseDown:g.onMouseDown},a.createElement(c.symbol,{name:"spacerHandleDots"}))))}return function(){return f.apply(this,[])}}),define("rEditor/rootComps/sectionsReorganize/sectionsReorganizeExp",["lodash","react","core","util","baseUI","rEditor/utils/mouseMoveActions/baseSpace","rEditor/rootComps/sectionsReorganize/sectionsReorganizeExp.rt"],function(a,b,c,d,e,f,g){"use strict";function l(a){return a.siteSegments.getPagesContainerAbsLayout().y}function m(a,b,c){return b>=a.left&&b<=a.right&&c>=a.top&&c<=a.bottom}function n(a,b,d){var e;if(d)e=320*b;else{var f=c.utils.stageUtils.getStageRect();e=(f.right-f.left)*b}var g=a.x*b;return g>=e}function o(a,b,d){var e;if(d)e=320*b;else{var f=c.utils.stageUtils.getStageRect();e=(f.right-f.left)*b}var g=a.x*b;return e>=g}function p(a,b,c,d){var e=b.left;return d&&(e=b.left+(b.width-320)/2),{x:a.clientX-e,y:a.clientY+c-b.top}}function q(b){if(this.props.selectedSection)return a.find(b,function(b){return a.isEqual(b.comps,this.props.selectedSection.comps)},this);var c=this.state.stageMousePosition;if(c)for(var d=0;d<b.length;d++)if(c.y>=b[d].position.top&&c.y<=b[d].position.bottom)return b[d];return null}function r(a){if(this.props.selectedSection)return-1;var b=this.state.stageMousePosition;if(b)for(var c=0;c<a.length-1;c++)if(b.y>a[c].position.bottom&&b.y<a[c+1].position.top)return c;return-1}function s(b){return this.props.selectedSection&&a.isEqual(b.comps,this.props.selectedSection.comps)}function t(a){if(!this.state.stageMousePosition)return!1;var b=this.state.stageMousePosition.y;return b>=a.position.top&&b<=a.position.bottom}function u(a){var b=t.call(this,a);return b&&n(this.state.stageMousePosition,this.props.siteScale,this.props.isMobileEditor)}function v(b,c){if(this.state.isSpacing&&this.props.selectedSection)return a.findIndex(b,s,this);for(var d=0;d<b.length;d++){var e=d>0?b[d-1]:null;if(c.y<=b[d].position.top+h&&(!e||c.y>e.position.top+h))return d}return-1}function w(b,d){var e=a.clone(b),f=[];if(!d.isCurrentPageLandingPage()){var g=c.utils.sectionsReorganizeUtil.getHeaderSection(d);e.unshift(g)}for(var h=0;h<e.length;h++){var i=e[h],j=h>0?e[h-1]:null;j&&j.position.bottom<i.position.top&&f.push(i.position.top),f.push(i.position.bottom)}return f}function x(b,d){if(!b||d&&d.isSpacerHovered)return null;var e=q.call(this,b);if(!e)return null;var f=a.findIndex(b,e),g=s.call(this,e),h=1!==this.props.siteScale,i=this;return{section:e,siteScale:this.props.siteScale,layout:this.getSectionLayout(e),showDragHighlight:!this.props.isMobileEditor||h,isDragging:g,isSpacing:this.state.isSpacing,tooltipId:"reorganize-section-tooltip",isFirstSection:0===f,isLastSection:f===b.length-1,onDragHandleMouseDown:function(a){i.startSectionDrag(a,b,e)},onDuplicateClicked:function(){c.utils.sectionsReorganizeUtil.duplicateSection(i.getEditorAPI(),b,a.findIndex(b,e));var d=i.getEditorAPI();d.bi.event(c.bi.events.sectionReorganize.reorder_panel_clicked,{editor_view_mode:d.getDeviceType(),action_clicked:"duplicate"})},onDeleteClicked:function(){c.utils.sectionsReorganizeUtil.deleteSection(i.getEditorAPI(),b,a.findIndex(b,e)),i.getEditorAPI().history.add("Delete Section");var d=i.getEditorAPI();d.bi.event(c.bi.events.sectionReorganize.reorder_panel_clicked,{editor_view_mode:d.getDeviceType(),action_clicked:"delete"})},onUpClicked:function(){i.shiftSection(b,e,-1);var a=i.getEditorAPI();a.bi.event(c.bi.events.sectionReorganize.reorder_panel_clicked,{editor_view_mode:a.getDeviceType(),action_clicked:"up"})},onDownClicked:function(){i.shiftSection(b,e,1);var a=i.getEditorAPI();a.bi.event(c.bi.events.sectionReorganize.reorder_panel_clicked,{editor_view_mode:a.getDeviceType(),action_clicked:"down"})}}}function y(a,b){return b.y>=a.y&&b.y<=a.y+a.height}function z(b){if(!b)return null;var d=a.clone(b),e=c.utils.sectionsReorganizeUtil.getHeaderSection(this.getEditorAPI());d.unshift(e);var f=r.call(this,d);if(-1===f)return null;var g={y:d[f].position.bottom,height:d[f+1].position.top-d[f].position.bottom},h=this;return{isGap:!0,layout:g,siteScale:this.props.siteScale,onDeleteClicked:function(){h.closeGapBetweenSections(d,f)}}}function A(){var b=this.state.stageMousePosition;if(!b)return null;var c=this.getEditorAPI();if(c.isCurrentPageLandingPage())return null;var f,d=c.components.layout.getRelativeToScreen(c.siteSegments.getHeader()),e=c.components.layout.getRelativeToScreen(c.siteSegments.getFooter());return y(d,b)?f={layout:d,isHeader:!0,editorAPI:c}:y(e,b)&&(f={layout:e,isFooter:!0,editorAPI:c}),f?a.assign(f,{siteScale:this.props.siteScale}):null}var h=30,i=c.bi.events.sectionReorganize,j=234,k=5;return b.createClass({
displayName:"sectionsReorganize",propTypes:{isMobileEditor:b.PropTypes.bool.isRequired,sections:b.PropTypes.array,selectedSection:b.PropTypes.object,isSectionDragging:b.PropTypes.bool,isCompDragging:b.PropTypes.bool,stageLayout:b.PropTypes.object,siteScale:b.PropTypes.number},mixins:[c.mixins.editorAPIMixin],getInitialState:function(){return{isSpacing:!1,stageMousePosition:null}},componentDidMount:function(){this._throttledUpdateMousePosition=a.throttle(this.updateMousePosition,100),window.addEventListener("mousemove",this._throttledUpdateMousePosition)},componentWillUnmount:function(){window.removeEventListener("mousemove",this._throttledUpdateMousePosition)},updateMousePosition:function(b){var d=c.utils.stageUtils.getStageLayout();if(m(d,b.clientX,b.clientY)){var e=this.getEditorAPI();b=a.pick(b,["clientX","clientY"]),c.utils.mouseScaleHandler.fitMouseCoordinatesToScale(e,b,this.props.siteScale);var f=e.ui.scroll.getScroll().scrollTop,g=f/this.props.siteScale;this.setState({stageMousePosition:p(b,d,g,this.props.isMobileEditor)})}else this.state.stageMousePosition&&this.setState({stageMousePosition:null})},getSections:function(){return this.props.sections?this.props.sections:c.utils.sectionsReorganizeUtil.getPageSections(this.getEditorAPI())},getSectionControlsProps:function(a,b){return A.call(this)||z.call(this,a)||x.call(this,a,b)},getSpacerProps:function(b){if((this.props.isCompDragging||this.props.isSectionDragging)&&!this.state.isSpacing)return null;var c=this.state.stageMousePosition;if(!b||!c)return null;var d=v.call(this,b,c),f=o(this.state.stageMousePosition,this.props.siteScale,this.props.isMobileEditor),g=q.call(this,b),h=a.findIndex(b,g),i=g?u.call(this,g):!1;if(-1===d||!f||i)return null;var j=this,k=this.props.isMobileEditor?"320px":"100%";return{style:{top:this.getSectionLayout(b[d]).y*this.props.siteScale,width:"calc("+k+" * "+this.props.siteScale+" + 2px)"},onMouseDown:function(a){e.tooltipManager.hide("zoom_mode_spacer_id"),j.startSpacing(a,b,d)},isSpacerHovered:d===h}},getSeparatorLines:function(b){var c=w(b,this.getEditorAPI()),e=this.props.stageLayout,f=d.uiUtils.getScrollbarWidth(),g=(e.width-f)*this.props.siteScale;this.props.isMobileEditor&&(g=320*this.props.siteScale);var h=(e.width-f-g)/2;return a(c).map(function(a){return a*=this.props.siteScale,[{x1:h-j,x2:h,y:a},{x1:h+g,x2:h+g+j,y:a}]},this).flatten().value()},closeGapBetweenSections:function(a,b){for(var d=a[b+1].position.top-a[b].position.bottom,e=b+1;e<a.length;e++)c.utils.sectionsReorganizeUtil.shiftSection(this.getEditorAPI(),a[e],-1*d);this.getEditorAPI().history.add("Delete Space")},shiftSection:function(b,d,e){var f=a.findIndex(b,d),g=f+e;if(!(0>g||g>=b.length)){var h=d,i=b[g];-1===e&&(h=b[g],i=d),c.utils.sectionsReorganizeUtil.switchSections(this.getEditorAPI(),b,h,i),this.getEditorAPI().history.add("Move Section")}},startSectionDrag:function(b,d,e){var f=this.getEditorAPI();b=a.clone(b),c.utils.mouseScaleHandler.fitMouseCoordinatesToScale(f,b,this.props.siteScale),f.setPageSections(d,e),f.registerMouseMoveAction(c.utils.sectionDrag,{sections:d,evt:b,minY:l(f),draggedSection:e,onDragEnd:this.onSectionDragEnd.bind(this,e,e.position.top)},!0)},onSectionDragEnd:function(a,b){a=this.props.selectedSection||a,this.reportBI(i.REORDER_SECTION,{position_before:b,position_after:a.position.top,section_size:c.utils.sectionsReorganizeUtil.getSectionSizeForBI(a.position.bottom-a.position.top)}),this.getEditorAPI().clearPageSections()},startSpacing:function(b,d,e){var g=this.getEditorAPI();b=a.clone(b),c.utils.mouseScaleHandler.fitMouseCoordinatesToScale(g,b,this.props.siteScale);for(var h=[],i=e;i<d.length;i++)h=h.concat(d[i].comps);if(!a.isEmpty(h)){var j=0===e?0:d[e-1].position.bottom;g.registerMouseMoveAction(f,{evt:b,minY:j,snapThreshold:Math.round(k/this.props.siteScale),compsToPush:h,onSpaceEnd:this.onSpaceEnd}),this.setState({isSpacing:!0}),g.setPageSections(d,d[e]),g.bi.event(c.bi.events.sectionReorganize.zoom_mode_spacer_drag)}},onSpaceEnd:function(){this.getEditorAPI().clearPageSections(),this.setState({isSpacing:!1}),this.getEditorAPI().history.add("Change Sections Space")},getSectionLayout:function(b){if(b.layout)return b.layout;if((this.props.isSectionDragging||this.state.isSpacing)&&!a.isEmpty(b.comps)){var c=this.getEditorAPI().components.layout.getRelativeToScreen(b.comps);return c.bounding||c}return{y:b.position.top,height:b.position.bottom-b.position.top}},reportBI:function(b,c){var d=this.getEditorAPI();c=a.assign({page_id:d.pages.getFocusedPageId()},c),d.bi.event(b,c)},render:g})}),define("rEditor/rootComps/pinMode/pinMode.rt",["react/addons","lodash"],function(a,b){"use strict";return function(){return a.createElement("div",{className:"pin-mode"},a.createElement("div",{className:"preview-rect",style:this.props.style}),a.createElement("div",{className:"blocking-layer",onClick:this.exitPinMode}))}}),define("rEditor/rootComps/pinMode/pinMode",["react","core","lodash","rEditor/rootComps/pinMode/pinMode.rt"],function(a,b,c,d){"use strict";return a.createClass({displayName:"pinMode",mixins:[b.mixins.editorAPIMixin],render:d,exitPinMode:function(){this.getEditorAPI().pinMode.closeAndCheckSizeRestrictions()}})}),define("rEditor/rootComps/stage/editorStage.rt",["react/addons","lodash","rEditor/rootComps/mouseCatcher","rEditor/rootComps/textEditor","rEditor/rootComps/funTextEditor","core","util","experiment","uiAnimations","rEditor/rootComps/gridLines/gridLines","rEditor/rootComps/rulers/rulers","rEditor/rootComps/mobileFrame/mobileFrame","rEditor/rootComps/sectionsReorganize/sectionsReorganize","rEditor/rootComps/sectionsReorganize/sectionsReorganizeExp","rEditor/rootComps/pinMode/pinMode","experiment!hoverBoxStateToEditorStageOff","experiment!zoomModeSectionsRedesignOff","experiment!exp171"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){"use strict";function s(b,c){var d=g.translate;return a.createElement("div",{key:"teaser",className:"mobile-optimized-teaser"},a.createElement("h1",{},d("mobile_view_notification_title")),"\n                        ",d("mobile_view_notification_text"),"\n                        ",a.createElement("a",{onClick:this.openEditorModePanel},d("mobile_view_notification_text_link")),"\n                        ",d("mobile_view_notification_text2"),"\n                    ")}function t(){var t=this.getGuides(),u=this.getEditorAPI();return a.createElement("div",{className:b.keys(b.pick({"editor-stage":!0,"tools-hidden":this.props.isReorganizeHidden},b.identity)).join(" "),id:this.props.id},u.isMobileEditor()?a.createElement(l,{key:"mobileFrame",siteScale:this.props.siteScale,displayShadow:!this.isSectionDragging(),previewMode:u.getPreviewMode()}):null,a.createElement("div",{className:"scrollable-editor-stage",ref:"scrollableEditorStage",id:"scrollableEditorStage",onScroll:this._handleScroll},a.createElement("div",{ref:"siteCover",className:"site-cover",style:{height:this.props.siteHeight*this.props.siteScale}},u.isDesktopEditor()&&this.props.editorState.viewTools.guidelinesEnabled&&!this.props.editorState.pinMode?a.createElement("div",{className:"gridLines",key:"gridLines"},a.createElement(j,{key:"pageGridLines",gridLines:this.getPageGridLines(),fade:this.shouldFadeGridLines()}),u.components.is.showMarginsIndicator(this.props.editorState.focusedContainer)?a.createElement(j,{key:"containerGridLines",gridLines:this.getContainerGridLines()}):null):null,a.createElement("div",{className:"scalable",style:this.getScalableAreaStyle()},this.props.editorState.previewMode||!this.props.editorIsInit||this.props.editorState.imageCrop.isOn?null:a.createElement(c,{ref:"mouseCatcher",key:"mouseCatcher",config:this.props.config,editorState:this.props.editorState,onContextMenu:this.props.onContextMenu,editorIsInit:this.props.editorIsInit,isSectionDragging:this.isSectionDragging(),isDragging:this.isDragging(),isResizing:this.isResizing(),isRotating:this.isRotating(),isPinMode:this.props.editorState.pinMode,performingMouseMoveAction:this.props.performingMouseMoveAction,registeredMouseMoveAction:this.props.registeredMouseMoveAction,hoveredComp:h.isOpen("exp171")&&!p&&this.state.hoveredComp||this.props.hoveredComp,hoverBoxOverlay:h.isOpen("exp171")&&!p&&this.state.hoverBoxOverlay||this.props.hoverBoxOverlay,setHoverBox:this.setHoverBox,clearHoverBox:this.clearHoverBox,selectedComponents:this.props.selectedComponents,focusedContainer:this.props.editorState.focusedContainer,mouseMoveCallback:this.props.mouseMoveCallback,compPanel:this.props.panel,editingAreaLayout:this.props.editingAreaLayout,siteScale:this.props.siteScale}),this.props.editorState.imageCrop.isOn?a.createElement(f.lazyComponent,b.assign({},{moduleName:"imageCrop.layer",key:"imageCrop"},{imageCropData:this.props.editorState.imageCrop,imageComponent:this.getImageComponent()})):null,!h.isOpen("newCK")&&this.props.editorState.isOpenTextEditor&&this.props.selectedComponents?a.createElement(d,{key:"textEditor",isResizing:this.isResizing()}):null,h.isOpen("newCK")?a.createElement(e,{key:"funTextEditor",isOpenTextEditor:this.props.editorState.isOpenTextEditor,selectedComponents:this.props.selectedComponents,isResizing:this.isResizing()}):null,this.props.editorState.viewTools.rulersEnabled&&h.isOpen("rulers")&&1===this.props.siteScale?a.createElement(k,{key:"rulers",rulerDirection:"horizontal",guidesInRuler:t.horizontalGuides,selectedGuide:this.props.editorState.viewTools.rulers.selectedGuide,isHovered:this.props.editorState.viewTools.rulers.isHovered,toolsHidden:this.props.editorState.hideTools,selectedComponents:this.props.editorState.selectedComponents}):null),a.createElement("div",{className:"non-scalable"},1!==this.props.siteScale?a.createElement("div",{className:"block-layer",key:"block-layer"},a.createElement("div",{className:"side left transition",style:this.getSideBlockLayerStyle()}),a.createElement("div",{className:"side right transition",style:this.getSideBlockLayerStyle()}),u.isMobileEditor()?null:a.createElement("div",{key:"block-layer-bottom",className:"side bottom",style:{height:"calc(100% - "+this.getSideBlockLayerHeight()+"px)"}}),this.isSectionDragging()||u.isMobileEditor()?null:a.createElement("div",{key:"scaled-site-shadow",className:"shadow",style:this.getBlockShadowStyle()})):null,r||!this.props.editorIsInit||u.isMobileEditor()||this.props.editorState.pinMode||!this.props.editorState.viewTools.sectionsHandlesEnabled?null:a.createElement(m,{key:"sectionsReorganize",ref:"sectionsReorganize",isSectionDragging:this.isSectionDragging(),sections:this.props.pageSections.sections,selectedSection:this.props.pageSections.selectedSection,siteScale:this.props.siteScale,setSiteScale:this.props.setSiteScale,draggedAddPanelComp:this.props.portalComps.addPanel,onContextMenu:this.props.onContextMenu,isHidden:this.props.isReorganizeHidden,halfOpacityTools:this.props.halfOpacityTools}),!r||q||!this.props.editorIsInit||this.props.editorState.pinMode||!u.isMobileEditor()&&1===this.props.siteScale?null:a.createElement(n,{key:"sectionsReorganize",ref:"sectionsReorganize",isMobileEditor:u.isMobileEditor(),sections:this.props.pageSections.sections,selectedSection:this.props.pageSections.selectedSection,isSectionDragging:this.isSectionDragging(),isCompDragging:this.isDragging(),siteScale:this.props.siteScale,isHidden:this.props.isReorganizeHidden,halfOpacityTools:this.props.halfOpacityTools,stageLayout:u.ui.stage.getEditingAreaLayout()})))),a.createElement("div",{className:"fixed-editor-stage",style:{width:"calc(100% - "+g.uiUtils.getScrollbarWidth()+"px)"}},a.createElement("div",{className:"fixed-editor-stage-contents-wrapper "+(1!==this.props.siteScale?"no-pointer-events":"")},a.createElement("div",{className:"scalable",style:this.getScalableAreaStyle()},this.props.editorState.pinMode?a.createElement(o,{ref:"pinMode",key:"pinMode",style:this.props.editorState.pinPreviewRectStyle}):null,this.props.editorState.viewTools.rulersEnabled&&h.isOpen("rulers")&&1===this.props.siteScale?a.createElement(k,{key:"rulers",rulerDirection:"vertical",guidesInRuler:t.verticalGuides,selectedGuide:this.props.editorState.viewTools.rulers.selectedGuide,isHovered:this.props.editorState.viewTools.rulers.isHovered,toolsHidden:this.props.editorState.hideTools}):null),a.createElement("div",{className:"non-scalable"},u.isMobileEditor()?a.createElement("div",{key:"mobileOpacityLayer",className:"mobile-frame-opacity-layer"}):null,a.createElement(i.panelsAnimation,{},this.shouldDisplayMobileOptimizedTeaser()&!u.zoomMode.isInZoomMode()?s.apply(this,[t,u]):null)))))}return function(){return t.apply(this,[])}}),define("rEditor/rootComps/stage/editorStage",["lodash","react","core","uiAnimations","rEditor/utils/mouseMoveActions/mouseMoveActionTypes","rEditor/rootComps/stage/editorStage.rt","experiment","experiment!zoomModeSectionsRedesignOff","experiment!exp171","experiment!hoverBoxStateToEditorStageOff"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(a,b){if(b&&1===b.length){var c=b[0],d=a.components.data.get(c).type;if("Image"===d)return c}return null}return b.createClass({displayName:"EditorStage",mixins:[c.mixins.editorAPIMixin],propTypes:{guidesState:b.PropTypes.object,onStageScroll:b.PropTypes.func,editingAreaLayout:b.PropTypes.object},getInitialState:function(){return{hoveredComp:null,hoverBoxOverlay:!1}},componentWillReceiveProps:function(){g.isOpen("exp171")&&!j&&this.state.hoveredComp&&!this.getEditorAPI().components.is.exist(this.state.hoveredComp)&&this.clearHoverBox()},setHoverBox:function(b,c){var d=this.getEditorAPI();if(g.isOpen("exp171")&&!g.isOpen("hoverBoxStateToEditorStageOff")){var e=d.utils.getParentIfCompCanBeSelected(b),f=g.isOpen("boxSlideShow")&&e?e:b;a.isEqual(this.state.hoveredComp,f)||this.setState({hoveredComp:f,hoverBoxOverlay:!!c})}else d.hoverBox.set(b,c)},clearHoverBox:function(){g.isOpen("exp171")&&!g.isOpen("hoverBoxStateToEditorStageOff")?this.state.hoveredComp&&this.setState({hoveredComp:null,hoverBoxOverlay:!1}):this.getEditorAPI().hoverBox.clear()},shouldDisplayMobileOptimizedTeaser:function(){var a=this.getEditorAPI();return a.isMobileEditor()&&!a.getPreviewMode()&&!a.isMobileOptimizedSite()},openEditorModePanel:function(){this.getEditorAPI().openMobileElementsPanel({mobileElementId:"mobileView"})},getStageHeight:function(){return this.props.siteHeight},isLandingPage:function(){return this.getEditorAPI().isCurrentPageLandingPage()},isPopupPage:function(){return g.isOpen("popups")&&Boolean(this.getEditorAPI().pages.popupPages.getCurrentPopupId())},isSectionDragging:function(){return this.props.registeredMouseMoveAction&&this.props.registeredMouseMoveAction.type===e.SECTION_DRAG&&this.props.performingMouseMoveAction||!1},isDragging:function(){return this.props.registeredMouseMoveAction&&this.props.registeredMouseMoveAction.type===e.DRAG&&this.props.performingMouseMoveAction},isResizing:function(){return this.props.registeredMouseMoveAction&&this.props.registeredMouseMoveAction.type===e.RESIZE},isRotating:function(){return this.props.registeredMouseMoveAction&&this.props.registeredMouseMoveAction.type===e.ROTATE},getScalableAreaStyle:function(){var a=this.props.siteScale;return 1!==a?{height:this.getStageHeight(),transform:"scale("+a+")",transformOrigin:"center 0"}:void 0},getSideBlockLayerStyle:function(){return this.getEditorAPI().isMobileEditor()?{width:"calc((100% - 320px * "+this.props.siteScale+") / 2)"}:{width:100*(1-this.props.siteScale)/2+"%"}},getSideBlockLayerHeight:function(){return Math.max(0,this.getStageHeight()*this.props.siteScale)},getBlockShadowStyle:function(){var a=100*(1-this.props.siteScale)/2;return{left:a+"%",right:a+"%",height:this.getSideBlockLayerHeight()+"px"}},updateMousePosition:function(a){i&&!h||!this.refs.sectionsReorganize||this.refs.sectionsReorganize.updateMousePosition(a)},getImageComponent:function(){return k(this.getEditorAPI(),this.props.selectedComponents)},getScroll:function(){var a=this.refs.scrollableEditorStage.getDOMNode();return{scrollTop:a.scrollTop,scrollLeft:a.scrollLeft}},setScroll:function(b){var c=this.refs.scrollableEditorStage.getDOMNode();a.isUndefined(b.scrollTop)||(c.scrollTop=b.scrollTop),a.isUndefined(b.scrollLeft)||(c.scrollLeft=b.scrollLeft)},animateScroll:function(a,b,c){var e=this.refs.scrollableEditorStage.getDOMNode();d.scrollTo(a,b,0,e,c)},getGuides:function(){var b=this.getEditorAPI(),c=b.isMobileEditor()?"mobile.":"desktop.",d=a.get(this.props.editorState.viewTools.rulers.guidesState,c);return d?{verticalGuides:d.verticalGuides,horizontalGuides:d.horizontalGuides}:{verticalGuides:[],horizontalGuides:[]}},syncPreviewScroll:function(){var a=this.getScroll();this.getEditorAPI().site.setScroll(a.scrollLeft,a.scrollTop)},_handleScroll:function(a){this.syncPreviewScroll(a),this.props.onStageScroll&&this.props.onStageScroll(a)},getSiteCoverSizes:function(){var a=this.refs.siteCover.getDOMNode();return{width:a.clientWidth,height:a.clientHeight}},getPageGridLines:function(){var a=this.getEditorAPI(),b=this.isLandingPage()||this.isPopupPage();return c.utils.gridLinesUtil.getPageGridLines(a,b)},getContainerGridLines:function(){var a=this.getEditorAPI(),b=this.props.editorState.focusedContainer;return c.utils.gridLinesUtil.getContainerGridLines(a,b)},shouldFadeGridLines:function(){var a=this.getEditorAPI(),b=this.props.editorState.focusedContainer,c=a.selection.getSelectedComponents(),d="wysiwyg.viewer.components.StripColumnsContainer";return a.components.is.showMarginsIndicator(b)||a.components.getType(c)===d&&a.components.getChildren(c).length>1},render:f})}),define("rEditor/rootComps/prefetch/prefetch.rt",["react/addons","lodash"],function(a,b){"use strict";return function(){return a.createElement("link",{rel:"prefetch prerender",href:this.getHref()})}}),define("rEditor/rootComps/prefetch/prefetch",["react","rEditor/rootComps/prefetch/prefetch.rt"],function(a,b){"use strict";return a.createClass({displayName:"prefetch",render:b,getHref:function(){return this.props.base?this.props.base.replace(/\/$/,"")+"/"+this.props.href.replace(/^\//,""):this.props.href}})}),define("rEditor/rootComps/external/qualarooFeedback/qualarooFeedback.rt",["react/addons","lodash","baseUI"],function(a,b,c){"use strict";return function(){return a.createElement(c.iframe,{ref:"iframe",className:b.keys(b.pick({hidden:this.props.inPreview||!this.state.shouldShowIframe,minimized:this.state.minimized},b.identity)).join(" "),src:this.state.shouldShowIframe?this.iframeURL:"",id:"qualarooFeedbackIframe"})}}),define("rEditor/rootComps/external/qualarooFeedback/qualarooFeedback",["lodash","react","core","util","rEditor/rootComps/external/qualarooFeedback/qualarooFeedback.rt","rEditor/bi/bi"],function(a,b,c,d,e,f){"use strict";var g=1e3,h=60*g,i="/app/external/qualarooFeedback/survey.html";return b.createClass({displayName:"qualarooFeedback",mixins:[c.mixins.editorAPIMixin,d.postMessageMixin],propTypes:{timeoutInMinutes:b.PropTypes.number.isRequired,inPreview:b.PropTypes.bool.isRequired},getInitialState:function(){var a=d.editorModel.userInfo&&d.editorModel.userInfo.email,b=d.editorModel.editorBase||"/editor-base";return this.iframeURL=b+i+"?email="+a,{shouldShowIframe:!1,minimized:!1}},componentWillMount:function(){if(this.props.timeoutInMinutes){var a=this;this.timeoutHandle=setTimeout(function(){a.setState({shouldShowIframe:!0})},this.props.timeoutInMinutes*h)}else{var b=this.getEditorAPI();b.bi.error(f.errors.QUALAROO_SURVEY_TIMEOUT_NOT_SENT)}},componentDidMount:function(){this.setPostMessageHandlerNamed("qualaroo","qualaroo",this.onMessageFromSurvey)},componentWillUnmount:function(){clearTimeout(this.timeoutHandle)},onMessageFromSurvey:function(a){this.setState({minimized:a.minimized,shouldShowIframe:a.shouldShowIframe})},render:e})}),define("rEditor/rootComps/editor.rt",["react/addons","lodash","rEditor/rootComps/topBar/topBar","rEditor/rootComps/leftBar/leftBar","rEditor/rootComps/toolBar/toolBar","rEditor/rootComps/rightClickMenu/rightClickMenu","rEditor/rootComps/panels/openedPanels","rEditor/rootComps/portal/portal","baseUI","core","uiAnimations","rEditor/rootComps/stage/editorStage","rEditor/rootComps/mobileFrame/mobileFrame","textControls","rEditor/rootComps/prefetch/prefetch","rEditor/rootComps/external/qualarooFeedback/qualarooFeedback","experiment","experiment!QualarooNewEditorSurvey","experiment!hoverBoxStateToEditorStageOff"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){"use strict";function t(a,c){var d=b.assign({},a,c);return a.hasOwnProperty("style")&&(d.style=b.defaults(d.style,a.style)),a.hasOwnProperty("className")&&c.hasOwnProperty("className")&&(d.className=c.className+" "+a.className),d}return function(){return a.createElement("div",t({className:"editor-animation-manager-wrapper",id:"editor",tabIndex:"0"},this.getAnimationsEventListeners()),a.createElement("div",{className:b.keys(b.pick({"editor-wrapper":!0,"zoom-mode":1!==this.state.siteScale},b.identity)).join(" "),onMouseMove:this.state.registeredMouseMoveAction&&!this.state.isUsingWindowMouseEvents?this.onMouseMove:b.noop,onMouseUp:this.state.registeredMouseMoveAction&&!this.state.isUsingWindowMouseEvents?this.onMouseUp:b.noop,onMouseDownCapture:this.onMouseDownCapture},this.isPreloaderVisible()?a.createElement("div",{key:"init",className:"preloader"}):null,this.editorAPI.developerMode.isEnabled()?a.createElement(j.lazyComponent,{moduleName:"wixCode.components.wixCodeLoader",key:"wix-code-loader",id:"wix-code-loader",wixCodeLoaded:this.state.wixCodeLoaded}):null,a.createElement("div",{className:b.keys(b.pick({"editor-content-wrapper":!0,"tools-hidden":this.state.hideTools&&!this.state.hideToolsAndMaintainStagePosition},b.identity)).join(" ")},a.createElement(i.splitter,{ref:"filePaneSplitter",className:"file-pane-splitter",layout:"vertical",onResize:this.handleEditingAreaResize},this.shouldShowDevModePanels()?a.createElement(i.splitter.Pane,{key:"left-panel-pane",size:"296px",maxSize:"296px"},this.state.wixCodeLoaded?a.createElement(j.lazyComponent,{moduleName:"wixCode.components.Tree",key:"wix-code-tree",id:"wix-code-tree",context:this.editorAPI.developerMode.getContext()}):null):null,a.createElement(i.splitter.Pane,{},a.createElement(i.splitter,{ref:"idePaneSplitter",className:"ide-splitter",layout:"horizontal",startCollapsedDirection:"bottom",onResize:this.handleEditingAreaResize,onDividerClick:this.editorAPI.developerMode.ui.idePane.toggleMinimize},a.createElement(i.splitter.Pane,{},a.createElement("div",{ref:"editingArea",id:"editingArea",className:b.keys(b.pick({"editing-area":!0,"mobile-editor":this.editorAPI.isMobileEditor(),"preview-mode":this.editorAPI.getPreviewMode()},b.identity)).join(" ")},a.createElement("div",{className:"preview-frame-cover"},this.editorAPI.isMobileEditor()&&this.editorAPI.getPreviewMode()?a.createElement(m,{key:"mobileFrame",previewMode:this.editorAPI.getPreviewMode()}):null,a.createElement("div",{className:"preview-container"},a.createElement("iframe",{ref:"preview",id:"preview",src:this.getPreviewSource()})),this.state.previewMode?null:a.createElement(l,{id:"stageContainer",ref:"editorStage",key:"editorStage",siteHeight:this.state.editorConfig.previewHeight,config:this.state.editorConfig,editorState:this.state,editorIsInit:this.state.editorIsInit,onContextMenu:this.onContextMenu,hoveredComp:(!q.isOpen("exp171")||s)&&this.state.hoveredComp,hoverBoxOverlay:(!q.isOpen("exp171")||s)&&this.state.hoverBoxOverlay,registeredMouseMoveAction:this.state.registeredMouseMoveAction,performingMouseMoveAction:this.state.performingMouseMoveAction,selectedComponents:this.state.selectedComponents,panel:this.getCompPanel(),editingAreaLayout:this.editorAPI.editorConfig.editingAreaLayout,mouseMoveCallback:this.updateMousePosition,siteScale:this.state.siteScale,setSiteScale:this.setSiteScale,portalComps:this.state.portalComps,pageSections:this.state.pageSections,halfOpacityTools:this.state.halfOpacityTools,isReorganizeHidden:this.isReorganizeHidden(),onStageScroll:this._handleStageScroll})),a.createElement(g,{openPanels:this.getNonCompPanels(),editorState:this.state}),a.createElement(k.leftBarAnimation,{},this.state.previewMode||this.state.pinMode||this.state.imageCrop.isOn?null:a.createElement(d,{leftBarState:this.state.leftBar,ref:"leftBar",openPanels:this.state.openPanels,isBgExcluded:this.isPopUpMode(),isMobileEditor:this.state.isMobileEditor,isEnabled:this.state.editorIsInit,key:"leftBar",onContextMenu:this.onContextMenuPreventDefault,halfOpacityTools:this.state.halfOpacityTools,isHidden:this.state.hideTools})),b.isEmpty(this.state.portalComps)?null:a.createElement(h,{key:"portalComps",comps:this.state.portalComps}))),this.state.wixCodeLoaded&&this.editorAPI.developerMode.isEnabled()?a.createElement(i.splitter.Pane,{className:"wix-code-ide-pane",key:"wix-code-ide-pane",minSize:"36px",size:"234px",onClick:this.onIdeClick},this.state.previewMode?null:a.createElement(j.lazyComponent,{moduleName:"wixCode.components.IDE",key:"wix-code-ide",id:"wix-code-ide",currentPageId:this.editorAPI.pages.getFocusedPageId(),context:this.editorAPI.developerMode.getContext(),ideContainerState:this.editorAPI.developerMode.ui.idePane.getState()}),this.state.previewMode?a.createElement(j.lazyComponent,{moduleName:"wixCode.components.console",key:"wix-code-console",id:"wix-code-console"}):null):null)))),a.createElement("div",{className:"editor-controls"},a.createElement(c,{ref:"topbar",previewMode:this.state.previewMode,isMobileEditor:this.state.isMobileEditor,isMobileOptimized:this.editorAPI.isMobileOptimizedSite(),viewTools:this.state.viewTools,previewingStatus:this.state.previewingStatus,savingStatus:this.state.savingStatus,publishingStatus:this.state.publishingStatus,performingMouseMoveAction:this.state.performingMouseMoveAction,isEnabled:this.state.editorIsInit,height:this.state.editorConfig.topBarHeight,onTopBarClicked:this.editorAPI.onTopBarClicked,onContextMenu:this.onContextMenuPreventDefault,isHidden:this.state.hideTools,shouldHideToolsBtnBlink:this.state.shouldHideToolsBtnBlink}),this.state.viewTools.toolbarEnabled&&!this.state.previewMode?a.createElement(e,{hidden:this.state.pinMode||this.state.imageCrop.isOn,toolsHidden:this.state.hideTools,halfOpacityTools:this.state.halfOpacityTools,key:"toolBar",selectedComponent:this.state.selectedComponents,isEnabled:this.state.editorIsInit,onContextMenu:this.onContextMenuPreventDefault}):null,this.state.viewTools.developerToolBarEnabled&&!this.state.previewMode?a.createElement(j.lazyComponent,{moduleName:"wixCode.components.developerToolBar",key:"developerToolbar",toolsHidden:this.state.hideTools,editedComponents:this.state.selectedComponents,isEnabled:this.state.editorIsInit,onContextMenu:this.onContextMenuPreventDefault,wixCodeLoaded:this.state.wixCodeLoaded}):null,a.createElement(i.tooltipsRenderer,{key:"tooltipsRenderer"}),a.createElement(i.floatingBubble,{ref:"floatingBubble",pinMode:this.state.pinMode}),a.createElement(i.dropDown.options,{})),this.state.editorIsInit?null:a.createElement("div",{className:"preloader-overlap",key:"preloader-overlap"}),a.createElement(k.rightClickAppearance,{direction:"top",key:"rightClick"},this.state.contextMenu?a.createElement(f,{key:this.state.contextMenu.position.x+""+this.state.contextMenu.position.y,clipboard:this.state.clipboard,position:this.state.contextMenu.position,editingAreaLayout:this.state.editorConfig.editingAreaLayout,selectedComponents:this.state.selectedComponents}):null),this.getLanguages()?a.createElement(n.themeFontsLoader,{key:"theme-font-loader",themeFonts:this.getThemeFonts(),documentType:this.getDocumentType(),languages:this.getLanguages()}):null,a.createElement(o,{href:"app/external/OrganizeImagesV2/index.html",base:this.getEditorBase()}),a.createElement(o,{href:"app/external/VideoSearch/index.html",base:this.getEditorBase()}),r?a.createElement(p,{id:"qualarooFeedback",key:"qualaroo",inPreview:this.state.previewMode,timeoutInMinutes:.1}):null))}}),define("rEditor/rootComps/editor",["lodash","core","panels","react","jquery","util","baseUI","rEditor/app/EditorAPI","rEditor/rootComps/keyboard/config/shortcutsConfig","uiAnimations","tpa","blog","shoutOut","wixStore","rEditor/rootComps/editor.rt","compPanels","experiment","experiment!wixstaff","experiment!zoomModeSectionsRedesignOff","experiment!exp171","experiment!hoverBoxStateToEditorStageOff","experiment!concurrentUsersEditing","pLoader!santa:utils"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){"use strict";function G(a,b){var c=Math.pow(10,b||0);return Math.round(c*a)/c}function H(a,b,c){return Math.min(c,Math.max(b,a))}function I(){(new window.Image).src="http://fast.fonts.com/t/1.css?apiType=css&projectid=33bd0973-5b82-45be-bb77-837225874dfe"}function K(a){var b=a.match(J);return b&&b.length&&b[1]}function L(a){var b=["DisableNewRelicScripts","DisableNewRelicScriptsSantaEditor","FallbackToSantaTopologyValues"];return a.petri_ovr&&b.map(function(a){return"specs."+a+":true"}).filter(function(b){return-1!==a.petri_ovr.indexOf(b)}).join(";")}function M(b){var c=N(b.href)?C:B,d=f.url.parseUrl(b.href).query,e=L(d),g=new f.UrlBuilder(c+(d.siteId||K(b.href))).param("isEdited","true").param("isSantaEditor","true").param("dsOrigin","Editor1.4").ifParam(e,"petri_ovr",e).ifParam(r,"iswixsite","true").param("lang",f.editorModel.languageCode).paramsObj(a.pick(d,["metaSiteId","ReactSource","SantaVersions","baseVersion","isqa","debug","editorSessionId","experiments","experimentsoff","suppressbi","WixCodeRuntimeSource"]));return g.url()}function N(a){return 0===a.indexOf(D)}function O(a){var b=f.translate("GENERAL_Close_Warning_Message");return(a||window.event).returnValue=b,b}function P(a){var b=f.url.parseUrlParams(window.location);return a.ctrlKey&&"all"===b.debug}function Q(){return a(f.editorModel.runningExperiments).pick(function(a){return"new"===a}).keys().sortBy().join(",")}function R(){var a=e(window);this.editorAPI.bi.event(b.bi.events.editor.EDITOR_READY,{is_premium:this.editorAPI.site.isPremium(),is_template:this.editorAPI.documentServices.generalInfo.isFirstSave(),window_width:a.width(),window_height:a.height(),screen_width:window.screen.width,screen_height:window.screen.height,avail_width:window.screen.availWidth,avail_height:window.screen.availHeight,prefetch:window.afterEditorPrefetch,experiments:Q()})}function S(b){return a.pick(b,a.negate(a.isUndefined))}function T(){function d(){var a=c;return c={},a}var b=this.setState,c={};this.setState=function(e,f){a.isFunction(e)?b.call(this,e,f||a.noop):(a.assign(c,e),a.isEmpty(a.pick(c,E))?b.call(this,d,f||a.noop):b.call(this,d(),f||a.noop))}.bind(this)}var x=.5;window.bi&&window.bi.event(b.bi.events.editor.EDITOR_LOADED.evid),f.newrelic.addPageAction("editor loaded"),f.performance.mark("editor loaded"),f.performance.measure("main-r started","domLoading","main-r loaded"),f.performance.measure("addPanelData loaded","main-r loaded","addPanelData loaded"),f.performance.measure("editor loaded","addPanelData loaded","editor loaded");var F,y=!0,z=f.serviceTopology.editorServerRoot||"http://editor.wix.com/html/editor/web",A=z+"/renderer/render/",B=A+"document/",C=A+"template/",D=z+"/renderer/new?",E=[["editorIsInit"],["previewMode"],["devModeContext","type"],["renderIndex"],["registeredMouseMoveAction"],["isUsingWindowMouseEvents"],["performingMouseMoveAction"],["selectedComponents"],["focusedContainer"],["openPanels"]],J=/\/([a-zA-Z0-9]{8}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{12})/;return d.createClass({displayName:"editor",mixins:[j.animationManager],propTypes:{},_resetEventListeners:function(){this._scrollListeners=[]},_handleStageScroll:function(b){a.invoke(this._scrollListeners,a.call,null,b)},getInitialState:function(){return this.editorAPI=new h(this),this.notifyEditorInit(),{editorIsInit:!1,editorConfig:this.editorAPI.editorConfig,devModeContext:this.editorAPI.developerMode.createContext(b.constants.DEVELOPER_MODE.CONTEXT_TYPES.PAGE),contextMenu:null,registeredMouseMoveAction:null,performingMouseMoveAction:!1,selectedComponents:null,focusedContainer:null,lastSelectionClickPos:null,previewMode:!1,
isMobileEditor:!1,snapData:null,lassoLayout:null,candidates:null,clipboard:{},site:{premiumPackage:void 0},viewTools:{toolbarEnabled:void 0,developerToolBarEnabled:void 0,guidelinesEnabled:void 0,sectionsHandlesEnabled:void 0,snapToEnabled:void 0,rulersEnabled:void 0,rulers:{guidesState:void 0,selectedGuide:void 0,isHovered:void 0}},helpProps:null,attachCandidate:null,constraintArea:null,openPanels:[],previewingStatus:b.constants.PROGRESS_STATUS.IDLE,savingStatus:b.constants.PROGRESS_STATUS.IDLE,publishingStatus:b.constants.PROGRESS_STATUS.IDLE,portalComps:{},leftBar:{isCollapsed:!1,notifications:{},superApps:{desktop:[],mobile:[]}},pageSections:{sections:null,selectedSection:null},siteScale:1,pinPreviewRectStyle:{opacity:0},hideTools:!1,hideToolsAndMaintainStagePosition:!1,shouldHideToolsBtnBlink:!1,halfOpacityTools:!1,mouseOverBubble:!1,unreadComments:0,isOpenTextEditor:!1,imageCrop:{isOn:!1,cropArea:null,cropOriginArea:null},renderIndex:0}},childContextTypes:{editorAPI:d.PropTypes.object,mediaServices:d.PropTypes.object,bi:d.PropTypes.object},getChildContext:function(){return{editorAPI:this.editorAPI,mediaServices:this.editorAPI.mediaServices,bi:window.bi}},notifyEditorInit:function(){this.editorAPI.initPanelManager(),k.initEditor(this.editorAPI),i.init(this.editorAPI)},notifyPreviewReady:function(a){this.editorAPI.onPreviewReady(a),k.onPreviewReady(this.editorAPI),l.onPreviewReady(this.editorAPI),p.onPreviewReady(this.editorAPI),n.onPreviewReady(this.editorAPI),f.automationUtil.onPreviewReady(this.editorAPI),f.translate.init(this.editorAPI);var b=a.viewMode.get()===a.viewMode.VIEW_MODES.MOBILE;this.editorAPI.setEditorMode(b,!0),this.setState({editorIsInit:!0}),y&&(y=!1,R.call(this),f.newrelic.finished()),m.onPreviewReady(this.editorAPI),I(),v&&this.editorAPI.concurrentUsers.checkForConcurrentUsers(!0),f.performance.mark("editor ready"),f.performance.measure("editor ready","editor loaded","editor ready")},getPreviewSize:function(){var a=this.refs.preview.getDOMNode();return{width:a.clientWidth,height:a.clientHeight}},getPreviewSource:function(){return F=F||M(document.location)},componentWillMount:function(){this._resetEventListeners()},componentWillUnmount:function(){this._resetEventListeners()},componentDidMount:function(){T.call(this),this.updateKeyboardShortcutContext();var a=this.refs.preview.getDOMNode();try{a.contentWindow&&a.contentWindow.documentServices&&this.notifyPreviewReady(a.contentWindow.documentServices)}catch(b){w.log.error("can not access preview iframe")}window.addEventListener("message",this.previewMessageHandler);var c=f.url.getParameterByName("leavePagePopUp");"false"!==c&&(window.onbeforeunload=O),window.history&&(window.history.replaceState({preview:!1},"edit mode"),window.onpopstate=this.onHistoryPopState)},componentDidUpdate:function(a,c){if(!c.editorIsInit&&this.state.editorIsInit){var d=document.getElementById("video-preloader");d&&d.parentNode.removeChild(d)}if(c.previewMode!==this.state.previewMode&&(window.history.state&&this.state.previewMode&&!window.history.state.preview?this.onEnterPreview():window.history.state&&!this.state.previewMode&&window.history.state.preview&&this.onExitPreview(),this.updateKeyboardShortcutContext(),e(document.body).toggleClass("previewMode",this.state.previewMode)),c.devModeContext.type!==this.state.devModeContext.type)switch(this.state.devModeContext.type){case b.constants.DEVELOPER_MODE.CONTEXT_TYPES.PAGE:this.getIdeSplitter().unCollapse("top");break;case b.constants.DEVELOPER_MODE.CONTEXT_TYPES.FILE:this.getIdeSplitter().collapse("top")}},onExitPreview:function(){window.history.replaceState({preview:!1},"edit mode")},onEnterPreview:function(){window.history.pushState({preview:!0},"site preview")},onHistoryPopState:function(a){if(a.state){var b=a.state.preview&&!this.state.previewMode,c=!a.state.preview&&this.state.previewMode;(b||c)&&this.editorAPI.togglePreview()}},updateKeyboardShortcutContext:function(){var a=f.keyboardShortcuts.CONTEXTS;f.keyboardShortcuts.setContext(this.state.previewMode?a.PREVIEW:a.EDITOR)},previewMessageHandler:function(a){if(0===this.getPreviewSource().indexOf(a.origin)&&"documentServicesLoaded"===a.data){var b=this.refs.preview.getDOMNode();this.notifyPreviewReady(b.contentWindow.documentServices)}},getCompPanel:function(){return a.find(this.state.openPanels,{frameType:"compPanelFrame"})},getNonCompPanels:function(){return a.reject(this.state.openPanels,{frameType:"compPanelFrame"})},registerMouseMoveAction:function(b,c,d){a.isFunction(b.start)&&b.start(this.editorAPI,c),d&&(e(window).on("mousemove",this.onMouseMove),e(window).on("mouseup",this.onMouseUp)),this.setState({registeredMouseMoveAction:b,isUsingWindowMouseEvents:!!d})},onMouseMove:function(c){b.utils.mouseScaleHandler.fitMouseCoordinatesToScale(this.editorAPI,c,this.state.siteScale);var d=!this.state.performingMouseMoveAction;d&&(f.keyboardShortcuts.disable(),this.setState({performingMouseMoveAction:!0,lastSelectionClickPos:null})),this.state.registeredMouseMoveAction&&a.isFunction(this.state.registeredMouseMoveAction.on)&&this.state.registeredMouseMoveAction.on(c)},turnOffMouseEvents:function(){e(window).off("mousemove",this.onMouseMove),e(window).off("mouseup",this.onMouseUp)},getCancelMouseHandlerStateParams:function(){return{registeredMouseMoveAction:null,isUsingWindowMouseEvents:!1,performingMouseMoveAction:!1}},onMouseUp:function(c){b.utils.mouseScaleHandler.fitMouseCoordinatesToScale(this.editorAPI,c,this.state.siteScale),this.turnOffMouseEvents(),this.state.registeredMouseMoveAction&&a.isFunction(this.state.registeredMouseMoveAction.end)&&this.state.registeredMouseMoveAction.end(c),f.keyboardShortcuts.enable();var d=this.getCancelMouseHandlerStateParams();q.isOpen("exp171")&&!u?a.isEqual(d,a.pick(this.state,a.keys(d)))||this.setState(d):this.setState(d)},onMouseDownCapture:function(a){2===a.button&&a.stopPropagation()},onContextMenu:function(a){P(a)||(a.preventDefault(),c.panelManager.closeAllPanels(),this.editorAPI.selection.selectComponentByClick(a),this.editorAPI.openRightClickMenu(a.clientX,a.clientY))},onContextMenuPreventDefault:function(a){P(a)||a.preventDefault()},onIdeClick:function(){c.panelManager.closeAllPanels()},getDocumentType:function(){return this.editorAPI.generalInfo&&this.editorAPI.generalInfo.getDocumentType()},getLanguages:function(){return this.editorAPI.theme&&this.editorAPI.theme.fonts&&this.editorAPI.theme.fonts.getCharacterSet()},getThemeFonts:function(){return this.editorAPI.theme.fonts&&this.editorAPI.theme.fonts.getAll()},getEditorBase:function(){return f.editorModel.editorBase},isPreloaderVisible:function(){var a=document.getElementById("video-preloader");return!a&&!this.state.editorIsInit},showFloatingBubble:function(a,b,c,d){this.refs.floatingBubble.showFloatingBubble(a,b,c,d)},hideFloatingBubble:function(){this.refs.floatingBubble.hideFloatingBubble()},updateMousePosition:function(a,b,c){this.refs.editorStage&&this.refs.editorStage.updateMousePosition({x:b,y:c})},setSiteScale:function(a,b,c){var d=a;if(!t||s){var e=this.refs.editingArea.getDOMNode().clientHeight,f=e/this.state.editorConfig.previewHeight;d=G(H(f,a,1),2)}d!==this.state.siteScale&&this.setState({siteScale:d}),this.editorAPI.documentServices.site.setScrollAndScale(0,b,d,x),this.editorAPI.ui.scroll.animateScroll({x:0,y:b},x,c)},isPerformingMouseMoveAction:function(){return this.state.performingMouseMoveAction},getPreviewFrameLayout:function(){return this.refs.preview.getDOMNode().getBoundingClientRect()},getEditingAreaLayout:function(){return S(this.refs.editingArea.getDOMNode().getBoundingClientRect())},getScroll:function(){return this.refs.editorStage.getScroll()},setScroll:function(a){return this.refs.editorStage.setScroll(a)},setHoverBox:function(a,b){this.refs.editorStage.setHoverBox(a,b)},clearHoverBox:function(){this.refs.editorStage.clearHoverBox()},animateScroll:function(a,b,c){return this.refs.editorStage.animateScroll(a,b,c)},addScrollListener:function(a){this._scrollListeners.push(a)},removeScrollListener:function(b){this._scrollListeners=a.without(this._scrollListeners,b)},setFocus:function(){this.getDOMNode().focus()},shouldShowDevModePanels:function(){return!this.state.previewMode&&this.editorAPI.developerMode.isEnabled()},handleEditingAreaResize:function(){this.editorAPI.updateEditingAreaLayout(this.getEditingAreaLayout())},getIdeSplitter:function(){return this.refs.idePaneSplitter},isPopUpMode:function(){return q.isOpen("popups")?Boolean(this.editorAPI.isPreviewReady()&&this.editorAPI.pages.popupPages.getCurrentPopupId()):!1},isReorganizeHidden:function(){return this.state.hideTools||this.isPopUpMode()},render:o})}),define("rEditor/rootComps/editorMain",["util","react","rEditor/rootComps/editor","experiment","lodash"],function(a,b,c,d,e){"use strict";function f(a){a.debugTools&&(window.testApi=e.assign({},window.testApi,{domSelectors:a.qaAutomation.getDomSelectors(a.react),helpers:a.debugTools.helpers})),a.qaAutomation&&a.qaAutomation.init(window),a.tpaIntegrationEditor&&a.tpaIntegrationEditor.init(window,a.tpa,a.util,a.savePublish,a.panels),a.wixckeditor&&a.wixckeditor.init(e)}function g(e){window.document.title=a.translate("EDITOR_BROWSER_TAB_NAME"),f(e),a.polyfills.register(),d.isOpen("qualaroo")&&a.qualaroo.start(),d.isOpen("fullstory")&&(a.fullStory.start(),a.fullStory.identify());var g=document.getElementById("root"),h=b.createElement(c);window.rendered=b.render(h,g)}return{start:g}}),define("rEditor/rootComps/panels/popup/overlaySettingsPanel/overlaySettingsPanel.rt",["react/addons","lodash","baseUI","util","core","helpIds","compPanels"],function(a,b,c,d,e,f,g){"use strict";function h(){var h=this.getPopupProps();return a.createElement(g.compPanelFrame,b.assign({},{title:"Popups_OverlaySettings_Panel_Header",contentClass:"settings-panel",helpId:f.SETTINGS.POPUP_OVERLAY},this.getFrameProps()),a.createElement(c.firstTimeInfoBox,{biLearnMore:this.getEditorAPI().bi.event.bind(null,e.bi.events.commonControls.FIRST_TIME_INFO_BOX.LEARN_MORE),biClose:this.getEditorAPI().bi.event.bind(null,e.bi.events.commonControls.FIRST_TIME_INFO_BOX.CLOSE),context:"settings",id:"Popup_Overlay_Settings_Teaser",text:"Popups_OverlaySettings_FirstTime_Text",linkText:"add_category_teaser_link",learnMore:this.openHelpPanelFrame,userPrefs:this.getEditorAPI().getUserPreferences()}),a.createElement(c.toggle,{label:"Popups_OverlaySettings_ShowLayer_Toggle",value:h.showOverlay,onChange:b.partial(this.getEditorAPI().pages.popupPages.toggleOverlay,this.getPageId(),h)}),a.createElement("hr",{className:"divider-short"}),!h||h.showOverlay?a.createElement(c.toggle,{key:"clickClosesOverlay",label:"Popups_OverlaySettings_ClickCloses_Toggle",valueLink:this.linkPopupPropsValue(h,"closeOnOverlayClick")}):null,h&&!h.showOverlay?a.createElement("p",{key:"clickClosesOverlayText",className:"text-block click-closes-overlay-text"},"\n        ",d.translate("Popups_OverlaySettings_Explanatory_Text"),"\n    "):null)}return function(){return h.apply(this,[])}}),define("rEditor/rootComps/panels/popup/overlaySettingsPanel/overlaySettingsPanel",["react","lodash","core","compPanels","rEditor/rootComps/panels/popup/overlaySettingsPanel/overlaySettingsPanel.rt"],function(a,b,c,d,e){"use strict";return a.createClass({displayName:"overlaySettingsPanel",mixins:[c.mixins.editorAPIMixin,d.compPanelFrameMixin],render:e,getPageId:function(){return this.getEditorAPI().pages.popupPages.getCurrentPopupId()},getPopupProps:function(){var a=this.getEditorAPI();return a.pages.popupPages.properties.get(this.getPageId(),a.viewMode.VIEW_MODES.DESKTOP)},linkPopupPropsValue:function(a,b){return{value:a&&a[b],requestChange:function(a){var c=this.getPageId(),d=this.getEditorAPI(),e={};e[b]=a,d.pages.popupPages.properties.update(c,e,d.viewMode.VIEW_MODES.DESKTOP)}.bind(this)}}})}),define("rEditor/rootComps/panels/pagesPanelMixin",["core","lodash","baseUI","pagesMenu","blog","tpa"],function(a,b,c,d,e,f){"use strict";function g(a,b){return d.specialPages.menuLogic.isSpecialPage(a,b)}function h(){return this.getEditorAPI().viewMode.get()===this.getEditorAPI().viewMode.VIEW_MODES.MOBILE}function i(){var a=this.getEditorAPI(),b=this.state.menuItemSectionNowOpened&&this.state.menuItemSectionNowOpened.pageData||d.specialPages.menuLogic.getSectionPageDataBySpecialPage(a,this.getCurrentPagePageData());b&&b.id&&a.pages.navigateTo(b.id),this.setState({menuItemToShowSettingsFor:null,isSubPagesMenuOpenedByButton:!1,menuItemSectionNowOpened:null})}return{mixins:[a.mixins.editorAPIMixin],getInitialState:function(){return{isSubPagesMenuOpenedByButton:null,menuItemSectionNowOpened:null,menuItemToShowSettingsFor:null}},isSubPagesMenuActive:function(a){return this.state.isSubPagesMenuOpenedByButton||g(this.getEditorAPI(),a)},closeSettingsPanel:function(b){this.setState({menuItemToShowSettingsFor:null}),this.getEditorAPI().bi.event(a.bi.events.topbar.pages.top_bar_PAGES_settings_close,{origin:b})},openSettingsPanel:function(a,b){this.setState({menuItemToShowSettingsFor:a},function(){b&&this.refs.pageSettingsPanel.setSettingsTab(b)}.bind(this))},openSubPagesMenu:function(b){this.setState({isSubPagesMenuOpenedByButton:!0,menuItemSectionNowOpened:b},function(){this.closeSettingsPanel.call(this,"openSpecialPages"),this.props.subpagesOpened&&this.props.subpagesOpened()}.bind(this));var c=a.utils.tpaTypeUtils.isTPA(b.pageData)?"tpa":"blog";this.getEditorAPI().bi.event(a.bi.events.topbar.pages.top_bar_PAGES_special_pages_icon_click,{type:c})},selectedMenuItemChanged:function(a){this.state.menuItemToShowSettingsFor&&this.setState({menuItemToShowSettingsFor:this.hasSettingsPanel(a)?a:null})},hasSettingsPanel:function(a){return h.call(this)||a.type.isPage},closeSubPagesMenu:function(){i.call(this),this.getEditorAPI().bi.event(a.bi.events.topbar.pages.top_bar_PAGES_special_pages_back_click)},openBlogManager:function(){e.openBlogManagerFrame(this.getEditorAPI(),"allPosts")},openStoreManager:function(){f.superApps.openDashboardUrl(f.superApps.superAppsConstants.ECOM_APP_DEF_ID,"90%","100%"),this.getEditorAPI().bi.event(a.bi.events.topbar.pages.top_bar_PAGES_store_pages_store_manager_click)},getCurrentPagePageData:function(){var a=this.getEditorAPI(),b=a.pages.getPrimaryPageId();return a.pages.data.get(b)},getCurrentTitle:function(b,c){var d=this.getEditorAPI();return b?a.utils.blogTypeUtils.isBlog(d,c)?"SiteApp_Blog_PagesPanel_Panel_PanelHeader":a.utils.wixStoreTypeUtils.isWixStore(d,c)?"SiteApp_WixStores_PagesPanel_Panel_PanelHeader":void 0:"Pages_Menu_Title_Title"}}}),define("rEditor/pagesMenu/pageNode/pageInfoTextHelper",["core"],function(a){"use strict";var b=a.utils.tpaTypeUtils,c=a.utils.blogTypeUtils,d=a.utils.wixStoreTypeUtils;return{getInfoTextForSpecialPage:function(a,e){if(c.isBlog(a,e))return"Pages_Blog_Post_Info_WhatisText";if(b.isTPA(e)){if(!d.isWixStore(a,e))return"TPA pages";if(d.isWixStoreProductPage(e))return"Pages_Store_Product_Info_WhatisText";if(d.isWixStoreCartPage(e))return"Pages_Store_Cart_Info_WhatisText";if(d.isWixStoreThankYouPage(e))return"Pages_Store_Thankyou_Info_WhatisText"}},getInfoTextForSectionPage:function(a,e){return c.isBlog(a,e)?"Pages_Menu_Blog_Tooltip":b.isTPA(e)?d.isWixStore(a,e)?"Pages_Store_Panel_Title":"TPA pages":void 0},getInfoTextForNonPage:function(a){return a.type.isLink?"Pages_Menu_Link_Tooltip":a.type.isDropdown?"Pages_Menu_Dropdown_Tooltip":void 0}}}),define("rEditor/pagesMenu/pageNode/mobile/nodeContentMobileShell.rt",["react/addons","lodash","pagesMenu","baseUI","core","symbols","util","rEditor/pagesMenu/pageNode/pageInfoTextHelper"],function(a,b,c,d,e,f,g,h){"use strict";return function(){return a.createElement(c.nodeContentCommon,b.assign({},{isVisible:void 0===this.props.isVisible?this.props.dataSource.isVisibleMobile:this.props.isVisible},this.props),a.createElement("a",{href:"javascript://settings",className:"action-button action-settings",onClick:this.onClick},a.createElement(f.symbol,{name:"quickActionsSettings"})),"\n\n    ",this.props.children,"\n")}}),define("rEditor/pagesMenu/pageNode/mobile/nodeContentMobileShell",["react","rEditor/pagesMenu/pageNode/mobile/nodeContentMobileShell.rt"],function(a,b){"use strict";return a.createClass({displayName:"nodeContentMobileShell",onClick:function(){this.props.actions.openSettingsPanel(this.props.dataSource)},render:b})}),define("rEditor/pagesMenu/pageNode/mobile/nodeContentMobileSimplePage.rt",["react/addons","lodash","rEditor/pagesMenu/pageNode/mobile/nodeContentMobileShell"],function(a,b,c){"use strict";return function(){return a.createElement(c,this.props)}}),define("rEditor/pagesMenu/pageNode/mobile/nodeContentMobileNotPage.rt",["react/addons","lodash","baseUI","symbols","rEditor/pagesMenu/pageNode/mobile/nodeContentMobileShell","rEditor/pagesMenu/pageNode/pageInfoTextHelper"],function(a,b,c,d,e,f){"use strict";function g(){var b=f.getInfoTextForNonPage(this.props.dataSource);return a.createElement(e,this.getNotPageProps(),a.createElement("a",{href:"#",key:"action-button-info-subpage",className:"action-button"},a.createElement(c.infoIcon,{symbolName:"actionButtonInfo",text:b,ref:"infoIcon"})))}return function(){return g.apply(this,[])}}),define("rEditor/pagesMenu/pageNode/mobile/nodeContentMobileSectionPage.rt",["react/addons","lodash","pagesMenu","baseUI","core","symbols","util","rEditor/pagesMenu/pageNode/pageInfoTextHelper","rEditor/pagesMenu/pageNode/mobile/nodeContentMobileShell"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(a){this.props.actions.openSubPagesMenu(this.props.dataSource)}function k(){var b=h.getInfoTextForSectionPage(this.getEditorAPI(),this.props.dataSource.pageData);return a.createElement(i,this.props,a.createElement("a",{className:"action-button action-button-special-pages-mobile",onClick:j.bind(this,b)},a.createElement(d.infoIcon,{symbolName:"actionButtonSpecialPages",propagate:!0,text:b})))}return function(){return k.apply(this,[])}}),define("rEditor/pagesMenu/pageNode/common/nodeContentSubPage.rt",["react/addons","lodash","baseUI","rEditor/pagesMenu/pageNode/pageInfoTextHelper","pagesMenu","symbols"],function(a,b,c,d,e,f){"use strict";function g(a){this.props.actions.openSettingsPanel(this.props.dataSource)}function h(){var h=d.getInfoTextForSpecialPage(this.props.editorAPI,this.props.dataSource.pageData);return a.createElement(e.nodeContentCommon,b.assign({},{isVisible:!0},this.props),a.createElement("a",{href:"javascript://settings",className:"action-button action-settings",onClick:g.bind(this,h)},a.createElement(f.symbol,{name:"quickActionsSettings"})),a.createElement("a",{href:"#",className:"action-button"},a.createElement(c.infoIcon,{symbolName:"actionButtonInfo",text:h})))}return function(){return h.apply(this,[])}}),define("rEditor/pagesMenu/pageNode/desktop/nodeContentDesktopCommon.rt",["react/addons","lodash","pagesMenu"],function(a,b,c){"use strict";return function(){return a.createElement(c.nodeContentCommon,b.assign({},{isVisible:void 0===this.props.isVisible?this.props.dataSource.isVisible:this.props.isVisible},this.props),"\n\n    ",this.props.children,"\n\n")}}),define("rEditor/pagesMenu/pageNode/desktop/nodeContentDesktopCommon",["react","rEditor/pagesMenu/pageNode/desktop/nodeContentDesktopCommon.rt"],function(a,b){"use strict";return a.createClass({displayName:"nodeContentDesktopCommon",render:b})}),define("rEditor/pagesMenu/pageNode/desktop/quickActionsMenu/quickActionsMenuCommon.rt",["react/addons","lodash","baseUI","symbols","util","pagesMenu"],function(a,b,c,d,e,f){"use strict";function g(){var b=this.props.dataSource,g=e.translate,h=f.pageMenuItemHelpers,i=this.props.editorAPI;return a.createElement(c.dropDown.contextMenu,{shouldTranslate:!1,icon:"moreRegular",className:"quick-actions action-button",shrink:this.props.shrink,onClick:this.props.setSelected,onNotificationClick:this.props.onNotificationClick,notificationCount:this.props.notificationCount,onChange:this.actionSelectedHandler},"\n\n    ",this.props.children,"\n\n    ",a.createElement(c.dropDown.option,{value:"rename"},a.createElement(d.symbol,{name:"quickActionsRename"}),a.createElement("span",{className:"qa-label"},g("Pages_Actions_Page_Rename"))),h.canDuplicate(i,b)?a.createElement(c.dropDown.option,{key:"quick-actions-duplicate",value:"duplicate"},a.createElement(d.symbol,{name:"qaDuplicate"}),a.createElement("span",{className:"qa-label"},g("Pages_Actions_Page_Duplicate"))):null,h.canUnhide(i,b)?a.createElement(c.dropDown.option,{key:"quick-actions-unhide",value:"unhide"},a.createElement(d.symbol,{name:"quickActionsShow"}),a.createElement("span",{className:"qa-label"},g("Pages_Actions_Page_Unhide"))):null,h.canHide(i,b)?a.createElement(c.dropDown.option,{key:"quick-actions-hide",value:"hide"},a.createElement(d.symbol,{name:"quickActionsHide"}),a.createElement("span",{className:"qa-label"},g("Pages_Actions_Page_Hide"))):null,this.isSubpageActive(b)?a.createElement(c.dropDown.option,{key:"quick-actions-subpage",value:"subpage"},a.createElement(d.symbol,{name:"quickActionsSubpage"}),a.createElement("span",{className:"qa-label"},g("Pages_Actions_Page_Subpage"))):null,this.isMoveUpActive(b)?a.createElement(c.dropDown.option,{key:"quick-actions-moveup",value:"moveup"},a.createElement(d.symbol,{name:"quickActionsMainPage"}),a.createElement("span",{className:"qa-label"},g("Pages_Actions_Page_MoveUp"))):null,h.canRemoveMenuItem(i,b)?a.createElement(c.dropDown.option,{key:"quick-actions-remove",value:"remove"},a.createElement(d.symbol,{name:"qaDelete"}),a.createElement("span",{className:"qa-label"},g("Pages_Actions_Page_Delete"))):null)}return function(){return g.apply(this,[])}}),define("rEditor/pagesMenu/pageNode/desktop/quickActionsMenu/quickActionsMenuCommon",["react","pagesMenu","rEditor/pagesMenu/pageNode/desktop/quickActionsMenu/quickActionsMenuCommon.rt","experiment"],function(a,b,c,d){"use strict";return a.createClass({displayName:"quickActionsMenuCommon",mixins:[b.mixins.quickActionRenameMixin],propTypes:{dataSource:a.PropTypes.object.isRequired,editorAPI:a.PropTypes.object.isRequired,editedPageIdLink:a.PropTypes.object.isRequired,onActionSelected:a.PropTypes.func.isRequired},isSubpageActive:function(a){var c=b.pageMenuItemHelpers,e=c.canSubpage(a);return d.isOpen("popups")&&(e=e&&"tree"===this.props.structureType),e},isMoveUpActive:function(a){var c=b.pageMenuItemHelpers,e=c.canMoveUp(a);return d.isOpen("popups")&&(e=e&&"tree"===this.props.structureType),e},render:c})}),define("rEditor/pagesMenu/pageNode/desktop/quickActionsMenu/quickActionsMenuPage.rt",["react/addons","lodash","baseUI","symbols","rEditor/pagesMenu/pageNode/desktop/quickActionsMenu/quickActionsMenuCommon","experiment!pageSettingsTabs","util"],function(a,b,c,d,e,f,g){"use strict";function h(){var h=g.translate;return a.createElement(e,b.assign({},{onNotificationClick:this.getOnNotificationClick(),notificationCount:1},this.props),f?a.createElement(c.dropDown.option,{key:"quick-action-tab-page-info",value:"tabPageInfo",className:"primary psp-qa"},a.createElement(d.symbol,{name:"quickActionsLinkArrow",style:{position:"relative",margin:"0 7px 0 5px"}}),a.createElement("span",{className:"qa-label"},h("Pages_Actions_Page_Info"))):null,f?a.createElement(c.dropDown.option,{key:"quick-action-tab-layout",value:"tabLayout",className:"primary psp-qa"},a.createElement(d.symbol,{name:"quickActionsLinkArrow",style:{position:"relative",margin:"0 7px 0 5px"}}),a.createElement("span",{className:"qa-label"},h("Pages_Actions_Page_Layouts"))):null,f?a.createElement(c.dropDown.option,{key:"quick-action-tab-permissions",value:"tabPermissions",className:"primary psp-qa"},a.createElement(d.symbol,{name:"quickActionsLinkArrow",style:{position:"relative",margin:"0 7px 0 5px"}}),a.createElement("span",{className:"qa-label"},h("Pages_Actions_Page_Permissions"))):null,f?a.createElement(c.dropDown.option,{key:"quick-action-tab-seo",value:"tabSEO",className:"primary psp-qa"},a.createElement(d.symbol,{name:"quickActionsLinkArrow",style:{position:"relative",margin:"0 7px 0 5px"}}),a.createElement("span",{className:"qa-label"},h("Pages_Actions_Page_SEO"))):null,f?a.createElement(c.dropDown.option,{key:"quick-action-separator",className:"separator"},a.createElement("hr",{className:"divider-long"})):null,f?null:a.createElement(c.dropDown.option,{key:"quick-action-settings",value:"settings",className:"primary"},a.createElement(d.symbol,{name:"quickActionsSettings",style:{position:"relative",top:"4px",left:"-1px"}}),a.createElement("span",{className:"qa-label"},h("Pages_Actions_Page_Settings"))))}return function(){return h.apply(this,[])}}),define("rEditor/pagesMenu/pageNode/desktop/quickActionsMenu/quickActionsMenuPage",["react","pagesMenu","rEditor/pagesMenu/pageNode/desktop/quickActionsMenu/quickActionsMenuPage.rt"],function(a,b,c){"use strict";return a.createClass({displayName:"quickActionsMenuPage",getOnNotificationClick:function(){var a=this.props.actions.openSettingsPanel,c=this.props.dataSource;return b.utils.quickActions.hasNotification(this.props.editorAPI,this.props.dataSource.pageData.id)?function(){a(c,"page")}:void 0},render:c})}),define("rEditor/pagesMenu/pageNode/desktop/nodeContentDesktopSimplePage.rt",["react/addons","lodash","rEditor/pagesMenu/pageNode/desktop/nodeContentDesktopCommon","rEditor/pagesMenu/pageNode/desktop/quickActionsMenu/quickActionsMenuPage"],function(a,b,c,d){"use strict";return function(){return a.createElement(c,this.props,a.createElement(d,this.props))}}),define("rEditor/pagesMenu/pageNode/desktop/nodeContentDesktopSectionPage.rt",["react/addons","lodash","rEditor/pagesMenu/pageNode/desktop/nodeContentDesktopCommon","rEditor/pagesMenu/pageNode/desktop/quickActionsMenu/quickActionsMenuPage","rEditor/pagesMenu/pageNode/pageInfoTextHelper","baseUI"],function(a,b,c,d,e,f){"use strict";function g(a,b){this.props.actions.openSubPagesMenu(a)}function h(){var b=this.props.dataSource,h=e.getInfoTextForSectionPage(this.getEditorAPI(),this.props.dataSource.pageData);return a.createElement(c,this.props,a.createElement(d,this.props),a.createElement("a",{href:"#",className:"action-button",onClick:g.bind(this,b,h)},a.createElement(f.infoIcon,{symbolName:"actionButtonSpecialPages",propagate:!0,text:h})))}return function(){return h.apply(this,[])}}),define("rEditor/pagesMenu/pageNode/desktop/quickActionsMenu/quickActionsMenuNotPage.rt",["react/addons","lodash","baseUI","symbols","rEditor/pagesMenu/pageNode/desktop/quickActionsMenu/quickActionsMenuCommon","rEditor/pagesMenu/pageNode/pageInfoTextHelper","util"],function(a,b,c,d,e,f,g){"use strict";function h(){var b=this.props.dataSource,f=g.translate;return a.createElement(e,this.props,b.type.isLink?a.createElement(c.dropDown.option,{key:"quick-actions-rename-link",value:"changeLink"},a.createElement(d.symbol,{name:"quickActionsLink"}),a.createElement("span",{className:"qa-label"},f("Pages_Actions_Link_Change"))):null)}return function(){return h.apply(this,[])}}),define("rEditor/pagesMenu/pageNode/desktop/quickActionsMenu/quickActionsMenuNotPage",["react","rEditor/pagesMenu/pageNode/desktop/quickActionsMenu/quickActionsMenuNotPage.rt"],function(a,b){"use strict";return a.createClass({displayName:"quickActionsMenuNotPage",render:b})}),define("rEditor/pagesMenu/pageNode/desktop/nodeContentDesktopNotPage.rt",["react/addons","lodash","baseUI","rEditor/pagesMenu/pageNode/pageInfoTextHelper","rEditor/pagesMenu/pageNode/desktop/nodeContentDesktopCommon","rEditor/pagesMenu/pageNode/desktop/quickActionsMenu/quickActionsMenuNotPage"],function(a,b,c,d,e,f){"use strict";function g(){var b=d.getInfoTextForNonPage(this.props.dataSource);return a.createElement(e,this.getNotPageProps(),a.createElement(f,this.props),a.createElement("a",{href:"#",key:"action-button-info-subpage",className:"action-button"},a.createElement(c.infoIcon,{symbolName:"actionButtonInfo",text:b,ref:"infoIcon"})))}return function(){return g.apply(this,[])}}),define("rEditor/pagesMenu/pageNodeRenderers",["rEditor/pagesMenu/pageNode/mobile/nodeContentMobileSimplePage.rt","rEditor/pagesMenu/pageNode/mobile/nodeContentMobileNotPage.rt","rEditor/pagesMenu/pageNode/mobile/nodeContentMobileSectionPage.rt","rEditor/pagesMenu/pageNode/common/nodeContentSubPage.rt","rEditor/pagesMenu/pageNode/desktop/nodeContentDesktopSimplePage.rt","rEditor/pagesMenu/pageNode/desktop/nodeContentDesktopSectionPage.rt","rEditor/pagesMenu/pageNode/desktop/nodeContentDesktopNotPage.rt"],function(a,b,c,d,e,f,g){"use strict";function h(d,e){return d.type.isPage?e?c:a:d.type.isLink||d.type.isDropdown?b:void 0}function i(a,b){return a.type.isPage?b?f:e:a.type.isLink||a.type.isDropdown?g:void 0}return{mobile:{mainMenu:h},desktop:{mainMenu:i},common:{subPages:function(){return d}}}}),define("rEditor/pagesMenu/pageNode/common/nodeContentSubPage",["react","rEditor/pagesMenu/pageNodeRenderers"],function(a,b){"use strict";return a.createClass({displayName:"nodeContentMobileSubPage",render:function(){return b.common.subPages(this.props.dataSource).call(this)}})}),define("rEditor/pagesMenu/subPages/subPages.rt",["react/addons","lodash","baseUI","core","symbols","util","rEditor/pagesMenu/pageNode/common/nodeContentSubPage"],function(a,b,c,d,e,f,g){"use strict";function h(a){a.preventDefault(),this.props.closeSubPagesMenu()}return function(){return a.createElement("div",{className:"pages-tree-container pages-menu"},a.createElement("div",{className:"pages-tree-controls"},a.createElement("a",{href:"#",className:"panel-header-close",onClick:h.bind(this)},a.createElement("button",{className:"button-control back-to-pages"},a.createElement(e.symbol,{name:"arrowLeft"})),a.createElement("span",{},f.translate("pages_blog_panel_back")))),d.utils.blogTypeUtils.isBlog(this.getEditorAPI(),this._curPageData)?a.createElement(c.firstTimeInfoBox,{key:"subpages-firsttime-for-blog",id:"blog-pages-menu",icon:"firstTimeBlogPages",title:"Pages_Blog_Firsttime_Title",text:"Pages_Blog_Firsttime_Text",hide:!1,userPrefs:this.props.userPrefs,biLearnMore:this.getEditorAPI().bi.event.bind(null,d.bi.events.commonControls.FIRST_TIME_INFO_BOX.LEARN_MORE),biClose:this.getEditorAPI().bi.event.bind(null,d.bi.events.commonControls.FIRST_TIME_INFO_BOX.CLOSE)}):null,d.utils.tpaTypeUtils.isTPA(this._curPageData)?a.createElement(c.firstTimeInfoBox,{key:"subpages-firsttime-for-tpa",id:"store-pages-menu",icon:"firstTimeStorePages",title:"Pages_Store_Firsttime_Title",text:"Pages_Store_Firsttime_Text",hide:!1,userPrefs:this.props.userPrefs,biLearnMore:this.getEditorAPI().bi.event.bind(null,d.bi.events.commonControls.FIRST_TIME_INFO_BOX.LEARN_MORE),biClose:this.getEditorAPI().bi.event.bind(null,d.bi.events.commonControls.FIRST_TIME_INFO_BOX.CLOSE)}):null,a.createElement(c.customScroll,{},a.createElement(c.treeView,{className:"pages-tree ",dataSource:this._pagesList,nodeContent:g,equalityComparer:this.equalityComparer,editorAPI:this.getEditorAPI(),actions:{openSettingsPanel:this.props.openSettingsPanel,closeSettingsPanel:this.props.closeSettingsPanel},valueLink:this.linkPage(this._curPageData.id),isRoot:!0})))}}),define("rEditor/pagesMenu/subPages/subPages",["react","core","pagesMenu","rEditor/pagesMenu/subPages/subPages.rt"],function(a,b,c,d){"use strict";return a.createClass({displayName:"subPages",mixins:[a.addons.LinkedStateMixin,b.mixins.editorAPIMixin],propTypes:{userPrefs:a.PropTypes.object,sectionMenuItem:a.PropTypes.object,openSettingsPanel:a.PropTypes.func.isRequired,closeSubPagesMenu:a.PropTypes.func.isRequired,selectedMenuItemChanged:a.PropTypes.func.isRequired},linkPage:function(a){return{value:a,requestChange:function(a){this.props.selectedMenuItemChanged(a),a&&a.pageData&&this.getEditorAPI().pages.navigateTo(a.pageData.id)}.bind(this)}},getCurrentPagePageData:function(){var a=this.getEditorAPI();return a.pages.data.get(a.pages.getPrimaryPageId())},equalityComparer:function(a,b){return a.pageData&&a.pageData.id===b},render:function(){var b,a=this.getEditorAPI();return this._curPageData=this.getCurrentPagePageData(),b=c.specialPages.menuLogic.getSpecialPagesListBySectionPageOrBySibling(a,this.props.sectionMenuItem&&this.props.sectionMenuItem.pageData||this._curPageData),
this._pagesList=a.mainMenu.convertPagesDataListToMenuItemsList(b),d.call(this)}})}),define("rEditor/pagesMenu/mainMenuTreeState",["lodash"],function(a){"use strict";function c(a,c){b[a]=Boolean(c)}function d(a,c){return b.hasOwnProperty(a)?b[a]:c||!1}function e(b){a.forEach(b,function(a){a.isCollapsed=d(a.id),a.items.length>0?e(a.items):a.isCollapsed&&(a.isCollapsed=!1,c(a.id,!1))})}function f(a,b){return a.isCollapsed=d(a.id,b),a.items.length<=0&&a.isCollapsed&&(a.isCollapsed=!1,c(a.id,!1)),a}var b={};return{setMenuItemCollapsed:c,reflectStateToMenuTree:e,reflectStateToMenuItem:f}}),define("rEditor/pagesMenu/addPageMenuPanel/addPageMenuPanel.rt",["react/addons","lodash","symbols","baseUI","util"],function(a,b,c,d,e){"use strict";function f(){var b=e.translate;return a.createElement("ul",{className:"tooltip-pages-add-menu"},a.createElement("li",{},a.createElement("div",{onClick:this.props.addPage},a.createElement("span",{className:"icon"},a.createElement(c.symbol,{name:"addPagePanelPage"})),a.createElement("div",{},a.createElement("span",{className:"title"},b("Pages_Menu_Add_Page_Title")),a.createElement("span",{className:"description"},b("Pages_Menu_Add_Page_Text")))),a.createElement("li",{},a.createElement("div",{onClick:this.props.addLink},a.createElement("span",{className:"icon"},a.createElement(c.symbol,{name:"addPagePanelLink"})),a.createElement("div",{},a.createElement("span",{className:"title"},"\n                    ",b("Pages_Menu_Add_Link_Title"),"\n                    ",a.createElement(d.tooltip,{value:"Pages_Menu_Add_Link_Tooltip",width:"228",alignment:d.uiConstants.TOOLTIP.ALIGNMENT.TOP},a.createElement("div",{className:"title-help-icon"},a.createElement(c.symbol,{name:"infoSmall"})))),a.createElement("span",{className:"description"},b("Pages_Menu_Add_Link_Text"))))),a.createElement("li",{},a.createElement("div",{onClick:this.props.addDropdown},a.createElement("span",{className:"icon"},a.createElement(c.symbol,{name:"addPagePanelDropDown"})),a.createElement("div",{},a.createElement("span",{className:"title"},"\n                    ",b("Pages_Menu_Add_Dropdown_Title"),"\n                    ",a.createElement(d.tooltip,{value:this.getTooltipValue(),width:"240px",alignment:d.uiConstants.TOOLTIP.ALIGNMENT.TOP},a.createElement("div",{className:"title-help-icon"},a.createElement(c.symbol,{name:"infoSmall"})))),a.createElement("span",{className:"description"},b("Pages_Menu_Add_Dropdown_Text")))))))}return function(){return f.apply(this,[])}}),define("rEditor/pagesMenu/addPageMenuPanel/addPageMenuPanel",["react","lodash","baseUI","rEditor/pagesMenu/addPageMenuPanel/addPageMenuPanel.rt"],function(a,b,c,d){"use strict";return a.createClass({displayName:"addPageMenuPanel",mixins:[],propTypes:{addPage:a.PropTypes.func,addLink:a.PropTypes.func,addDropdown:a.PropTypes.func},getTooltipValue:function(){return{classPath:"baseUI.popoverTemplates.imageAndTextTooltip",props:{image:"addDropDownHint",imageContainerStyle:{backgroundColor:"#17a8a4"},text:"Pages_Menu_Add_Dropdown_Tooltip"}}},render:d})}),define("rEditor/pagesMenu/pageTransitionsPanel/pageTransitionsUtils",["util"],function(a){"use strict";var b={none:"Pages_Menu_Transitions_None",swipeHorizontalFullScreen:"Pages_Menu_Transitions_SwipeH_Selected",swipeVerticalFullScreen:"Pages_Menu_Transitions_SwipeV_Popup",crossfade:"Pages_Menu_Transitions_CrossFade",outIn:"Pages_Menu_Transitions_OutIn"},c={outIn:"outIn",crossfade:"crossfade",shrinkfade:"crossfade",swipeHorizontal:"swipeHorizontalFullScreen",swipeHorizontalFullScreen:"swipeHorizontalFullScreen",swipeVertical:"swipeVerticalFullScreen",swipeVerticalFullScreen:"swipeVerticalFullScreen",none:"none"};return{calcNewIdFromLegacy:function(a){return c[a]?c[a]:c.none},getTransitionLabelKey:function(a){var c=this.calcNewIdFromLegacy(a);return b[c]},getTransitionLabelTranslated:function(b){return a.translate(this.getTransitionLabelKey(b))}}}),define("rEditor/pagesMenu/pageTransitionsPanel/pageTransitionsPanel.rt",["react/addons","lodash","baseUI","core","symbols","util","rEditor/pagesMenu/pageTransitionsPanel/pageTransitionsUtils"],function(a,b,c,d,e,f,g){"use strict";return function(){return a.createElement("section",{className:"page-transitions",tabIndex:"0"},a.createElement("header",{className:"panel-header dark"},a.createElement("h1",{},f.translate("Pages_Menu_Transitions_Title")),a.createElement("div",{className:"buttons"},a.createElement("button",{className:"help",onClick:this.helpClicked},"?"),a.createElement("button",{className:"close",onClick:this.close},a.createElement(e.symbol,{name:"headerCloseButton"})))),a.createElement("div",{className:"content"},a.createElement(c.firstTimeInfoBox,{id:"page-transitions-panel",icon:"pageTransitions",title:"Pages_Menu_Transitions_FirstTime_Title",text:"Pages_Menu_Transitions_FirstTime_Text",hide:!0,userPrefs:this.props.userPrefs,biLearnMore:this.props.biEvent.bind(null,d.bi.events.commonControls.FIRST_TIME_INFO_BOX.LEARN_MORE),biClose:this.props.biEvent.bind(null,d.bi.events.commonControls.FIRST_TIME_INFO_BOX.CLOSE)}),a.createElement(c.thumbnails,{className:"with-labels",maxThumbsPerRow:"3",options:this.props.transitionsToShow,value:g.calcNewIdFromLegacy(this.getEditorAPI().pages.transitions.get()),onChange:this.onTransitionChange})),a.createElement("i",{className:"triangle"}))}}),define("rEditor/pagesMenu/pageTransitionsPanel/pageTransitionsPanel",["react","lodash","panels","baseUI","rEditor/pagesMenu/pageTransitionsPanel/pageTransitionsPanel.rt","rEditor/pagesMenu/pageTransitionsPanel/pageTransitionsUtils","core","util"],function(a,b,c,d,e,f,g,h){"use strict";var i=d.tooltipManager,j=[{id:"none",symbolName:"transition-none"},{id:"swipeHorizontalFullScreen",symbolName:"transition-pages-horizontal"},{id:"swipeVerticalFullScreen",symbolName:"transition-pages-vertical"},{id:"crossfade",symbolName:"transition-pages-crossfade"},{id:"outIn",symbolName:"transition-pages-inout"}];return a.createClass({displayName:"pageTransitionsPanel",mixins:[g.mixins.editorAPIMixin,h.outerClickMixin],render:e,propTypes:{onClose:a.PropTypes.func},getDefaultProps:function(){return{transitionsToShow:b.map(j,function(a){return{value:a.id,label:f.getTransitionLabelKey(a.id),symbolName:a.symbolName}})}},componentDidMount:function(){this.getDOMNode().focus()},onTransitionChange:function(a){this.getEditorAPI().pages.transitions.set(a),this.getEditorAPI().bi.event(g.bi.events.topbar.pages.top_bar_PAGES_page_transition_selected_click,{category:a}),this.performAnimationSimulation()},flattenMenuData:function(a){var c=[];return b.forEach(a.mainMenu.getMenu(),function(a){c.push(a),c=c.concat(a.items||[])}),c},performAnimationSimulation:function(){var a=this.getEditorAPI(),c=a.pages.getPrimaryPageId(),d=b.filter(this.flattenMenuData(a),function(a){return a.link?"PageLink"===a.link.type:!1}),e=b.pluck(b.pluck(d,"link"),"pageId"),f=e.indexOf("#"+c),g=f+1;f===e.length-1&&(g=0),g!==f&&a.pages.navigateTo(e[g].slice(1))},helpClicked:function(){var a={panel_name:this.props.id,origin:g.constants.BI.HELP.ORIGIN.PAGES,learn_more:!1};c.panelManager.openHelpCenter("dfc95824-954a-4d20-aad2-7971d3fbdb98",null,null,a),i.hide(this.props.id)},close:function(){this.props.onClose&&this.props.onClose(),i.hide(this.props.id)},onOuterClick:function(){this.close()}})}),define("rEditor/pagesMenu/mainMenuPages/mainMenuPageMixin",["react","lodash","core","pagesMenu","rEditor/pagesMenu/mainMenuTreeState","rEditor/utils/menuItemsRepository","experiment!pagesPanelOpenCollapsed"],function(a,b,c,d,e,f,g){"use strict";function j(a){return b.reduce(a||[],function(a,b){return b.isCollapsed||(a+=j(b.items)),a+1},0)}function k(a,b){return b?f.filterItems(a,b):a}function l(a,c){return c.type.isPage&&b.includes(a,b.get(c.pageData,"id"))}function m(a,c){return b.forEach(a,function(a,b){a.items&&a.items.length&&(a.items=m(a.items,c));for(var d=0;d<c.length;d+=1)a=c[d](a,b)}),a}function n(a,b){return a.position=b,a}var h=40,i=17;return{mixins:[c.mixins.editorAPIMixin],propTypes:{filter:a.PropTypes.any,selectedMenuItemChanged:a.PropTypes.func.isRequired},getInitialState:function(){return{selectedItemInfo:{isPage:!0,pageId:this.getEditorAPI().pages.getFocusedPageId(),menuItemId:null}}},componentWillReceiveProps:function(){var a=this.getEditorAPI().pages.getFocusedPageId();this.state.selectedItemInfo.isPage&&this.state.selectedItemInfo.pageId!==a&&this.setState({selectedItemInfo:{isPage:!0,pageId:a,menuItemId:null}})},onPageToggled:function(a,b){var c=a.props.dataSource.id;e.setMenuItemCollapsed(c,b),this.forceUpdate()},linkPage:function(){return{value:this.state.selectedItemInfo,requestChange:function(a){this.setState({selectedItemInfo:{isPage:a.type.isPage,menuItemId:a.id,pageId:a.type.isPage?b.get(a.pageData,"id"):null}}),this.props.selectedMenuItemChanged(a),a.type.isPage?this.navigateToPageById(b.get(a.pageData,"id")):a.type.isLink&&"AnchorLink"===a.type.raw&&this.scrollToAnchor(a.link)}.bind(this)}},closePanel:function(){this.props.onClose()},navigateToPageById:function(a,b){var d=this.getEditorAPI(),e=d.pages.getFocusedPageId();(e!==a||b)&&(d.pages.navigateToAndScroll(a,b,d.applyPreviewScrollToEditorScroll),d.bi.event(c.bi.events.topbar.pages.top_bar_PAGES_navigate_to_page,{page_id:a}))},scrollToAnchor:function(a){var b=a.pageId&&a.pageId.replace("#","");this.navigateToPageById(b,a.anchorDataId)},shouldShrinkMenu:function(){return j(this._menuTree)>i},equalityComparer:function(a,b){return b.isPage&&a.pageData&&a.pageData.id===b.pageId||b.menuItemId===a.id},getTreeDockerScrollTop:function(){return this.refs.pagesTree.getScrollTop()},renderTemplate:function(a){var j,c=this.getEditorAPI(),f=c.pages.getPagesData(),i=c.mainMenu.getMenuItemsTreeForMainMenu(f),o=g?f.length>h:!1;i=m(i,[function(a){return e.reflectStateToMenuItem(a,o)},n]),j=k(i,this.props.filter);var p=d.specialPages.menuLogic.getSectionPagesIds(c,f);return this._menuTree=j,this._isSectionPage=b.partial(l,p),a.call(this)}}}),define("rEditor/pagesMenu/pagesTree/pagesTree.rt",["react/addons","lodash","baseUI"],function(a,b,c){"use strict";return function(){return a.createElement(c.customScroll,{ref:"customScroll"},a.createElement(c.treeView,b.assign({},{className:this.getTreeViewClasses(),dataSource:this.props.pagesList,collapsedSelector:"isCollapsed",editorAPI:this.getEditorAPI(),isRoot:!0},this.filteredProps())))}}),define("rEditor/pagesMenu/pagesTree/pagesTree",["lodash","react","core","rEditor/pagesMenu/pagesTree/pagesTree.rt"],function(a,b,c,d){"use strict";return b.createClass({displayName:"pagesTree",mixins:[c.mixins.editorAPIMixin],propTypes:{pagesList:b.PropTypes.any.isRequired},filteredProps:function(){return a.omit(this.props,["pagesList","dataSource","className","nodeTemplate","collapsedSelector","editorAPI"])},getScrollTop:function(){return this.refs.customScroll.getScrollTop()},scrollToSelectedNode:function(){this._scrollToSelectedNode=!0},componentDidUpdate:function(){var a,b,c,d,e=NaN;this._scrollToSelectedNode&&(this._scrollToSelectedNode=!1,a=this.getDOMNode(),b=a.querySelector(".pages-tree-item.selected"),b&&(c=a.getBoundingClientRect(),d=b.getBoundingClientRect(),d.top<c.top?e=this.getScrollTop()+(d.top-c.top):d.bottom>c.bottom&&(e=this.getScrollTop()+(d.bottom-c.bottom)),isNaN(e)||this.refs.customScroll.updateScrollPosition(Math.max(0,e))))},getTreeViewClasses:function(){return"pages-tree "},render:d})}),define("rEditor/pagesMenu/pageNode/common/nodeContentNotPageMixin",["lodash"],function(a){"use strict";return{showTooltip:function(){this.refs.infoIcon&&this.refs.infoIcon.showTooltip()},hideTooltip:function(){this.refs.infoIcon&&this.refs.infoIcon.hideTooltip()},getNotPageProps:function(){return a.assign({},this.props,{onClick:this.showTooltip,onMouseLeave:this.hideTooltip})}}}),define("rEditor/pagesMenu/pageNode/desktop/nodeContentDesktopMainMenu",["react","core","rEditor/pagesMenu/pageNode/common/nodeContentNotPageMixin","rEditor/pagesMenu/pageNodeRenderers"],function(a,b,c,d){"use strict";return a.createClass({displayName:"nodeContentDesktopMainMenu",mixins:[b.mixins.editorAPIMixin,c],render:function(){var a=this.props.dataSource;return d.desktop.mainMenu(a,this.props.isSectionPage(a)).call(this)}})}),define("rEditor/pagesMenu/mainMenuPages/mainMenuPagesDesktop.rt",["react/addons","lodash","baseUI","core","symbols","util","rEditor/pagesMenu/pageNode/common/nodeContentSubPage","rEditor/pagesMenu/pagesTree/pagesTree","rEditor/pagesMenu/pageTransitionsPanel/pageTransitionsUtils","rEditor/pagesMenu/pageNode/desktop/nodeContentDesktopMainMenu"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(a,b,c){this.movePage(c,this._menuTree)}function l(){var d=this.getEditorAPI(),g=f.translate;return a.createElement("div",{className:b.keys(b.pick({"pages-menu":!0,"pages-panel-settings-opened":!!this.state.menuItemIdToShowSettingsFor},b.identity)).join(" ")},a.createElement("div",{className:b.keys(b.pick({"pages-tree-container":!0,"disable-drag":this.hasEditedPages()},b.identity)).join(" ")},this._menuTree.length>0?a.createElement(c.treeDocker,{className:b.keys(b.pick({"pages-tree-docker":!0,"pages-tree-shrinked":this.shouldShrinkMenu()},b.identity)).join(" "),key:"pages-tree-docker",onNodeMoved:k.bind(this,d,g),treeClass:"pages-tree",",":!0,treeNodeClass:"pages-tree-node",treeNodeLabelClass:"pages-tree-item",draggedClass:"rotated",previewClass:"shadow",cantBeChildClass:"cant-be-child",isDragAvailable:!this.hasEditedPages(),scrollTopGetter:this.getTreeDockerScrollTop,collapsedClass:"tree-collapsed"},a.createElement(h,{ref:"pagesTree",nodeContent:j,pagesList:this._menuTree,equalityComparer:this.equalityComparer,onNodeToggled:this.onPageToggled,isSectionPage:this._isSectionPage,actions:{openSettingsPanel:this.props.openSettingsPanel,openSubPagesMenu:this.props.openSubPagesMenu},onActionSelected:this.onActionSelected,editedPageIdLink:this.props.editedMenuItemIdLink,valueLink:this.linkPage(),shrink:this.shouldShrinkMenu()})):null,0===this._menuTree.length?a.createElement("div",{key:"noPagesFoundSymbolContainer",className:"no-pages"},a.createElement(e.symbol,{name:"noPagesFound"}),a.createElement("div",{},g("Pages_Menu_Empty_Title")),a.createElement("div",{},g("Pages_Menu_Empty_Text"))):null),a.createElement("footer",{},a.createElement(c.tooltip,{value:this.getAddPageMenu(),alignment:"right",width:"296",marginsFromWindow:"75",openTriggers:[c.uiConstants.TOOLTIP.TRIGGERS.CLICK],closeTriggers:[c.uiConstants.TOOLTIP.TRIGGERS.OUTER_CLICK],onClose:this.onAddPageMenuClose,id:"addPageMenuPopoverId",className:"popover-add-page-menu"},a.createElement(c.button,{label:"Pages_Menu_Add_Button",icon:"addPage",onClick:this.reportClick("add")})),a.createElement(c.tooltip,{value:this.getPageTransitionsPanel(),alignment:"right",width:"296",marginsFromWindow:"0",openTriggers:[c.uiConstants.TOOLTIP.TRIGGERS.CLICK],closeTriggers:[c.uiConstants.TOOLTIP.TRIGGERS.OUTER_CLICK],id:this.getPageTransitionsPanelId()},a.createElement("div",{className:"page-transition",onClick:this.reportClick("transition")},a.createElement("div",{className:"icon"},a.createElement(e.symbol,{name:"truck"})),a.createElement("div",{},a.createElement("span",{},g("Pages_Menu_Transitions_Caption")),a.createElement(c.button,{className:"btn-text",label:i.getTransitionLabelKey(d.pages.transitions.get())}))))))}return function(){return l.apply(this,[])}}),define("rEditor/pagesMenu/mainMenuPages/mainMenuPagesDesktop",["react","core","lodash","baseUI","util","pagesMenu","panels","rEditor/pagesMenu/mainMenuTreeState","rEditor/pagesMenu/addPageMenuPanel/addPageMenuPanel","rEditor/pagesMenu/pageTransitionsPanel/pageTransitionsPanel","rEditor/pagesMenu/mainMenuPages/mainMenuPageMixin","experiment","rEditor/pagesMenu/mainMenuPages/mainMenuPagesDesktop.rt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";function r(a,b,c,d){var e=a.viewMode.get();e===a.viewMode.VIEW_MODES.DESKTOP&&n.setHidden(a,b,d),e===a.viewMode.VIEW_MODES.MOBILE&&n.setHidden(a,b,void 0,d)}function t(a,b,d){a.openLinkPanel({visibleSections:{NoLink:!1},hidePageLinks:!0,link:d,pageTabTitle:"LINK_PANEL_TAB_ANCHOR",pageTabPageDropDownTitle:"LINK_PANEL_PAGE_DROP_DOWN_PAGELINK_LABEL",title:"What do you want to link to?",callback:c.once(b)})}var n=f.pageMenuItemHelpers,o="Pages_Menu_Add_New_Page",p="Pages_Menu_Add_New_Link",q="Pages_Menu_Add_New_Category",s={settings:function(a,b,c){this.props.openSettingsPanel(b,c)},rename:function(a,b,c){b.pageData?n.renamePage(a,b.pageData,c):n.renameMenuItem(a,b,c)},duplicate:function(a,b){n.duplicateMenuItem(a,b,function(a){this.props.closeSettingsPanel(),this.renameMenuItemById(a)}.bind(this))},unhide:c.partialRight(r,!1),hide:c.partialRight(r,!0),subpage:n.subpage,moveup:n.moveUp,remove:function(a,b){this.props.closeSettingsPanel(),n.removeMenuItem(a,b)},changeLink:function(a,b){var d=function(d){var e=a.data.createItem(d.type);c.assign(e,c.omit(d,["type"])),n.updateLink(a,b.id,e)};t(a,d,a.data.getById(b.id).link)}};return a.createClass({displayName:"mainMenuPagesDesktop",mixins:[k],propTypes:{pageAdded:a.PropTypes.func},biData:{page:{category:"page"},link:{category:"link"},dropdown:{category:"dropdown menu"}},getInitialState:function(){return{isPageTransitionPanelOpened:!1,isSubPagesMenuOpenedByButton:null}},movePage:function(a,c){var d={items:c},e=a.from.findIn(d,"items"),f=e.id,g=a.to.parent().findIn(d,"items").id||null,i=a.to.findIn(d,"items"),j=i?i.position:a.to.atRight(),k=this.getEditorAPI();f&&(g&&h.setMenuItemCollapsed(g,!1),k.mainMenu.moveItem(f,g,j),k.history.add("moving a page"),k.waitForChangesApplied(function(a){g&&this.refs.pagesTree.scrollToSelectedNode(),this.refs.pagesTree.props.valueLink.requestChange(a)}.bind(this,e)),k.bi.event(b.bi.events.topbar.pages.top_bar_PAGES_menu_drag),g&&1===a.from.length()?k.bi.event(b.bi.events.topbar.pages.top_bar_PAGES_menu_sub_page_created,{category:"drag"}):!g&&a.from.length()>1&&k.bi.event(b.bi.events.topbar.pages.top_bar_PAGES_menu_user_reverted_to_main_page,{category:"drag"}))},onActionSelected:function(a,c,d){switch(a){case"tabPageInfo":a="settings",d="page";break;case"tabLayout":a="settings",d="layout";break;case"tabPermissions":a="settings",d="privacy";break;case"tabSEO":a="settings",d="seo"}s[a]&&s[a].call(this,this.getEditorAPI(),c,d),this.getEditorAPI().bi.event(b.bi.events.topbar.pages.top_bar_PAGES_quick_actions_menu_select_click,{category:a})},closePageTransitionsPanel:function(){this.setState({isPageTransitionPanelOpened:!1})},_onAddPageMenuCloseHandler:c.noop,onAddPageMenuClose:function(){this._onAddPageMenuCloseHandler(this.props.pageAdded||c.noop),this._onAddPageMenuCloseHandler=c.noop},addPage:function(a){var c=this.getEditorAPI(),d=e.translate(o),g=n.addPage(c,d,null,this.state.selectedItemInfo.menuItemId||c.mainMenu.getMenuItemIdForCurrentPage(),function(b,c){this.renameMenuItemById(c),this.setState({selectedItemInfo:{isPage:!0,pageId:b,menuItemId:c}},a)}.bind(this)),h=(l.isOpen("urlFormat")?c.pages.data.pageUriSEO:f.utils).convertPageNameToUrl(d);c.pages.data.update(g.id,{pageUriSEO:h}),c.bi.event(b.bi.events.topbar.pages.top_bar_PAGES_Add_pages_expand_menu_selection_click,this.biData.page)},addLink:function(a){var d=this.getEditorAPI(),f=function(b){var f=d.data.createItem(b.type);c.assign(f,c.omit(b,["type"])),n.addLink(d,f,e.translate(p),this.state.selectedItemInfo.menuItemId||d.mainMenu.getMenuItemIdForCurrentPage(),function(b){this.renameMenuItemById(b),this.setState({selectedItemInfo:{isPage:!1,menuItemId:b,pageId:null}},a)}.bind(this))}.bind(this);t(d,f),d.bi.event(b.bi.events.topbar.pages.top_bar_PAGES_Add_pages_expand_menu_selection_click,this.biData.link)},addDropdown:function(a){var c=this.getEditorAPI();n.addDropdown(c,e.translate(q),this.state.selectedItemInfo.menuItemId||c.mainMenu.getMenuItemIdForCurrentPage(),function(b){this.renameMenuItemById(b),this.setState({selectedItemInfo:{isPage:!1,menuItemId:b,pageId:null}},a)}.bind(this)),c.bi.event(b.bi.events.topbar.pages.top_bar_PAGES_Add_pages_expand_menu_selection_click,this.biData.dropdown)},_setAddPageHandlerAndHideTooltip:function(){this._onAddPageMenuCloseHandler=this.addPage,d.tooltipManager.hide("addPageMenuPopoverId",!0)},_setAddLinkHandlerAndHideTooltip:function(){this._onAddPageMenuCloseHandler=this.addLink,d.tooltipManager.hide("addPageMenuPopoverId",!0)},_setAddDropdownHandlerAndHideTooltip:function(){this._onAddPageMenuCloseHandler=this.addDropdown,d.tooltipManager.hide("addPageMenuPopoverId",!0)},getAddPageMenu:function(){return a.createElement(i,{addPage:this._setAddPageHandlerAndHideTooltip,addLink:this._setAddLinkHandlerAndHideTooltip,addDropdown:this._setAddDropdownHandlerAndHideTooltip})},getPageTransitionsPanel:function(){var b=this.getEditorAPI();return a.createElement(j,{biEvent:b.bi.event,userPrefs:b.getUserPreferences(),id:this.getPageTransitionsPanelId()})},getPageTransitionsPanelId:function(){return"getPageTransitionsPanelId"},hasEditedPages:function(){return Boolean(this.props.editedMenuItemIdLink.value)},renameMenuItemById:function(a){this.props.editedMenuItemIdLink.requestChange(a)},reportClick:function(a){var c=this.getEditorAPI();switch(a){case"add":return function(){c.bi.event(b.bi.events.topbar.pages.top_bar_PAGES_Add_pages_click)};case"transition":return function(){c.bi.event(b.bi.events.topbar.pages.top_bar_PAGES_page_transition_click)}}},render:function(){return this.renderTemplate(m)}})}),define("rEditor/rootComps/panels/pagesPanel.rt",["react/addons","lodash","rEditor/pagesMenu/subPages/subPages","rEditor/pagesMenu/mainMenuPages/mainMenuPagesDesktop","panels","util","pagesMenu","baseUI","experiment"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(){var j=this.getEditorAPI().getUserPreferences(),k=0===this._popupsDataList.length||"pages"===this.state.selectedTab;this._popupsDataList.length>0&&"popups"===this.state.selectedTab;return a.createElement(e.frames.pagesPanelFrame,{ref:"frame",rootClassNames:{"in-transition":this.state.isPageTransitionPanelOpened,"special-pages":this._isSubPagesMenuActive,"pages-panel-settings-opened":!!this.state.menuItemToShowSettingsFor,"popups-are-shown":this._popupsDataList.length>0},panelName:this.props.panelName,title:f.translate(this._currentTitle),helpId:"280e7ca3-cf44-452f-a2a6-6709aa42dcb6"},a.createElement("div",{className:"pages-panel-shadow"}),!this._isSubPagesMenuActive&&this.state.menuItemToShowSettingsFor?a.createElement(g.settingsPanels.desktop.mainMenu,{key:"page-settings-panel",ref:"pageSettingsPanel",menuItem:this.state.menuItemToShowSettingsFor,helpId:"2f65df85-2eba-4b41-a9bf-2a841a5e5a53",closeSettingsPanel:this.closeSettingsPanel,actions:{duplicate:this.duplicate,closeSettingsPanel:this.closeSettingsPanel}}):null,this._isSubPagesMenuActive&&this.state.menuItemToShowSettingsFor?a.createElement(g.settingsPanels.desktop.subpage,{key:"page-settings-panel-subpages",ref:"pageSettingsPanelSubpages",menuItem:this.state.menuItemToShowSettingsFor,closeSettingsPanel:this.closeSettingsPanel,actions:{openBlogManager:this.openBlogManager,openStoreManager:this.openStoreManager}}):null,i.isOpen("popups")&&this._popupsDataList.length>0?a.createElement(h.horizontalTabs,{key:"tabs",options:this.getTabs(),valueLink:this.linkState("selectedTab"),className:"arrowed tabs-pages-and-popups"}):null,!this._isSubPagesMenuActive&&k?a.createElement(d,b.assign({},{key:"main-menu-pages-desktop",editedMenuItemIdLink:this.linkState("editedMenuItemId"),openSettingsPanel:this.openSettingsPanel,closeSettingsPanel:this.closeSettingsPanel,openSubPagesMenu:this.openSubPagesMenu,selectedMenuItemChanged:this.selectedMenuItemChanged},this.props)):null,this._isSubPagesMenuActive&&k?a.createElement(c,{key:"subpages-menu",userPrefs:j,sectionMenuItem:this.state.menuItemSectionNowOpened,openSettingsPanel:this.openSettingsPanel,closeSubPagesMenu:this.closeSubPagesMenu,selectedMenuItemChanged:this.selectedMenuItemChanged}):null)}return function(){return j.apply(this,[])}}),define("rEditor/rootComps/panels/pagesPanel",["react","core","pagesMenu","rEditor/rootComps/panels/pagesPanelMixin","rEditor/rootComps/panels/pagesPanel.rt","experiment"],function(a,b,c,d,e,f){"use strict";var g=[{label:"POPUPS_SiteStructure_Panel_Pages",value:"pages"},{label:"POPUPS_SiteStructure_Panel_Popups",value:"popups"}],h="POPUPS_SiteStructure_Panel_Title";return a.createClass({displayName:"pagesPanel",mixins:[d,a.addons.LinkedStateMixin],propTypes:{pageAdded:a.PropTypes.func,filter:a.PropTypes.any},getInitialState:function(){if(f.isOpen("popups")){var a=this.getEditorAPI();return{editedMenuItemId:null,selectedTab:a.pages.popupPages.isPopupOpened()?"popups":"pages",selectedPopupId:null,popupIdBeingRenamed:null}}return{editedMenuItemId:null}},duplicate:function(a){c.pageMenuItemHelpers.duplicateMenuItem(this.getEditorAPI(),a,function(a){this.setState({editedMenuItemId:a,menuItemToShowSettingsFor:null})}.bind(this))},getTabs:function(){return g},render:function(){var a=this.getCurrentPagePageData();return this._isSubPagesMenuActive=this.isSubPagesMenuActive(a),this.state.menuItemToShowSettingsFor&&(this.state.menuItemToShowSettingsFor.pageData=this.getEditorAPI().pages.data.get(this.state.menuItemToShowSettingsFor.pageData.id)),f.isOpen("popups")?(this._popupsDataList=this.getEditorAPI().pages.popupPages.getDataList(),this._currentTitle=this._popupsDataList.length>0?h:this.getCurrentTitle(this._isSubPagesMenuActive,a)):(this._popupsDataList=[],this._currentTitle=this.getCurrentTitle(this._isSubPagesMenuActive,a)),e.call(this)}})}),define("rEditor/pagesMenu/pageNode/mobile/nodeContentMobileMainMenu",["react","core","rEditor/pagesMenu/pageNode/common/nodeContentNotPageMixin","rEditor/pagesMenu/pageNodeRenderers"],function(a,b,c,d){"use strict";return a.createClass({displayName:"nodeContentMobileMainMenu",mixins:[b.mixins.editorAPIMixin,c],render:function(){var a=this.props.dataSource;return d.mobile.mainMenu(a,this.props.isSectionPage(a)).call(this)}})}),define("rEditor/pagesMenu/mainMenuPages/mainMenuPagesMobile.rt",["react/addons","lodash","baseUI","core","symbols","util","rEditor/pagesMenu/pagesTree/pagesTree","rEditor/pagesMenu/pageNode/mobile/nodeContentMobileMainMenu"],function(a,b,c,d,e,f,g,h){"use strict";return function(){return a.createElement("div",{className:"pages-menu"},a.createElement("div",{className:b.keys(b.pick({"pages-tree-container":!0,"pages-tree-shrinked":this.shouldShrinkMenu()},b.identity)).join(" ")},a.createElement(c.firstTimeInfoBox,{context:"pages-panel",id:"pages-menu-mobile-view",title:"MobilePages_teaser_title",text:"MobilePages_teaser_text",hide:!1,userPrefs:this.getEditorAPI().getUserPreferences(),biLearnMore:this.getEditorAPI().bi.event.bind(null,d.bi.events.commonControls.FIRST_TIME_INFO_BOX.LEARN_MORE),biClose:this.getEditorAPI().bi.event.bind(null,d.bi.events.commonControls.FIRST_TIME_INFO_BOX.CLOSE)}),a.createElement(g,{ref:"pagesTree",nodeContent:h,pagesList:this._menuTree,equalityComparer:this.equalityComparer,onNodeToggled:this.onPageToggled,isSectionPage:this._isSectionPage,actions:{openSettingsPanel:this.props.openSettingsPanel,openSubPagesMenu:this.props.openSubPagesMenu},valueLink:this.linkPage()}),0===this._menuTree.length?a.createElement("div",{key:"noPagesFoundSymbolContainer",className:"no-pages"},a.createElement(e.symbol,{name:"noPagesFound"}),a.createElement("div",{},f.translate("Pages_Menu_Empty_Title")),a.createElement("div",{},f.translate("Pages_Menu_Empty_Text"))):null))}}),define("rEditor/pagesMenu/mainMenuPages/mainMenuPagesMobile",["react","rEditor/pagesMenu/mainMenuPages/mainMenuPageMixin","rEditor/pagesMenu/mainMenuPages/mainMenuPagesMobile.rt"],function(a,b,c){"use strict";return a.createClass({displayName:"mainMenuPagesMobile",mixins:[b],render:function(){return this.renderTemplate(c)}})}),define("rEditor/rootComps/panels/pagesPanelMobile.rt",["react/addons","lodash","pagesMenu","panels","core","util","rEditor/pagesMenu/subPages/subPages","rEditor/pagesMenu/mainMenuPages/mainMenuPagesMobile"],function(a,b,c,d,e,f,g,h){"use strict";function i(){var e=this.getEditorAPI().getUserPreferences();return a.createElement(d.frames.pagesPanelFrame,{className:b.keys(b.pick({"pages-panel-frame":!0,"pages-panel-mobile":!0,"pages-panel-settings-opened":!!this.state.menuItemToShowSettingsFor,"special-pages":this._isSubPagesMenuActive},b.identity)).join(" "),panelName:this.props.panelName,title:f.translate("Pages_Mobile_Menu_Title"),helpId:"24b83680-5690-488d-b382-ac051e329c23"},a.createElement("div",{className:"pages-panel-shadow"}),!this._isSubPagesMenuActive&&this.state.menuItemToShowSettingsFor?a.createElement(c.settingsPanels.mobile.mainMenu,{key:"page-settings-panel",menuItem:this.getCurrentPageMenuItem(),closeSettingsPanel:this.closeSettingsPanel}):null,this._isSubPagesMenuActive&&this.state.menuItemToShowSettingsFor?a.createElement(c.settingsPanels.mobile.subpage,{key:"page-settings-panel-mobile",menuItem:this.state.menuItemToShowSettingsFor,closeSettingsPanel:this.closeSettingsPanel,actions:{openBlogManager:this.openBlogManager,openStoreManager:this.openStoreManager}}):null,this._isSubPagesMenuActive?null:a.createElement(h,b.assign({},{key:"main-menu-pages-mobile",openSettingsPanel:this.openSettingsPanel,openSubPagesMenu:this.openSubPagesMenu,selectedMenuItemChanged:this.selectedMenuItemChanged},this.props)),this._isSubPagesMenuActive?a.createElement(g,{key:"subpages-menu",userPrefs:e,sectionMenuItem:this.state.menuItemSectionNowOpened,openSettingsPanel:this.openSettingsPanel,closeSubPagesMenu:this.closeSubPagesMenu,selectedMenuItemChanged:this.selectedMenuItemChanged}):null)}return function(){return i.apply(this,[])}}),define("rEditor/rootComps/panels/pagesPanelMobile",["react","core","lodash","rEditor/rootComps/panels/pagesPanelMixin","rEditor/rootComps/panels/pagesPanelMobile.rt"],function(a,b,c,d,e){"use strict";function f(a){return c.flatten(c.reduce(a,function(a,b){return a.push([b].concat(b.items)),a},[]))}return a.createClass({displayName:"pagesPanelMobile",mixins:[d],getCurrentPageMenuItem:function(){var a=this.getEditorAPI(),b=a.pages.getPagesData(),d=f(a.mainMenu.getMenuItemsTreeForMainMenu(b)),e=this.state.menuItemToShowSettingsFor;return e?c.find(d,"id",e.id):void 0},render:function(){var a=this.getCurrentPagePageData();return this._isSubPagesMenuActive=this.isSubPagesMenuActive(a),e.call(this)}})}),define("rEditor/pagesMenu/specialPagesMenuMixin",["core"],function(a){"use strict";return{mixins:[a.mixins.editorAPIMixin],getInitialState:function(){return{selectedSectionPage:null}},openSpecialPagesMenu:function(a){this.setState({selectedSectionPage:a})},closeSpecialPagesMenu:function(){this.setState({selectedSectionPage:null}),this.props.closeSpecialPageMenu(),this.getEditorAPI().bi.event(a.bi.events.topbar.pages.top_bar_PAGES_special_pages_back_click)},isSpecialPagesPanelOpen:function(){return Boolean(this.state.selectedSectionPage)}}}),define("rEditor/pagesMenu/emptyPagesAndPopups/emptyPagesAndPopups.rt",["react/addons","lodash","util","symbols"],function(a,b,c,d){"use strict";return function(){return a.createElement("div",{className:"empty-pages-and-popups"},a.createElement("figure",{className:"empty-figure"},a.createElement(d.symbol,{name:"noSearchResultStructureSite"})),a.createElement("div",{className:"main-message"},c.translate("POPUPS_SiteStructure_EmptySearch_Title")),a.createElement("div",{className:"try-again-message"},c.translate("POPUPS_SiteStructure_EmptySearch_Text")))}}),define("rEditor/pagesMenu/emptyPagesAndPopups/emptyPagesAndPopups",["react","rEditor/pagesMenu/emptyPagesAndPopups/emptyPagesAndPopups.rt"],function(a,b){"use strict";return a.createClass({displayName:"emptyPagesAndPopups",render:b})}),define("rEditor/pagesMenu/popups/quickActions/popupQuickActions.rt",["react/addons","lodash","baseUI","symbols","util"],function(a,b,c,d,e){"use strict";function f(a){this.props.actionSelected(this.props.popupData,a)}return function(){return a.createElement(c.dropDown.contextMenu,{shouldTranslate:!1,icon:"moreRegular",className:"quick-actions action-button",onClick:this.props.onClick,
onChange:f.bind(this)},a.createElement(c.dropDown.option,{value:"startRename"},a.createElement(d.symbol,{name:"quickActionsRename"}),a.createElement("span",{className:"qa-label"},e.translate("Pages_Actions_Page_Rename"))),a.createElement(c.dropDown.option,{value:"duplicate"},a.createElement(d.symbol,{name:"qaDuplicate"}),a.createElement("span",{className:"qa-label"},e.translate("Pages_Actions_Page_Duplicate"))),a.createElement(c.dropDown.option,{value:"remove"},a.createElement(d.symbol,{name:"qaDelete"}),a.createElement("span",{className:"qa-label"},e.translate("Pages_Actions_Page_Delete"))))}}),define("rEditor/pagesMenu/popups/quickActions/popupQuickActions",["lodash","react","rEditor/pagesMenu/popups/quickActions/popupQuickActions.rt"],function(a,b,c){"use strict";return b.createClass({displayName:"popupQuickActions",propTypes:{popupData:b.PropTypes.object.isRequired},render:c})}),define("rEditor/pagesMenu/pageNode/common/nodeContentForList",["react","core","rEditor/pagesMenu/pageNode/common/nodeContentNotPageMixin","rEditor/pagesMenu/pageNodeRenderers"],function(a,b,c,d){"use strict";return a.createClass({displayName:"nodeContentForList",mixins:[b.mixins.editorAPIMixin,c],getDefaultProps:function(){return{structureType:"list"}},render:function(){var a=this.getEditorAPI().isDesktopEditor()?"desktop":"mobile";return d[a].mainMenu(this.props.dataSource,this.props.isSectionPage).call(this)}})}),define("rEditor/pagesMenu/pagesAndPopUpsList/pagesAndPopUpsList.rt",["react/addons","lodash","pagesMenu","rEditor/pagesMenu/popups/quickActions/popupQuickActions","rEditor/pagesMenu/pageNode/common/nodeContentForList","baseUI","util"],function(a,b,c,d,e,f,g){"use strict";function h(b,c){return a.createElement("li",{className:"item",key:b.id},a.createElement(e,this.getMenuItemProps(b)))}function i(b,e){return a.createElement("li",{className:"item",key:b.id},a.createElement(c.pageItem,this.getPopupItemProps(b),this.isShowPopupQuickActions()?a.createElement(d,{key:"popup-quick-actions",popupData:b,actionSelected:this.onActionPopUpSelected}):null))}return function(){return a.createElement("div",{className:"pages-and-popups-list"},a.createElement(f.customScroll,{ref:"customScroll",heightRelativetoParent:"100%"},this.isPagesVisible()?a.createElement("section",{className:"list list-of-pages",key:"list-of-pages"},a.createElement("h1",{className:"list-label"},g.translate("POPUPS_SiteStructure_Panel_Pages")),a.createElement.apply(this,["ul",{className:"popups-list"},b.map(this.props.menuItemsList,h.bind(this))])):null,this.isPopUpsVisible()?a.createElement("section",{className:"list list-of-pop-ups",key:"list-of-popups"},a.createElement("h1",{className:"list-label"},g.translate("POPUPS_SiteStructure_Panel_Popups")),a.createElement.apply(this,["ul",{className:"pages-list"},b.map(this.props.popupsList,i.bind(this))])):null))}}),define("rEditor/pagesMenu/quickActionsMenuItemsMixin",["lodash","pagesMenu"],function(a,b){"use strict";function e(a,b,c,e){var f=a.viewMode.get();f===a.viewMode.VIEW_MODES.DESKTOP&&d.setHidden(a,b,e),f===a.viewMode.VIEW_MODES.MOBILE&&d.setHidden(a,b,void 0,e)}function f(a,b,c){this.props.openSettingsPanel(b,c)}function g(a){return function(b,c){f.call(this,b,c,a)}}function h(b,c,d){b.openLinkPanel({visibleSections:{NoLink:!1},hidePageLinks:!0,link:d,pageTabTitle:"LINK_PANEL_TAB_ANCHOR",pageTabPageDropDownTitle:"LINK_PANEL_PAGE_DROP_DOWN_PAGELINK_LABEL",title:"What do you want to link to?",callback:a.once(c)})}var c,d=b.pageMenuItemHelpers;return c={tabPageInfo:g("page"),tabLayout:g("layout"),tabPermissions:g("privacy"),tabSEO:g("seo"),settings:f,rename:function(a,b,c){b.pageData?d.renamePage(a,b.pageData,c):d.renameMenuItem(a,b,c)},duplicate:function(a,b){d.duplicateMenuItem(a,b,function(a){this.props.closeSettingsPanel(),this.props.editedItemIdLink.requestChange(a)}.bind(this))},unhide:a.partialRight(e,!1),hide:a.partialRight(e,!0),subpage:d.subpage,moveup:d.moveUp,remove:function(a,b){this.props.closeSettingsPanel(),d.removeMenuItem(a,b)},changeLink:function(b,c){var e=function(e){var f=b.data.createItem(e.type);a.assign(f,a.omit(e,["type"])),d.updateLink(b,c.id,f)};h(b,e,b.data.getById(c.id).link)}},{onActionMenuItemsSelected:function(b,d,e){a.isFunction(c[b])&&c[b].call(this,this.getEditorAPI(),d,e)}}}),define("rEditor/pagesMenu/quickActionsPopupsMixin",["lodash","pagesMenu"],function(a,b){"use strict";var d,c=b.pageMenuItemHelpers;return d={settings:function(){},startRename:function(a,b){this.props.editedItemIdLink.requestChange(b.id)},rename:function(a,b,d){c.renamePage(a,b,d),this.props.editedItemIdLink.requestChange(null)},duplicate:function(a,b){c.duplicatePopup(a,b,function(a){this.props.closeSettingsPanel(),this.props.editedItemIdLink.requestChange(a)}.bind(this))},remove:function(a,b){c.removePopup(a,b.id)}},{onActionPopUpSelected:function(b,c,e){a.isFunction(d[c])&&d[c].call(this,this.getEditorAPI(),b,e)}}}),define("rEditor/pagesMenu/navigateToMixin",["core"],function(a){"use strict";return{navigateToPageById:function(b,c){var d=this.getEditorAPI(),e=d.pages.getFocusedPageId();(e!==b||c)&&(d.pages.navigateToAndScroll(b,c,d.applyPreviewScrollToEditorScroll),d.bi.event(a.bi.events.topbar.pages.top_bar_PAGES_navigate_to_page,{page_id:b}))},scrollToAnchor:function(a){var b=a.pageId&&a.pageId.replace("#","");this.navigateToPageById(b,a.anchorDataId)}}}),define("rEditor/pagesMenu/pagesAndPopUpsList/pagesAndPopUpsList",["react","lodash","core","rEditor/pagesMenu/pagesAndPopUpsList/pagesAndPopUpsList.rt","rEditor/pagesMenu/quickActionsMenuItemsMixin","rEditor/pagesMenu/quickActionsPopupsMixin","rEditor/pagesMenu/navigateToMixin"],function(a,b,c,d,e,f,g){"use strict";return a.createClass({displayName:"pagesAndPopUpsList",mixins:[c.mixins.editorAPIMixin,e,f,g],propTypes:{popupsList:a.PropTypes.array.isRequired,menuItemsList:a.PropTypes.array.isRequired,openSettingsPanel:a.PropTypes.func.isRequired,closeSettingsPanel:a.PropTypes.func.isRequired,openSpecialPageMenu:a.PropTypes.func.isRequired,closeSpecialPageMenu:a.PropTypes.func.isRequired,isSectionPage:a.PropTypes.func.isRequired,editedItemIdLink:a.PropTypes.object.isRequired,selectedItemInfoLink:a.PropTypes.object.isRequired,changeSelectedMenuItem:a.PropTypes.func.isRequired,openSectionPageMenu:a.PropTypes.func.isRequired},onRenameDone:function(a,b){this.onActionPopUpSelected(a,"rename",b)},isShowPopupQuickActions:function(){return this.getEditorAPI().isDesktopEditor()},isPagesVisible:function(){return this.props.menuItemsList.length},isPopUpsVisible:function(){return this.props.popupsList.length},setSelectedPage:function(a){a.type.isPage?this.navigateToPageById(a.pageData.id):a.type.isLink&&"AnchorLink"===a.type.raw&&this.scrollToAnchor(a.link),this.props.changeSelectedMenuItem(a),this.props.selectedItemInfoLink.requestChange({id:a.id,isPageOrPopup:a.isPage})},getPopupItemProps:function(a){return{value:a.title,label:a.title,onChange:b.partial(this.onRenameDone,a),isVisible:!0,isSelected:this.props.selectedItemInfoLink.value.id===a.id,editModeLink:this.linkEditMode(a.id),onClick:b.partial(this.onPopUpClick,a),onContextMenu:this.props.setSelected}},getMenuItemProps:function(a){return{editorAPI:this.getEditorAPI(),dataSource:a,editedPageIdLink:this.props.editedItemIdLink,isSelected:this.props.selectedItemInfoLink.value.id===a.id,onActionSelected:this.onActionMenuItemsSelected,setSelected:this.setSelectedPage.bind(this,a),isSectionPage:this.props.isSectionPage(a),actions:{openSettingsPanel:this.props.openSettingsPanel,closeSettingsPanel:this.props.closeSettingsPanel,openSubPagesMenu:this.props.openSectionPageMenu}}},onPopUpClick:function(a,b){b.stopPropagation(),this.getEditorAPI().pages.popupPages.open(a.id),this.props.closeSettingsPanel(),this.props.selectedItemInfoLink.requestChange({id:a.id,isPageOrPopUp:!0})},linkEditMode:function(a){return{value:a===this.props.editedItemIdLink.value,requestChange:function(b){this.props.editedItemIdLink.requestChange(b?a:null)}.bind(this)}},render:d})}),define("rEditor/pagesMenu/filterPagesAndPopups/filterPagesAndPopups.rt",["react/addons","lodash","rEditor/pagesMenu/subPages/subPages","rEditor/pagesMenu/emptyPagesAndPopups/emptyPagesAndPopups","rEditor/pagesMenu/pagesAndPopUpsList/pagesAndPopUpsList"],function(a,b,c,d,e){"use strict";function f(){var f=this.getEditorAPI().getUserPreferences();return a.createElement("div",{className:"filtered-pages-and-popups"},this.isSpecialPagesPanelOpen()?null:a.createElement("div",{className:"without-special-page",key:"list-of-filtered-pages-and-popups"},this.isHasSomeItems()?a.createElement(e,b.assign({},{key:"filtered-pages-and-popups-not-empty"},this.getProps())):null,this.isHasSomeItems()?null:a.createElement(d,{key:"filtered-pages-and-popups-empty"})),this.isSpecialPagesPanelOpen()?a.createElement(c,{key:"subpages-menu",userPrefs:f,sectionMenuItem:this.state.selectedSectionPage,openSettingsPanel:this.props.openSpecialPageMenu,closeSubPagesMenu:this.closeSpecialPagesMenu,selectedMenuItemChanged:this.props.changeSpecialPage}):null)}return function(){return f.apply(this,[])}}),define("rEditor/pagesMenu/filterPagesAndPopups/filterPagesAndPopups",["react","core","lodash","rEditor/pagesMenu/specialPagesMenuMixin","rEditor/pagesMenu/filterPagesAndPopups/filterPagesAndPopups.rt"],function(a,b,c,d,e){"use strict";return a.createClass({displayName:"filterPagesAndPopups",mixins:[a.addons.LinkedStateMixin,d],propTypes:{popupsList:a.PropTypes.array.isRequired,menuItemsList:a.PropTypes.array.isRequired,openSettingsPanel:a.PropTypes.func.isRequired,closeSettingsPanel:a.PropTypes.func.isRequired,openSpecialPageMenu:a.PropTypes.func.isRequired,closeSpecialPageMenu:a.PropTypes.func.isRequired,isSectionPage:a.PropTypes.func.isRequired,editedItemIdLink:a.PropTypes.object.isRequired,selectedItemInfoLink:a.PropTypes.object.isRequired,changeSelectedMenuItem:a.PropTypes.func.isRequired},isHasSomeItems:function(){return 0!==this.props.menuItemsList.length||0!==this.props.popupsList.length},getProps:function(){return c.assign({},this.props,{openSectionPageMenu:this.openSpecialPagesMenu})},render:e})}),define("rEditor/pagesMenu/mainMenuPagesPopups/mainMenuPageMixin",["lodash","core","rEditor/pagesMenu/mainMenuTreeState","experiment!pagesPanelOpenCollapsed","rEditor/pagesMenu/navigateToMixin"],function(a,b,c,d,e){"use strict";function h(b){return a.reduce(b||[],function(a,b){return b.isCollapsed||(a+=h(b.items)),a+1},0)}function i(b,c){return a.forEach(b,function(a,b){a.items&&a.items.length&&(a.items=i(a.items,c));for(var d=0;d<c.length;d+=1)a=c[d](a,b)}),b}function j(a,b){return a.position=b,a}var f=40,g=17;return{mixins:[b.mixins.editorAPIMixin,e],onPageToggled:function(a,b){var d=a.props.dataSource.id;c.setMenuItemCollapsed(d,b),this.forceUpdate()},linkPage:function(){return{value:{id:this.props.selectedItemInfoLink.value.id},requestChange:function(a){this.props.selectedItemInfoLink.requestChange({id:a.id,isPageOrPopUp:a.isPage}),this.props.changeSelectedMenuItem(a),a.type.isPage?this.navigateToPageById(a.pageData.id):a.type.isLink&&"AnchorLink"===a.type.raw&&this.scrollToAnchor(a.link)}.bind(this)}},closePanel:function(){this.props.onClose()},shouldShrinkMenu:function(){return h(this._menuTree)>g},getTreeDockerScrollTop:function(){return this.refs.pagesTree.getScrollTop()},renderTemplate:function(a){var b=this.getEditorAPI(),e=b.pages.getPagesData(),g=this.props.menuItemsTree,h=d?e.length>f:!1;return g=i(g,[function(a){return c.reflectStateToMenuItem(a,h)},j]),this._menuTree=g,a.call(this)}}}),define("rEditor/pagesMenu/mainMenuPagesPopups/mainMenuPagesDesktop.rt",["react/addons","lodash","baseUI","core","symbols","util","rEditor/pagesMenu/pageNode/common/nodeContentSubPage","rEditor/pagesMenu/pagesTree/pagesTree","rEditor/pagesMenu/pageTransitionsPanel/pageTransitionsUtils","rEditor/pagesMenu/pageNode/desktop/nodeContentDesktopMainMenu"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(a,b,c){this.movePage(c,this.props.menuItemsTree)}function l(){var d=this.getEditorAPI(),g=f.translate;return a.createElement("div",{className:b.keys(b.pick({"pages-menu":!0,"pages-panel-settings-opened":!!this.state.menuItemIdToShowSettingsFor},b.identity)).join(" ")},a.createElement("div",{className:b.keys(b.pick({"pages-tree-container":!0,"disable-drag":this.hasEditedPages()},b.identity)).join(" ")},a.createElement(c.treeDocker,{className:b.keys(b.pick({"pages-tree-docker":!0,"pages-tree-shrinked":this.shouldShrinkMenu()},b.identity)).join(" "),onNodeMoved:k.bind(this,d,g),treeClass:"pages-tree",treeNodeClass:"pages-tree-node",treeNodeLabelClass:"pages-tree-item",draggedClass:"rotated",previewClass:"shadow",cantBeChildClass:"cant-be-child",isDragAvailable:!this.hasEditedPages(),scrollTopGetter:this.getTreeDockerScrollTop,collapsedClass:"tree-collapsed"},a.createElement(h,{ref:"pagesTree",nodeContent:j,structureType:"tree",valueProperty:"id",pagesList:this._menuTree,onNodeToggled:this.onPageToggled,isSectionPage:this.props.isSectionPage,actions:{openSettingsPanel:this.props.openSettingsPanel,openSubPagesMenu:this.props.openSubPagesMenu},onActionSelected:this.onActionMenuItemsSelected,editedPageIdLink:this.props.editedMenuItemIdLink,valueLink:this.linkPage()}))),a.createElement("footer",{},a.createElement(c.tooltip,{value:this.getAddPageMenu(),alignment:"right",width:"296",marginsFromWindow:"75",openTriggers:[c.uiConstants.TOOLTIP.TRIGGERS.CLICK],closeTriggers:[c.uiConstants.TOOLTIP.TRIGGERS.OUTER_CLICK],onClose:this.onAddPageMenuClose,id:"addPageMenuPopoverId",className:"popover-add-page-menu"},a.createElement(c.button,{label:"Pages_Menu_Add_Button",icon:"addPage",onClick:this.reportClick("add")})),a.createElement(c.tooltip,{value:this.getPageTransitionsPanel(),alignment:"right",width:"296",marginsFromWindow:"0",openTriggers:[c.uiConstants.TOOLTIP.TRIGGERS.CLICK],closeTriggers:[c.uiConstants.TOOLTIP.TRIGGERS.OUTER_CLICK],id:this.getPageTransitionsPanelId()},a.createElement("div",{className:"page-transition",onClick:this.reportClick("transition")},a.createElement("div",{className:"icon"},a.createElement(e.symbol,{name:"truck"})),a.createElement("div",{},a.createElement("span",{},g("Pages_Menu_Transitions_Caption")),a.createElement(c.button,{className:"btn-text",label:i.getTransitionLabelKey(d.pages.transitions.get())}))))))}return function(){return l.apply(this,[])}}),define("rEditor/pagesMenu/mainMenuPagesPopups/mainMenuPagesDesktop",["react","core","lodash","baseUI","util","pagesMenu","panels","rEditor/pagesMenu/mainMenuTreeState","rEditor/pagesMenu/addPageMenuPanel/addPageMenuPanel","rEditor/pagesMenu/pageTransitionsPanel/pageTransitionsPanel","rEditor/pagesMenu/mainMenuPagesPopups/mainMenuPageMixin","rEditor/pagesMenu/mainMenuPagesPopups/mainMenuPagesDesktop.rt","rEditor/pagesMenu/quickActionsMenuItemsMixin","experiment"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";function s(a,b,d){a.openLinkPanel({visibleSections:{NoLink:!1},hidePageLinks:!0,link:d,pageTabTitle:"LINK_PANEL_TAB_ANCHOR",pageTabPageDropDownTitle:"LINK_PANEL_PAGE_DROP_DOWN_PAGELINK_LABEL",title:"What do you want to link to?",callback:c.once(b)})}var o=f.pageMenuItemHelpers,p="Pages_Menu_Add_New_Page",q="Pages_Menu_Add_New_Link",r="Pages_Menu_Add_New_Category";return a.createClass({displayName:"mainMenuPagesDesktop",mixins:[k,m],propTypes:{pageAdded:a.PropTypes.func,mainMenuTree:a.PropTypes.any,onActionPagesSelected:a.PropTypes.func,selectedItemInfoLink:a.PropTypes.object},biData:{page:{category:"page"},link:{category:"link"},dropdown:{category:"dropdown menu"}},getInitialState:function(){return{isPageTransitionPanelOpened:!1}},movePage:function(a,c){var d={items:c},e=a.from.findIn(d,"items"),f=e.id,g=a.to.parent().findIn(d,"items").id||null,i=a.to.findIn(d,"items"),j=i?i.position:a.to.atRight(),k=this.getEditorAPI();f&&(g&&h.setMenuItemCollapsed(g,!1),k.mainMenu.moveItem(f,g,j),k.history.add("moving a page"),k.waitForChangesApplied(function(a){g&&this.refs.pagesTree.scrollToSelectedNode(),this.refs.pagesTree.props.valueLink.requestChange(a)}.bind(this,e)),k.bi.event(b.bi.events.topbar.pages.top_bar_PAGES_menu_drag),g&&1===a.from.length()?k.bi.event(b.bi.events.topbar.pages.top_bar_PAGES_menu_sub_page_created,{category:"drag"}):!g&&a.from.length()>1&&k.bi.event(b.bi.events.topbar.pages.top_bar_PAGES_menu_user_reverted_to_main_page,{category:"drag"}))},closePageTransitionsPanel:function(){this.setState({isPageTransitionPanelOpened:!1})},_onAddPageMenuCloseHandler:c.noop,onAddPageMenuClose:function(){this._onAddPageMenuCloseHandler(this.props.pageAdded||c.noop),this._onAddPageMenuCloseHandler=c.noop},addPage:function(){var a=this.getEditorAPI(),c=e.translate(p),d=o.addPage(a,c,null,this.props.selectedItemInfoLink.value.id||a.mainMenu.getMenuItemIdForCurrentPage(),function(a,b){this.renameMenuItemById(b),this.props.selectedItemInfoLink.requestChange({id:b,isPageOrPopUp:!0})}.bind(this)),g=(n.isOpen("urlFormat")?a.pages.data.pageUriSEO:f.utils).convertPageNameToUrl(c);a.pages.data.update(d.id,{pageUriSEO:g}),a.bi.event(b.bi.events.topbar.pages.top_bar_PAGES_Add_pages_expand_menu_selection_click,this.biData.page)},addLink:function(){var a=this.getEditorAPI(),d=function(b){var d=a.data.createItem(b.type);c.assign(d,c.omit(b,["type"])),o.addLink(a,d,e.translate(q),this.props.selectedItemInfoLink.value.id||a.mainMenu.getMenuItemIdForCurrentPage(),function(a){this.renameMenuItemById(a),this.props.selectedItemInfoLink.requestChange({id:a,isPageOrPopUp:!0})}.bind(this))}.bind(this);s(a,d),a.bi.event(b.bi.events.topbar.pages.top_bar_PAGES_Add_pages_expand_menu_selection_click,this.biData.link)},addDropdown:function(){var a=this.getEditorAPI();o.addDropdown(a,e.translate(r),this.props.selectedItemInfoLink.value.id||a.mainMenu.getMenuItemIdForCurrentPage(),function(a){this.renameMenuItemById(a),this.props.selectedItemInfoLink.requestChange({id:a,isPageOrPopUp:!0})}.bind(this)),a.bi.event(b.bi.events.topbar.pages.top_bar_PAGES_Add_pages_expand_menu_selection_click,this.biData.dropdown)},_setAddPageHandlerAndHideTooltip:function(){this._onAddPageMenuCloseHandler=this.addPage,d.tooltipManager.hide("addPageMenuPopoverId",!0)},_setAddLinkHandlerAndHideTooltip:function(){this._onAddPageMenuCloseHandler=this.addLink,d.tooltipManager.hide("addPageMenuPopoverId",!0)},_setAddDropdownHandlerAndHideTooltip:function(){this._onAddPageMenuCloseHandler=this.addDropdown,d.tooltipManager.hide("addPageMenuPopoverId",!0)},getAddPageMenu:function(){return a.createElement(i,{addPage:this._setAddPageHandlerAndHideTooltip,addLink:this._setAddLinkHandlerAndHideTooltip,addDropdown:this._setAddDropdownHandlerAndHideTooltip})},getPageTransitionsPanel:function(){var b=this.getEditorAPI();return a.createElement(j,{biEvent:b.bi.event,userPrefs:b.getUserPreferences(),id:this.getPageTransitionsPanelId()})},getPageTransitionsPanelId:function(){return"getPageTransitionsPanelId"},hasEditedPages:function(){return Boolean(this.props.editedMenuItemIdLink.value)},renameMenuItemById:function(a){this.props.editedMenuItemIdLink.requestChange(a)},reportClick:function(a){var c=this.getEditorAPI();switch(a){case"add":return function(){c.bi.event(b.bi.events.topbar.pages.top_bar_PAGES_Add_pages_click)};case"transition":return function(){c.bi.event(b.bi.events.topbar.pages.top_bar_PAGES_page_transition_click)}}},render:function(){return this.renderTemplate(l)}})}),define("rEditor/pagesMenu/mainMenuPagesPopups/mainMenuPagesMobile.rt",["react/addons","lodash","baseUI","core","symbols","util","rEditor/pagesMenu/pagesTree/pagesTree","rEditor/pagesMenu/pageNode/mobile/nodeContentMobileMainMenu"],function(a,b,c,d,e,f,g,h){"use strict";return function(){return a.createElement("div",{className:"pages-menu"},a.createElement("div",{className:b.keys(b.pick({"pages-tree-container":!0,"pages-tree-shrinked":this.shouldShrinkMenu()},b.identity)).join(" ")},a.createElement(c.firstTimeInfoBox,{context:"pages-panel",id:"pages-menu-mobile-view",title:"MobilePages_teaser_title",text:"MobilePages_teaser_text",hide:!1,userPrefs:this.getEditorAPI().getUserPreferences(),biLearnMore:this.getEditorAPI().bi.event.bind(null,d.bi.events.commonControls.FIRST_TIME_INFO_BOX.LEARN_MORE),biClose:this.getEditorAPI().bi.event.bind(null,d.bi.events.commonControls.FIRST_TIME_INFO_BOX.CLOSE)}),a.createElement(g,{ref:"pagesTree",structureType:"tree",nodeContent:h,pagesList:this._menuTree,valueProperty:"id",onNodeToggled:this.onPageToggled,isSectionPage:this.props.isSectionPage,actions:{openSettingsPanel:this.props.openSettingsPanel,openSubPagesMenu:this.props.openSubPagesMenu,closeSettingsPanel:this.props.closeSettingsPanel},valueLink:this.linkPage()}),0===this.props.menuItemsTree.length?a.createElement("div",{key:"noPagesFoundSymbolContainer",className:"no-pages"},a.createElement(e.symbol,{name:"noPagesFound"}),a.createElement("div",{},f.translate("Pages_Menu_Empty_Title")),a.createElement("div",{},f.translate("Pages_Menu_Empty_Text"))):null))}}),define("rEditor/pagesMenu/mainMenuPagesPopups/mainMenuPagesMobile",["react","rEditor/pagesMenu/mainMenuPagesPopups/mainMenuPageMixin","rEditor/pagesMenu/mainMenuPagesPopups/mainMenuPagesMobile.rt"],function(a,b,c){"use strict";return a.createClass({displayName:"mainMenuPagesMobile",mixins:[b],openSettingsPanel:function(a){this.props.closeSettingsPanel(),this.props.openSettingsPanel(a)},render:function(){return this.renderTemplate(c)}})}),define("rEditor/pagesMenu/popups/popupsList/popupsList.rt",["react/addons","lodash","baseUI","pagesMenu","rEditor/pagesMenu/popups/quickActions/popupQuickActions"],function(a,b,c,d,e){"use strict";function f(c,f,g,h){return a.createElement("li",{className:"page-node-list-item",key:g.id},a.createElement(d.pageItem,this.getPopupItemProps(g,f),c.isDesktopEditor()?a.createElement(e,{key:g.id+"-popup-item-quick-action-menu",popupData:g,onClick:b.partial(this.onClick,g.id),actionSelected:this.onActionPopUpSelected}):null))}function g(){var d=this.getEditorAPI(),e=this.getEditorAPI().pages.popupPages.getCurrentPopupId();return a.createElement(c.customScroll,{ref:"customScroll",heightRelativetoParent:"100%"},a.createElement.apply(this,["ul",{className:"page-node-list popups-list"},b.map(this.props.popupsList,f.bind(this,d,e))]))}return function(){return a.createElement("div",{className:"popups-list"},a.createElement("div",{className:"scroll-wrapper"},g.apply(this,[])))}}),define("rEditor/pagesMenu/popups/popupsList/popupsList",["lodash","react","core","rEditor/pagesMenu/quickActionsPopupsMixin","rEditor/pagesMenu/popups/popupsList/popupsList.rt","rEditor/pagesMenu/navigateToMixin"],function(a,b,c,d,e,f){"use strict";return b.createClass({displayName:"popupList",mixins:[c.mixins.editorAPIMixin,d,f],propTypes:{popupsList:b.PropTypes.any.isRequired,selectedItemInfoLink:b.PropTypes.object,editedItemIdLink:b.PropTypes.object},getKey:function(a){return"popup-quick-action-menu"+a},onClick:function(a){this.props.selectedItemInfoLink.requestChange({id:a,isPageOrPopUp:!0}),this.props.closeSettingsPanel(),this.navigateToPageById(a)},getPopupItemProps:function(b,c){return{value:b.title,label:b.title,onChange:a.partial(this.onRenameDone,b),isVisible:!0,isSelected:b.id===c,editModeLink:this.linkEditMode(b.id),onClick:a.partial(this.onClick,b.id),onContextMenu:this.props.setSelected}},onRenameDone:function(a,b){this.onActionPopUpSelected(a,"rename",b)},linkEditMode:function(a){var b=this.props.editedItemIdLink;return{value:b&&b.value===a,requestChange:function(c){b&&b.requestChange(c?a:null)}}},filteredProps:function(){return a.omit(this.props,["pagesList","dataSource","className","nodeTemplate","collapsedSelector","editorAPI","valueProperty"])},render:e})}),define("rEditor/pagesMenu/popups/popups/popups.rt",["react/addons","lodash","baseUI","rEditor/pagesMenu/popups/popupsList/popupsList"],function(a,b,c,d){"use strict";return function(){return a.createElement("div",{className:"popups-tab"},a.createElement(d,b.assign({},{className:"popups-list"},this.props)),this.isFooterHidden()?null:a.createElement("footer",{key:"popup-list-key"},a.createElement(c.button,{label:"POPUPS_SiteStructure_Panel_Button_Add",icon:"addPage",className:"control-button",onClick:this.onAddClick})))}}),define("rEditor/pagesMenu/popups/popups/popups",["lodash","react","core","rEditor/pagesMenu/popups/popups/popups.rt","addPanelData"],function(a,b,c,d,e){"use strict";function f(b){return a.findIndex(e.getCategories(b),{id:"popup"})}return b.createClass({displayName:"popups",mixins:[c.mixins.editorAPIMixin,b.addons.LinkedStateMixin],propTypes:{popupsList:b.PropTypes.any.isRequired,selectedItemInfoLink:b.PropTypes.object.isRequired,editedItemIdLink:b.PropTypes.object.isRequired},onAddClick:function(){var a=this.getEditorAPI(),b=f(a);b>-1&&a.getUserPreferences().session.set("addPanelCategoryIndexOnClose",b),this.getEditorAPI().leftBar.openAddPanel()},isFooterHidden:function(){return this.getEditorAPI().isMobileEditor()},render:d})}),define("rEditor/pagesMenu/unfilteredPagesAndPopups/unfilteredPagesAndPopups.rt",["react/addons","lodash","rEditor/pagesMenu/subPages/subPages","rEditor/pagesMenu/mainMenuPagesPopups/mainMenuPagesDesktop","rEditor/pagesMenu/mainMenuPagesPopups/mainMenuPagesMobile","pagesMenu","baseUI","rEditor/pagesMenu/popups/popups/popups"],function(a,b,c,d,e,f,g,h){"use strict";function i(a,c){var d=b.assign({},a,c);return a.hasOwnProperty("style")&&(d.style=b.defaults(d.style,a.style)),a.hasOwnProperty("className")&&c.hasOwnProperty("className")&&(d.className=c.className+" "+a.className),d}function j(){var b=this.getEditorAPI(),f=this.getEditorAPI().getUserPreferences(),j=0===this.props.popupsList.length||"pages"===this.props.unfilteredSelectedTabLink.value,k=this.props.popupsList.length>0&&"popups"===this.props.unfilteredSelectedTabLink.value;return a.createElement("div",{className:"unfiltered-pages-and-popups"},this.props.popupsList.length>0?a.createElement(g.horizontalTabs,{key:"tabs",options:this.getTabs(),valueLink:this.props.unfilteredSelectedTabLink,className:"arrowed tabs-pages-and-popups"}):null,j&&b.isDesktopEditor()?a.createElement(d,i({className:"pages-tab",ref:"mainMenuPagesDesktop",key:"main-menu-pages-desktop",editedMenuItemIdLink:this.props.editedItemIdLink,openSettingsPanel:this.props.openSettingsPanel,closeSettingsPanel:this.props.closeSettingsPanel,openSubPagesMenu:this.openSpecialPagesMenu,onActionPagesSelected:this.onActionPagesSelected,selectedItemInfoLink:this.props.selectedItemInfoLink,changeSelectedMenuItem:this.props.changeSelectedMenuItem},this.props)):null,j&&b.isMobileEditor()?a.createElement(e,i({className:"pages-tab",ref:"mainMenuPagesMobile",key:"main-menu-pages-mobile",editedMenuItemIdLink:this.props.editedItemIdLink,openSettingsPanel:this.props.openSettingsPanel,closeSettingsPanel:this.props.closeSettingsPanel,openSubPagesMenu:this.openSpecialPagesMenu,onActionPagesSelected:this.onActionPagesSelected,selectedItemInfoLink:this.props.selectedItemInfoLink,changeSelectedMenuItem:this.props.changeSelectedMenuItem},this.props)):null,this.state.selectedSectionPage?a.createElement(c,{key:"subpages-menu",userPrefs:f,sectionMenuItem:this.state.selectedSectionPage,openSettingsPanel:this.props.openSpecialPageMenu,closeSubPagesMenu:this.closeSpecialPagesMenu,selectedMenuItemChanged:this.props.changeSpecialPage}):null,k?a.createElement(h,{key:"popups-tab",className:"popup-tab",closeSettingsPanel:this.props.closeSettingsPanel,popupsList:this.props.popupsList,editedItemIdLink:this.props.editedItemIdLink,onActionSelected:this.onActionPopUpSelected,selectedItemInfoLink:this.props.selectedItemInfoLink}):null)}return function(){return j.apply(this,[])}}),define("rEditor/pagesMenu/unfilteredPagesAndPopups/unfilteredPagesAndPopups",["react","core","rEditor/pagesMenu/specialPagesMenuMixin","rEditor/pagesMenu/unfilteredPagesAndPopups/unfilteredPagesAndPopups.rt"],function(a,b,c,d){"use strict";var e=[{label:"POPUPS_SiteStructure_Panel_Pages",value:"pages"},{label:"POPUPS_SiteStructure_Panel_Popups",value:"popups"}];return a.createClass({displayName:"unfilteredPagesAndPopups",mixins:[a.addons.LinkedStateMixin,c],propTypes:{popupsList:a.PropTypes.array.isRequired,menuItemsTree:a.PropTypes.array.isRequired,openSettingsPanel:a.PropTypes.func.isRequired,closeSettingsPanel:a.PropTypes.func.isRequired,openSpecialPageMenu:a.PropTypes.func.isRequired,closeSpecialPageMenu:a.PropTypes.func.isRequired,isSectionPage:a.PropTypes.func.isRequired,editedItemIdLink:a.PropTypes.object.isRequired,selectedItemInfoLink:a.PropTypes.object.isRequired,unfilteredSelectedTabLink:a.PropTypes.object.isRequired},getTabs:function(){return e},render:d})}),define("rEditor/rootComps/panels/pagesAndPopupsPanel.rt",["react/addons","lodash","panels","util","pagesMenu","baseUI","experiment","rEditor/pagesMenu/filterPagesAndPopups/filterPagesAndPopups","rEditor/pagesMenu/unfilteredPagesAndPopups/unfilteredPagesAndPopups"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(){var b=d.translate,f=e.settingsPanels.desktop.mainMenu,g=e.settingsPanels.mobile.mainMenu,j=e.settingsPanels.desktop.subpage,k=e.settingsPanels.mobile.subpage;return a.createElement(c.frames.pagesPanelFrame,{ref:"frame",panelName:this.props.panelName,title:b(this._panelTitle),helpId:this.getHelpId(),"}":!0},a.createElement("div",{className:"pages-panel-shadow"}),this.isMainMenuDesktopOpened()?a.createElement(f,{key:"page-settings-panel",ref:"mainMenuDesktop",menuItem:this.state.menuItemToShowSettingsFor,helpId:"2f65df85-2eba-4b41-a9bf-2a841a5e5a53",closeSettingsPanel:this.closeMainMenu,actions:{duplicate:this.duplicate,closeSettingsPanel:this.closeMainMenu}}):null,this.isMainMenuMobileOpened()?a.createElement(g,{key:"page-settings-panel",ref:"mainMenuMobile",menuItem:this.state.menuItemToShowSettingsFor,helpId:"2f65df85-2eba-4b41-a9bf-2a841a5e5a53",closeSettingsPanel:this.closeMainMenu,actions:{duplicate:this.duplicate,closeSettingsPanel:this.closeMainMenu}}):null,this.isSpecialPagesDesktopMenuOpened()?a.createElement(j,{key:"page-settings-panel",ref:"pageSettingsPanelSubpages",menuItem:this.state.specialPage,closeSettingsPanel:this.closeSpecialPageMenu,actions:{openBlogManager:this.openBlogManager,openStoreManager:this.openStoreManager}}):null,this.isSpecialPagesMobileMenuOpened()?a.createElement(k,{key:"page-settings-panel",ref:"pageSettingsPanelSubpages",menuItem:this.state.specialPage,closeSettingsPanel:this.closeSpecialPageMenu,actions:{openBlogManager:this.openBlogManager,openStoreManager:this.openStoreManager}}):null,this.props.filter?null:a.createElement(i,{key:"unfilteredPagesAndPopUps",ref:"unfilteredPagesAndPopUps",popupsList:this._popupsList,menuItemsTree:this._menuItemsTree,openSettingsPanel:this.openMainMenu,closeSettingsPanel:this.closeMainMenu,changeSelectedMenuItem:this.changeSelectedMenuItem,openSpecialPageMenu:this.openSpecialPageMenu,closeSpecialPageMenu:this.closeSpecialPageMenu,isSectionPage:this._isSectionPage,editedItemIdLink:this.linkState("editedItemId"),changeSpecialPage:this.changeSpecialPage,selectedItemInfoLink:this.linkState("selectedItemInfo"),unfilteredSelectedTabLink:this.linkState("unfilteredSelectedTab")}),this.props.filter?a.createElement(h,{key:"filterPagesAndPopups",ref:"filterPagesAndPopups",popupsList:this._popupsList,menuItemsList:this._menuItemsList,openSettingsPanel:this.openMainMenu,closeSettingsPanel:this.closeMainMenu,changeSelectedMenuItem:this.changeSelectedMenuItem,openSpecialPageMenu:this.openSpecialPageMenu,closeSpecialPageMenu:this.closeSpecialPageMenu,isSectionPage:this._isSectionPage,editedItemIdLink:this.linkState("editedItemId"),changeSpecialPage:this.changeSpecialPage,selectedItemInfoLink:this.linkState("selectedItemInfo")}):null)}return function(){return j.apply(this,[])}}),define("rEditor/rootComps/panels/pagesAndPopupsPanel",["react","core","lodash","pagesMenu","blog","tpa","helpIds","rEditor/rootComps/panels/pagesAndPopupsPanel.rt"],function(a,b,c,d,e,f,g,h){"use strict";function j(a){for(var e,b=c.slice(a),d=[];b.length;)e=b.pop(),e.items&&e.items.length&&(d=d.concat(e.items)),
d.push(e);return d}function k(a,b,d){var e=c.filter(a,function(a){var c=a[b].toLowerCase(),e=d.toLowerCase();return~c.indexOf(e)});return e||[]}function l(a,b){return k(a||[],"label",b)}function m(a,b){return k(a||[],"title",b)}function n(a,b){var c;return c=a?i.FILTERED_PAGES_POPUPS_TITLE:b.length>0?i.POPUPS_AND_PAGES_LABEL_KEY:i.PAGES_TITLE}function o(a,b){var e=d.specialPages.menuLogic.getSectionPagesIds(a,b);return function(a){return a.type.isPage&&c.includes(e,a.pageData.id)}}function p(a){return a.pages.getFocusedPageId()}var i={POPUPS_AND_PAGES_LABEL_KEY:"POPUPS_SiteStructure_Panel_Title",PAGES_TITLE:"Pages_Menu_Title_Title",FILTERED_PAGES_POPUPS_TITLE:"POPUPS_SiteStructure_Panel_Title"};return a.createClass({displayName:"pagesAndPopupsPanel",mixins:[b.mixins.editorAPIMixin,a.addons.LinkedStateMixin],propTypes:{filter:a.PropTypes.any},getInitialState:function(){return{menuItemToShowSettingsFor:null,specialPage:null,editedItemId:null,selectedItemInfo:{id:p(this.getEditorAPI()),isPageOrPopup:!0},unfilteredSelectedTab:this.getEditorAPI().pages.popupPages.isPopupOpened()?"popups":"pages"}},componentWillReceiveProps:function(){var a=p(this.getEditorAPI());this.state.selectedItemInfo.isPageOrPopup&&this.state.selectedItemInfo.id!==a&&this.setState({selectedItemInfo:{id:a,isPageOrPopup:!0}})},duplicate:function(a){d.pageMenuItemHelpers.duplicateMenuItem(this.getEditorAPI(),a,function(a){this.setState({editedMenuItemId:a,menuItemToShowSettingsFor:null})}.bind(this))},changeSelectedMenuItem:function(a){this.state.menuItemToShowSettingsFor&&(a.type.isPage?this.openMainMenu(a):this.closeMainMenu())},openMainMenu:function(a,b){this.setState({menuItemToShowSettingsFor:a},function(){var a=this.getEditorAPI().isDesktopEditor(),c=a?this.refs.mainMenuDesktop:this.refs.mainMenuMobile;b&&a&&c.setSettingsTab(b)}.bind(this))},closeMainMenu:function(){this.setState({menuItemToShowSettingsFor:null})},openSpecialPageMenu:function(a){this.setState({specialPage:a})},closeSpecialPageMenu:function(){this.setState({specialPage:null})},changeSpecialPage:function(a){this.setState({specialPage:a})},isMainMenuDesktopOpened:function(){return this.getEditorAPI().isDesktopEditor()&&this.state.menuItemToShowSettingsFor},isMainMenuMobileOpened:function(){return this.getEditorAPI().isMobileEditor()&&this.state.menuItemToShowSettingsFor},isSpecialPagesDesktopMenuOpened:function(){return this.getEditorAPI().isDesktopEditor()&&this.state.specialPage},isSpecialPagesMobileMenuOpened:function(){return this.getEditorAPI().isMobileEditor()&&this.state.specialPage},openBlogManager:function(){e.openBlogManagerFrame(this.getEditorAPI(),"allPosts")},openStoreManager:function(){f.superApps.openDashboardUrl(f.superApps.superAppsConstants.ECOM_APP_DEF_ID,"90%","100%"),this.getEditorAPI().bi.event(b.bi.events.topbar.pages.top_bar_PAGES_store_pages_store_manager_click)},getHelpId:function(){var a="popups"===this.state.unfilteredSelectedTab&&!this.props.filter;return a?g.EXTERNAL.POPUPS_PANEL:g.EXTERNAL.PAGES_PANEL},render:function(){var a=this.getEditorAPI(),b=a.pages.getPagesData(),d=a.mainMenu.getMenuItemsTreeForMainMenu(b),e=j(d||[]),f=a.pages.popupPages.getDataList(),g=m(f,this.props.filter),i=this.state.menuItemToShowSettingsFor,k=this.state.specialPage;return this._menuItemsTree=d,this._menuItemsList=l(e,this.props.filter),this._popupsList=g,this._panelTitle=n(this.props.filter,g),this._isSectionPage=o(a,b),i&&i.pageData&&(this.state.menuItemToShowSettingsFor=c.find(e,{id:i.id})),k&&k.pageData&&(this.state.specialPage.pageData=c.find(b,{id:this.state.specialPage.pageData.id})),h.call(this)}})}),define("rEditor/rootComps/panels/myMediaPanel.rt",["react/addons","lodash","baseUI","util","core","panels","experiment"],function(a,b,c,d,e,f,g){"use strict";function h(a){a.preventDefault()}function i(a){this.fontsManagerOpen()}function j(a){this.mediaManagerOpen("IMAGE")}function k(a){this.mediaManagerManage("VIDEO")}function l(a){this.mediaManagerOpen("MUSIC")}function m(a){this.mediaManagerManage("MUSIC_PRO")}function n(a){this.mediaManagerOpen("DOCUMENT")}return function(){return a.createElement(f.frames.leftPanelFrame,{ref:"mediaPanel",className:"panel-background",panelName:this.props.panelName,panelClass:"my-uploads-panel",panelIndex:this.props.panelIndex,label:d.translate("MY_UPLOADS_PANEL_HEADER_TITLE"),helpId:"e1df1248-6bd6-4497-ad2a-2a42cd357eae",onContextMenu:h.bind(this)},a.createElement("ul",{},g.isOpen("fontsUpload")?a.createElement("li",{key:"fonts_upload",className:"panel-button",onClick:i.bind(this)},a.createElement("div",{className:"panel-button-inner"},a.createElement("div",{className:"label"},a.createElement(c.symbol,{name:"my_uploads_fonts"}),a.createElement("span",{className:"button-label"},d.translate("MY_UPLOADS_MY_FONTS_LINK_LABEL"))),a.createElement("div",{className:"action"},a.createElement(c.symbol,{name:"arrowWithStates"})))):null,a.createElement("li",{className:"panel-button",onClick:j.bind(this)},a.createElement("div",{className:"panel-button-inner"},a.createElement("div",{className:"label"},a.createElement(c.symbol,{name:"my_uploads_images"}),a.createElement("span",{className:"button-label"},d.translate("MY_UPLOADS_MY_IMAGES_LINK_LABEL"))),a.createElement("div",{className:"action"},a.createElement(c.symbol,{name:"arrowWithStates"})))),a.createElement("li",{className:"panel-button",onClick:k.bind(this)},a.createElement("div",{className:"panel-button-inner"},a.createElement("div",{className:"label"},a.createElement(c.symbol,{name:"my_uploads_video"}),a.createElement("span",{className:"button-label"},d.translate("MY_UPLOADS_MY_VIDEOS_LINK_LABEL"))),a.createElement("div",{className:"action"},a.createElement(c.symbol,{name:"arrowWithStates"})))),this.isWixMusic()?null:a.createElement("li",{key:"single_track",className:"panel-button",onClick:l.bind(this)},a.createElement("div",{className:"panel-button-inner"},a.createElement("div",{className:"label"},a.createElement(c.symbol,{name:"my_uploads_single_tracks"}),a.createElement("span",{className:"button-label"},d.translate("MY_UPLOADS_MY_MUSIC_LINK_LABEL"))),a.createElement("div",{className:"action"},a.createElement(c.symbol,{name:"arrowWithStates"})))),this.isWixMusic()?a.createElement("li",{key:"wix_music",className:"panel-button",onClick:m.bind(this)},a.createElement("div",{className:"panel-button-inner"},a.createElement("div",{className:"label"},a.createElement(c.symbol,{name:"my_uploads_wix_music"}),a.createElement("span",{className:"button-label"},d.translate("MY_UPLOADS_MUSIC_PRO_LINK_LABEL"))),a.createElement("div",{className:"action"},a.createElement(c.symbol,{name:"arrowWithStates"})))):null,a.createElement("li",{className:"panel-button",onClick:n.bind(this)},a.createElement("div",{className:"panel-button-inner"},a.createElement("div",{className:"label"},a.createElement(c.symbol,{name:"my_uploads_docs"}),a.createElement("span",{className:"button-label"},d.translate("MY_UPLOADS_MY_DOCUMENT_LINK_LABEL"))),a.createElement("div",{className:"action"},a.createElement(c.symbol,{name:"arrowWithStates"}))))))}}),define("rEditor/rootComps/panels/myMediaPanelAddCompData",[],function(){"use strict";function b(a){var b=Math.min(600,a.width);return{componentType:"wysiwyg.viewer.components.WPhoto",layout:{width:b,height:Math.floor(b*a.height/a.width)},data:{width:a.width,height:a.height,alt:"",uri:a.uri,title:a.title,type:"Image",description:""}}}function c(b){var c=b.uri.split(".").pop();return{componentType:"wysiwyg.viewer.components.documentmedia.DocumentMedia",layout:{width:90,height:140},data:{title:b.title,uri:a[c]||a.other,description:"",width:105,height:141,type:"Image",link:{docId:b.uri,name:b.title,type:"DocumentLink"}},style:"dm1",props:{type:"DocumentMediaProperties",showTitle:!1}}}function d(a){return{componentType:"wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer",layout:{width:304,height:60},data:{originalFileName:a.title,uri:a.uri,type:"SingleAudioPlayer"},props:{autoplay:!1,loop:!1,showArtist:!0,showTrack:!0,volume:50,type:"SingleAudioPlayerProperties"},style:"SingleAudioPlayer_1"}}var a={pdf:"40d80b8089c8418a961cb75d96d491f7.png",doc:"b8964aa7650d463fac3b77e0d00e8f12.png",docx:"b8964aa7650d463fac3b77e0d00e8f12.png",ppt:"a41192b40f324972a1d919a8350965f8.png",ppx:"a41192b40f324972a1d919a8350965f8.png",xls:"757aeccaa7f4409b93913c55e36a194d.png",xlsx:"757aeccaa7f4409b93913c55e36a194d.png",odp:"ac1fbe0592434c58889947de5714b3c7.png",odt:"ac1fbe0592434c58889947de5714b3c7.png",other:"046956f7d55f4143a30b3b54669ee243.png"};return{picture:b,document:c,music:d}}),define("rEditor/rootComps/panels/myMediaPanel",["react","lodash","core","util","panels","rEditor/rootComps/panels/myMediaPanel.rt","rEditor/rootComps/panels/myMediaPanelAddCompData","pLoader!santa:utils"],function(a,b,c,d,e,f,g,h){"use strict";function i(a){var b=g[a.mediaType];return b?b(a):void h.log.error("Unsupported media type",a.mediaType)}return a.createClass({displayName:"MyMediaPanel",mixins:[c.mixins.editorAPIMixin],closePanel:function(){this.refs.mediaPanel.close()},titleMap:{IMAGE:"MMGR_API_IMAGE_MANAGE_TITLE",MUSIC:"MMGR_API_MUSIC_MANAGE_TITLE",DOCUMENT:"MMGR_API_DOCUMENT_MANAGE_TITLE"},submitButtonMap:{IMAGE:"MMGR_submitbutton_uploads_uploads_add",MUSIC:"MMGR_submitbutton_uploads_mytracks_add",DOCUMENT:"MMGR_submitbutton_uploads_mydocs_add"},mediaManagerOpen:function(a){var b=this.getEditorAPI();b.bi.event(c.bi.events.myMediaPanel.my_uploads_panel_section_click,{section:a}),b.mediaServices.mediaManager.open(a,{multiSelect:!0,callback:this.onItemsSelected.bind(this,a),translation:{title:d.translate(this.titleMap[a]),submitButton:d.translate(this.submitButtonMap[a])}})},mediaManagerManage:function(a){var b=this.getEditorAPI();b.bi.event(c.bi.events.myMediaPanel.my_uploads_panel_section_click,{section:a}),b.mediaServices.mediaManager.manage(a)},fontsManagerOpen:function(){e.panelManager.openPanel("panels.focusPanels.fontsUploadPanel",{},!0)},onItemsSelected:function(a,c){if(c){var d=this.getEditorAPI();d.pasteLogic.addContext.resetPastePosition(),b.forEach(c,function(b,c,d){this.addComponent(a,b,c,d)},this)}},addComponent:function(a,d,e,f){var g=this.getEditorAPI(),h=i(d),j=g.pages.getFocusedPageId(),k=g.pasteLogic.addContext.getPastePosition(g,h.layout,j);b.merge(h.layout,k);var l=g.pages.getReference(j);g.waitForChangesApplied(function(){g.components.add(l,h,void 0,function(d){e===f.length-1&&(g.selection.selectComponentByCompRef(d),g.history.add("added component")),g.bi.event(c.bi.events.addPanel.COMPONENT_ADDED_TO_STAGE,{origin:"my_uploads",category:b.get(g,["mediaServices.mediaManager",a,"mmgrParams.mediaType"]),component_type:h.componentType,component_id:d.id,adding_method:"click"})})})},isWixMusic:function(){var a="13bb5d67-1add-e770-a71f-001277e17c57";return this.getEditorAPI().tpa.app.isInstalled(a)},render:f})}),define("rEditor/rootComps/panels/backgroundPanel/backgroundDesktopPresets.json",[],function(){return[{presetIndex:1,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Electric Darkness",videoId:"video/11062b_6a134fc09ea34833a17d295e295ab517",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_6a134fc09ea34833a17d295e295ab517f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},opacity:1,duration:6,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"",name:""}},color:"{color_24}",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:{type:"Image",title:"",uri:"0da768_880a3209e3744cd0a96b66835a01b8c5.png",width:256,height:256},colorOverlay:"#0AFCFC",colorOverlayOpacity:.2}},{presetIndex:2,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Floating Particles",videoId:"video/11062b_03c50f8fe4a34cc297a984e483a282ef",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_03c50f8fe4a34cc297a984e483a282eff000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},opacity:1,duration:18,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"",name:""}},color:"#000000",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"#02B0AD",colorOverlayOpacity:.3,imageOverlay:""}},{presetIndex:3,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Bananas",uri:"8034aa3291a54c489a7b7a3121d994f9.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:1177,height:1200,artist:{id:"",name:""}},color:"#8BD0CD",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:4,path:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Rain Clouds",videoId:"video/11062b_8e792646ca71495b96677c20e27e9122",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_8e792646ca71495b96677c20e27e9122f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",width:1920,height:1080},opacity:1,duration:14,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v47427758",name:"bisgtock"}},color:"{color_15}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"#000000",colorOverlayOpacity:.4,imageOverlay:""}},{presetIndex:5,path:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Deep Sea Waves",videoId:"video/11062b_f1fbf8b243e942a692e564fac5382513",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_f1fbf8b243e942a692e564fac5382513f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",width:1920,height:1080},opacity:1,duration:10,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v47427890",name:"bisgtock"}},color:"#052F5B",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:{type:"Image",title:"",uri:"0da768_4371c7e64a49489bb88c536f515f2040.png",width:6,height:6},colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:6,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Divers Underwater",uri:"bbde6e2b4387431ca37f8e093bcb0e8e.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:4368,height:2912,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:7,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Dot Pattern",uri:"70127753074e4bf694b4b889710f0b7a.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:200,height:202,artist:{id:"",name:""}},color:"#002E5D",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:8,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Aurelia Jellyfish",uri:"884454ad07cf46a5bb7fb6aef2e02358.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",width:2700,height:2160,artist:{id:"",name:""}},color:"#002E5D",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:9,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Swaying Palms",videoId:"video/11062b_d013b164dadb47ec8e746ab178aacfbb",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_d013b164dadb47ec8e746ab178aacfbbf000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},opacity:1,duration:29,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v51654467",name:"bigstock"}},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:{type:"Image",title:"",uri:"0da768_880a3209e3744cd0a96b66835a01b8c5.png",width:256,height:256},colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:10,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Girl in the Window",uri:"acb4853a0d8543b3ac291da735e9959b.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:6048,height:4032,artist:{id:"",name:""}},color:"#002E5D",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:11,path:"public/8e256233-1752-4026-9341-54036e7f875e/db9e3e42-59d2-461f-b589-6cbbf7c2c06e",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"In the Office",videoId:"video/11062b_6743da5900054f1f8e69f53302930a6a",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_6743da5900054f1f8e69f53302930a6af000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/db9e3e42-59d2-461f-b589-6cbbf7c2c06e",width:1920,height:1080},opacity:1,duration:30,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"",name:""}},color:"{color_17}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"color_11",colorOverlayOpacity:.25,imageOverlay:""}},{presetIndex:12,path:"public/8e256233-1752-4026-9341-54036e7f875e/bfa1c2d0-17a0-425d-9a6b-15cc467f0736",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Winter Sports",videoId:"video/11062b_14ca44a138d942f78374f7751ac5942f",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_14ca44a138d942f78374f7751ac5942ff000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/bfa1c2d0-17a0-425d-9a6b-15cc467f0736",width:1920,height:1080},opacity:1,duration:31,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"vD19_13_002&vD187_89_019&vD116_16_121&vD116_16_117&vD116_16_051&v17A041_676",name:"Dissolve&Dissolve&Dissolve&Dissolve&Dissolve&Dissolve"}},color:"#2BFCF9",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:13,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Boats in the Water",uri:"edafc906071647ad940aad43e3fdbe07.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",width:3500,height:2318,artist:{id:"",name:""}},color:"#CCE2E2",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:14,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Water Drop",videoId:"video/11062b_830709c744404d6ea7a10dcfd88e3a48",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_830709c744404d6ea7a10dcfd88e3a48f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},opacity:1,duration:15,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v81193529",name:"bigstock"}},color:"#439CE6",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:15,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Submerged",videoId:"video/11062b_64ae2a899006496dac01c2e81fac97f1",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_64ae2a899006496dac01c2e81fac97f1f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},opacity:1,duration:24,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v47427800",name:"bisgtock"}},color:"{color_17}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"#439CE6",colorOverlayOpacity:.3,imageOverlay:""}},{presetIndex:16,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Blue Checkers",uri:"a60710612bbc4609ac93e78a1fa234c0.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:400,height:400,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:17,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Road Trip",videoId:"video/11062b_1c6001b9888a4ba89939a510eee406d1",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_1c6001b9888a4ba89939a510eee406d1f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},opacity:1,duration:21,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"vD330_2_176",name:"dissolve"}},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"#8AEDFF",colorOverlayOpacity:.2,imageOverlay:""}},{presetIndex:18,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Mountain Landscape",uri:"0bb83114d47e4ca0a9fa5a9ea6a16530.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",width:4442,height:2961,artist:{id:"",name:""}},color:"#EEFDFF",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:19,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Sparkling Water",videoId:"video/11062b_7bb9944945af4723ad2aefa5caed46a4",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_7bb9944945af4723ad2aefa5caed46a4f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},opacity:1,duration:18,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v47421608",name:"bisgtock"}},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:20,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Rolling Tide",videoId:"video/11062b_f0d5e0c342cc49dca298de0225d2247c",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_f0d5e0c342cc49dca298de0225d2247cf000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},opacity:1,duration:17,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v47428379",name:"bisgtock"}},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:21,path:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Abstract Horizon",uri:"5afe60462baf41e79586f3fdaf78d664.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",width:1980,height:1200,artist:{id:"",name:""}},color:"#006C6D",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:22,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Misty Slopes",uri:"99ec98fdb81945c29c25a3ad6c5606b1.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",width:1920,height:1280,artist:{id:"",name:""}},color:"#114C22",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:23,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Blurred Beach",uri:"a97014d3cac6454b822f786b7d1f2878.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",width:2351,height:1302,artist:{id:"",name:""}},color:"#8BD0CD",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:24,path:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Blue to Cream Gradient",uri:"356d0cee84164a4cb8304d44630a7ea6.png",description:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",width:8e3,height:4500,artist:{id:"",name:""}},color:"#8BD0CD",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:25,path:"public/8e256233-1752-4026-9341-54036e7f875e/babd428d-abdf-463a-ac71-a23e3cafaffa",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Vintage Gramophone",videoId:"video/11062b_bd026287ff784f5198fbfdbbbbba2489",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_bd026287ff784f5198fbfdbbbbba2489f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/babd428d-abdf-463a-ac71-a23e3cafaffa",width:1920,height:1080},opacity:1,duration:7,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v50768873",name:"bigstock"}},color:"{color_15}",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:{type:"Image",title:"",uri:"0da768_d3e25a05cedd404f807528f6a4750388.png",width:56,height:56},colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:26,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Tropical Plant",uri:"117d700ff79f490587e0bbaad89bc84f.jpeg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",width:2507,height:1674,artist:{id:"",name:""}},color:"#1C8A43",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:27,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Graph Paper",uri:"1beffca589a04014a3e62f00a022b875.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:192,height:192,artist:{id:"",name:""}},color:"#CAE9BD",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:28,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Leaves Pattern",uri:"278019192ae045d191a9430cf507c7f6.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:974,height:966,artist:{id:"",name:""}},color:"#F1FFF6",alignType:"center",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:29,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Tropic Birds",uri:"b59b6c0afac149c1825e76ad4381c9ca.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:552,height:552,artist:{id:"",name:""}},color:"#002E5D",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:30,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Rainforest Canopy",videoId:"video/11062b_7488edba38234bd69b0603ad498efdf5",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_7488edba38234bd69b0603ad498efdf5f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},opacity:1,duration:35,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v50652950",name:"bigstock"}},color:"#BFBF43",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:31,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Hand-sketched Lines",uri:"3978993e99184d5e8c21f0204cd07bca.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",
width:150,height:150,artist:{id:"",name:""}},color:"#CAE9BD",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:32,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Palm Trees",uri:"3cd1de924697419088c1e033bb3384ef.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",width:1920,height:1280,artist:{id:"",name:""}},color:"#BDBF37",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:33,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Snowfall",videoId:"video/11062b_7124ff06fc56498d96722413f5f4846f",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_7124ff06fc56498d96722413f5f4846ff000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},opacity:1,duration:30,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"i2800",name:"pexels"}},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:34,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"City Park",videoId:"video/11062b_ed5fd19d3b3c4a979ecfd7aa035320eb",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_ed5fd19d3b3c4a979ecfd7aa035320ebf000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},opacity:1,duration:30,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"",name:""}},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:{type:"Image",title:"",uri:"0da768_d3e25a05cedd404f807528f6a4750388.png",width:56,height:56}}},{presetIndex:35,path:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Dogs in the Park",videoId:"video/11062b_dadf974a47664e5cb42f939b7f17bec8",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_dadf974a47664e5cb42f939b7f17bec8f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",width:1920,height:1080},opacity:1,duration:26,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"",name:""}},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:""}},{presetIndex:36,path:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"House Cat",videoId:"video/11062b_be8b8d6a9d5a4bc59aa76a8b25fd9888",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_be8b8d6a9d5a4bc59aa76a8b25fd9888f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",width:1920,height:1080},opacity:1,duration:26,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"",name:""}},color:"#DAB89C",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"#D9B79C",colorOverlayOpacity:.2,imageOverlay:""}},{presetIndex:37,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Tree Stump",uri:"11a91072527049689406d272d5a6d6c4.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",width:1280,height:768,artist:{id:"",name:""}},color:"#114C22",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:38,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Asparagus",uri:"4d24dcfa04684a81bf3f1701a847af81.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:2e3,height:1333,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:39,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Tropical Light",videoId:"video/11062b_af392b5325e7416eb2d8b6f9b1b3c634",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_af392b5325e7416eb2d8b6f9b1b3c634f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},opacity:1,duration:20,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"i158598041",name:"shutterstock"}},color:"{color_16}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:40,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Gold Bunnies",uri:"6060bf9757224155bc8cbd95029ee720.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:459,height:287,artist:{id:"",name:""}},color:"{color_11}",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:41,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Pineapple Pattern",uri:"eeef56698522480caf7deba849718afe.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:534,height:809,artist:{id:"",name:""}},color:"{color_11}",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:42,path:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Yellow to Blue Gradient",uri:"98e04ee03335423bb5a47bd2f377df2e.png",description:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",width:8e3,height:4500,artist:{id:"",name:""}},color:"#35EBE7",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:43,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Black Spades",uri:"7d0fa0c9f87547b0a75b80f38ed48183.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:300,height:267,artist:{id:"",name:""}},color:"color_31",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:44,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Urban View",videoId:"video/11062b_3e2f37c297534f9ead156265242fbca8",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_3e2f37c297534f9ead156265242fbca8f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},opacity:1,duration:20,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v49780622&v493478872&v49737086&v318347",name:"bigstock&bigstock&bigstock&clipcanvas"}},color:"{color_31}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"#F0C930",colorOverlayOpacity:.3,imageOverlay:""}},{presetIndex:45,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Light Spots",videoId:"video/11062b_2042bb7351284f0f982e4787d37415e6",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_2042bb7351284f0f982e4787d37415e6f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},opacity:1,duration:14,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"",name:""}},color:"#FFF369",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"#FFF269",colorOverlayOpacity:.2,imageOverlay:""}},{presetIndex:46,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Pink Particles",videoId:"video/11062b_155feccf8d494b18b70adcd7716b6646",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_155feccf8d494b18b70adcd7716b6646f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},opacity:1,duration:50,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"",name:""}},color:"{color_31}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"#FFCC00",colorOverlayOpacity:.5,imageOverlay:""}},{presetIndex:47,path:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Sunflowers",videoId:"video/11062b_7fb923cf2d6748e195e980d74c4059f2",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_7fb923cf2d6748e195e980d74c4059f2f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",width:1920,height:1080},opacity:1,duration:30,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"i145590430",name:"shutterstock"}},color:"color_29",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:{type:"Image",title:"",uri:"0da768_880a3209e3744cd0a96b66835a01b8c5.png",width:256,height:256},colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:48,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Flower in Sunlight",uri:"175c71a9a7384ca68d97b39947203da8.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",width:1920,height:1080,artist:{id:"",name:""}},color:"#F17424",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:49,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Golden Dots",uri:"80e0917312df4df5853a6c2a861e7a63.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:466,height:766,artist:{id:"",name:""}},color:"#FAEECD",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:50,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Lifeguard Tower",uri:"f7f8700159f142b3b23e349c23338337.jpeg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",width:4608,height:3072,artist:{id:"",name:""}},color:"#F9C7A7",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:51,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Meadow",videoId:"video/11062b_84f0c9aa252b4b2ab1114febc012eacb",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_84f0c9aa252b4b2ab1114febc012eacbf000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},opacity:1,duration:30,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"i144673559",name:"shutterstock"}},color:"{color_15}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:52,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Lakeside",videoId:"video/11062b_10927dd4d14046e4ac23f51f0a5448b3",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_10927dd4d14046e4ac23f51f0a5448b3f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},opacity:1,duration:20,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"i205250962",name:"shutterstock"}},color:"#FFF5A8",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:53,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Zebra Crossing",uri:"fd559363ad5645958cc2ccdc6005fbd6.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:5682,height:3990,artist:{id:"",name:""}},color:"#F1CC01",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:54,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Paradise Serenity",videoId:"video/11062b_46d3e749db4d4169987b00279493eaa7",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_46d3e749db4d4169987b00279493eaa7f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},opacity:1,duration:10,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"i152767760",name:"shutterstock"}},color:"{color_31}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:55,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Zigzag",uri:"4d24ad2c7b8f47bbbfe14399bd41dc54.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:64,height:50,artist:{id:"",name:""}},color:"#FAC2D2",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:56,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Miami Beach",videoId:"video/11062b_75ff30e8c38545348bad91473b78ab7c",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_75ff30e8c38545348bad91473b78ab7cf000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},opacity:1,duration:20,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"i100070693",name:"shutterstock"}},color:"#D41746",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"#D41746",colorOverlayOpacity:.3,imageOverlay:""}},{presetIndex:57,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Tropical Leaves",uri:"0396af7423c344a39107ad593c4500f8.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",width:3264,height:2448,artist:{id:"",name:""}},color:"#B22087",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:58,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Grey Geometric Shapes",uri:"f833450526164f5e80b7e8ef0f50844c.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:300,height:300,artist:{id:"",name:""}},color:"#F2668F",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:59,path:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Pink to Orange Gradient",uri:"af7a8b002af842f8bab87691c1d8640f.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",width:1920,height:1080,artist:{id:"",name:""}},color:"#C37DB3",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:60,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Rain Drops",uri:"95f3448913a746f28b30670b23da4157.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:216,height:216,artist:{id:"",name:""}},color:"#C65AA5",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:61,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Cotton Candy",videoId:"video/11062b_808b40c463104f22943c284c625d31c3",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_808b40c463104f22943c284c625d31c3f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},opacity:1,duration:4,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"",name:""}},color:"{color_30}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"#E31B22",colorOverlayOpacity:.25,imageOverlay:""}},{presetIndex:62,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Ink and Water",videoId:"video/11062b_74ef3d923f9b451492d3ed9278991873",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_74ef3d923f9b451492d3ed9278991873f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},opacity:1,duration:30,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v50768402",name:"bigstock"}},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:63,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Red Confetti",uri:"21ff2961e4d94522b96543b873b063dc.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:121,height:107,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:64,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Woman Running Legs",uri:"0983ceb77a4e49c6978e4515d8a454f6.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:1980,height:1200,artist:{id:"",name:""}},color:"#F9C7A7",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:65,path:"public/491df47b-5958-4dc7-9029-37f428755d45/c2a37dfc-36cf-4bfd-b940-55bac7bdc9e6",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Flamingos",uri:"88d74a1559c84402a4a957527a839260.png",description:"public/491df47b-5958-4dc7-9029-37f428755d45/c2a37dfc-36cf-4bfd-b940-55bac7bdc9e6",width:1920,height:1080,artist:{id:"",name:""}},color:"#DAF2FF",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:66,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Foxes and Rabbits",uri:"f7c0cc732a8e458caf88ad42b251fbdf.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:571,height:514,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:67,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Ink Splash",videoId:"video/11062b_aa1eeb25fbd3484dbde611d71d7c5747",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_aa1eeb25fbd3484dbde611d71d7c5747f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},opacity:1,duration:30,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v47428268",name:"bisgtock"}},color:"#F1F1F1",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:{type:"Image",title:"",uri:"0da768_4371c7e64a49489bb88c536f515f2040.png",width:6,height:6},colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:68,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Palm Trees Beach View",uri:"2465a22a212e41cd96a05e3e3fe5adc4.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",width:1980,height:1200,artist:{id:"",name:""}},color:"#DAF2FF",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:69,path:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Moon Jellyfish",videoId:"video/11062b_77c6bfa45ec6417fa8b1b37fd3f7a108",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_77c6bfa45ec6417fa8b1b37fd3f7a108f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",width:1920,height:1080},opacity:1,duration:10,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v50790908",name:"bigstock"}},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:70,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Modern Chicago Skyline",uri:"5b7e139d046c40c1a1acde7162607721.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",width:4085,height:2696,artist:{id:"",name:""}},color:"#FAC2D2",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:71,path:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Pink Jellyfish",videoId:"video/11062b_ea61c0ecc8b34ecd942c42470507e640",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_ea61c0ecc8b34ecd942c42470507e640f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",width:1920,height:1080},opacity:1,duration:20,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v47440688",name:"bigstock"}},color:"{color_19}",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:{type:"Image",title:"",uri:"0da768_2326357be59441978a570bec687a94d0.png",width:3,height:3},colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:72,path:"public/8e256233-1752-4026-9341-54036e7f875e/a85e50b3-f78c-4792-a226-040ce52b983c",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Spaceman",videoId:"video/11062b_fcd00d59140f45d5b2295fe8a4c17edb",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_fcd00d59140f45d5b2295fe8a4c17edbf000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/a85e50b3-f78c-4792-a226-040ce52b983c",width:1920,height:1080},opacity:1,duration:25,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"i111095258&i241509286",name:"shutterstock&shutterstock"}},color:"{color_20}",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:{type:"Image",title:"",uri:"0da768_d3e25a05cedd404f807528f6a4750388.png",width:56,height:56},colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:73,path:"public/8e256233-1752-4026-9341-54036e7f875e/babd428d-abdf-463a-ac71-a23e3cafaffa",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Rotating Crystal Glass",videoId:"video/11062b_58249d8a53aa452492e328c962b036e9",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_58249d8a53aa452492e328c962b036e9f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/babd428d-abdf-463a-ac71-a23e3cafaffa",width:1920,height:1080},opacity:1,duration:14,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v47440709",name:"bisgtock"}},color:"{color_15}",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:{type:"Image",title:"",uri:"0da768_8b89980121844d37be099f0dbe33e3e3.png",width:6,height:6},colorOverlay:"#5C3B1B",colorOverlayOpacity:.4}},{presetIndex:74,path:"public/8e256233-1752-4026-9341-54036e7f875e/305292cb-8a7a-4825-87ca-52882fbdf8ff",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Spinning Record",videoId:"video/11062b_0f1e951461494c1894d86c9ab85a11cf",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_0f1e951461494c1894d86c9ab85a11cff000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/305292cb-8a7a-4825-87ca-52882fbdf8ff",width:1920,height:1080},opacity:1,duration:10,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v560888",name:"clipcanvas"}},color:"{color_15}",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:{type:"Image",title:"",uri:"0da768_8fae2cc5b7bf477fb13faa1f2582dbd2.png",width:4,height:6},colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:75,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Vegan Trio",uri:"180ba81999a64ad3aa42735d409ecab6.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:4253,height:2825,artist:{id:"",name:""}},color:"#DBB89A",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:76,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Hand-drawn Feathers",uri:"8eee3a6c7d5842429beba0f7eaeef38c.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:200,height:200,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:77,path:"public/8e256233-1752-4026-9341-54036e7f875e/babd428d-abdf-463a-ac71-a23e3cafaffa",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Rotating Gears",videoId:"video/11062b_d9801124f3cb4deca350acfd66b547cf",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_d9801124f3cb4deca350acfd66b547cff000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/babd428d-abdf-463a-ac71-a23e3cafaffa",width:1920,height:1080},opacity:1,duration:7,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v50768483",name:"bigstock"
}},color:"{color_15}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"#F0C930",colorOverlayOpacity:.05,imageOverlay:""}},{presetIndex:78,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Graphic Design Workspace",uri:"fa34b31dc6244a4a854ef6eb8f02ff74.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:4e3,height:3e3,artist:{id:"",name:""}},color:"#B7121B",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:79,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Triangles",uri:"d59a233b62cf44b2bf1ebed57aac24de.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:343,height:410,artist:{id:"",name:""}},color:"#DBB89A",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:80,path:"public/a0c10733-b2a6-4330-a431-537a9f05c353/c9440526-5aa9-4a6f-8d66-9cf5fa50020d",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Wood",uri:"1149de6bf15f40c587573bf9311dc32c.jpg",description:"public/a0c10733-b2a6-4330-a431-537a9f05c353/c9440526-5aa9-4a6f-8d66-9cf5fa50020d",width:4990,height:3326,artist:{id:"",name:""}},color:"#DBB89A",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:81,path:"public/8e256233-1752-4026-9341-54036e7f875e/305292cb-8a7a-4825-87ca-52882fbdf8ff",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Classical Compilation",videoId:"video/11062b_35727d5e825d405bbb007bc615000a15",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_35727d5e825d405bbb007bc615000a15f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/305292cb-8a7a-4825-87ca-52882fbdf8ff",width:1920,height:1080},opacity:1,duration:19,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v51653993&v795016&v639989&v249088&v527322",name:"bigstock&clipcanvas&clipcanvas&clipcanvas&clipcanvas"}},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"#ffffff",colorOverlayOpacity:.2,imageOverlay:""}},{presetIndex:82,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Metal Stairs on Wooden Facade",uri:"cf8156766df64118b0653b3ac4bd5605.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:1920,height:1440,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:83,path:"public/8e256233-1752-4026-9341-54036e7f875e/db9e3e42-59d2-461f-b589-6cbbf7c2c06e",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Illustrator",videoId:"video/11062b_ebcab620e7584e1693f939e597be3777",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_ebcab620e7584e1693f939e597be3777f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/db9e3e42-59d2-461f-b589-6cbbf7c2c06e",width:1920,height:1080},opacity:1,duration:30,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"",name:""}},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:{type:"Image",title:"",uri:"0da768_880a3209e3744cd0a96b66835a01b8c5.png",width:256,height:256},colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:84,path:"public/921f85b0-261d-4406-964a-cf47e2744c69/bd176e29-5534-4d9f-87a6-a8177517ea4f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Graphic Pattern",uri:"5c688cc2a5ec4ad2b86ed53d5df46f47.png",description:"public/921f85b0-261d-4406-964a-cf47e2744c69/bd176e29-5534-4d9f-87a6-a8177517ea4f",width:1920,height:1080,artist:{id:"",name:""}},color:"#3D9BE9",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:85,path:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Tiger",videoId:"video/11062b_6ceb80744f45401caf9eb666caeb9887",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_6ceb80744f45401caf9eb666caeb9887f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",width:1920,height:1080},opacity:1,duration:28,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v49350467",name:"bigstock"}},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:""}},{presetIndex:86,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Subway",videoId:"video/11062b_8b85f288687943b59677b4e3e56ef8f8",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_8b85f288687943b59677b4e3e56ef8f8f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},opacity:1,duration:3,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v342278662",name:"pexels"}},color:"#303030",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"#000000",colorOverlayOpacity:.45,imageOverlay:""}},{presetIndex:87,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Stack of Magazines",uri:"d532b29bc0c448b29f47672da7b07613.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:1920,height:1280,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:88,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Graphic Design Office",uri:"d1c5cd0055c94e3bb1acee9e2fda9f0e.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:1920,height:1280,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:89,path:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Record Player",uri:"ee15442532e84041a495a5e46c465b12.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",width:5616,height:3744,artist:{id:"",name:""}},color:"#A7A7A7",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:90,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Floating Shapes Gray",videoId:"video/11062b_d2398715eb2e43348e6907b6b3383815",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_d2398715eb2e43348e6907b6b3383815f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},opacity:1,duration:28,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"",name:""}},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:91,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Forest Clouds",videoId:"video/11062b_2e77c1d1a7d84393becbcecd189fe80e",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_2e77c1d1a7d84393becbcecd189fe80ef000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},opacity:1,duration:25,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v47440175",name:"bisgtock"}},color:"#FFFFFF",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:""}},{presetIndex:92,path:"public/8e256233-1752-4026-9341-54036e7f875e/babd428d-abdf-463a-ac71-a23e3cafaffa",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Metronome",videoId:"video/11062b_80a0d0745a884541ae8fae22c02c9e74",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_80a0d0745a884541ae8fae22c02c9e74f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/babd428d-abdf-463a-ac71-a23e3cafaffa",width:1920,height:1080},opacity:1,duration:17,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v49780622",name:"bigstock"}},color:"#271504",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:{type:"Image",title:"",uri:"0da768_8b89980121844d37be099f0dbe33e3e3.png",width:6,height:6},colorOverlay:"#ffffff",colorOverlayOpacity:.25}},{presetIndex:93,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Grey Dots",uri:"92533e06635940e5b152eb4b0f9c1c4b.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:180,height:101,artist:{id:"",name:""}},color:"#232323",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:94,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Backstage",uri:"8a6b22a6b8d84e728c2253794ee37f98.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:4500,height:3e3,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:95,path:"public/8e256233-1752-4026-9341-54036e7f875e/5abaf36e-05be-41b2-8a0c-e9999bc48c51",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Melting Ice",videoId:"video/11062b_9480d9d800bd4bda938057d5ac1ebc42",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_9480d9d800bd4bda938057d5ac1ebc42f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/5abaf36e-05be-41b2-8a0c-e9999bc48c51",width:1920,height:1080},opacity:1,duration:18,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v47428211",name:"bisgtock"}},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:{type:"Image",title:"",uri:"0da768_4371c7e64a49489bb88c536f515f2040.png",width:6,height:6},colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:96,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Black Crosses",uri:"56adecff887f459297d81ee5a451ca0e.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:200,height:200,artist:{id:"",name:""}},color:"#4F4F4F",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:97,path:"public/8e256233-1752-4026-9341-54036e7f875e/bfa1c2d0-17a0-425d-9a6b-15cc467f0736",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Street Sports",videoId:"video/11062b_b3ee9353cba84f2fba11b18497edd49c",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_b3ee9353cba84f2fba11b18497edd49cf000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/bfa1c2d0-17a0-425d-9a6b-15cc467f0736",width:1920,height:1080},opacity:1,duration:27,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"vD26_7_556&vD26_7_549&vD26_7_021&vD200_3_014&vD187_87_017",name:"dissolve&dissolve&dissolve&dissolve&dissolve"}},color:"{color_15}",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:{type:"Image",title:"",uri:"0da768_9dd9479cdafd4871b1944d50caa91db0.png",width:6,height:6},colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:98,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Mist Over the Bridge",videoId:"video/11062b_66b9234563324488b85be02dcf1db183",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_66b9234563324488b85be02dcf1db183f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},opacity:1,duration:21,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v523546",name:"clipcanvas"}},color:"{color_15}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:99,path:"public/a0c10733-b2a6-4330-a431-537a9f05c353/c9440526-5aa9-4a6f-8d66-9cf5fa50020d",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Marble Surface",uri:"bc3ec7bc825c4e6ca746c659189cea83.jpg",description:"public/a0c10733-b2a6-4330-a431-537a9f05c353/c9440526-5aa9-4a6f-8d66-9cf5fa50020d",width:1920,height:1080,artist:{id:"",name:""}},color:"#A7A7A7",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:100,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Suit",uri:"8ca1d4b1209f4712a582d259e1d041c4.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:232,height:200,artist:{id:"",name:""}},color:"#A7A7A7",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:101,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Flowing Viscous Liquid",videoId:"video/11062b_9f421918574743b48202cb0dacbd77d4",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_9f421918574743b48202cb0dacbd77d4f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},opacity:1,duration:17,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v47428877",name:"bisgtock"}},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:102,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Concrete Facade",uri:"d05d3b5e9b8c442f8616127098f1e7b0.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:1980,height:1200,artist:{id:"",name:""}},color:"#232323",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:103,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Horizontal Stripes",uri:"251cb06bbba2403296cacacc122c1833.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:105,height:88,artist:{id:"",name:""}},color:"{color_11}",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:104,path:"public/8e256233-1752-4026-9341-54036e7f875e/bfa1c2d0-17a0-425d-9a6b-15cc467f0736",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Dance Studio",videoId:"video/11062b_58d9b7991aa04b99a4f1580a1efc4f7f",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_58d9b7991aa04b99a4f1580a1efc4f7ff000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/bfa1c2d0-17a0-425d-9a6b-15cc467f0736",width:1920,height:1080},opacity:1,duration:34,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:{type:"Image",title:"",uri:"0da768_4371c7e64a49489bb88c536f515f2040.png",width:6,height:6}}},{presetIndex:105,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Cat Pattern",uri:"e62cc2e57d9e4debae58f332bc5f7c13.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:1001,height:780,artist:{id:"",name:""}},color:"#A7A7A7",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:106,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Popsicles",uri:"16bc88db91d04e34969d6d9ff99d4f27.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:400,height:400,artist:{id:"",name:""}},color:"#232323",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:107,path:"public/8e256233-1752-4026-9341-54036e7f875e/5abaf36e-05be-41b2-8a0c-e9999bc48c51",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Gray Waterfall",videoId:"video/11062b_18eee1c4914c4ef79687cd68f3cf6990",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_18eee1c4914c4ef79687cd68f3cf6990f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/5abaf36e-05be-41b2-8a0c-e9999bc48c51",width:1920,height:1080},opacity:1,duration:3,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v49347887",name:"bigstock"}},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:{type:"Image",title:"",uri:"0da768_d3e25a05cedd404f807528f6a4750388.png",width:4,height:6},colorOverlay:"color_11",colorOverlayOpacity:.5}},{presetIndex:108,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"NYC Skyline BW",uri:"ea66f0de45ec4109b5eb190bed2244d1.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",width:1980,height:1200,artist:{id:"",name:""}},color:"#4F4F4F",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:109,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Zebras",uri:"049b8cffb8e449e19cce019a499e72b3.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:650,height:593,artist:{id:"",name:""}},color:"{color_11}",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:110,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/bc345090-ef04-4363-9211-3642d0f687f8",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Triangles Pattern",uri:"09ad59ce71ae4243bc54251181afab81.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/bc345090-ef04-4363-9211-3642d0f687f8",width:94,height:89,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"center",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:111,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Cloudy Fog",uri:"d8b91ec474404d93a7be5aefff9abd54.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",width:4928,height:3264,artist:{id:"",name:""}},color:"#4F4F4F",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:112,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Grey Arrows",uri:"be48a6ed702649778e0248921b018462.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:200,height:200,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:113,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Floating Particles",uri:"65361f1a835843df8f46f809b1b05a7a.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:200,height:200,artist:{id:"",name:""}},color:"#F7F7F7",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:114,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Falling shapes White",videoId:"video/11062b_2ed9e9ea388343a59c387bccf3539098",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_2ed9e9ea388343a59c387bccf3539098f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},opacity:1,duration:28,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"",name:""}},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"#D5D4D6",colorOverlayOpacity:.35,imageOverlay:""}}]}),define("rEditor/rootComps/panels/backgroundPanel/backgroundMobilePresets.json",[],function(){return[{presetIndex:1,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Electric Darkness",uri:"/11062b_6a134fc09ea34833a17d295e295ab517f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},color:"{color_24}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:2,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Floating Particles",uri:"/11062b_03c50f8fe4a34cc297a984e483a282eff000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},color:"#000000",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:3,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Bananas",uri:"8034aa3291a54c489a7b7a3121d994f9.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:1177,height:1200,artist:{id:"",name:""}},color:"#8BD0CD",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:4,path:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Rain Clouds",uri:"/11062b_8e792646ca71495b96677c20e27e9122f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",width:1920,height:1080},color:"{color_15}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:5,path:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Deep Sea Waves",uri:"/11062b_f1fbf8b243e942a692e564fac5382513f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",width:1920,height:1080},color:"#052F5B",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:6,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Divers Underwater",uri:"bbde6e2b4387431ca37f8e093bcb0e8e.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:4368,height:2912,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:7,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Dot Pattern",uri:"70127753074e4bf694b4b889710f0b7a.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:200,height:202,artist:{id:"",name:""}},color:"#002E5D",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:8,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Aurelia Jellyfish",uri:"884454ad07cf46a5bb7fb6aef2e02358.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",width:2700,height:2160,artist:{id:"",name:""}},color:"#002E5D",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:9,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Swaying Palms",uri:"/11062b_d013b164dadb47ec8e746ab178aacfbbf000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:10,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Girl in the Window",uri:"acb4853a0d8543b3ac291da735e9959b.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:6048,height:4032,artist:{id:"",name:""}},color:"#002E5D",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:11,path:"public/8e256233-1752-4026-9341-54036e7f875e/db9e3e42-59d2-461f-b589-6cbbf7c2c06e",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"In the Office",uri:"/11062b_6743da5900054f1f8e69f53302930a6af000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/db9e3e42-59d2-461f-b589-6cbbf7c2c06e",width:1920,height:1080},color:"{color_17}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:12,path:"public/8e256233-1752-4026-9341-54036e7f875e/bfa1c2d0-17a0-425d-9a6b-15cc467f0736",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Winter Sports",uri:"/11062b_14ca44a138d942f78374f7751ac5942ff000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/bfa1c2d0-17a0-425d-9a6b-15cc467f0736",width:1920,height:1080},color:"#2BFCF9",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:13,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Boats in the Water",uri:"edafc906071647ad940aad43e3fdbe07.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",width:3500,height:2318,artist:{id:"",name:""}},color:"#CCE2E2",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:14,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Water Drop",uri:"/11062b_830709c744404d6ea7a10dcfd88e3a48f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},color:"#439CE6",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:15,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Submerged",uri:"/11062b_64ae2a899006496dac01c2e81fac97f1f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},color:"{color_17}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:16,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Blue Checkers",uri:"a60710612bbc4609ac93e78a1fa234c0.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:400,height:400,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:17,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Road Trip",uri:"/11062b_1c6001b9888a4ba89939a510eee406d1f000.jpg",
description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:18,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Mountain Landscape",uri:"0bb83114d47e4ca0a9fa5a9ea6a16530.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",width:4442,height:2961,artist:{id:"",name:""}},color:"#EEFDFF",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:19,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Sparkling Water",uri:"/11062b_7bb9944945af4723ad2aefa5caed46a4f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:20,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Rolling Tide",uri:"/11062b_f0d5e0c342cc49dca298de0225d2247cf000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:21,path:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Abstract Horizon",uri:"5afe60462baf41e79586f3fdaf78d664.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",width:1980,height:1200,artist:{id:"",name:""}},color:"#006C6D",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:22,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Misty Slopes",uri:"99ec98fdb81945c29c25a3ad6c5606b1.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",width:1920,height:1280,artist:{id:"",name:""}},color:"#114C22",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:23,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Blurred Beach",uri:"a97014d3cac6454b822f786b7d1f2878.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",width:2351,height:1302,artist:{id:"",name:""}},color:"#8BD0CD",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:24,path:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Blue to Cream Gradient",uri:"356d0cee84164a4cb8304d44630a7ea6.png",description:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",width:8e3,height:4500,artist:{id:"",name:""}},color:"#8BD0CD",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:25,path:"public/8e256233-1752-4026-9341-54036e7f875e/babd428d-abdf-463a-ac71-a23e3cafaffa",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Vintage Gramophone",uri:"/11062b_bd026287ff784f5198fbfdbbbbba2489f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/babd428d-abdf-463a-ac71-a23e3cafaffa",width:1920,height:1080},color:"{color_15}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:26,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Tropical Plant",uri:"117d700ff79f490587e0bbaad89bc84f.jpeg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",width:2507,height:1674,artist:{id:"",name:""}},color:"#1C8A43",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:27,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Graph Paper",uri:"1beffca589a04014a3e62f00a022b875.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:192,height:192,artist:{id:"",name:""}},color:"#CAE9BD",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:28,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Leaves Pattern",uri:"278019192ae045d191a9430cf507c7f6.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:974,height:966,artist:{id:"",name:""}},color:"#F1FFF6",alignType:"center",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:29,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Tropic Birds",uri:"b59b6c0afac149c1825e76ad4381c9ca.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:552,height:552,artist:{id:"",name:""}},color:"#002E5D",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:30,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Rainforest Canopy",uri:"/11062b_7488edba38234bd69b0603ad498efdf5f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},color:"#BFBF43",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:31,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Hand-sketched Lines",uri:"3978993e99184d5e8c21f0204cd07bca.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:150,height:150,artist:{id:"",name:""}},color:"#CAE9BD",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:32,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Palm Trees",uri:"3cd1de924697419088c1e033bb3384ef.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",width:1920,height:1280,artist:{id:"",name:""}},color:"#BDBF37",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:33,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Snowfall",uri:"/11062b_7124ff06fc56498d96722413f5f4846ff000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:34,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"City Park",uri:"/11062b_ed5fd19d3b3c4a979ecfd7aa035320ebf000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:35,path:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Dogs in the Park",uri:"/11062b_dadf974a47664e5cb42f939b7f17bec8f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",width:1920,height:1080},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:36,path:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"House Cat",uri:"/11062b_be8b8d6a9d5a4bc59aa76a8b25fd9888f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",width:1920,height:1080},color:"#DAB89C",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:37,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Tree Stump",uri:"11a91072527049689406d272d5a6d6c4.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",width:1280,height:768,artist:{id:"",name:""}},color:"#114C22",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:38,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Asparagus",uri:"4d24dcfa04684a81bf3f1701a847af81.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:2e3,height:1333,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:39,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Tropical Light",uri:"/11062b_af392b5325e7416eb2d8b6f9b1b3c634f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},color:"{color_16}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:40,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Gold Bunnies",uri:"6060bf9757224155bc8cbd95029ee720.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:459,height:287,artist:{id:"",name:""}},color:"{color_11}",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:41,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Pineapple Pattern",uri:"eeef56698522480caf7deba849718afe.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:534,height:809,artist:{id:"",name:""}},color:"{color_11}",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:42,path:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Yellow to Blue Gradient",uri:"98e04ee03335423bb5a47bd2f377df2e.png",description:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",width:8e3,height:4500,artist:{id:"",name:""}},color:"#35EBE7",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:43,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Black Spades",uri:"7d0fa0c9f87547b0a75b80f38ed48183.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:300,height:267,artist:{id:"",name:""}},color:"color_31",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:44,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Urban View",uri:"/11062b_3e2f37c297534f9ead156265242fbca8f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},color:"{color_31}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:45,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Light Spots",uri:"/11062b_2042bb7351284f0f982e4787d37415e6f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},color:"#FFF369",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:46,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Pink Particles",uri:"/11062b_155feccf8d494b18b70adcd7716b6646f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},color:"{color_31}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:47,path:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Sunflowers",uri:"/11062b_7fb923cf2d6748e195e980d74c4059f2f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",width:1920,height:1080},color:"color_29",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:48,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Flower in Sunlight",uri:"175c71a9a7384ca68d97b39947203da8.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",width:1920,height:1080,artist:{id:"",name:""}},color:"#F17424",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:49,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Golden Dots",uri:"80e0917312df4df5853a6c2a861e7a63.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:466,height:766,artist:{id:"",name:""}},color:"#FAEECD",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:50,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Lifeguard Tower",uri:"f7f8700159f142b3b23e349c23338337.jpeg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",width:4608,height:3072,artist:{id:"",name:""}},color:"#F9C7A7",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:51,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Meadow",uri:"/11062b_84f0c9aa252b4b2ab1114febc012eacbf000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},color:"{color_15}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:52,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Lakeside",uri:"/11062b_10927dd4d14046e4ac23f51f0a5448b3f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},color:"#FFF5A8",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:53,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Zebra Crossing",uri:"fd559363ad5645958cc2ccdc6005fbd6.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:5682,height:3990,artist:{id:"",name:""}},color:"#F1CC01",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:54,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Paradise Serenity",uri:"/11062b_46d3e749db4d4169987b00279493eaa7f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},color:"{color_31}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:55,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Zigzag",uri:"4d24ad2c7b8f47bbbfe14399bd41dc54.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:64,height:50,artist:{id:"",name:""}},color:"#FAC2D2",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:56,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Miami Beach",uri:"/11062b_75ff30e8c38545348bad91473b78ab7cf000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},color:"#D41746",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:57,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Tropical Leaves",uri:"0396af7423c344a39107ad593c4500f8.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",width:3264,height:2448,artist:{id:"",name:""}},color:"#B22087",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:58,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Grey Geometric Shapes",uri:"f833450526164f5e80b7e8ef0f50844c.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:300,height:300,artist:{id:"",name:""}},color:"#F2668F",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:59,path:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Pink to Orange Gradient",uri:"af7a8b002af842f8bab87691c1d8640f.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",width:1920,height:1080,artist:{id:"",name:""}},color:"#C37DB3",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:60,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Rain Drops",uri:"95f3448913a746f28b30670b23da4157.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:216,height:216,artist:{id:"",name:""}},color:"#C65AA5",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:61,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Cotton Candy",uri:"/11062b_808b40c463104f22943c284c625d31c3f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},color:"{color_30}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:62,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Ink and Water",uri:"/11062b_74ef3d923f9b451492d3ed9278991873f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:63,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Red Confetti",uri:"21ff2961e4d94522b96543b873b063dc.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:121,height:107,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:64,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Woman Running Legs",uri:"0983ceb77a4e49c6978e4515d8a454f6.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:1980,height:1200,artist:{id:"",name:""}},color:"#F9C7A7",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:65,path:"public/491df47b-5958-4dc7-9029-37f428755d45/c2a37dfc-36cf-4bfd-b940-55bac7bdc9e6",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Flamingos",uri:"88d74a1559c84402a4a957527a839260.png",description:"public/491df47b-5958-4dc7-9029-37f428755d45/c2a37dfc-36cf-4bfd-b940-55bac7bdc9e6",width:1920,height:1080,artist:{id:"",name:""}},color:"#DAF2FF",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:66,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Foxes and Rabbits",uri:"f7c0cc732a8e458caf88ad42b251fbdf.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:571,height:514,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:67,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Ink Splash",uri:"/11062b_aa1eeb25fbd3484dbde611d71d7c5747f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},color:"#F1F1F1",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:68,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Palm Trees Beach View",uri:"2465a22a212e41cd96a05e3e3fe5adc4.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",width:1980,height:1200,artist:{id:"",name:""}},color:"#DAF2FF",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:69,path:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Moon Jellyfish",uri:"/11062b_77c6bfa45ec6417fa8b1b37fd3f7a108f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",width:1920,height:1080},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:70,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Modern Chicago Skyline",uri:"5b7e139d046c40c1a1acde7162607721.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",width:4085,height:2696,artist:{id:"",name:""}},color:"#FAC2D2",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:71,path:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Pink Jellyfish",uri:"/11062b_ea61c0ecc8b34ecd942c42470507e640f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",width:1920,height:1080},color:"{color_19}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:72,path:"public/8e256233-1752-4026-9341-54036e7f875e/a85e50b3-f78c-4792-a226-040ce52b983c",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Spaceman",uri:"/11062b_fcd00d59140f45d5b2295fe8a4c17edbf000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/a85e50b3-f78c-4792-a226-040ce52b983c",width:1920,height:1080},color:"{color_20}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:73,path:"public/8e256233-1752-4026-9341-54036e7f875e/babd428d-abdf-463a-ac71-a23e3cafaffa",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Rotating Crystal Glass",uri:"/11062b_58249d8a53aa452492e328c962b036e9f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/babd428d-abdf-463a-ac71-a23e3cafaffa",width:1920,height:1080},color:"{color_15}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:74,path:"public/8e256233-1752-4026-9341-54036e7f875e/305292cb-8a7a-4825-87ca-52882fbdf8ff",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Spinning Record",uri:"/11062b_0f1e951461494c1894d86c9ab85a11cff000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/305292cb-8a7a-4825-87ca-52882fbdf8ff",width:1920,height:1080},color:"{color_15}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:75,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Vegan Trio",uri:"180ba81999a64ad3aa42735d409ecab6.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:4253,height:2825,artist:{id:"",name:""}},color:"#DBB89A",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:76,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Hand-drawn Feathers",uri:"8eee3a6c7d5842429beba0f7eaeef38c.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:200,height:200,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:77,path:"public/8e256233-1752-4026-9341-54036e7f875e/babd428d-abdf-463a-ac71-a23e3cafaffa",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Rotating Gears",uri:"/11062b_d9801124f3cb4deca350acfd66b547cff000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/babd428d-abdf-463a-ac71-a23e3cafaffa",width:1920,height:1080},color:"{color_15}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:78,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Graphic Design Workspace",uri:"fa34b31dc6244a4a854ef6eb8f02ff74.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:4e3,height:3e3,artist:{id:"",name:""}},color:"#B7121B",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:79,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Triangles",uri:"d59a233b62cf44b2bf1ebed57aac24de.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:343,height:410,artist:{id:"",name:""}},color:"#DBB89A",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:80,path:"public/a0c10733-b2a6-4330-a431-537a9f05c353/c9440526-5aa9-4a6f-8d66-9cf5fa50020d",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Wood",uri:"1149de6bf15f40c587573bf9311dc32c.jpg",description:"public/a0c10733-b2a6-4330-a431-537a9f05c353/c9440526-5aa9-4a6f-8d66-9cf5fa50020d",width:4990,height:3326,artist:{id:"",name:""}},color:"#DBB89A",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:81,path:"public/8e256233-1752-4026-9341-54036e7f875e/305292cb-8a7a-4825-87ca-52882fbdf8ff",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Classical Compilation",uri:"/11062b_35727d5e825d405bbb007bc615000a15f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/305292cb-8a7a-4825-87ca-52882fbdf8ff",width:1920,height:1080},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:82,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Metal Stairs on Wooden Facade",uri:"cf8156766df64118b0653b3ac4bd5605.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:1920,height:1440,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:83,path:"public/8e256233-1752-4026-9341-54036e7f875e/db9e3e42-59d2-461f-b589-6cbbf7c2c06e",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Illustrator",uri:"/11062b_ebcab620e7584e1693f939e597be3777f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/db9e3e42-59d2-461f-b589-6cbbf7c2c06e",width:1920,height:1080},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:84,path:"public/921f85b0-261d-4406-964a-cf47e2744c69/bd176e29-5534-4d9f-87a6-a8177517ea4f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Graphic Pattern",uri:"5c688cc2a5ec4ad2b86ed53d5df46f47.png",description:"public/921f85b0-261d-4406-964a-cf47e2744c69/bd176e29-5534-4d9f-87a6-a8177517ea4f",width:1920,height:1080,artist:{id:"",name:""}},color:"#3D9BE9",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:85,path:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Tiger",uri:"/11062b_6ceb80744f45401caf9eb666caeb9887f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",width:1920,height:1080},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:86,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Subway",uri:"/11062b_8b85f288687943b59677b4e3e56ef8f8f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},color:"#303030",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:87,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Stack of Magazines",uri:"d532b29bc0c448b29f47672da7b07613.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",
width:1920,height:1280,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:88,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Graphic Design Office",uri:"d1c5cd0055c94e3bb1acee9e2fda9f0e.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:1920,height:1280,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:89,path:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Record Player",uri:"ee15442532e84041a495a5e46c465b12.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",width:5616,height:3744,artist:{id:"",name:""}},color:"#A7A7A7",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:90,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Floating Shapes Gray",uri:"/11062b_d2398715eb2e43348e6907b6b3383815f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:91,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Forest Clouds",uri:"/11062b_2e77c1d1a7d84393becbcecd189fe80ef000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},color:"#FFFFFF",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:92,path:"public/8e256233-1752-4026-9341-54036e7f875e/babd428d-abdf-463a-ac71-a23e3cafaffa",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Metronome",uri:"/11062b_80a0d0745a884541ae8fae22c02c9e74f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/babd428d-abdf-463a-ac71-a23e3cafaffa",width:1920,height:1080},color:"#271504",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:93,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Grey Dots",uri:"92533e06635940e5b152eb4b0f9c1c4b.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:180,height:101,artist:{id:"",name:""}},color:"#232323",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:94,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Backstage",uri:"8a6b22a6b8d84e728c2253794ee37f98.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:4500,height:3e3,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:95,path:"public/8e256233-1752-4026-9341-54036e7f875e/5abaf36e-05be-41b2-8a0c-e9999bc48c51",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Melting Ice",uri:"/11062b_9480d9d800bd4bda938057d5ac1ebc42f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/5abaf36e-05be-41b2-8a0c-e9999bc48c51",width:1920,height:1080},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:96,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Black Crosses",uri:"56adecff887f459297d81ee5a451ca0e.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:200,height:200,artist:{id:"",name:""}},color:"#4F4F4F",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:97,path:"public/8e256233-1752-4026-9341-54036e7f875e/bfa1c2d0-17a0-425d-9a6b-15cc467f0736",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Street Sports",uri:"/11062b_b3ee9353cba84f2fba11b18497edd49cf000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/bfa1c2d0-17a0-425d-9a6b-15cc467f0736",width:1920,height:1080},color:"{color_15}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:98,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Mist Over the Bridge",uri:"/11062b_66b9234563324488b85be02dcf1db183f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},color:"{color_15}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:99,path:"public/a0c10733-b2a6-4330-a431-537a9f05c353/c9440526-5aa9-4a6f-8d66-9cf5fa50020d",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Marble Surface",uri:"bc3ec7bc825c4e6ca746c659189cea83.jpg",description:"public/a0c10733-b2a6-4330-a431-537a9f05c353/c9440526-5aa9-4a6f-8d66-9cf5fa50020d",width:1920,height:1080,artist:{id:"",name:""}},color:"#A7A7A7",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:100,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Suit",uri:"8ca1d4b1209f4712a582d259e1d041c4.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:232,height:200,artist:{id:"",name:""}},color:"#A7A7A7",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:101,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Flowing Viscous Liquid",uri:"/11062b_9f421918574743b48202cb0dacbd77d4f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:102,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Concrete Facade",uri:"d05d3b5e9b8c442f8616127098f1e7b0.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:1980,height:1200,artist:{id:"",name:""}},color:"#232323",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:103,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Horizontal Stripes",uri:"251cb06bbba2403296cacacc122c1833.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:105,height:88,artist:{id:"",name:""}},color:"{color_11}",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:104,path:"public/8e256233-1752-4026-9341-54036e7f875e/bfa1c2d0-17a0-425d-9a6b-15cc467f0736",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Dance Studio",uri:"/11062b_58d9b7991aa04b99a4f1580a1efc4f7ff000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/bfa1c2d0-17a0-425d-9a6b-15cc467f0736",width:1920,height:1080},color:"#FFFFFF",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:105,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Cat Pattern",uri:"e62cc2e57d9e4debae58f332bc5f7c13.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:1001,height:780,artist:{id:"",name:""}},color:"#A7A7A7",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:106,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Popsicles",uri:"16bc88db91d04e34969d6d9ff99d4f27.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:400,height:400,artist:{id:"",name:""}},color:"#232323",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:107,path:"public/8e256233-1752-4026-9341-54036e7f875e/5abaf36e-05be-41b2-8a0c-e9999bc48c51",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Gray Waterfall",uri:"/11062b_18eee1c4914c4ef79687cd68f3cf6990f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/5abaf36e-05be-41b2-8a0c-e9999bc48c51",width:1920,height:1080},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:108,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"NYC Skyline BW",uri:"ea66f0de45ec4109b5eb190bed2244d1.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",width:1980,height:1200,artist:{id:"",name:""}},color:"#4F4F4F",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:109,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Zebras",uri:"049b8cffb8e449e19cce019a499e72b3.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:650,height:593,artist:{id:"",name:""}},color:"{color_11}",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:110,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/bc345090-ef04-4363-9211-3642d0f687f8",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Triangles Pattern",uri:"09ad59ce71ae4243bc54251181afab81.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/bc345090-ef04-4363-9211-3642d0f687f8",width:94,height:89,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"center",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:111,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Cloudy Fog",uri:"d8b91ec474404d93a7be5aefff9abd54.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",width:4928,height:3264,artist:{id:"",name:""}},color:"#4F4F4F",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:112,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Grey Arrows",uri:"be48a6ed702649778e0248921b018462.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:200,height:200,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:113,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Floating Particles",uri:"65361f1a835843df8f46f809b1b05a7a.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:200,height:200,artist:{id:"",name:""}},color:"#F7F7F7",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:114,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Falling shapes White",uri:"/11062b_2ed9e9ea388343a59c387bccf3539098f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed"}}]}),define("rEditor/rootComps/panels/backgroundPanel/backgroundPanel.rt",["react/addons","lodash","baseUI","util","panels","uiAnimations","backgroundPresets"],function(a,b,c,d,e,f,g){"use strict";function h(a,b,c,d,e){e.preventDefault()}function i(a,b,c,d,e,f){f.preventDefault()}function j(a,b,c,d,e,f){this.replaceColor(f,a)}function k(a,b,c,d,e,f){this.changeColor(f,a)}function l(a,b,c,d,e){this.changeMedia(this.mediaTypes.IMAGE)}function m(a,b,c,d,e){c||this.changeMedia(this.mediaTypes.VIDEO)}function n(b,d,e,g){var h=this.getMediaType(b.ref);return a.createElement("div",{className:"bg-panel-top"},a.createElement("div",{className:"bg-panel-preview",onContextMenu:i.bind(this,b,d,e,g,h)},a.createElement("div",{className:"bg-panel-preview-media",style:this.getCurrentColor(b)}),a.createElement("div",{ref:"previewMedia",className:"bg-panel-preview-media",style:this.getCurrentMedia(b)}),a.createElement("div",{className:"bg-panel-preview-overlay",style:g.getOverlayStyle(b.ref,this.getEditorAPI())}),a.createElement("div",{className:"bg-panel-preview-buttons"},h!==this.mediaTypes.COLOR?a.createElement(c.tooltip,{disabled:!!this.getCurrentSubPanel(),value:this.getSettingTranslation(h),alignment:"top",className:"control-tooltip-small",key:"settings-tooltip"},a.createElement("div",{className:"bg-panel-preview-button"},a.createElement(f.rotatePartAnimation,{selector:".gear-wheel",play:this.isSettingsPanelOpen()},a.createElement(c.toggle,{name:"settings-icon",label:this.getSettingsButtonTranslation(h),valueLink:this.toggleSubPanel(h),labelAfterSymbol:!0})))):null,h===this.mediaTypes.VIDEO?a.createElement(c.tooltip,{key:"video-controls",id:"video-play-tooltip",disabled:this.isPlayBtnTooltipDisabled(h),alignment:"top",className:"control-tooltip-small",value:this.getPlayBtnTranslation()},a.createElement("div",{className:"bg-panel-preview-button"},a.createElement(c.toggle,{name:"play-video",disabled:this.getVideoReadyState()===this.videoReadyStates.IN_PROCESS,valueLink:this.toggleVideoPlayback(this.isVideoPlaying())}),this.getVideoReadyState()===this.videoReadyStates.IN_PROCESS?a.createElement(c.preloader,{key:"play-spinner"}):null)):null),h===this.mediaTypes.IMAGE?a.createElement("div",{onClick:j.bind(this,b,d,e,g,h),className:"bg-panel-preview-color",style:this.getCurrentColor(b),key:"bg-fold"},a.createElement(c.symbol,{name:"fold-clipart"})):null),a.createElement("div",{className:"bg-panel-top-actions"},a.createElement("div",{className:"bg-panel-action"},a.createElement(c.button2,{className:"default bg-panel-action-btn",label:"BGPP_PANEL_COLOR_BUTTON",symbolName:"color-btn",onClick:k.bind(this,b,d,e,g,h)})),a.createElement("div",{className:"bg-panel-action"},a.createElement(c.button2,{onClick:l.bind(this,b,d,e,g,h),className:"default bg-panel-action-btn",symbolName:"image-btn",label:"BGPP_PANEL_IMAGE_BUTTON"})),a.createElement(c.tooltip,{disabled:!e,value:"BGPP_PANEL_VIDEO_BUTTON_MOBILE_TOOLTIP",alignment:"top",className:"control-tooltip-small"},a.createElement("div",{className:"bg-panel-action"},a.createElement(c.button2,{onClick:m.bind(this,b,d,e,g,h),disabled:e,className:"default bg-panel-action-btn",symbolName:"video-btn",label:"BGPP_PANEL_VIDEO_BUTTON"})))))}function o(a,b,c,d){this.handleApplyToOtherClick()}function p(){var b=this.getData(),f=this.getCurrentSubPanel(),i=this.getEditorAPI().isMobileEditor(),j=d.backgroundPanelUtils;return a.createElement(e.frames.leftPanelFrame,{ref:"backgroundPanel",className:"bg-panel",panelName:this.props.panelName,label:this.getTranslation("TITLE"),panelIndex:this.props.panelIndex,panelClass:"bg-panel",helpId:i?"f0d8190e-e2da-48be-9f44-7ecff4518a82":"f11a3bb9-cff0-46d4-92ff-cc8cd9d30468",onContextMenu:h.bind(this,b,f,i,j)},n.apply(this,[b,f,i,j]),a.createElement(c.customScroll,{addScrolledClass:!0},a.createElement("div",{className:"bg-panel-preset-list"},a.createElement("div",{className:"bg-panel-preset-list-sections sections","data-tooltip-bounds":"true"},a.createElement(g,this.getPresetsProps())))),a.createElement("div",{className:"bg-panel-bottom"},a.createElement(c.button2,{label:"BGPP_PANEL_APPLY_TO_OTHER_BUTTON",onClick:o.bind(this,b,f,i,j),disabled:this.isOnePager(),className:"default"})))}return function(){return p.apply(this,[])}}),define("rEditor/rootComps/panels/backgroundPanel/backgroundPanel",["react","lodash","core","panels","baseUI","util","color","panelUtils","rEditor/rootComps/panels/backgroundPanel/backgroundDesktopPresets.json","rEditor/rootComps/panels/backgroundPanel/backgroundMobilePresets.json","rEditor/rootComps/panels/backgroundPanel/backgroundPanel.rt"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";function z(a,b,c){c||(c=a.pages.getPrimaryPageId()),b||(b=a.getDeviceType());var d=a.pages.background.get(c,b);return d}function A(a){a.ref.colorOverlay="",a.ref.colorOverlayOpacity=0,a.ref.imageOverlay=null}function B(a,c,d,e){var f;b.assign(d.ref,b.omit(c.ref,["id","mediaRef","metaData"])),A(d),d.ref.scrollType="scroll",c.ref.mediaRef?(f="WixVideo"===c.ref.mediaRef.type?c.ref.mediaRef.posterImageRef:c.ref.mediaRef,d.ref.mediaRef=b.omit(f,"id")):d.ref.mediaRef=null,a.pages.background.update(e,d,"mobile")}function C(a,c){var d=a[0],e=b.first(d.fileOutput.image),f=b.groupBy(d.fileOutput.video,"quality"),g=b.pick(e,["width","height","url"]);g.type="Image",g.uri=g.url.replace(/^(.*[\/])/,""),delete g.url,g.description=c.path;var h={type:"WixVideo",title:d.title,videoId:d.fileBaseUrl,duration:Math.round(d.fileInput.duration/1e3),posterImageRef:g,opacity:1,autoplay:!0,loop:!0,preload:"auto",mute:!0,artist:{name:d.vendor||"",id:d.reference||""}};return h.qualities=b.map(f,function(a){var c=b.pluck(a,"format"),d=b.pick(a[0],["width","height","quality"]);return d.formats=c,d}),h}function D(a,b){var c=a[0];return{type:"Image",uri:c.fileName,title:c.title,description:b.path,width:c.width,height:c.height,artist:{name:c.vendor||"",id:c.reference||""}}}function E(a,d,e){a===t.APPLY?l.applyToOtherClick(d,c.bi.events.backgroundPanel.panel_apply_to_other_pages_click):e.origin=v["BG_"+b.invert(t)[a].toUpperCase()]}function F(a,b,c){var d=a.getUserPreferences(),e=a.pages.getPrimaryPageId();d.session.set("bg_panel_last_media_path_"+e,{type:b,path:c.path})}function G(a){var b=a.getUserPreferences(),c=a.pages.getPrimaryPageId();return b.session.get("bg_panel_last_media_path_"+c)||{}}function H(a,b){return a.homePage.get()===b}function I(a,b,c){H(a,c)&&!b.ref.mediaRef&&(b.ref.id=f.guidUtils.getUniqueId(c,"_")+"_bg")}function J(a,b){var c=b.ref.id;c||(c=z(a,"mobile",a.pages.getPrimaryPageId()).ref.id);var d=a.userPreferences.session.get("bg_panel_mobile_data_duplications_"+c);d&&d.count&&(b.ref.id=f.guidUtils.getUniqueId(a.pages.getPrimaryPageId(),"_")+"_mobile_bg",b.ref.mediaRef&&(b.ref.mediaRef.id=void 0),a.userPreferences.session.set("bg_panel_mobile_data_duplications_"+c,{count:d.count-1}),a.userPreferences.session.set("bg_panel_mobile_data_duplications_"+b.ref.id,{count:0}))}function K(a,b){var c=a.getUserPreferences(),d=a.pages.getPrimaryPageId(),e=b===o.VIDEO?"bg_video_settings_data_changed_":"bg_image_settings_data_changed_";c.session.set(e+d,!1),c.session.set("bg_video_settings_pattern_state_"+d,!1)}function L(a,b){a.ref.scrollType="fixed";var c=b.pages.getPrimaryPageId(),d=b.getUserPreferences(),e=d.session.get("bg_video_settings_data_changed_"+c);e||A(a)}function M(a,b,c){var d=c.pages.getPrimaryPageId(),e=c.getUserPreferences(),f=e.session.get("bg_image_settings_data_changed_"+d);f&&(a.opacity=b.ref.mediaRef&&b.ref.mediaRef.opacity||1),A(b)}function N(){return y}var l=f.bgPanelBiEvents,m=f.imageTransform,n=f.backgroundPanelUtils,o=n.getMediaTypes(),p=352,q=184,r=600,s=600,t={IMAGE_SETTINGS:"rEditor.panels.bgImageSettingsPanel",VIDEO_SETTINGS:"rEditor.panels.bgVideoSettingsPanel",APPLY:"rEditor.panels.backgroundApplyPanel"},u={APPLY_PANEL:"applyPanel",IMAGE_PANEL:"imagePanel",VIDEO_PANEL:"videoPanel",PRESET:"preset",MEDIA:"media",REMOVE:"remove",COLOR:"color"},v={BG_PRESETS:"bg_presets",BG_COLOR_PICKER:"bg_color_picker",BG_MEDIA_MANAGER_WIXVIDEO:"bg_media_manager_video",BG_MEDIA_MANAGER_IMAGE:"bg_media_manager_image",BG_IMAGE_SETTINGS:"bg_image_settings",BG_VIDEO_SETTINGS:"bg_video_settings"},w={TITLE:{mobile:"BGPP_PANEL_HEADER_MOBILE_TITLE",desktop:"BGPP_PANEL_HEADER_DSKTOP_TITLE"}},x={Image:"BGPP_PANEL_IMAGE_SETTINGS_BUTTON",WixVideo:"BGPP_PANEL_VIDEO_SETTINGS_BUTTON"},y={IN_PROCESS:"in_process",PLAYING_PREVIEW:"playing_preview",IDLE:"idle",NO_VIDEO:"no_video"};return a.createClass({displayName:"backgroundPanel",mixins:[c.mixins.editorAPIMixin,f.blockOuterScrollMixin,h.linkColorPickerMixin],panelBoundingRect:{},mediaTypes:o,getMediaType:n.getMediaType,subPanels:t,videoReadyStates:null,componentDidMount:function(){this.panelBoundingRect=this.getDOMNode().getBoundingClientRect();var a=this.getEditorAPI();a.pages.background.video.registerToPlayingChange(this.playingStatusChanged),this.markMobileDataDuplications()},componentWillUnmount:function(){this.closeSubPanel(this.getCurrentSubPanel());var a=this.getEditorAPI();a.pages.background.video.unregisterToPlayingChange(this.playingStatusChanged),this.pauseVideo(),l.changedBackgroundBiEvent(this.getEditorAPI(),c.bi.events.backgroundPanel.panel_background_changed,this.getData().ref,this.biEventsParams)},getInitialState:function(){return this.videoReadyStates=N(),this.biEventsParams={origin:null,presetIndex:null},{isVideoPlaying:!1,videoReadyState:this.videoReadyStates.IDLE}},componentDidUpdate:function(){this.getVideoReadyState()===this.videoReadyStates.IDLE&&e.tooltipManager.hide("video-play-tooltip")},previewVideo:function(){var a=this.getEditorAPI();a.pages.background.video.play()},pauseVideo:function(){var a=this.getEditorAPI();a.getPreviewMode()||a.pages.background.video.pause()},isVideoPlaying:function(){var a=this.getEditorAPI();return a.pages.background.video.isPlaying()},getVideoReadyState:function(){var a=this.getEditorAPI();return a.pages.background.video.getReadyState()},playingStatusChanged:function(){this.forceUpdate()},videoReadyStateChanged:function(){this.forceUpdate()},linkedBackgroundColor:function(a,b,c){var d=b[c].replace(/[\{\}]/g,"");return{value:d,requestChange:function(d){b[c]=/color_/.test(d)?"{"+d+"}":d,this.biEventsParams.origin=v.BG_COLOR_PICKER,this.onRequestChange(a)}.bind(this)}},getCurrentSubPanel:function(){var a=b.find(this.props.editorState.openPanels,function(a){return b.includes(t,a.name)});return a&&a.name},isSettingsPanelOpen:function(){var a=this.getCurrentSubPanel();return a===t.IMAGE_SETTINGS||a===t.VIDEO_SETTINGS},closeSubPanel:function(a){a&&d.panelManager.closePanelByName(a)},getData:function(a){return z(this.getEditorAPI(),a)},handleMobileDataChange:function(a,b,c,d){if(I(c,b,d),"mobile"===a)b.isPreset=!1,b.ref.scrollType="scroll",J(c,b);else{var e=z(c,"mobile",d);e.isPreset&&(J(c,e),B(c,b,e,d))}},onRequestChange:function(a,b,c){var d=this.getEditorAPI(),e=d.getDeviceType();c=c||d.pages.getPrimaryPageId(),I(d,a,c),this.handleMobileDataChange(e,a,d,c),d.pages.background.update(c,a,e),this.undoHandler(b),this.state.isVideoPlaying&&(this.pauseVideo(),this.setState({isVideoPlaying:!1}))},undoHandler:function(a){var c=this.getEditorAPI(),d=b.values(u);b.includes(d,a)&&c.history.add("background panel - "+a)},toggleSubPanel:function(a){var b=this.getCurrentSubPanel();return{value:b&&b!==this.subPanels.APPLY,requestChange:function(){var b=a===this.mediaTypes.VIDEO?this.subPanels.VIDEO_SETTINGS:this.subPanels.IMAGE_SETTINGS;this.toggleSubPanelChange(b)}.bind(this)}},toggleSubPanelChange:function(a){var b=this.getCurrentSubPanel();a===b?this.closeSubPanel(a):this.openSubPanel(a)},openSubPanel:function(a){E(a,this.getEditorAPI(),this.biEventsParams);var b=this.getSubPanelProps();d.panelManager.openPanel(a,b,!0)},getSubPanelProps:function(a){return{requestChange:this.onRequestChange,undoHandler:this.undoHandler,undoOrigins:u,getData:this.getData,panelName:a,top:this.panelBoundingRect.top,left:this.panelBoundingRect.left+this.panelBoundingRect.width+15,width:290}},getCurrentMedia:function(a){var d,e,g,c={};if(a.ref.mediaRef){d=this.getMediaType(a.ref)===this.mediaTypes.IMAGE?a.ref.mediaRef:a.ref.mediaRef.posterImageRef,g=n.isSmallerFromContainer(d.width,d.height,r,s),e=g?m.fittingTypes.TILE:m.fittingTypes.SCALE_TO_FILL;var h=n.getImageDisplayData(e,a.ref.alignType,d.uri,d.width,d.height,p,q);c.backgroundImage="url("+f.url.joinURL(n.MEDIA_URL_PREFIX,h.uri)+")",c.opacity=d.opacity,b.assign(c,h.css.container)}return b.assign(c,this.getCurrentColor(a)),c},getCurrentColor:function(a){var b=n.getColorValue(this.getEditorAPI(),a.ref.color);return{backgroundColor:b}},toggleVideoPlayback:function(a){return{value:a,requestChange:function(a){a?this.previewVideo():this.pauseVideo()}.bind(this)}},replaceColor:function(a,b){this.setColorPicker(a,b,this.colorPickerPanelHandleReplace,!0)},changeColor:function(a,b){var c=!b.ref.mediaRef;this.setColorPicker(a,b,this.colorPickerPanelHandleChange,c)},setColorPicker:function(a,b,c,d){var e=d?b.ref.color.replace(/[\[\{\}\]]/g,""):"noColor",f={top:a.clientY,left:a.clientX};this.openColorPicker(c,e,!0,f,d,!0)},colorPickerPanelHandleReplace:function(a){this.closeSubPanel(this.getCurrentSubPanel());var b=this.getData();/color_/.test(a)?b.ref.color="{"+a+"}":/rgba/.test(a)?b.ref.color=new g(a).hexString():b.ref.color=a,this.biEventsParams.origin=v.BG_COLOR_PICKER,this.onRequestChange(b)},colorPickerPanelHandleChange:function(a){this.closeSubPanel(this.getCurrentSubPanel());var b=this.getData();b.ref.mediaRef&&(b.ref.mediaRef=null,K(this.getEditorAPI(),o.VIDEO),K(this.getEditorAPI(),o.IMAGE),A(b),this.undoHandler(u.REMOVE)),/color_/.test(a)?b.ref.color="{"+a+"}":/rgba/.test(a)?b.ref.color=new g(a).hexString():b.ref.color=a,this.biEventsParams.origin=v.BG_COLOR_PICKER,this.onRequestChange(b)},selectPreset:function(a,c,d){var f=this.getData(),g=this.getEditorAPI();e.tooltipManager.hideAll(),this.closeSubPanel(this.getCurrentSubPanel()),b.assign(a,b.omit(f,"ref")),a.path&&F(g,this.getMediaType(a.ref),{path:a.path}),delete a.path,delete a.presetIndex,K(g,o.VIDEO),K(g,o.IMAGE),this.biEventsParams={presetIndex:d,origin:v.BG_PRESETS},this.onRequestChange(a,u.PRESET)},onMediaManagerCallback:function(a,b,c){if(b){var d,e,f=this.getEditorAPI(),g=this.getData();F(f,a,c),a===this.mediaTypes.VIDEO?(d=C(b,c),L(g,f),K(f,o.IMAGE),e=d.posterImageRef,g.ref.scrollType="fixed"):a===this.mediaTypes.IMAGE&&(d=D(b,c),M(d,g,f),K(f,o.VIDEO),e=d);var i,h=n.isSmallerFromContainer(e.width,e.height,r,s);i=a===this.mediaTypes.IMAGE&&h?m.fittingTypes.LEGACY_BG_FIT_AND_TILE:m.fittingTypes.SCALE_TO_FILL,g.ref.fittingType=i,g.ref.alignType=m.alignTypes.CENTER,g.ref.mediaRef=d,this.biEventsParams.origin=v["BG_MEDIA_MANAGER_"+a.toUpperCase()],this.onRequestChange(g,u.MEDIA)}},openMediaManager:function(a,b){if(a){var e,c=this.getEditorAPI(),d=c.mediaServices.mediaManager,g=G(c),h=g.type===a?g.path||"":"";a===this.mediaTypes.IMAGE?e=d.categories.BG_IMAGE:a===this.mediaTypes.VIDEO&&(e=d.categories.BG_VIDEO),this.closeSubPanel(this.getCurrentSubPanel()),d.open(e,{callback:b,path:h,translation:{submitButton:f.translate("MMGR_submitbutton_background_uploads_change")}})}},changeMedia:function(a){this.openMediaManager(a,this.onMediaManagerCallback.bind(this,a))},closePanel:function(){this.refs.backgroundPanel.close()},getTranslation:function(a){var b=this.getEditorAPI().getDeviceType();return f.translate(w[a][b])},getSettingsButtonTranslation:function(a){return x[a]},handleApplyToOtherClick:function(){this.isOnePager()||this.toggleSubPanelChange(this.subPanels.APPLY)},isOnePager:function(){return 1===this.getEditorAPI().pages.getPageIdList().length},markMobileDataDuplications:function(){var a=this.getEditorAPI(),b=a.getUserPreferences(),d=this.getData("mobile").ref.id,e=b.session.get("bg_panel_mobile_data_duplications_"+d);if(!e){for(var f=a.pages.getPrimaryPageId(),g=0,h=a.pages.getPagesData(),i=0;i<h.length;i++)h[i].id!==f&&h[i].pageBackgrounds.mobile.ref.id===d&&g++;b.session.set("bg_panel_mobile_data_duplications_"+d,{count:g}),g&&l.mobileDataDuplicationError(this.getEditorAPI(),c.bi.errors.BG_MOBILE_DATA_DUPLICATION_ERROR)}},isPlayBtnTooltipDisabled:function(){return this.getVideoReadyState()===this.videoReadyStates.IDLE},getPlayBtnTranslation:function(){var a="",b=this.getVideoReadyState();return b===this.videoReadyStates.PLAYING_PREVIEW?a="BGPP_PANEL_VIDEO_PLAYBACK_PREVIEW_READY_TOOLTIP":b===this.videoReadyStates.IN_PROCESS&&(a="BGPP_PANEL_VIDEO_PLAYBACK_NOT_READY_TOOLTIP"),a},getSettingTranslation:function(a){var b="";return a===this.mediaTypes.IMAGE?b="BGPP_PANEL_IMAGE_SETTINGS_BUTTON_TOOLTIP":a===this.mediaTypes.VIDEO&&(b="BGPP_PANEL_VIDEO_SETTINGS_BUTTON_TOOLTIP"),b},getPresetsProps:function(){return{desktopPresets:i,mobilePresets:j,title:f.translate("BGPP_PANEL_SELECTED_SECTION_TITLE"),infoTooltip:"BGPP_PANEL_SELECTED_SECTION_TOOLTIP",onSelectPreset:this.selectPreset,columns:4}},render:function(){return k.apply(this)}})}),define("rEditor/rootComps/panels/backgroundPanel/backgroundSubPanels/bgImageSettingsPanel.rt",["react/addons","lodash","baseUI","symbols","panels"],function(a,b,c,d,e){"use strict";function f(a,c){var d=b.assign({},a,c);return a.hasOwnProperty("style")&&(d.style=b.defaults(d.style,a.style)),a.hasOwnProperty("className")&&c.hasOwnProperty("className")&&(d.className=c.className+" "+a.className),d}function g(b,d,e){return a.createElement(c.dropDown.option,{key:"fittingTypeOption"+e,value:d.value},d.label)}function h(){var d=this.props.getData();return a.createElement(e.frames.bgSubPanelFrame,f({helpId:"54c7eb1c-a6c7-46c9-9261-96eecf3bb0eb",className:"background-image-settings-panel background-sub-panel",label:"BGPP_SETTINGS_IMAGE_PANEL_HEADER_TITLE"},b.omit(this.props,"children")),a.createElement(c.customScroll,{},a.createElement("div",{className:"bg-image-settings-panel-scrollbox bg-settings-panel-scrollbox"},a.createElement(c.slider,{valueLink:this.linkedBackgroundOpacityData(d,d.ref.mediaRef,"opacity"),label:"BGPP_SETTINGS_IMAGE_OPACITY_TITLE",min:0,max:100,step:1}),a.createElement("hr",{className:"divider-long"}),a.createElement("div",{className:"color-picker-input-wrapper"},a.createElement(c.colorPickerInput,f({label:"BGPP_SETTINGS_IMAGE_BG_COLOR_TITLE",ref:"bgColorPickerInput",className:"label-left",valueLink:this.linkedBackgroundColor(d,d.ref,"color")},this.getColorPickerProps()))),this.getEditorAPI().isMobileEditor()?null:a.createElement("div",{key:"scrollTypeRadiosDivider"},a.createElement("hr",{className:"divider-long"}),a.createElement(c.sectionDividerLabeled,{label:"BGPP_SETTINGS_IMAGE_SCROLL_SECTION_TITLE",infoText:"BGPP_SETTINGS_IMAGE_SCROLL_SECTION_TOOLTIP"}),a.createElement("hr",{className:"divider-long"}),a.createElement(c.thumbnails,{maxThumbsPerRow:"3",className:"with-labels scroll-type-thumbs",options:this.getEffectsThumbOptions(),valueLink:this.linkedBackgroundData(d,d.ref,"scrollType")})),a.createElement("hr",{className:"divider-long"}),a.createElement(c.sectionDividerLabeled,{label:"BGPP_SETTINGS_IMAGE_LAYOUT_SECTION_TITLE"}),a.createElement("hr",{className:"divider-long"}),a.createElement.apply(this,[c.dropDown.select,{valueLink:this.linkedBackgroundData(d,d.ref,"fittingType"),label:"BGPP_SETTINGS_IMAGE_FITTING_TITLE"},b.map(this.getFittingOptions(d.ref.scrollType),g.bind(this,d))]),a.createElement("hr",{className:"divider-long"}),a.createElement(c.alignment,{
options:c.commonData.ALIGNMENT_MODES_XY,valueLink:this.linkedBackgroundData(d,d.ref,"alignType"),label:"BGPP_SETTINGS_IMAGE_ALIGN_TITLE"}))))}return function(){return h.apply(this,[])}}),define("rEditor/rootComps/panels/backgroundPanel/backgroundSubPanels/bgImageSettingsPanel",["core","react","lodash","panels","util","panelUtils","rEditor/rootComps/panels/backgroundPanel/backgroundSubPanels/bgImageSettingsPanel.rt"],function(a,b,c,d,e,f,g){"use strict";function q(a){var b=a.getUserPreferences(),c=a.pages.getPrimaryPageId();b.session.set("bg_image_settings_data_changed_"+c,!0)}var h=e.backgroundPanelUtils,i=e.imageTransform.fittingTypes,j=600,k=600,l=[{label:"BGPP_SETTINGS_IMAGE_FITTING_SCALE_TO_FILL",value:i.SCALE_TO_FILL},{label:"BGPP_SETTINGS_IMAGE_FITTING_SCALE_TO_FIT",value:i.SCALE_TO_FIT},{label:"BGPP_SETTINGS_IMAGE_FITTING_ORIGINAL_SIZE",value:i.LEGACY_BG_NORMAL},{label:"BGPP_SETTINGS_IMAGE_FITTING_TILE",value:i.LEGACY_BG_FIT_AND_TILE},{label:"BGPP_SETTINGS_IMAGE_FITTING_TILE_HORIZONTALLY",value:i.LEGACY_BG_FIT_AND_TILE_HORIZONTAL},{label:"BGPP_SETTINGS_IMAGE_FITTING_TILE_VERTICALLY",value:i.LEGACY_BG_FIT_AND_TILE_VERTICAL}],m=[{value:"scroll",label:"BGPP_SETTINGS_IMAGE_SCROLL_NONE",symbolName:"thumb-none"},{value:"parallax",label:"BGPP_SETTINGS_IMAGE_SCROLL_PARALLAX",symbolName:"scroll-fx-site-bg-parallax"},{value:"fixed",label:"BGPP_SETTINGS_IMAGE_SCROLL_FREEZE",symbolName:"scroll-fx-site-bg-freeze"}],n=[{label:"BGPP_SETTINGS_IMAGE_FITTING_SCALE_TO_FILL",value:i.SCALE_TO_FILL},{label:"BGPP_SETTINGS_IMAGE_FITTING_TILE",value:i.LEGACY_BG_FIT_AND_TILE}],o=[i.LEGACY_BG_FIT_AND_TILE,i.LEGACY_BG_FIT_AND_TILE_HORIZONTAL,i.LEGACY_BG_FIT_AND_TILE_VERTICAL],p={opacity:1,fittingType:i.SCALE_TO_FILL,alignType:"center",scrollType:"scroll"};return b.createClass({displayName:"bgImageSettingsPanel",mixins:[a.mixins.editorAPIMixin,f.linkColorPickerMixin],childContextTypes:{reportUIChange:b.PropTypes.func},getInitialState:function(){return this.lastScrollingType=null,{}},shouldComponentUpdate:function(a){var b=a.getData();return b.ref.mediaRef&&"Image"===b.ref.mediaRef.type?!0:(d.panelManager.closePanelByName(a.panelName),!1)},getChildContext:function(){return{reportUIChange:this.onUIChange}},onUIChange:function(a){"slider"===a&&this.props.undoHandler(this.props.undoOrigins.IMAGE_PANEL)},linkedBackgroundData:function(a,b,c){var d="undefined"==typeof b[c]?p[c]:b[c];return{value:d,requestChange:function(d){"scrollType"===c&&"parallax"===d&&(b.fittingType=this.getFittingTypeForParallax(a)),b[c]=d,this.props.requestChange(a,this.props.undoOrigins.IMAGE_PANEL),q(this.getEditorAPI())}.bind(this)}},linkedBackgroundOpacityData:function(a,b,c){var d="undefined"==typeof b[c]?p[c]:b[c];return d*=100,{value:d,requestChange:function(d){d/=100,b[c]=d,this.props.requestChange(a),q(this.getEditorAPI())}.bind(this)}},linkedBackgroundColor:function(a,b,c){var d=b[c].replace(/[\{\}]/g,"");return{value:d,requestChange:function(d){b[c]=/color_/.test(d)?"{"+d+"}":d,this.props.requestChange(a),q(this.getEditorAPI())}.bind(this)}},getColorPickerProps:function(){return{useMouseEvent:!0,colorResolver:this.resolveColor,openColorPicker:this.openColorPicker,previewOnHover:!0}},getFittingOptions:function(a){return"parallax"===a?n:l},getEffectsThumbOptions:function(){return m},getFittingTypeForParallax:function(a){var b=a.ref.fittingType,d=a.ref.mediaRef,e=i.LEGACY_BG_FIT_AND_TILE,f=i.SCALE_TO_FILL,g=h.isSmallerFromContainer(d.width,d.height,j,k),l=c.includes(o,b)||g&&b!==f;return l?e:f},render:g})}),define("rEditor/rootComps/panels/backgroundPanel/backgroundSubPanels/bgVideoSettingsPanel.rt",["react/addons","lodash","baseUI","symbols","panels","util"],function(a,b,c,d,e,f){"use strict";function g(a,c){var d=b.assign({},a,c);return a.hasOwnProperty("style")&&(d.style=b.defaults(d.style,a.style)),a.hasOwnProperty("className")&&c.hasOwnProperty("className")&&(d.className=c.className+" "+a.className),d}function h(b,d,e,f){return a.createElement(c.dropDown.option,{key:"playbackOption"+f,value:e.value},e.label,"\n                \n            ")}function i(){var d=this.props.getData(),i=f.translate;return a.createElement(e.frames.bgSubPanelFrame,g({helpId:"7f54f04e-6e0b-4f73-96e2-6c98dd28e822",className:"background-video-settings-panel background-sub-panel",label:"BGPP_SETTINGS_VIDEO_PANEL_HEADER_TITLE"},b.omit(this.props,"children")),a.createElement(c.customScroll,{},a.createElement("div",{className:"bg-video-settings-panel-scrollbox bg-settings-panel-scrollbox"},a.createElement("div",{className:"background-video-patterns-control"},a.createElement(c.thumbnails,{radioType:"class",valueLink:this.linkedPatternOption(d,d.ref.imageOverlay),maxThumbsPerRow:"4",title:"BGPP_SETTINGS_VIDEO_OVERLAY_PATTERN_TITLE",options:this.thumbPatternOptions}),d.ref.imageOverlay?a.createElement(c.buttonsGroup,{className:"overlay-pattern-btn-group",valueLink:this.applyInversePattern(d,d.ref.imageOverlay),options:this.getInvertPatternOption(),key:"inversePattern"}):null),a.createElement("hr",{className:"divider-long"}),a.createElement(c.toggle,{valueLink:this.applyOverlayColor(d),label:"BGPP_SETTINGS_VIDEO_OVERLAY_COLOR_TITLE"}),this.isColorOverlay(d)?a.createElement("hr",{className:"divider-short",key:"color-picker-input-divider"}):null,this.isColorOverlay(d)?a.createElement(c.colorPickerInputWithOpacity,b.assign({},{ref:"bgColorPickerInput",key:"color-picker-input",label:"BGPP_SETTINGS_VIDEO_COLOR_OPACITY_TITLE",valueLink:this.linkColorWithOpacity(d,d.ref)},this.getColorPickerProps())):null,a.createElement("hr",{className:"divider-long"}),a.createElement(c.sectionDividerLabeled,{label:"BGPP_SETTINGS_VIDEO_PLAYBACK_SECTION_TITLE"}),this.getEditorAPI().isDesktopEditor()?a.createElement("hr",{className:"divider-long",key:"whptoDividerImageDesc"}):null,a.createElement.apply(this,[c.dropDown.select,{valueLink:this.linkedBackgroundData(d,d.ref.mediaRef,"playbackSpeed"),label:f.translate("BGPP_SETTINGS_VIDEO_PLAYBACK_TITLE"),shouldTranslate:!1},b.map(this.getPlaybackOptions(),h.bind(this,d,i))]),a.createElement("hr",{className:"divider-long"}),a.createElement(c.toggle,{valueLink:this.linkedBackgroundData(d,d.ref.mediaRef,"loop"),label:"BGPP_SETTINGS_VIDEO_LOOP_TITLE"}))))}return function(){return i.apply(this,[])}}),define("rEditor/rootComps/panels/backgroundPanel/backgroundSubPanels/bgVideoSettingsPanel",["react","core","lodash","panels","panelUtils","util","rEditor/rootComps/panels/backgroundPanel/backgroundSubPanels/bgVideoSettingsPanel.rt"],function(a,b,c,d,e,f,g){"use strict";function o(a,b){var c=a.getUserPreferences(),d=a.pages.getPrimaryPageId();c.session.set("bg_video_settings_pattern_state_"+d,b)}function p(a){var b=a.getUserPreferences(),c=a.pages.getPrimaryPageId();b.session.set("bg_video_settings_data_changed_"+c,!0)}function q(a){return a===j}function r(a,b){var d;if(!a.ref.imageOverlay){var e=b.pages.getPrimaryPageId(),f=b.getUserPreferences();return d=f.session.get("bg_video_settings_pattern_state_"+e),d?j:i}return c.find(i,{uri:a.ref.imageOverlay.uri})?i:j}for(var h=[{value:null,className:"v-overlay-pat-0-icon"},{value:"",className:"v-overlay-pat-1-icon"},{value:"",className:"v-overlay-pat-2-icon"},{value:"",className:"v-overlay-pat-3-icon"},{value:"",className:"v-overlay-pat-4-icon"},{value:"",className:"v-overlay-pat-5-icon"},{value:"",className:"v-overlay-pat-6-icon"},{value:"",className:"v-overlay-pat-7-icon"}],i=[{uri:"0da768_8b89980121844d37be099f0dbe33e3e3.png",width:6,height:6},{uri:"0da768_4371c7e64a49489bb88c536f515f2040.png",width:6,height:6},{uri:"0da768_361994b0f154464682a0aaf9724471cc.png",width:56,height:56},{uri:"0da768_880a3209e3744cd0a96b66835a01b8c5.png",width:256,height:256},{uri:"0da768_2729bfbce3874276a7dd057098f93949.png",width:6,height:6},{uri:"0da768_8fae2cc5b7bf477fb13faa1f2582dbd2.png",width:4,height:6},{uri:"0da768_2326357be59441978a570bec687a94d0.png",width:3,height:3}],j=[{uri:"0da768_5810e2bd76f64c77a67904ad2b073444.png",width:6,height:6},{uri:"0da768_46b55443eb984c0eacfbdcb1b67a2b7b.png",width:6,height:6},{uri:"0da768_d3e25a05cedd404f807528f6a4750388.png",width:56,height:56},{uri:"0da768_95dbd595356148718d5876246a20fe90.png",width:256,height:256},{uri:"0da768_0ffcd1b0986d43b4aaa061b8b17d4040.png",width:6,height:6},{uri:"0da768_0c0d2dc79bc14f6b8275c3b72fec1ab6.png",width:4,height:6},{uri:"0da768_09a75bbb10944eafb4539206b6a3c615.png",width:3,height:3}],k=0;k<i.length;k++)i[k].type="Image",j[k].type="Image";var l=[{value:.25,label:"0.25x"},{value:.5,label:"0.50x"},{value:1,label:f.translate("BGPP_SETTINGS_VIDEO_PLAYBACK_NORMAL")},{value:1.25,label:"1.25x"},{value:1.5,label:"1.50x"},{value:2,label:"2.00x"}],m=[{value:!1,label:"BGPP_SETTINGS_VIDEO_OVERLAY_PATTERN_DARKER"},{value:!0,label:"BGPP_SETTINGS_VIDEO_OVERLAY_PATTERN_LIGHTER"}],n={loop:!0,uri:null,colorOverlay:"#ffffff",colorOverlayOpacity:.2,scrollType:"scroll",playbackSpeed:1};return a.createClass({displayName:"bgVideoSettingsPanel",mixins:[b.mixins.editorAPIMixin,e.linkColorPickerMixin],propTypes:{getData:a.PropTypes.func,undoHandler:a.PropTypes.func,requestChange:a.PropTypes.func,undoOrigins:a.PropTypes.shape({VIDEO_PANEL:a.PropTypes.object})},childContextTypes:{reportUIChange:a.PropTypes.func},getInitialState:function(){this.lastColor="",this.lastColorOpacity=null;var a=this.props.getData();return this.currentPatterns=r(a,this.getEditorAPI()),this.patternState=q(this.currentPatterns),this.thumbPatternOptions=this.fillThumbPatternOptions(this.currentPatterns),null},getChildContext:function(){return{reportUIChange:this.onUIChange}},onUIChange:function(a){"slider"===a.toLowerCase()&&this.props.undoHandler(this.props.undoOrigins.VIDEO_PANEL)},linkedPatternOption:function(a,b){return{value:b&&b.uri||null,requestChange:function(b){if(b){var d=c.find(this.currentPatterns,{uri:b});this.patternState=q(this.currentPatterns),a.ref.imageOverlay=a.ref.imageOverlay||{},c.assign(a.ref.imageOverlay,d)}else a.ref.imageOverlay=null;o(this.getEditorAPI(),this.patternState),this.props.requestChange(a,this.props.undoOrigins.VIDEO_PANEL),p(this.getEditorAPI())}.bind(this)}},applyInversePattern:function(a,b){return{value:this.patternState,requestChange:function(d){var e=c.findIndex(this.currentPatterns,{uri:b.uri});this.currentPatterns=d?j:i,this.fillThumbPatternOptions(this.currentPatterns),c.assign(a.ref.imageOverlay,this.currentPatterns[e]),this.patternState=d,o(this.getEditorAPI(),d),this.props.requestChange(a,this.props.undoOrigins.VIDEO_PANEL),p(this.getEditorAPI())}.bind(this)}},isColorOverlay:function(a){return!c.isEmpty(a.ref.colorOverlay)&&c.isNumber(a.ref.colorOverlayOpacity)},applyOverlayColor:function(a){return{value:this.isColorOverlay(a),requestChange:function(b){b?(a.ref.colorOverlay=this.lastColor?this.lastColor:a.ref.color,a.ref.colorOverlayOpacity=c.isNumber(this.lastColorOpacity)?this.lastColorOpacity:n.colorOverlayOpacity):(this.lastColor=a.ref.colorOverlay,this.lastColorOpacity=a.ref.colorOverlayOpacity,a.ref.colorOverlay="",a.ref.colorOverlayOpacity=0),this.props.requestChange(a,this.props.undoOrigins.VIDEO_PANEL),p(this.getEditorAPI())}.bind(this)}},linkColorWithOpacity:function(a,b){return{value:{color:b.colorOverlay.replace(/[\{\}]/g,""),alpha:b.colorOverlayOpacity},requestChange:function(c){b.colorOverlay=/color_/.test(c.color)?"{"+c.color+"}":c.color,b.colorOverlayOpacity=c.alpha,this.props.requestChange(a),p(this.getEditorAPI())}.bind(this)}},getColorPickerProps:function(){return{colorResolver:this.resolveColor,openColorPicker:this.openColorPicker,previewOnHover:!0,useMouseEvent:!0,enableHistory:!0}},shouldComponentUpdate:function(a){var b=a.getData();return b.ref.mediaRef&&"WixVideo"===b.ref.mediaRef.type?!0:(d.panelManager.closePanelByName(a.panelName),!1)},linkedBackgroundData:function(a,b,c){return{value:b&&"undefined"!=typeof b[c]?b[c]:n[c],requestChange:function(d){b[c]=d,this.props.requestChange(a,this.props.undoOrigins.VIDEO_PANEL),p(this.getEditorAPI())}.bind(this)}},getPlaybackOptions:function(){return l},fillThumbPatternOptions:function(a){return c.forEach(a,function(b,c){h[c+1].value=a[c].uri}),h},getInvertPatternOption:function(){return m},render:g})}),define("rEditor/rootComps/panels/backgroundPanel/backgroundSubPanels/bgApplyPanelPageItem.rt",["react/addons","lodash","baseUI","symbols","core"],function(a,b,c,d,e){"use strict";function f(){var f=this.props.page,g=this.initialBgData,h=this.getCurrentPageData(),i=this.getEditorAPI();return a.createElement("div",{className:b.keys(b.pick(this.getItemClassNames(f),b.identity)).join(" ")},a.createElement("label",{className:"item-label"},g?a.createElement(c.toggle,{name:"checkbox",labelAfterSymbol:!0,key:"normal-checkbox",className:"bg-apply-checkbox",value:this.state.checked,onChange:this.handleToggleChanged,disabled:this.isCurrentPage()}):null,g?a.createElement("span",{className:"page-preview",key:"page-preview",style:this.getBgImageUrl(this.state.checked?h:g)},this.getMediaType(this.state.checked?h.ref:this.initialBgData.ref)===this.mediaTypes.VIDEO?a.createElement("div",{key:"page-preview-video-controls",className:"page-preview-video-controls"},a.createElement(c.symbol,{name:"bgVideoIndicator"})):null):null,a.createElement("span",{className:"page-name"},f.label,"\n            ",a.createElement("span",{className:"page-info"},f.pageData&&i.pages.isHomePage(f.pageData.id)?a.createElement(d.symbol,{name:"pageItemHomeIcon",key:"isHome"}):null,f.pageData&&e.utils.tpaTypeUtils.isTPA(f.pageData)&&!e.utils.tpaTypeUtils.isTPASpecialPage(i,f.pageData)?a.createElement(d.symbol,{name:"actionButtonSpecialPages",key:"isTpaPage"}):null,f.pageData&&e.utils.blogTypeUtils.isBlogSectionPage(i,f.pageData)?a.createElement(d.symbol,{name:"actionButtonBlogPages",key:"isBlogPage"}):null,f.type.isLink?a.createElement(d.symbol,{name:"pageItemLinkIcon",key:"isLink"}):null,f.type.isDropdown?a.createElement(d.symbol,{name:"pageItemDropdownIcon",key:"isDropDown"}):null,f.isVisible?null:a.createElement(d.symbol,{name:"pageItemHideIcon",key:"isHidden"})))))}return function(){return f.apply(this,[])}}),define("rEditor/rootComps/panels/backgroundPanel/backgroundSubPanels/bgApplyPanelPageItem",["react","core","lodash","util","rEditor/rootComps/panels/backgroundPanel/backgroundSubPanels/bgApplyPanelPageItem.rt"],function(a,b,c,d,e){"use strict";var f=d.imageTransform,g=d.backgroundPanelUtils,h=g.getMediaTypes(),i=50,j=35;return a.createClass({mixins:[b.mixins.editorAPIMixin,a.addons.LinkedStateMixin],displayName:"bgApplyPanelPageItem",propTypes:{page:a.PropTypes.object.isRequired,itemBgData:a.PropTypes.object,currentPageBgData:a.PropTypes.object,valueLink:a.PropTypes.func,currentPageId:a.PropTypes.string,isCurrentPage:a.PropTypes.bool,isSubMenu:a.PropTypes.bool,isSubMenuLast:a.PropTypes.bool},mediaTypes:h,getInitialState:function(){return this.initialBgData=this.props.itemBgData,{checked:this.isCurrentPage()}},componentWillReceiveProps:function(a){this.isValueChanged(a)&&this.setState({checked:a.valueLink.value})},componentStateChanged:function(){this.props.valueLink.requestChange(this.state.checked,this.props.page.pageData.id,this.initialBgData)},handleToggleChanged:function(a){this.setState({checked:a},this.componentStateChanged)},shouldComponentUpdate:function(a,b){return!this.isCurrentPage()&&(this.isCheckedStateChanged(b)||this.isValueChanged(a))},isValueChanged:function(a){return null!==a.valueLink.value&&this.props.valueLink.value!==a.valueLink.value},isCheckedStateChanged:function(a){return a.checked!==this.state.checked},isCurrentPage:function(){return this.props.isCurrentPage},getItemClassNames:function(a){return{"bg-apply-panel-item":!0,"item-hidden":!a.isVisible,"current-page":this.isCurrentPage(),"item-first-level":!this.props.isSubMenu,"item-second-level":this.props.isSubMenu,"item-second-level-last":this.props.isSubMenuLast,"item-is-page":a.type.isPage}},getMediaType:function(a){return g.getMediaType(a)},getCurrentPageData:function(){return this.props.currentPageBgData},getBgImageUrl:function(a){var b=g.getColorValue(this.getEditorAPI(),a.ref.color),e={backgroundColor:b},k=this.getMediaType(a.ref);if(k!==h.COLOR){var l=k===h.IMAGE?a.ref.mediaRef:a.ref.mediaRef.posterImageRef,m=g.isSmallerFromContainer(l.width,l.height,i,j),n=g.getImageDisplayData(m?f.fittingTypes.TILE:f.fittingTypes.SCALE_TO_FILL,a.ref.alignType,l.uri,l.width,l.height,i,j);e.backgroundImage="url("+d.url.joinURL(g.MEDIA_URL_PREFIX,n.uri)+")",c.assign(e,n.css.container)}return e},render:e})}),define("rEditor/rootComps/panels/backgroundPanel/backgroundSubPanels/bgApplyPanel.rt",["react/addons","lodash","util","baseUI","panels","rEditor/rootComps/panels/backgroundPanel/backgroundSubPanels/bgApplyPanelPageItem","symbols"],function(a,b,c,d,e,f,g){"use strict";function h(a,c){var d=b.assign({},a,c);return a.hasOwnProperty("style")&&(d.style=b.defaults(d.style,a.style)),a.hasOwnProperty("className")&&c.hasOwnProperty("className")&&(d.className=c.className+" "+a.className),d}function i(c,d,e,g,h){return a.createElement("li",{key:"page"+e+"subPage"+h},a.createElement(f,b.assign({},{valueLink:this.pagesStateChange(),ref:"page"+e+"subPage"+h},this.getSubPagesProps(g,h,d.items.length-1))))}function j(c,d,e){return a.createElement("li",{key:"page"+e},a.createElement(f,b.assign({},{valueLink:this.pagesStateChange(),ref:"page"+e},this.getPagesProps(d))),d.items.length?a.createElement.apply(this,["ul",{key:"pageItems"},b.map(d.items,i.bind(this,c,d,e))]):null)}function k(){var f=this.props.getData();return a.createElement(e.frames.bgSubPanelFrame,h({helpId:"18df7de7-066e-49e6-b005-f01c72d4f680",className:"bg-apply-panel background-sub-panel",label:"BGPP_SETTINGS_APLLY_PANEL_HEADER_TITLE"},b.omit(this.props,"children")),a.createElement("div",{className:"bg-apply-panel-wrapper"},a.createElement("div",{className:"bg-apply-panel-description"},"\n            ",c.translate("BGPP_SETTINGS_APLLY_PANEL_DESCRIPTION"),"\n        "),a.createElement("div",{className:"bg-apply-panel-all"},a.createElement(d.toggle,{name:"checkbox",labelAfterSymbol:!0,className:"bg-apply-checkbox",value:this.state.markAllPagesDisplay,onChange:this.handleSelectAllChange,indeterminate:this.state.indeterminate,label:"BGPP_SETTINGS_APLLY_TO_ALL"})),a.createElement(d.customScroll,{},a.createElement("div",{className:"bg-apply-panel-scrollbox bg-settings-panel-scrollbox"},a.createElement.apply(this,["ul",{className:"bg-apply-panel-scrollbox-list"},b.map(this.siteMenuItems,j.bind(this,f))])))))}return function(){return k.apply(this,[])}}),define("rEditor/rootComps/panels/backgroundPanel/backgroundSubPanels/bgApplyPanel",["react","lodash","panels","util","core","pagesMenu","rEditor/rootComps/panels/backgroundPanel/backgroundSubPanels/bgApplyPanel.rt"],function(a,b,c,d,e,f,g){"use strict";function j(a,c,d,e){return c=c||[],b.forEach(a,function(a){if(a.pageData&&(c.push(a),b.includes(d,a.pageData.id))){var f=this.getEditorAPI().mainMenu.convertPagesDataListToMenuItemsList(h.getSpecialPagesListBySectionPageOrBySibling(this.getEditorAPI(),a.pageData),e);j.call(this,f,c,d,e)}j.call(this,a.items,c,d,e)},this),b.uniq(c,"id")}function k(a,c){var j,d=!1,f=c.mainMenu.getMenu(),g=c.pages.getPagesData(),i=h.getSectionPagesIds(c,g);b.forEach(a,function(a){var k;if(a.pageData&&b.includes(i,a.pageData.id)){if(k=e.utils.tpaTypeUtils.isTPA(a.pageData),d&&k)return;j=c.mainMenu.convertPagesDataListToMenuItemsList(h.getSpecialPagesListBySectionPageOrBySibling(c,a.pageData,g),f),a.items=a.items.concat(j),k&&(d=!0)}})}function l(a,b){var c=a.getDeviceType(),d=a.pages.background.get(b,c);return d}function m(a,c,d,e){var f;b.forEach(e,function(e){f=e.checked?n(b.cloneDeep(d),e.pageId,c):n(b.cloneDeep(e.originalPageBgData),e.pageId,c),a.requestChange(f,null,e.pageId)}),e.length>0&&a.undoHandler(a.undoOrigins.APPLY_PANEL)}function n(a,b,c){var d=c.getDeviceType(),e=c.pages.background.get(b,d);return a.ref.mediaRef&&e.ref.mediaRef&&a.ref.mediaRef.type===e.ref.mediaRef.type?(a.ref.mediaRef.id=e.ref.mediaRef.id,"WixVideo"===a.ref.mediaRef.type&&(a.ref.mediaRef.posterImageRef.id=e.ref.mediaRef.posterImageRef.id,a.ref.imageOverlay&&(a.ref.imageOverlay.id=e.ref.imageOverlay&&e.ref.imageOverlay.id))):a.ref.mediaRef?(delete a.ref.mediaRef.id,"WixVideo"===a.ref.mediaRef.type&&(delete a.ref.mediaRef.posterImageRef.id,a.ref.imageOverlay&&delete a.ref.imageOverlay.id)):(a.ref.mediaRef=null,a.ref.colorOverlay="",a.ref.imageOverlay=null),a.ref.id=e.ref.id,a}var h=f.specialPages.menuLogic,i=d.bgPanelBiEvents;return a.createClass({displayName:"backgroundApplyPanel",mixins:[c.mixins.panelFrameMixin,e.mixins.editorAPIMixin,d.draggableMixin,a.addons.LinkedStateMixin],getInitialState:function(){return this.selectedItems=[],this.appliedPages=[],this.currentPageId=this.getEditorAPI().pages.getPrimaryPageId(),this.currentPageBgData=l(this.getEditorAPI(),this.currentPageId),this.siteMenuItems=this.getTrimmedMenuItems(),this.flatSitePages=this.getFlatPagesList(),this.itemsProps=this.getItemsProps(),{markAllPagesDisplay:!1,indeterminate:!1}},shouldComponentUpdate:function(a,b){return this.state.markAllPagesDisplay!==b.markAllPagesDisplay||this.state.indeterminate!==b.indeterminate||this.appliedPages.length>0},updatePages:function(){m(this.props,this.getEditorAPI(),this.currentPageBgData,this.appliedPages),this.appliedPages=[]},componentWillUnmount:function(){i.applyToOtherClosed(this.getEditorAPI(),e.bi.events.backgroundPanel.panel_apply_to_other_pages_ok,{all_pages_selected:(this.flatSitePages.length===this.selectedItems.length+1).toString(),num_unselected_pages:this.flatSitePages.length-this.selectedItems.length,num_selected_pages:this.selectedItems.length})},handleSelectAllChange:function(a){b.forEach(this.itemsProps,function(c){var d=c.page.pageData.id;d!==this.currentPageId&&(a?b.includes(this.selectedItems,d)||(this.selectedItems.push(d),this.appliedPages.push({checked:a,originalPageBgData:c.itemBgData,pageId:d})):b.includes(this.selectedItems,d)&&(b.pull(this.selectedItems,d),this.appliedPages.push({checked:a,originalPageBgData:c.itemBgData,pageId:d})))},this),this.setState({markAllPagesDisplay:a,indeterminate:!1},this.updatePages)},pagesStateChange:function(){var a=null;return this.flatSitePages.length===this.selectedItems.length+1&&(a=!0),0===this.selectedItems.length&&(a=!1),{value:a,requestChange:function(a,c,d){a&&c!==this.currentPageId?b.includes(this.selectedItems,c)||this.selectedItems.push(c):b.pull(this.selectedItems,c),this.appliedPages.push({checked:a,originalPageBgData:d,pageId:c});var e=this.flatSitePages.length===this.selectedItems.length+1,f=!e&&this.selectedItems.length>0;if(e!==this.state.markAllPagesDisplay||f!==this.state.indeterminate){var g={markAllPagesDisplay:e,indeterminate:f};this.setState(g,this.updatePages)}else this.updatePages()}.bind(this)}},getFlatPagesList:function(){var a=this.getEditorAPI(),b=a.pages.getPagesData(),c=a.mainMenu.getMenuItemsTreeForMainMenu(b),d=h.getSectionPagesIds(a,b),e=a.mainMenu.getMenu();return j.call(this,c,[],d,e)},getTrimmedMenuItems:function(){var a=this.getMenuItemsTreeWithPagesOnly();return k(a,this.getEditorAPI()),a},getMenuItemsTreeWithPagesOnly:function(){var a=this.getEditorAPI(),b=function(b,c){return c&&!h.isSpecialPage(a,c)||!c&&b.items.length>0};return a.mainMenu.extendMenuItemsTreeWithPageData(a.pages.getPagesData(),b)},getItemsProps:function(){var a=[];return b.forEach(this.flatSitePages,function(b){a.push({page:b,currentPageId:this.currentPageId,currentPageBgData:this.currentPageBgData,itemBgData:l(this.getEditorAPI(),b.pageData.id),isCurrentPage:this.currentPageId===(b.type.isPage&&b.pageData.id)})},this),a},getPagesProps:function(a){var c=b.find(this.itemsProps,{page:{id:a.id}});return c||(c={page:a}),c},getSubPagesProps:function(a,c,d){var e=b.find(this.itemsProps,{page:{id:a.id}});return e.isSubMenu=!0,e.isSubMenuLast=c===d,e},render:g})}),define("rEditor/rootComps/panels/siteSettings/siteSettingsPanel.rt",["react/addons","lodash","baseUI","panels"],function(a,b,c,d){"use strict";return function(){return a.createElement(d.frames.focusPanelFrame,{panelName:this.props.panelName,width:"1210",height:"90%",shouldHideHeader:!0,className:"site-settings-panel"},a.createElement("iframe",{ref:"siteSettingsFrame",width:"100%",height:"100%",src:this.getSettingsIframeUrl(),frameBorder:"0"}),a.createElement(c.preloader,{className:b.keys(b.pick({hidden:!this.state.showLoader},b.identity)).join(" ")}))}}),define("rEditor/rootComps/panels/siteSettings/siteSettingsPanel",["react","core","lodash","panels","rEditor/rootComps/panels/siteSettings/siteSettingsPanel.rt"],function(a,b,c,d,e){"use strict";function h(a){return c.isObject(a)&&!c.isEmpty(a.action)&&c.isString(a.action)}function i(a){var b=this.refs.siteSettingsFrame.getDOMNode();b.contentWindow.postMessage(JSON.stringify(a),"*")}function j(a,b){var d=a.action;switch(d){case f.GET_METATAGS:i.call(this,{payload:b.seo.headTags.get(),callId:a.callId});break;case f.SET_METATAGS:b.seo.headTags.set(a.value,c.noop,c.noop);break;case f.NOTIFY_SITENAME_CHANGED:b.siteName.set(a.value);break;case f.CLOSE:this.close();break;case f.OPEN_HELP:this.openHelpCenter()}}var f={CLOSE:"CLOSE",OPEN_HELP:"OPEN_HELP",SET_METATAGS:"SET_METATAGS",GET_METATAGS:"GET_METATAGS",NOTIFY_SITENAME_CHANGED:"NOTIFY_SITENAME_CHANGED"},g=["https://www.wix.com","http://www.wix.com"];return a.createClass({displayName:"siteSettingsPanel",render:e,mixins:[b.mixins.editorAPIMixin,d.mixins.panelFrameMixin],propTypes:{tab:a.PropTypes.string},getInitialState:function(){return{showLoader:!0}},getDefaultProps:function(){return{tab:"overview"}},componentWillMount:function(){window.addEventListener("message",this.handlePostMessage,!1)},componentWillUnmount:function(){window.removeEventListener("message",this.handlePostMessage,!1)},componentDidMount:function(){this.refs.siteSettingsFrame.getDOMNode().addEventListener("load",this.hideLoader)},handlePostMessage:function(a){var d=this.getEditorAPI();if(c.includes(g,a.origin)&&!c.isEmpty(a.data)&&c.isString(a.data))try{this.hideLoader();var e=JSON.parse(a.data);h(e)&&j.call(this,e,d)}catch(f){d.bi.error(b.bi.errors.SITE_SETTINGS_JSON_PARSE_ERROR,{dsc:'message: "'+f.message+'" data: "'+a.data+'"',errscp:this.constructor.displayName})}},getSettingsIframeUrl:function(){var a=this.getEditorAPI(),b=a.generalInfo.getMetaSiteId();return"https://wix.com/my-account/sites/"+b+"/site-settings/"+this.props.tab+"/?mode=editor-dialog"},hideLoader:function(){this.state.showLoader&&this.setState({showLoader:!1})}})}),define("rEditor/rootComps/topBar/menuBar/menuBarItem.rt",["react/addons","lodash","baseUI"],function(a,b,c){"use strict";function d(a){this.props.onHover(this.props.menuItem,this.props.index)}function e(){var c=this.getCounter();return a.createElement("li",{className:b.keys(b.pick(this.getClasses(),b.identity)).join(" ")},a.createElement("a",{onClick:this.onClick,onMouseEnter:d.bind(this,c)},a.createElement("label",{className:"menu-bar-item-label"},this.props.isCheckbox?a.createElement("input",{key:"checkItemInput",ref:"checkboxInput",disabled:this.props.isDisabled&&this.props.isDisabled(),type:"checkbox",className:"menu-bar-item-checkbox",checked:this.props.viewTools[this.props.menuPropsKey],onChange:this.handleCheckChange}):null,"\n                ",this.props.label,"\n                ",a.createElement("span",{className:"shortcut"},this.props.shortcutLabel),c?a.createElement("div",{key:"counter",className:"item-counter"},c):null)))}return function(){return a.createElement(c.tooltip,{value:this.getTooltipText(),alignment:c.uiConstants.TOOLTIP.ALIGNMENT.RIGHT,disabled:!this.getTooltipText()},e.apply(this,[]))}}),define("rEditor/rootComps/topBar/menuBar/menuBarItem",["react","lodash","core","rEditor/rootComps/topBar/menuBar/menuBarItem.rt"],function(a,b,c,d){"use strict";return a.createClass({displayName:"menuBarItem",propTypes:{action:a.PropTypes.func,bi:a.PropTypes.oneOfType([a.PropTypes.array,a.PropTypes.object]),disabled:a.PropTypes.bool,index:a.PropTypes.number,editorAPI:a.PropTypes.object,isCheckbox:a.PropTypes.bool,shortcutLabel:a.PropTypes.string,label:a.PropTypes.string,menuPropsKey:a.PropTypes.string,closeDropDownHandle:a.PropTypes.func,viewTools:a.PropTypes.object,className:a.PropTypes.string,isSelected:a.PropTypes.bool,getCounter:a.PropTypes.func},componentDidUpdate:function(a){!a.isSelected&&this.props.isSelected&&this.props.onHover(this.props.menuItem,this.props.index)},getClasses:function(){var a={"menu-bar-item":!0,"menu-bar-item-action":!0,"menu-bar-item-action-selected":this.props.isSelected,"enabled-item":!this.props.disabled,"menu-bar-item-separator":this.props.separator};return this.props.className&&(a[this.props.className]=!0),a},handleCheckChange:function(a){var b=a.target.checked;this.executeAction(b)},onClick:function(){this.props.isCheckbox||this.executeAction()},sendBI:function(){if(this.props.editorAPI&&this.props.bi){var a=[].concat(this.props.bi),c=this.props.editorAPI;b.forEach(a,function(a){c.bi.event(a.type,a.fields)},this)}},executeAction:function(a){var b=this.props.action;if(b&&!this.props.disabled)if(this.sendBI(),this.props.isCheckbox){var c=void 0!==a?a:!this.refs.checkboxInput.getDOMNode().checked;b(c)}else b(),this.props.closeDropDownHandle()},getCounter:function(){return b.isFunction(this.props.getCounter)&&this.props.getCounter()},getTooltipText:function(){return this.props.editorAPI.tooltipTextService.getSelectedComponentTooltipText(this.props.menuItem.key)},render:d})}),define("rEditor/rootComps/topBar/dropPanels/menuPanels/menuActionsPanel.rt",["react/addons","lodash","rEditor/rootComps/topBar/menuBar/menuBarItem"],function(a,b,c){"use strict";function d(d,e){return a.createElement(c,b.assign({},{ref:d.key,key:d.key,isSelected:e===this.state.selectedMenuItemIndex,menuItem:d,index:e},this.getItemProps(d)))}return function(){return a.createElement("div",{className:"menubar-actions-panel"},a.createElement.apply(this,["ul",{},b.map(this.getSelectedMenuChildren(this.props.selectedMenu),d.bind(this))]))}}),define("rEditor/rootComps/topBar/dropPanels/menuPanels/menuActionsPanel",["react","lodash","util","panels","rEditor/rootComps/topBar/menuBar/menuBarItemsDefinitions","rEditor/rootComps/topBar/dropPanels/menuPanels/menuActionsPanel.rt"],function(a,b,c,d,e,f){"use strict";return a.createClass({displayName:"menuActionsPanel",PropTypes:{selectedMenu:a.PropTypes.object.isRequired,onMenuItemHover:a.PropTypes.func,closeDropDownHandle:a.PropTypes.func},mixins:[d.mixins.statefulKeyboardContextMixin],keyboardShortcutsContextNamePrefix:"TOP_BAR_DROP_PANEL_",getInitialState:function(){return{selectedMenuItemIndex:null}},componentWillReceiveProps:function(a){this.props.selectedMenu.key!==a.selectedMenu.key&&this.setState({selectedMenuItemIndex:null})},getItemProps:function(a){var c=e[a.key];if(c){var d=this.isMenuItemDisabled(c,a.key),f=this.getLabel(c),g=this.props.viewTools,h={disabled:d,onHover:function(a,b){this.props.onMenuItemHover&&this.props.onMenuItemHover(a),this.setState({selectedMenuItemIndex:b})}.bind(this),label:f,closeDropDownHandle:this.props.closeDropDownHandle,viewTools:g,editorAPI:this.props.editorAPI},i=b.clone(c);return b.assign(i,h),i}return null},getSelectedMenuChildren:function(a){var c=a&&a.children||[];return c&&(c=b.filter(c,this.isMenuBarItemShowing,this)),c},getItemVisibility:function(a){var b=e[a.key];return b?!b.visibilityFunc||b.visibilityFunc():!1},isMenuBarItemShowing:function(a){return this.getItemVisibility(a)},getLabel:function(a){return a.labelFunc&&a.labelFunc()||a.label},isMenuItemDisabled:function(a,c){var d=this.props.editorAPI;if("PASTE"===c)return!d.clipboardContainsComp()||!d.isDesktopEditor();var e=!1;if(a.compActionRestrictionNames){var f=d.getCompRestrictions(d.selection.getSelectedComponents()),g=a.compActionRestrictionNames||[];e=e||b(g).map(function(a){return!!f[a]}).indexOf(!1)>-1}return!e&&a.disabledChecker&&(e=a.disabledChecker()),e},getNumberOfMenuItems:function(){return this.getSelectedMenuChildren(this.props.selectedMenu).length},getKeyboardShortcuts:function(){
var a=this,b=c.keyboardShortcuts.CONTEXTS.MENU_BAR,d=c.keyboardShortcuts.extendContext(b,{up:function(b){var d,c=a.state.selectedMenuItemIndex;d=null===c||0===c?a.getNumberOfMenuItems()-1:c-1,a.setState({selectedMenuItemIndex:d}),b.preventDefault()},down:function(b){var d,c=a.state.selectedMenuItemIndex;d=null===c?0:(c+1)%a.getNumberOfMenuItems(),a.setState({selectedMenuItemIndex:d}),b.preventDefault()},enter:function(b){var c=a.state.selectedMenuItemIndex;if(null!==c){var d=a.getSelectedMenuChildren(a.props.selectedMenu)[c].key,e=a.refs[d];e.executeAction&&e.executeAction()}b.preventDefault()}});return d},render:f})}),define("rEditor/rootComps/topBar/dropPanels/menuPanels/promotionPanel.rt",["react/addons","lodash","baseUI"],function(a,b,c){"use strict";function d(){var b=this.props.menuKey.toLowerCase(),d=this.props.classes;return a.createElement("div",{className:"menu-bar-promotion-box",style:this.props.style,onClick:this.onClick},a.createElement("div",{className:"graphics-container "+(d.graphics||"graphics-"+b),key:b},this.props.image?a.createElement("img",{key:"promotionImage",src:this.props.image}):null,this.props.symbol?a.createElement(c.symbol,{key:"promotionSymbol",name:this.props.symbol}):null),this.props.title?a.createElement("div",{key:"title",className:d.title||"title"},this.translateIfNeeded(this.props.title)):null,this.props.message?a.createElement("div",{key:"msg",className:d.message||"message",dangerouslySetInnerHTML:{__html:this.translateIfNeeded(this.props.message)}}):null)}return function(){return d.apply(this,[])}}),define("rEditor/rootComps/topBar/dropPanels/menuPanels/promotionPanel",["react","lodash","util","rEditor/rootComps/topBar/dropPanels/menuPanels/promotionPanel.rt"],function(a,b,c,d){"use strict";function e(a,c){if(a&&c){var d=b.cloneDeep(c);b.forEach(d,function(b){b.fields&&b.fields.category&&(b.fields.category+="(Image)"),a.bi.event(b.type,b.fields)})}}return a.createClass({displayName:"promotionPanel",mixins:[c.translationMixin],propTypes:{menuKey:a.PropTypes.string.isRequired,image:a.PropTypes.string,symbol:a.PropTypes.string,title:a.PropTypes.string,message:a.PropTypes.string,action:a.PropTypes.func,bi:a.PropTypes.oneOfType([a.PropTypes.array,a.PropTypes.object]),classes:a.PropTypes.object,editorAPI:a.PropTypes.object},getDefaultProps:function(){return{classes:{}}},onClick:function(){this.props.action&&(this.props.action(null,!0),e(this.props.editorAPI,b.compact([].concat(this.props.bi))))},render:d})}),define("rEditor/rootComps/topBar/dropPanels/dropPanels",["rEditor/rootComps/topBar/dropPanels/menuPanels/menuActionsPanel","rEditor/rootComps/topBar/dropPanels/menuPanels/checkListPanel","rEditor/rootComps/topBar/dropPanels/menuPanels/promotionPanel"],function(a,b,c){"use strict";return{menuActionsPanel:a,checkListPanel:b,promotionPanel:c}}),define("rEditor/rootComps/panels/editorVersionInfoPanel/editorVersionInfoPanel.rt",["react/addons","lodash","baseUI","panels","util"],function(a,b,c,d,e){"use strict";return function(){return a.createElement(d.frames.focusPanelFrame,{ref:"frame",panelName:this.props.panelName,title:"Editor Version Info",frameClassName:"editorVersionInfoPanel"},a.createElement("div",{className:"content"},a.createElement("div",{className:"row"},a.createElement("label",{},"Editor Version:"),a.createElement("span",{},this.getEditorVersion())),a.createElement("div",{className:"row"},a.createElement("label",{},"Viewer Version:"),a.createElement("span",{},this.getViewerVersion()))),a.createElement("div",{className:"panel-footer"},a.createElement(c.button,{type:"button",shouldTranslate:!1,label:"OK",className:"done-button",onClick:this.close})))}}),define("rEditor/rootComps/panels/editorVersionInfoPanel/editorVersionInfoPanel",["react","util","jquery","rEditor/rootComps/panels/editorVersionInfoPanel/editorVersionInfoPanel.rt"],function(a,b,c,d){"use strict";return a.createClass({displayName:"editorVersionInfoPanel",panelName:"editorVersionInfoPanel",getEditorVersion:function(){return b.editorModel.editorVersion||"unknown"},getViewerVersion:function(){var a=c("#preview")[0];return a?a.contentWindow.siteModel.baseVersion||"unknown":"unknown"},close:function(){this.refs.frame&&this.refs.frame.close()},render:d})}),define("rEditor/rootComps/panels/applyStylePanel/applyStylePanel.rt",["react/addons","lodash","panels","baseUI","util","symbols","addPanelInfra"],function(a,b,c,d,e,f,g){"use strict";return function(){return a.createElement(c.frames.confirmationPanelFrame,{panelName:this.props.panelName,className:"apply-style-panel",onConfirm:this.onConfirm,onCancel:this.onCancel,shouldHideHeader:!0,confirmLabel:"COPY_DESIGN_APPLY",ref:"frame",cancelLabel:"COPY_DESIGN_APPLY_CANCEL"},a.createElement("header",{className:"save-publish-panel-header"},a.createElement("button",{className:"close",onClick:this.close},a.createElement(f.symbol,{name:"headerCloseButton"})),a.createElement("button",{className:"help",onClick:this.openHelpCenter,key:"help"},"?"),a.createElement("span",{className:"title"},e.translate("COPY_DESIGN_TITLE")),a.createElement("span",{className:"subtitle"},e.translate("COPY_DESIGN_DESCRIPTION_LINE1"))),a.createElement("div",{className:"panel-content"},a.createElement("div",{className:"current-style-container container-wrapper"},a.createElement("div",{className:"current-style-header header"},a.createElement("span",{className:"text"},e.translate("COPY_DESIGN_LABEL_LEFT"))),a.createElement("div",{className:"current-style comp-container"},a.createElement(g.designPanelLiveComponentSection,this.getSelectedCompProps()))),a.createElement("div",{className:"applied-styles-container container-wrapper"},this.getThemeAndPersonalizeStylesToRender().length>0?a.createElement("div",{key:"applyStyleHeader",className:"applied-styles-header header"},a.createElement("span",{className:"text"}," ",e.translate("COPY_DESIGN_LABEL_RIGHT"))):null,a.createElement(d.customScroll,{},a.createElement("div",{className:"comp-themed-styles comp-container"},this.getThemeAndPersonalizeStylesToRender().length>0?a.createElement(g.designPanelLiveComponentSection,b.assign({},{key:"appliesStylesLiveSections"},this.getThemeAndPersonalizeStylesProps())):null,0===this.getThemeAndPersonalizeStylesToRender().length?a.createElement("div",{className:"empty-styles",key:"emptyStylesKey"},a.createElement(f.symbol,{name:"nothingToEditASP"}),a.createElement("div",{className:"empty-style-text text"},e.translate("COPY_DESIGN_EMPTY_LABEL"))):null)))))}}),define("rEditor/rootComps/panels/applyStylePanel/applyStylePanel",["react","lodash","core","panels","experiment!se_studioCopyDesign","rEditor/rootComps/panels/applyStylePanel/applyStylePanel.rt"],function(a,b,c,d,e,f){"use strict";function o(a,d){var e=a.style||a.styleId;return b.isString(e)&&(e=c.styleManager.getStyleById(d.theme,d.components,e)),e}function p(a,d){var e=b.union([d],n[d]),f=b.map(e,function(d){return b.pluck(c.styleManager.getThemedStyleForComp(a.theme,a.components,d),"id")});return b(f).union().flatten().value()}function q(a,d){var e=b.pluck(c.styleManager.getUniqueCustomStyleList(a.theme,a.components,d),"id");return n[d]&&b.forEach(n[d],function(d){var f=b.pluck(c.styleManager.getUniqueCustomStyleList(a.theme,a.components,d),"id");e=e.concat(f)}),e}function r(a,d){var e=b.pluck(c.styleManager.getUniqueStyleList(a.theme,a.components,d),"id");return n[d]&&b.forEach(n[d],function(d){var f=b.pluck(c.styleManager.getUniqueStyleList(a.theme,a.components,d),"id");e=e.concat(f)}),e}function s(a){return m[a]&&m[a].compOverrideType?m[a].compOverrideType:a}function t(a,c,d,e,f,l){var n={additionalBehaviours:{iconEnabledForComps:[],infoIcon:"none",labelMode:"none"},help:{hide:!0},categoryId:d.substring(d.lastIndexOf(".")+1),hide:!1,id:c,onClick:l,onItemDrag:function(){},parentType:"ADD_PANEL",props:{compTypes:s(d),horizontalMargin:h,verticalMargin:g,scaleProportion:{x:m[d]&&m[d].scale?m[d].scale:i,y:m[d]&&m[d].scale?m[d].scale:i}},showSectionHeader:!1,stylesForSection:e,additionalScaling:1,selectedItemKey:f,getAdditionalElementProps:function(c){var d=o(c,a),e={};return b.includes(j,d.skin)?(e.text="DESIGN_LABEL_NO_COLOR",e.className="design-panel-transparent-skin-item"):b.includes(k,d.skin)&&(e.text="Design_Label_No_Frame",e.className="design-panel-no-frame-skin-item"),e}};return m[d]&&m[d].maxFontSize&&(n.props.maxFontSize=m[d].maxFontSize),n}function u(a,d){return b.filter(a,function(a){var e=c.styleManager.getStyleById(d.theme,d.components,a);return!b.includes(k,e.skin)})}var g=30,h=20,i=1,j=["wysiwyg.viewer.skins.page.TransparentPageSkin","wysiwyg.viewer.skins.screenwidthcontainer.TransparentHalfScreen","wysiwyg.viewer.skins.screenwidthcontainer.TransparentScreen","wysiwyg.viewer.skins.area.TransparentArea"],k=["wysiwyg.viewer.skins.photo.NoSkinPhoto","wysiwyg.viewer.skins.VideoSkin"],l=["wysiwyg.viewer.components.MatrixGallery","wysiwyg.viewer.components.SlideShowGallery","wysiwyg.viewer.components.SliderGallery","wysiwyg.viewer.components.PaginatedGridGallery"],m={"wysiwyg.viewer.components.HeaderContainer":{scale:.5},"wysiwyg.viewer.components.FooterContainer":{scale:.5},"wysiwyg.viewer.components.ScreenWidthContainer":{scale:.5},"mobile.core.components.Page":{compOverrideType:"pageContainer"},"wysiwyg.viewer.components.Video":{scale:.5},"wysiwyg.viewer.components.VerticalLine":{maxFontSize:10},"wysiwyg.viewer.components.FiveGridLine":{maxFontSize:10},fiveGridLineFullWidth:{maxFontSize:10},"wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer":{maxFontSize:10},"wysiwyg.viewer.components.AudioPlayer":{maxFontSize:10},"wysiwyg.viewer.components.menus.DropDownMenu":{maxFontSize:15},"wysiwyg.common.components.verticalmenu.viewer.VerticalMenu":{maxFontSize:15},"wysiwyg.viewer.components.SiteButton":{maxFontSize:22},"mobile.core.components.Container":{scale:.5},"core.components.Container":{scale:.5},"core.components.ContainerOBC":{scale:.5},"wysiwyg.viewer.components.BgImageStrip":{scale:.5},"wysiwyg.viewer.components.ContactForm":{scale:.5},"wysiwyg.common.components.subscribeform.viewer.SubscribeForm":{scale:.5},"wysiwyg.viewer.components.GoogleMap":{scale:.5},"wysiwyg.viewer.components.WPhoto":{scale:.5},"wysiwyg.viewer.components.MatrixGallery":{scale:.25,maxFontSize:12},"wysiwyg.viewer.components.SlideShowGallery":{scale:.25,maxFontSize:12},"wysiwyg.viewer.components.SliderGallery":{scale:.25,maxFontSize:12},"wysiwyg.viewer.components.PaginatedGridGallery":{scale:.25,maxFontSize:12}},n={"mobile.core.components.Container":["core.components.Container","core.components.ContainerOBC"],"core.components.Container":["mobile.core.components.Container","core.components.ContainerOBC"],"core.components.ContainerOBC":["mobile.core.components.Container","core.components.Container"]};return a.createClass({displayName:"applyStylePanel",getInitialState:function(){return{selectedItems:[]}},close:function(){this.refs.frame.close();var a=this.props.editorAPI,b=this.props.selectedComp;a.bi.event(c.bi.events.applyStyle.COPY_STYLE_CANCEL,{component_id:b.id,component_type:a.components.getType(b)})},onCancel:function(){var a=this.props.editorAPI,b=this.props.selectedComp;a.bi.event(c.bi.events.applyStyle.COPY_STYLE_CANCEL,{component_id:b.id,component_type:a.components.getType(b)})},onConfirm:function(){var a=this.props.editorAPI,d=a.components.style.getId(this.props.selectedComp),f=a.components.getType(this.props.selectedComp),g=c.styleManager.getStyleById(a.theme,a.components,d),h=this.props.selectedComp;a.bi.event(c.bi.events.applyStyle.COPY_STYLE_APPLY,{num_of_styles_chosen:this.state.selectedItems.length,component_id:h.id,component_type:a.components.getType(h)}),b.forEach(this.state.selectedItems,function(d){var h=d.split("."),i=h[h.length-1],j=i.substring(i.indexOf("_")+1),k=c.styleManager.getStyleById(a.theme,a.components,j),l=[k],m=c.styleManager.getDuplicateToStyleList(a.theme,a.components,k,f);b.forEach(n[f],function(b){var d=c.styleManager.getDuplicateToStyleList(a.theme,a.components,k,b,n[f]);m=m.concat(d)}),e&&(m=b.filter(m,{styleType:"custom"})),l=l.concat(m),b.forEach(l,function(b){var c={skin:g.skin,style:g.style,type:b.type};a.theme.styles.update(b.id,c)})})},getSelectedCompProps:function(){var a=this.props.editorAPI,c=this.props.selectedComp,d=a.components.getType(c),e="selectedComp"+c.id,f=a.components.style.getId(c),g=[{styleId:f,compType:s(d)}];return t(a,e,d,g,this.state.selectedItems,b.noop)},getThemeAndPersonalizeStylesProps:function(){var a=this.props.editorAPI,b=this.props.selectedComp,c="themeAndMyForComp"+b.id,d=a.components.getType(b),e=this.themeAndPersonalizedStylesToRender?this.themeAndPersonalizedStylesToRender:this.getThemeAndPersonalizeStylesToRender();return t(a,c,d,e,this.state.selectedItems,this.updateListOfStyleToUpdate)},getThemeAndPersonalizeStylesToRender:function(){if(this.themeAndPersonalizedStylesToRender)return this.themeAndPersonalizedStylesToRender;var a=this.props.editorAPI,d=this.props.selectedComp,f=a.components.getType(d),g=a.components.style.getId(d),h=c.styleManager.getStyleById(a.theme,a.components,g),i=[];i=e?p(a,f):b.includes(l,f)?q(a,f):r(a,f),i=u(i,a);var j=[];return b.forEach(i,function(b){var d=c.styleManager.getStyleById(a.theme,a.components,b),i=b!==g&&!c.styleManager.isEqualWithoutTypeConsideration(d,h);(e||i)&&j.push({compType:s(f),styleId:b})}),this.themeAndPersonalizedStylesToRender=j,j},updateListOfStyleToUpdate:function(a,d,e,f){var g=b.clone(this.state.selectedItems),h=f.split("."),i=h[h.length-1],j=i.substring(i.indexOf("_")+1),k=b.includes(g,f);k?b.remove(g,function(a){return a===f}):g.push(f);var l=this.props.selectedComp,m=this.props.editorAPI;m.bi.event(c.bi.events.applyStyle.COPY_STYLE_CHOOSE_STYLES_TO_REPLACE_CLICK,{style_id:j,status:!k,component_id:l.id,component_type:m.components.getType(l)}),this.setState({selectedItems:g})},openHelpCenter:function(){var a="b853c294-8ff1-418f-b4d2-29d7b59a85c3",b={panel_name:this.props.panelName,component:this.props.editorAPI.selection.getSelectedComponentType(),origin:c.constants.BI.HELP.ORIGIN.PANEL,learn_more:!1};d.panelManager.openHelpCenter(a,null,null,b)},render:f})}),define("rEditor/rootComps/panels/boxSlideShowPanels/boxSlideShowManageSlidesPanel.rt",["react/addons","lodash","baseUI","util","compPanels","helpIds"],function(a,b,c,d,e,f){"use strict";function g(a,b,c,d){this.state.slideRenamingIndex!==c&&this.refs.sortList.startDrag(c,d)}function h(a,b,c){this.setSelected(b,c)}function i(e,f,i){return a.createElement("div",{key:i,className:b.keys(b.pick({"item-list-row":!0,selected:b.isEqual(this.state.selectedSlide,f),compacted:e.length>12},b.identity)).join(" ")},a.createElement("div",{className:"item-details",onMouseDown:g.bind(this,e,f,i),onClick:h.bind(this,e,f,i)},this.state.slideRenamingIndex!==i?a.createElement("div",{key:"slideTitle"},a.createElement(c.symbol,{name:"dragHandle",className:"symbol-dragIcon"}),a.createElement("div",{className:"slide-name"},this.getSlideName(f)),a.createElement(c.dropDown.contextMenu,{icon:"moreRegular",className:"quick-actions",shouldTranslate:!1,onChange:this.handleSlideAction.bind(this,f,i),onExpand:this.onActionsMenuOpened},a.createElement(c.dropDown.option,{value:"rename"},a.createElement(c.symbol,{name:"quickActionsRename"}),"\n                            ",d.translate("Regular_Slideshow_Slides_Rename"),"\n                        "),a.createElement(c.dropDown.option,{value:"duplicate"},a.createElement(c.symbol,{name:"qaDuplicate"}),"\n                            ",d.translate("Regular_Slideshow_Slides_Duplicate"),"\n                        "),e.length>1?a.createElement(c.dropDown.option,{value:"delete",key:"delete"},a.createElement(c.symbol,{name:"qaDelete"}),"\n                            ",d.translate("Regular_Slideshow_Slides_Delete"),"\n                        "):null)):null,this.state.slideRenamingIndex===i?a.createElement(c.textInputWithFixedButton,{key:"slideTitleInput",value:this.getSlideName(f),onChange:this.changeSlideName.bind(this,f),buttonLabel:"Pages_Actions_Rename_Button",maxLength:40,selectOnFocus:!0,validator:d.validate.notEmptyString,invalidMessage:"Box_slide_show_slides_invalid_slide_name"}):null))}function j(){var d=this.getCompSlides();return a.createElement.apply(this,[c.sortByDragList,{className:"sort-list",key:"sortList",ref:"sortList",onItemMoved:this.moveSlide},b.map(d,i.bind(this,d))])}function k(){this.duplicateCurrentSlide()}function l(){this.addNewSlide()}return function(){return a.createElement(e.compPanelFrame,b.assign({},{contentClass:"box-slide-show-manage-slides-panel",title:"Regular_Slideshow_Slides_Title",helpId:f.EXTERNAL.BOX_SLIDE_SHOW_MANAGE_SLIDES},this.getFrameProps()),this.getCompSlides().length?j.apply(this,[]):null,a.createElement("div",{className:"button-wrapper"},a.createElement(c.button,{className:"mainButton",label:"Regular_Slideshow_Slides_Add_Duplicate_Slide",onClick:k.bind(this)}),a.createElement(c.button,{className:"secondaryButton btn-text",label:"Regular_Slideshow_Slides_Add_New_Slide",onClick:l.bind(this)})))}}),define("rEditor/rootComps/panels/boxSlideShowPanels/boxSlideShowManageSlidesPanel",["react","lodash","core","util","compPanels","rEditor/rootComps/panels/boxSlideShowPanels/boxSlideShowManageSlidesPanel.rt"],function(a,b,c,d,e,f){"use strict";function k(){return this.getEditorAPI().components.getDefaultBiParams(this.props.selectedComponent)}var g="Regular_Slideshow_Slides_Copy_Slide_Label",h="Regular_Slideshow_Slides_New_Slide_Label",i="title",j=c.utils.boxSlideShowUtils;return a.createClass({displayName:"boxSlideShowManageSlidesPanel",render:f,mixins:[e.compPanelMixin,d.translationMixin],getInitialState:function(){var a=j.findCurrentSlide(this.getEditorAPI(),this.props.selectedComponent),b=j.getAllSlides(this.getEditorAPI(),this.props.selectedComponent);return this.isCurrentlyInOperation=!1,{slideRenamingIndex:null,selectedSlide:a,slides:b}},componentWillReceiveProps:function(a){var c=this.getEditorAPI(),d=j.findCurrentSlide(c,a.selectedComponent),e=j.getAllSlides(c,a.selectedComponent);if(b.isEqual(e,this.state.slides))b.isEqual(d,this.state.selectedSlide)||this.setState({selectedSlide:d});else{if(b.find(e,this.state.selectedSlide)&&e.length>=this.state.slides.length){var f=b.findIndex(e,this.state.selectedSlide),g=b.findIndex(this.state.slides,this.state.selectedSlide);this.isCurrentlyInOperation||f===g||(c.preventMouseDown(),c.components.behaviors.execute(a.selectedComponent,"moveToSlide",{slide:f},c.allowMouseDown))}else this.setState({selectedSlide:d});this.setState({slides:e})}},addSlide:function(a,c){this.isCurrentlyInOperation=!0;var d=this.getEditorAPI(),e=d.components.add(b.first(this.props.selectedComponent),a);d.components.arrangement.moveToIndex(e,c,!0),this.getEditorAPI().history.add("added a slide to slide show"),d.waitForChangesApplied(function(){this.isCurrentlyInOperation=!1,this.setState({selectedSlide:e})}.bind(this))},duplicateCurrentSlide:function(){if(!this.isCurrentlyInOperation){var a=j.findCurrentSlide(this.getEditorAPI(),this.props.selectedComponent),b=this.getCompSlides().length;this.duplicateSlide(a,b-1),this.getEditorAPI().bi.event(c.bi.events.boxSlideShow.MANAGE_SLIDES_DUPLICATE_CURRENT_SLIDE,k.call(this))}},addNewSlide:function(){if(!this.isCurrentlyInOperation){var a=this.getEditorAPI(),b=j.findCurrentSlide(this.getEditorAPI(),this.props.selectedComponent),d=a.components.serialize(b);d.components=[];var e=this.getCompSlides().length,f={curr_slide:e+1};d.data[i]=this.translateTemplate(h,f,a),this.addSlide(d,e),a.bi.event(c.bi.events.boxSlideShow.MANAGE_SLIDES_ADD_NEW_SLIDE,k.call(this))}},duplicateSlide:function(a,b){if(!this.isCurrentlyInOperation){var c=this.getEditorAPI().components.serialize(a),d={curr_slide_title:c.data[i]};c.data[i]=this.translateTemplate(g,d,this.getEditorAPI()),this.addSlide(c,b+1)}},deleteSlide:function(a){var b=this.getEditorAPI();!this.isCurrentlyInOperation&&this.getCompSlides().length>1&&(this.isCurrentlyInOperation=!0,b.components.remove(a),b.history.add("removed a slide from slide show"),b.waitForChangesApplied(function(){this.isCurrentlyInOperation=!1}.bind(this)))},getCompSlides:function(){return j.getAllSlides(this.getEditorAPI(),this.props.selectedComponent)},moveSlide:function(a,b){var d=this.getEditorAPI();if(!this.isCurrentlyInOperation&&a!==b){this.isCurrentlyInOperation=!0;var e=this.getCompSlides()[a];d.components.arrangement.moveToIndex(e,b,!1),d.bi.event(c.bi.events.boxSlideShow.MANAGE_SLIDES_SLIDE_REORDERED,k.call(this)),d.waitForChangesApplied(function(){this.isCurrentlyInOperation=!1}.bind(this))}},getSlideName:function(a){var b=this.getEditorAPI();return b.components.data.get(a)[i]},changeSlideName:function(a,b){var c=this.getEditorAPI();if(this.getSlideName(a)!==b){var d={};d[i]=b,c.components.data.update(a,d),this.setState({slideRenamingIndex:null})}},renameSlide:function(a){this.setState({slideRenamingIndex:a})},onActionsMenuOpened:function(){this.getEditorAPI().bi.event(c.bi.events.boxSlideShow.MANAGE_SLIDES_ACTION_MENU_OPENED,k.call(this))},handleSlideAction:function(a,d,e){switch(e){case"rename":this.renameSlide(d);break;case"duplicate":this.duplicateSlide(a,d);break;case"delete":this.deleteSlide(a)}this.getEditorAPI().bi.event(c.bi.events.boxSlideShow.MANAGE_SLIDES_SLIDE_ACTION_SELECTED,b.assign({action:e},k.call(this)))},setSelected:function(a,d){var e=this.getEditorAPI();e.preventMouseDown(),b.isEqual(this.state.selectedSlide,a)||this.isCurrentlyInOperation||(e.components.behaviors.execute(this.props.selectedComponent,"moveToSlide",{slide:d},e.allowMouseDown),this.setState({selectedSlide:a,slideRenamingIndex:null}),e.bi.event(c.bi.events.boxSlideShow.SLIDES_NAVIGATION,b.assign({origin:"slideManager"},k.call(this))))}})}),define("rEditor/rootComps/panels/boxSlideShowPanels/slideShowBgApplyPanelItem.rt",["react/addons","lodash","baseUI","symbols","core"],function(a,b,c,d,e){"use strict";function f(){var d=this.props.slide,e=this.getCurrentSlideData(),f=this.initialBgData;return a.createElement("div",{className:b.keys(b.pick(this.getItemClassNames(d),b.identity)).join(" ")},a.createElement("label",{className:"item-label"},f?a.createElement(c.toggle,{name:"checkbox",labelAfterSymbol:!0,key:"normal-checkbox",className:"bg-apply-checkbox",value:this.state.checked,onChange:this.handleToggleChanged,disabled:this.isCurrentSlide()}):null,f?a.createElement("span",{className:"slide-preview",key:"slide-preview",style:this.getBgImageUrl(this.state.checked?e:f)},this.getMediaType(this.state.checked?e:f)===this.mediaTypes.VIDEO?a.createElement("div",{key:"slide-preview-video-controls",className:"slide-preview-video-controls"},a.createElement(c.symbol,{name:"bgVideoIndicator"})):null):null,a.createElement("span",{className:"slide-name"},this.props.slideTitle)))}return function(){return f.apply(this,[])}}),define("rEditor/rootComps/panels/boxSlideShowPanels/slideShowBgApplyPanelItem",["react","core","lodash","util","experiment","rEditor/rootComps/panels/boxSlideShowPanels/slideShowBgApplyPanelItem.rt"],function(a,b,c,d,e,f){"use strict";var g=d.imageTransform,h=d.backgroundPanelUtils,i=h.getMediaTypes(),j=50,k=35;return a.createClass({mixins:[b.mixins.editorAPIMixin,a.addons.LinkedStateMixin],displayName:"slideShowBgApplyPanelItem",propTypes:{slide:a.PropTypes.object.isRequired,slideTitle:a.PropTypes.string.isRequired,itemBgData:a.PropTypes.object,isCurrentSlide:a.PropTypes.bool,currentSlideBgData:a.PropTypes.object,valueLink:a.PropTypes.object},mediaTypes:i,getInitialState:function(){return this.origin=this.props.origin,this.initialBgData=this.props.itemBgData,{checked:this.isCurrentSlide()}},isCurrentSlide:function(){return this.props.isCurrentSlide},componentWillReceiveProps:function(a){this.isValueChanged(a)&&this.setState({checked:a.valueLink.value})},componentStateChanged:function(){this.props.valueLink.requestChange(this.state.checked,this.props.slide,this.initialBgData)},handleToggleChanged:function(a){this.setState({checked:a},this.componentStateChanged)},shouldComponentUpdate:function(a,b){return!this.isCurrentSlide()&&(this.isCheckedStateChanged(b)||this.isValueChanged(a))},isValueChanged:function(a){return null!==a.valueLink.value&&this.props.valueLink.value!==a.valueLink.value},isCheckedStateChanged:function(a){return a.checked!==this.state.checked},getItemClassNames:function(){return{"slideShow-apply-panel-item":!0,"current-slide":this.isCurrentSlide()}},getMediaType:function(a){return h.getMediaType(a)},getCurrentSlideData:function(){return this.props.currentSlideBgData},getBgStyleByBackgroundType:function(a){var b,e;e=h.getColorValue(this.getEditorAPI(),a.color),b={backgroundColor:e};var f=this.getMediaType(a);if(f!==i.COLOR){var l=f===i.IMAGE?a.mediaRef:a.mediaRef.posterImageRef,m=h.isSmallerFromContainer(l.width,l.height,j,k),n=h.getImageDisplayData(m?g.fittingTypes.TILE:g.fittingTypes.SCALE_TO_FILL,a.alignType,l.uri,l.width,l.height,j,k);b.backgroundImage="url("+d.url.joinURL(h.MEDIA_URL_PREFIX,n.uri)+")",c.assign(b,n.css.container)}return b},getBgImageUrl:function(a){var b;switch(this.origin){case"strip":b=this.getBgStyleByBackgroundType(a);break;case"box":b=e.isOpen("balata")&&e.isOpen("designData")?this.getBgStyleByBackgroundType(a):{backgroundColor:h.getColorValue(this.getEditorAPI(),a.style.properties.bg)}}return b},render:f})}),define("rEditor/rootComps/panels/boxSlideShowPanels/slideShowBgApplyPanel.rt",["react/addons","lodash","util","baseUI","panels","rEditor/rootComps/panels/boxSlideShowPanels/slideShowBgApplyPanelItem","helpIds"],function(a,b,c,d,e,f,g){"use strict";function h(a,c){var d=b.assign({},a,c);return a.hasOwnProperty("style")&&(d.style=b.defaults(d.style,a.style)),a.hasOwnProperty("className")&&c.hasOwnProperty("className")&&(d.className=c.className+" "+a.className),d}function i(c,d){return a.createElement("li",{key:"slide"+d},a.createElement(f,b.assign({},{valueLink:this.slidesStateChange(),ref:"slide"+d},this.getSlideProps(c))))}return function(){return a.createElement(e.frames.bgSubPanelFrame,h({helpId:g.EXTERNAL.BOX_SLIDE_SHOW_BG_APPLY,className:"slide-show-apply-panel",label:"Regular_Slideshow_Apply_Panel_Header_Title"},b.omit(this.props,"children")),a.createElement("div",{className:"slide-show-apply-panel-wrapper"},a.createElement("div",{className:"slide-show-apply-panel-description"},"\n            ",c.translate("Regular_Slideshow_Apply_Panel_Header_Description"),"\n        "),a.createElement("div",{className:"slide-show-apply-panel-all"},a.createElement(d.toggle,{name:"checkbox",labelAfterSymbol:!0,className:"slide-show-apply-checkbox",label:"Regular_Slideshow_Apply_To_All",value:this.state.markAllSlidesDisplay,onChange:this.handleSelectAllChange,indeterminate:this.state.indeterminate})),a.createElement(d.customScroll,{},a.createElement("div",{className:"slide-show-apply-panel-scrollbox slide-show-settings-panel-scrollbox"},a.createElement.apply(this,["ul",{className:"slide-show-apply-panel-scrollbox-list"},b.map(this.allSlides,i.bind(this))])))))}}),define("rEditor/rootComps/panels/boxSlideShowPanels/slideShowBgApplyPanel",["react","core","lodash","experiment","rEditor/rootComps/panels/boxSlideShowPanels/slideShowBgApplyPanel.rt"],function(a,b,c,d,e){"use strict";function g(a,b,d,e){var f;c.forEach(b,function(b){switch(f=b.checked?j(c.cloneDeep(a),b):j(c.cloneDeep(b.originalSlideBgData),b),e){case"strip":h(f,b.slide,d);break;case"box":i(f,b.slide,d)}})}function h(a,b,c){if(d.isOpen("designData"))c.components.design.update(b,{background:a});else{var e=c.components.data.get(b);e.background=a,c.components.data.update(b,e)}}function i(a,c,e){if(d.isOpen("balata")&&d.isOpen("designData"))e.components.design.update(c,{background:a});else{var f=b.styleManager.getStyleIdByDef(e.theme,e.components,a,e.components.getType(c)),g=e.theme.styles.get(f);e.components.style.update(c,g)}}function j(a,b){var c=b.originalSlideBgData;return a.mediaRef&&c.mediaRef&&a.mediaRef.type===c.mediaRef.type?(a.mediaRef.id=c.mediaRef.id,"WixVideo"===a.mediaRef.type&&(a.mediaRef.posterImageRef.id=c.mediaRef.posterImageRef.id,a.imageOverlay&&(a.imageOverlay.id=c.imageOverlay&&c.imageOverlay.id))):a.mediaRef?(delete a.mediaRef.id,"WixVideo"===a.mediaRef.type&&(delete a.mediaRef.posterImageRef.id,a.imageOverlay&&delete a.imageOverlay.id)):(a.mediaRef=null,a.colorOverlay="",a.imageOverlay=null),a.id=c.id,a}var f=b.utils.boxSlideShowUtils;return a.createClass({displayName:"slideShowBgApplyPanel",mixins:[b.mixins.editorAPIMixin],getAllSlides:function(){var a=this.getEditorAPI();return f.getAllSlides(a,a.selection.getSelectedComponents())},getInitialState:function(){var a=this.getEditorAPI();return this.selectedItems=[],this.appliedSlides=[],this.origin=this.props.origin,this.currentSlide=f.findCurrentSlide(a,a.selection.getSelectedComponents()),this.currentSlideBgData=this.getSlideBgData(this.currentSlide),this.allSlides=this.getAllSlides(),this.itemsProps=this.getItemsProps(),{markAllSlidesDisplay:!1,indeterminate:!1}},getSlideBgData:function(a){var b=this.getEditorAPI();switch(this.origin){case"strip":return d.isOpen("designData")?b.components.design.get(a).background:b.components.data.get(a).background;case"box":if(d.isOpen("balata")&&d.isOpen("designData"))return b.components.design.get(a).background;var c=b.components.style.getId(a);return b.theme.styles.get(c)}},shouldComponentUpdate:function(a,b){return this.state.markAllSlidesDisplay!==b.markAllSlidesDisplay||this.state.indeterminate!==b.indeterminate||this.appliedSlides.length>0},handleSelectAllChange:function(a){c.forEach(this.itemsProps,function(b){var d=b.slide,e=d.id;e!==this.currentSlide.id&&(a?c.includes(this.selectedItems,e)||(this.selectedItems.push(e),this.appliedSlides.push({checked:a,originalSlideBgData:b.itemBgData,slide:d})):c.includes(this.selectedItems,e)&&(c.pull(this.selectedItems,e),this.appliedSlides.push({checked:a,originalSlideBgData:b.itemBgData,slide:d})))},this),this.setState({markAllSlidesDisplay:a,indeterminate:!1},this.updateSlides)},getItemsProps:function(){var a=[],b=this.getEditorAPI();return c.forEach(this.allSlides,function(c){a.push({slide:c,slideTitle:b.components.data.get(c).title,currentSlideBgData:this.currentSlideBgData,itemBgData:this.getSlideBgData(c),isCurrentSlide:this.currentSlide.id===c.id})},this),a},getSlideProps:function(a){var b=c.find(this.itemsProps,{slide:{id:a.id}});return b.origin=this.origin,b},updateSlides:function(){var a=this.getEditorAPI();g(this.currentSlideBgData,this.appliedSlides,a,this.origin);var d=c.assign({total_slides:this.getAllSlides().length,num_selected_slides:this.appliedSlides.length,all_slides_selected:this.state.markAllSlidesDisplay},a.components.getDefaultBiParams(a.selection.getSelectedComponents()));a.bi.event(b.bi.events.boxSlideShow.APPLY_ON_OTHER_SLIDES_SELECTED_SLIDES,d),this.appliedSlides=[]},slidesStateChange:function(){var a=null;return this.allSlides.length===this.selectedItems.length+1&&(a=!0),0===this.selectedItems.length&&(a=!1),{value:a,requestChange:function(a,b,d){var e=b.id;a&&e!==this.currentSlide.id?c.includes(this.selectedItems,e)||this.selectedItems.push(e):c.pull(this.selectedItems,e),this.appliedSlides.push({checked:a,originalSlideBgData:d,slide:b});var f=this.allSlides.length===this.selectedItems.length+1,g=!f&&this.selectedItems.length>0;if(f!==this.state.markAllSlidesDisplay||g!==this.state.indeterminate){var h={markAllSlidesDisplay:f,indeterminate:g};this.setState(h,this.updateSlides)}else this.updateSlides()}.bind(this)}},render:e})}),define("rEditor/rootComps/panels/panels",["rEditor/rootComps/panels/popup/overlaySettingsPanel/overlaySettingsPanel","rEditor/rootComps/panels/pagesPanel","rEditor/rootComps/panels/pagesPanelMobile","rEditor/rootComps/panels/pagesAndPopupsPanel","rEditor/rootComps/panels/myMediaPanel","rEditor/rootComps/panels/backgroundPanel/backgroundPanel","rEditor/rootComps/panels/backgroundPanel/backgroundSubPanels/bgImageSettingsPanel","rEditor/rootComps/panels/backgroundPanel/backgroundSubPanels/bgVideoSettingsPanel","rEditor/rootComps/panels/backgroundPanel/backgroundSubPanels/bgApplyPanel","rEditor/rootComps/panels/siteSettings/siteSettingsPanel","rEditor/rootComps/topBar/dropPanels/dropPanels","rEditor/rootComps/panels/editorVersionInfoPanel/editorVersionInfoPanel","rEditor/rootComps/panels/applyStylePanel/applyStylePanel","rEditor/rootComps/panels/boxSlideShowPanels/boxSlideShowManageSlidesPanel","rEditor/rootComps/panels/boxSlideShowPanels/slideShowBgApplyPanel","rEditor/rootComps/panels/boxSlideShowPanels/slideShowBgApplyPanelItem"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){
"use strict";return{pagesPanel:b,pagesPanelMobile:c,pagesAndPopupsPanel:d,myMediaPanel:e,backgroundPanel:f,bgImageSettingsPanel:g,bgVideoSettingsPanel:h,backgroundApplyPanel:i,siteSettingsPanel:j,topBar:{menuActionsPanel:k.menuActionsPanel,checkListPanel:k.checkListPanel,promotionPanel:k.promotionPanel},popup:{overlaySettingsPanel:a},editorVersionInfoPanel:l,applyStylePanel:m,boxSlideShowManageSlidesPanel:n,slideShowBgApplyPanel:o,slideShowBgApplyPanelItem:p}}),define("rEditor/rootComps/mixins/rootCompsMixins",["rEditor/rootComps/mixins/hiddenableMixin","rEditor/rootComps/mixins/keepInViewportMixin"],function(a,b){"use strict";return{hiddenableMixin:a,keepInViewportMixin:b}}),define("rEditor",["rEditor/rootComps/editorMain","rEditor/rootComps/editor","rEditor/rootComps/panels/panels","rEditor/app/EditorAPI","rEditor/rootComps/mixins/rootCompsMixins"],function(a,b,c,d,e){"use strict";return{editorMain:a,editorComp:b,panels:c,EditorAPI:d,mixins:e}});