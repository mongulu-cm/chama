define("santaPreview/mixins/generateEmptySiteData",["lodash"],function(a){"use strict";function j(a,b){return a.siteInfo?a:{metaSiteId:a.metaSiteId,siteInfo:{applicationType:a.applicationType,documentType:a.documentType,siteId:a.siteId,siteTitleSEO:a.siteTitleSEO},clientSpecMap:a.clientSpecMap,premiumFeatures:a.premiumFeatures,geo:a.geo,languageCode:a.languageCode,previewMode:a.previewMode,userId:a.userId,siteMetaData:a.siteMetaData?{contactInfo:a.siteMetaData.contactInfo,adaptiveMobileOn:b.adaptiveMobileOn,preloader:a.siteMetaData.preloader,quickActions:a.siteMetaData.quickActions}:void 0}}var b={debugMode:"nodebug",previewMode:!1,serviceMappings:{1:{idInMetaSite:1,idInApp:"8ba39a1b-c487-486c-a2d8-59ef0a0133c6",applicationType:"HtmlWeb"}},metaSiteId:"ccd3286b-dccb-4ae4-9071-488107dcd962",premiumFeatures:["AdsFree"],siteId:"8ba39a1b-c487-486c-a2d8-59ef0a0133c6",userId:"6a22a14e-466f-48b0-b7c9-30133ababfed",published:!0,revision:10,applicationType:"HtmlWeb",documentType:"UGC",siteTitleSEO:"buttons-site",clientSpecMap:{13:{type:"sitemembers",applicationId:13,collectionType:"Open",smcollectionId:"56d5612e-5d8a-43bf-92c9-f18d4d54a23a",smtoken:"daa2fb88aacdd7cfc7ce4a8c786fb27d0a6badacc036463296db2761cc6a2b0c59a32526530ba023568e9bde791755d97b8d28d97d2906816b39fbdacb480da3f2a30fc0c0d994433a7e9f8e4df2940b2ee710c862d61c3416eacfda3ef39688"},2:{type:"appbuilder",applicationId:2,appDefinitionId:"3d590cbc-4907-4cc4-b0b1-ddf2c5edf297",instanceId:"1378284b-43aa-0d56-5bbc-313c8e4c9923",state:"Initialized"}},runningExperiments:{},languageCode:"en",scriptsCacheKiller:1,siteMetaData:{preloader:{enabled:!1},hasMobileStructure:!1,quickActions:{socialLinks:[],colorScheme:"dark",configuration:{quickActionsMenuEnabled:!1,navigationMenuEnabled:!0,phoneEnabled:!1,emailEnabled:!1,addressEnabled:!1,socialLinksEnabled:!1}},contactInfo:{companyName:"",phone:"",fax:"",email:"",address:""}},geo:"ISR"},c={serverName:"app33.aus",cacheKillerVersion:"1",staticServerUrl:"http://static.parastorage.com/",usersScriptsRoot:"http://static.parastorage.com/services/wix-users/2.388.0",biServerUrl:"http://frog.wix.com/",userServerUrl:"http://users.wix.com/",billingServerUrl:"http://premium.wix.com/",mediaRootUrl:"http://static.wixstatic.com/",logServerUrl:"http://frog.wix.com/plebs",monitoringServerUrl:"http://TODO/",usersClientApiUrl:"https://users.wix.com/wix-users",publicStaticBaseUri:"http://static.parastorage.com/services/wix-public/1.109.0",basePublicUrl:"http://www.wix.com/",postLoginUrl:"http://www.wix.com/my-account",postSignUpUrl:"http://www.wix.com/new/account",baseDomain:"wix.com",staticMediaUrl:"http://static.wixstatic.com/media",staticAudioUrl:"http://storage.googleapis.com/static.wixstatic.com/mp3",emailServer:"http://assets.wix.com/common-services/notification/invoke",blobUrl:"http://static.parastorage.com/wix_blob",htmlEditorUrl:"http://editor.wix.com/html",siteMembersUrl:"https://users.wix.com/wix-sm",scriptsLocationMap:{bootstrap:"http://static.parastorage.com/services/bootstrap/2.913.2",it:"http://static.parastorage.com/services/experiments/it/1.37.0","wix-insta-template":"http://static.parastorage.com/services/experiments/wix-insta-template/1.8.0",automation:"http://static.parastorage.com/services/automation/1.23.0",ecommerce:"http://static.parastorage.com/services/ecommerce/1.170.0",wixapps:"http://static.parastorage.com/services/wixapps/2.385.0",web:"http://static.parastorage.com/services/web/2.913.2",numericstepper:"http://static.parastorage.com/services/experiments/numericstepper/1.11.0",ut:"http://static.parastorage.com/services/experiments/ut/1.2.0",tpa:"http://static.parastorage.com/services/tpa/2.801.0","ck-editor":"http://static.parastorage.com/services/ck-editor/1.68.1",subscribeform:"http://static.parastorage.com/services/experiments/subscribeform/1.20.0",ecomfeedback:"http://static.parastorage.com/services/experiments/ecomfeedback/1.13.0",sitemembers:"http://static.parastorage.com/services/sm-js-sdk/1.31.0",hotfixes:"http://static.parastorage.com/services/experiments/hotfixes/1.11.0",backtotopbutton:"http://static.parastorage.com/services/experiments/backtotopbutton/1.13.0",langs:"http://static.parastorage.com/services/langs/2.403.0",verifypremium:"http://static.parastorage.com/services/experiments/verifypremium/1.8.0",core:"http://static.parastorage.com/services/core/2.913.2",mobilequicktour:"http://static.parastorage.com/services/experiments/mobilequicktour/1.14.0",editormenu:"http://static.parastorage.com/services/experiments/editormenu/1.154.0",skins:"http://static.parastorage.com/services/skins/2.913.2"},developerMode:!1,userFilesUrl:"http://static.parastorage.com/",staticHTMLComponentUrl:"http://alissav.wix.com.usrfiles.com/",secured:!1,ecommerceCheckoutUrl:"https://www.safer-checkout.com/",premiumServerUrl:"https://premium.wix.com/",appRepoUrl:"http://assets.wix.com/wix-lists-ds-webapp",staticDocsUrl:"http://media.wix.com/ugd",publicStaticsUrl:"http://static.parastorage.com/services/wix-public/1.109.0"},d={id:"8ba39a1b-c487-486c-a2d8-59ef0a0133c6",userId:"6a22a14e-466f-48b0-b7c9-30133ababfed"},e=d.id,f=c,g="nodebug",h=b.previewMode?"preview":"site",i={rendererModel:b,serviceTopology:c,siteHeader:d,siteId:e,configUrls:f,debugMode:g,viewMode:h},k={generateEmptySiteData:function(b){var c=a.uniqueId("mainPage"),d=a.assign(i,{santaBase:b,pagesData:{}});return d.publicModel={externalBaseUrl:"http://fake.andmeaningless.com",domain:"fake.andmeaningless.com",premiumFeatures:["AdsFree"],language:"en",favicon:"",suppressTrackingCookies:!1,pageList:{masterPage:[],pages:[{pageId:c,title:"Home",urls:[]}],mainPageId:c},siteRevision:10,timeSincePublish:19589,adaptiveMobileOn:!0},d.rendererModel=j(d.rendererModel,d.publicModel),d.siteId=a.uniqueId("previewSite"),d.siteHeader.id=d.siteId,d.currentUrl=d.publicModel.externalBaseUrl,d.pagesData.masterPage={structure:{type:"Document",documentType:"document",id:"SITE_STRUCTURE",componentProperties:{},themeData:{},children:[{type:"Container",styleId:"hc3",id:"SITE_HEADER",components:[],skin:"wysiwyg.viewer.skins.screenwidthcontainer.DefaultScreen",layout:{width:344,height:107,x:0,y:0,scale:1,rotationInDegrees:0,anchors:[{distance:0,topToTop:107,originalValue:107,type:"BOTTOM_TOP",locked:!0,targetComponent:"PAGES_CONTAINER"}],fixedPosition:!1},componentType:"wysiwyg.viewer.components.HeaderContainer"},{type:"Container",styleId:"fc3",id:"SITE_FOOTER",components:[],skin:"wysiwyg.viewer.skins.screenwidthcontainer.DefaultScreen",layout:{width:344,height:132,x:0,y:1051,scale:1,rotationInDegrees:0,anchors:[{distance:0,topToTop:948,originalValue:1180,type:"BOTTOM_PARENT",locked:!0,targetComponent:"SITE_STRUCTURE"}],fixedPosition:!1},componentType:"wysiwyg.viewer.components.FooterContainer"},{type:"Container",styleId:"pc1",id:"PAGES_CONTAINER",components:[{type:"Container",id:"SITE_PAGES",components:[],skin:"wysiwyg.viewer.skins.PageGroupSkin",layout:{width:344,height:944,x:0,y:0,scale:1,rotationInDegrees:0,anchors:[{distance:0,topToTop:0,originalValue:1598,type:"BOTTOM_PARENT",locked:!0,targetComponent:"PAGES_CONTAINER"}],fixedPosition:!1},propertyQuery:"SITE_PAGES",componentType:"wysiwyg.viewer.components.PageGroup"}],skin:"wysiwyg.viewer.skins.screenwidthcontainer.BlankScreen",layout:{width:344,height:944,x:0,y:107,scale:1,rotationInDegrees:0,anchors:[{distance:0,topToTop:871,originalValue:948,type:"BOTTOM_TOP",locked:!0,targetComponent:"SITE_FOOTER"}],fixedPosition:!1},componentType:"wysiwyg.viewer.components.PagesContainer"}],mobileComponents:[{type:"Container",styleId:"hc3",id:"SITE_HEADER",components:[],skin:"wysiwyg.viewer.skins.screenwidthcontainer.DefaultScreen",layout:{width:344,height:107,x:0,y:0,scale:1,rotationInDegrees:0,anchors:[{distance:0,topToTop:107,originalValue:107,type:"BOTTOM_TOP",locked:!0,targetComponent:"PAGES_CONTAINER"}],fixedPosition:!1},componentType:"wysiwyg.viewer.components.HeaderContainer"},{type:"Container",styleId:"fc3",id:"SITE_FOOTER",components:[],skin:"wysiwyg.viewer.skins.screenwidthcontainer.DefaultScreen",layout:{width:344,height:132,x:0,y:1051,scale:1,rotationInDegrees:0,anchors:[{distance:0,topToTop:948,originalValue:1180,type:"BOTTOM_PARENT",locked:!0,targetComponent:"SITE_STRUCTURE"}],fixedPosition:!1},componentType:"wysiwyg.viewer.components.FooterContainer"},{type:"Container",styleId:"pc1",id:"PAGES_CONTAINER",components:[{type:"Container",id:"SITE_PAGES",components:[],skin:"wysiwyg.viewer.skins.PageGroupSkin",layout:{width:344,height:944,x:0,y:0,scale:1,rotationInDegrees:0,anchors:[{distance:0,topToTop:0,originalValue:1598,type:"BOTTOM_PARENT",locked:!0,targetComponent:"PAGES_CONTAINER"}],fixedPosition:!1},propertyQuery:"SITE_PAGES",componentType:"wysiwyg.viewer.components.PageGroup"}],skin:"wysiwyg.viewer.skins.screenwidthcontainer.BlankScreen",layout:{width:344,height:944,x:0,y:107,scale:1,rotationInDegrees:0,anchors:[{distance:0,topToTop:871,originalValue:948,type:"BOTTOM_TOP",locked:!0,targetComponent:"SITE_FOOTER"}],fixedPosition:!1},componentType:"wysiwyg.viewer.components.PagesContainer"}]},data:{document_data:{MAIN_MENU:{type:"Menu",id:"MAIN_MENU",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},items:[{refId:"# "+c,items:[]}]},SITE_STRUCTURE:{type:"Document",id:"SITE_STRUCTURE",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},siteName:"Template Base",mainPage:"#"+c,renderModifiers:{pageAutoShrink:!0},characterSets:["latin","hebrew"],usedFonts:["din-next-w01-light","corben","open sans","alef-regular","times new roman","arial black","arial","soho-w01-thin-condensed"]},bgMediaItem:{type:"BackgroundMedia",color:"none",fittingType:"fit",alignType:"center",scrollType:"scroll",mediaRef:""}},theme_data:{THEME_DATA:{type:"WFlatTheme",id:"THEME_DATA",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},color:[],siteBg:"none 0 0 center center 0px repeat repeat scroll {color_12}",mobileBg:"none 0 0 center center 0px repeat repeat scroll {color_12}",font:[],border:["0.15em solid [color_1]","0.25em solid [color_2]","0.35em solid [color_3]"],padding1:"0 0 0 0",padding2:"0.0em 0.5em 0.0em 0.5em",padding3:"1.0em 0.0em 1.0em 0.0em",iconSize:"3.2",bulletSize:"1.5",headerSpacing:"2.25em",componentSpacing:"0.45em",itemSpacing:"0.75em",thumbSpacing:"0.23em",iconSpacing:"0.75em",themePresets:{},THEME_DIRECTORY:"photography",BG_DIRECTORY:"photography",CONTACT_DIRECTORY:"photography/contact",NETWORKS_DIRECTORY:"photography/network",EXTERNAL_LINKS_DIRECTORY:"photography/external",PAGES_DIRECTORY:"photography/pages",WEB_THEME_DIRECTORY:"viewer",BASE_THEME_DIRECTORY:"base"},transparentPage:{type:"TopLevelStyle",id:"transparentPage",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{},propertiesSource:{},groups:{}},componentClassName:"",pageId:"",compId:"",styleType:"system",skin:"wysiwyg.viewer.skins.page.TransparentPageSkin"}},component_properties:{SITE_PAGES:{type:"PageGroupProperties",metaData:{schemaVersion:"1.0"},transition:"none"},TINY_MENU:{type:"TinyMenuProperties",metaData:{schemaVersion:"1.0"},direction:"left"}}}},d.pagesData.masterPage.data.document_data[c]={type:"Page",id:c,metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},title:"HOME",hideTitle:!0,icon:"",descriptionSEO:"",metaKeywordsSEO:"",pageTitleSEO:"",pageUriSEO:"home",hidePage:!1,underConstruction:!1,tpaApplicationId:0,pageSecurity:{requireLogin:!1},indexable:!0,isLandingPage:!0,pageBackgrounds:{desktop:{custom:!0,ref:"#bgMediaItem",isPreset:!1},mobile:{custom:!0,ref:"#bgMediaItem",isPreset:!0}}},d.pagesData[c]={structure:{type:"Page",styleId:"transparentPage",id:c,components:[],mobileComponents:[],dataQuery:"#"+c,skin:"wysiwyg.viewer.skins.page.TransparentPageSkin",layout:{width:344,height:1025,x:0,y:0,scale:1,rotationInDegrees:0,anchors:[],fixedPosition:!1},componentType:"mobile.core.components.Page"},data:{document_data:{},theme_data:{},component_properties:{}},title:"HOME",pageUriSEO:"home"},d}};return k}),define("santaPreview/mixins/previewHelper",["lodash","util","react"],function(a,b,c){"use strict";function g(a,b){var c=a.publicModel.pageList.mainPageId;a.pagesData[c].structure.components.push(b)}function h(b,c,d){c.pagesData.masterPage.data.document_data.MAIN_MENU.items=[],a.forOwn(b.data,function(a,b){"CUSTOM_MAIN_MENU"===b?c.pagesData.masterPage.data.document_data[b]=a:c.pagesData[d].data.document_data[b]=a}),a.forOwn(b.additionalData,function(a){c.pagesData[d].data.document_data[a.id]=a}),a.forOwn(b.additionalMatserPageData,function(a){c.pagesData.masterPage.data.document_data[a.id]=a})}function i(b,c,d){a.forOwn(b.props,function(a,b){c.pagesData[d].data.component_properties[b]=a})}function j(b,c){var h=this.context.documentServices,i={},j=b.comps;a.forEach(j,function(b){b=a.clone(b),b[d]&&a.isString(b[d])&&(b[e]?i[b[d]]=b[e]:i[b[d]]||(i[b[d]]=this.context.styleManager.getStyleById(h.theme,h.components,b[d]))),g.apply(this,[c].concat(b[f]))},this),a.forOwn(i,function(a,b){c.pagesData.masterPage.data.theme_data[b]=a})}function k(a,c){var d=c.publicModel.pageList.mainPageId;c.isAddPanelView=!0,c.pagesData[d].structure.components=[];var e=a.preview(d,b.languages.getLanguageCode());h(e,c,d),i(e,c,d),j.apply(this,[e,c]),c.getSiteWidth=function(){return e.siteWidth},c.getBodyClientWidth=function(){return e.siteWidth},c.getPageMinHeight=function(){return e.totalSectionHeight},c.actionsForPreviewExtension=e.actionsForPreviewExtension,c.addLabel=this.addLabel,c.addIcon=this.addIcon,c.compTypes=e.compTypes,c.shouldListenToMouseEvents=this.shouldListenToMouseEvents,c.forceBrowserRepaint=this.forceBrowserRepaint,c.onMouseEnterToLiveComp=this.onMouseEnterToLiveComp,c.onMouseOutFromLiveComp=this.onMouseOutFromLiveComp,c.addPanelSite=!0,c.categoryId=e.categoryId,c.maxFontSize=e.maxFontSize}var d="styleId",e="customStyle",f="compFullStructure";return{contextTypes:{documentServices:c.PropTypes.object.isRequired,styleManager:c.PropTypes.object.isRequired},generatePreview:k}}),define("santaPreview/mixins/additionalActionsOnPreview",["react","lodash","jquery","baseUI"],function(a,b,c,d){"use strict";function e(a){return b.find(a[""].addChildren,{ref:"labelDescribingComp"})}function f(b,c,d){var f=a.DOM.div({style:{position:"absolute",top:"100%",left:"0",width:"100%",height:"20px",marginTop:"5px",textAlign:"center",opacity:"always"===c.labelMode?1:0,fontSize:c.fontSize},className:"label-describing-comp",ref:"labelDescribingComp",children:c.compTypesLabels[d]});b[""].addChildren=b[""].addChildren||[],e(b)||b[""].addChildren.push(f)}function g(c,e,f){var g=a.createElement(d.infoIcon,b.assign({ref:"infoIcon",size:18/e.scaleProportion.x},f)),h=a.DOM.div({style:{opacity:0},className:"infoIconWrapper",ref:"infoIconWrapper",children:g});c[""].addChildren=c[""].addChildren||[],c[""].addChildren.push(h)}function h(a){var b=a.actionsForPreviewExtension;return"hover"===b.labelMode||"hover"===b.infoIcon}function i(a){if("hover"===a.labelMode){var b=this.refs.labelDescribingComp.getDOMNode();c(b).css({opacity:1})}}function j(a){if("hover"===a.labelMode){var b=this.refs.labelDescribingComp.getDOMNode();c(b).css({opacity:0})}}function k(a){a.style.display="none";var b=a.offsetHeight;return a.style.display="",b}return{addLabel:f,addIcon:g,shouldListenToMouseEvents:h,forceBrowserRepaint:k,onMouseEnterToLiveComp:i,onMouseOutFromLiveComp:j}}),define("santaPreview/componentExtensions/googleMapAddPanelPreviewExtension",["pLoader!santa:react"],function(a){"use strict";return{createBlockLayerIfNeeded:function(c){if(this.props.siteData.addPanelSite){var d={style:{position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",cursor:"pointer"},className:"blockLayer"};d.onClick=function(){};var e=a.DOM.div(d);c[""]=c[""]||{},c[""].addChildren=c[""].addChildren||[],c[""].addChildren.push(e)}}}}),define("santaPreview/componentExtensions/tinyMenuAddPanelPreviewExtension",["lodash"],function(a){"use strict";return{transformRefData:function(c){this.props.siteData.addPanelSite&&(c[""]=c[""]||{},c[""].style=a.assign({},c[""].style||{},{zIndex:"auto"}))}}}),define("santaPreview/componentExtensions/slideShowGalleryAddPanelPreviewExtension",["lodash"],function(a){"use strict";return{transformRefData:function(c){this.props.siteData.addPanelSite&&(c[""]=c[""]||{},c[""].style=a.assign({},c[""].style,{overflow:"visible"}),c.buttonNext=c.buttonNext||{},c.buttonNext.style=a.assign({},c.buttonNext.style,{right:0}),c.buttonPrev=c.buttonPrev||{},c.buttonPrev.style=a.assign({},c.buttonPrev.style,{left:0}))}}}),define("santaPreview/componentExtensions/subscribeFormRemoveMaxWidthForAddPanel",[],function(){"use strict";return{transformRefData:function(b){this.props.siteData.addPanelSite&&(b[""]=b[""]||{},b[""].style.minWidth="initial",b[""].style.maxWidth="initial")}}}),define("santaPreview/componentExtensions/blockLayerForAddPanel",["pLoader!santa:previewExtensionsCore","santaPreview/componentExtensions/googleMapAddPanelPreviewExtension","santaPreview/componentExtensions/tinyMenuAddPanelPreviewExtension","santaPreview/componentExtensions/slideShowGalleryAddPanelPreviewExtension","santaPreview/componentExtensions/subscribeFormRemoveMaxWidthForAddPanel"],function(a,b,c,d,e){"use strict";var f=a.registrar;f.registerCompExtension("wysiwyg.viewer.components.GoogleMap",b),f.registerCompExtension("wysiwyg.viewer.components.mobile.TinyMenu",c),f.registerCompExtension("wysiwyg.viewer.components.SlideShowGallery",d),f.registerCompExtension("wysiwyg.common.components.subscribeform.viewer.SubscribeForm",e)}),define("santaPreview",["react","lodash","jquery","addPanelInfra","util","santaPreview/mixins/generateEmptySiteData","santaPreview/mixins/previewHelper","santaPreview/mixins/additionalActionsOnPreview","pLoader","pLoader!santa:utils","pLoader!santa:core","pLoader!santa:skins","pLoader!santa:previewExtensionsCore","pLoader!santa:react","pLoader!santa:reactDOM","pLoader!santa:mousetrap","pLoader!santa:swfobject","pLoader!santa:color","pLoader!santa:animations","pLoader!santa:components","pLoader!santa:fonts","pLoader!santa:layout","santaPreview/componentExtensions/blockLayerForAddPanel"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){"use strict";var p=d.liveComponentStyleAdjuster;m.registrar.extendCompClasses();var q=!0;l.registerRenderPlugin(function(a,d,e){var f=this.props.siteData;f.actionsForPreviewExtension&&b.includes(f.compTypes,e.componentType)&&("none"!==f.actionsForPreviewExtension.infoIcon&&f.actionsForPreviewExtension.iconEnabledForComps[e.componentType]&&(a[""]=a[""]||{},f.addIcon(a,f.actionsForPreviewExtension,f.actionsForPreviewExtension.iconEnabledForComps[e.componentType])),"none"!==f.actionsForPreviewExtension.labelMode&&(a[""]=a[""]||{},f.addLabel(a,f.actionsForPreviewExtension,e.componentType)),f.shouldListenToMouseEvents(f)&&(a[""].onMouseEnter=function(){if("hover"===f.actionsForPreviewExtension.labelMode){var a=this.refs.labelDescribingComp.getDOMNode();c(a).css({opacity:1}),f.forceBrowserRepaint(a)}if("hover"===f.actionsForPreviewExtension.infoIcon&&f.actionsForPreviewExtension.iconEnabledForComps[e.componentType]){var b=this.refs.infoIconWrapper.getDOMNode();c(b).css({opacity:1}),f.forceBrowserRepaint(b)}}.bind(this),a[""].onMouseLeave=function(){if("hover"===f.actionsForPreviewExtension.labelMode){var a=this.refs.labelDescribingComp.getDOMNode();c(a).css({opacity:0}),f.forceBrowserRepaint(a)}if("hover"===f.actionsForPreviewExtension.infoIcon&&f.actionsForPreviewExtension.iconEnabledForComps[e.componentType]){var b=this.refs.infoIconWrapper.getDOMNode();c(b).css({opacity:0}),f.forceBrowserRepaint(b)}}.bind(this)))});var r=a.createClass({displayName:"santaPreview",mixins:[f,g,h],contextTypes:{documentServices:a.PropTypes.object.isRequired,styleManager:a.PropTypes.object.isRequired},generateSiteModel:function(a){var c=null,d=!1;if(this.state&&this.state.siteData)c=this.state.siteData;else{var f=this.generateEmptySiteData(i.getRootUrl("santa"));f.requestModel={userAgent:window.navigator.userAgent,cookie:"",storage:{}},f.currentUrl=j.urlUtils.parseUrl(f.publicModel.externalBaseUrl+"?suppressbi=true&lang="+e.languages.getLanguageCode()),c=new k.SiteData(f,b.noop),c.currentPageInfo=j.wixUrlParser.parseUrl(c,c.currentUrl.full),d=!0}if(this.generatePreview(a,c),d){var g=this.context.documentServices.theme.styles.get("THEME_DATA");g.font=e.fontLangsFallbacks.getUpdatedFonts(g.font,e.languages.getLanguageCode(),c.maxFontSize),b.forEach(g.color,function(a,b){var d=p.getColorTeReplaceIfNeeded(a,c.categoryId);d&&d.wasReplaced&&(g.color[b]=d.value)}),c.pagesData.masterPage.data.theme_data.THEME_DATA.color=g.color,c.pagesData.masterPage.data.theme_data.THEME_DATA.font=g.font}var h=b(c.pagesData).keys().pull("masterPage").value();return c.pagesData=b.mapValues(c.pagesData,function(a){return j.dataFixer.fix(a,h.slice(),null,null,{})}),c},getInitialState:function(){return{siteData:this.generateSiteModel(this.props),scopedRootId:b.uniqueId("pv")}},componentWillReceiveProps:function(a){a.preview!==this.props.preview&&this.setState({siteData:this.generateSiteModel(a)})},render:function(){return a.createElement("div",{ref:"previewContainer",style:b.merge({},this.props.style||{},{position:"relative"})})},renderSantaHack:function(a){q=!1;var c=n.createElement("div");o.render(c,this.refs.previewContainer.getDOMNode(),a||b.noop)},renderSanta:function(a){var c=k.SiteDataAPI.createSiteDataAPIAndDal(this.state.siteData,b.noop),d={pointers:c.pointers,displayedDAL:c.displayedDal,siteDataAPI:c.siteDataAPI},e=n.createElement(k.renderer.WixSiteReact,{extraEventsHandlers:this.props.extraEventsHandlers,urlInfo:this.state.siteData.currentPageInfo,siteData:this.state.siteData,currentPage:this.state.siteData.currentPageInfo.pageId,pageId:this.state.siteData.publicModel.pageList.mainPageId,navigateMethod:b.noop,updateHeadMethod:b.noop,getSiteContainer:this.getDOMNode,siteRootPosition:"relative",scopedRoot:this.state.scopedRootId,viewerPrivateServices:d});o.render(e,this.refs.previewContainer.getDOMNode(),a||b.noop)},componentDidMount:function(){var a=this;q&&this.renderSantaHack(this.componentDidMount.bind(this)),this.renderSanta(function(){o.findDOMNode(this.refs.SITE_BACKGROUND).style.display="none",this.registerAspectToEvent("siteReady",function(){if(a.props.onSiteReady){var b=this.siteAPI.getSiteData().measureMap;a.props.onSiteReady(this.siteAPI.getSiteData().measureMap.height[a.state.siteData.publicModel.pageList.mainPageId],b)}}.bind(this))})},componentDidUpdate:function(){this.renderSanta()},componentWillUnmount:function(){o.unmountComponentAtNode(this.refs.previewContainer.getDOMNode())}});return r});