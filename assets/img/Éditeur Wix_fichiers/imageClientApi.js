define("imageClientApi/helpers/imageServiceConstants",[],function(){"use strict";var a="v1",b={SCALE_TO_FILL:"fill",SCALE_TO_FIT:"fit",STRETCH:"stretch",ORIGINAL_SIZE:"original_size",TILE:"tile",TILE_HORIZONTAL:"tile_horizontal",TILE_VERTICAL:"tile_vertical",FIT_AND_TILE:"fit_and_tile",LEGACY_STRIP_TILE:"legacy_strip_tile",LEGACY_STRIP_TILE_HORIZONTAL:"legacy_strip_tile_horizontal",LEGACY_STRIP_TILE_VERTICAL:"legacy_strip_tile_vertical",LEGACY_STRIP_SCALE_TO_FILL:"legacy_strip_fill",LEGACY_STRIP_SCALE_TO_FIT:"legacy_strip_fit",LEGACY_STRIP_FIT_AND_TILE:"legacy_strip_fit_and_tile",LEGACY_STRIP_ORIGINAL_SIZE:"legacy_strip_original_size",LEGACY_ORIGINAL_SIZE:"actual_size",LEGACY_FIT_WIDTH:"fitWidth",LEGACY_FIT_HEIGHT:"fitHeight",LEGACY_FULL:"full",LEGACY_BG_FIT_AND_TILE:"legacy_tile",LEGACY_BG_FIT_AND_TILE_HORIZONTAL:"legacy_tile_horizontal",LEGACY_BG_FIT_AND_TILE_VERTICAL:"legacy_tile_vertical",LEGACY_BG_NORMAL:"legacy_normal"},c={FIT:"fit",FILL:"fill",CROP:"crop",LEGACY_CROP:"legacy_crop"},d={CENTER:"center",TOP:"top",TOP_LEFT:"top_left",TOP_RIGHT:"top_right",BOTTOM:"bottom",BOTTOM_LEFT:"bottom_left",BOTTOM_RIGHT:"bottom_right",LEFT:"left",RIGHT:"right"},e={center:"c",top:"t",top_left:"tl",top_right:"tr",bottom:"b",bottom_left:"bl",bottom_right:"br",left:"l",right:"r"},f={BG:"bg",IMG:"img",SVG:"svg"},g={STATIC:"static",DYNAMIC:"dynamic"},h={radius:.66,amount:1,threshold:.01},i={HIGH:{size:196e4,quality:90,maxUpscale:1},MEDIUM:{size:36e4,quality:85,maxUpscale:1},LOW:{size:16e4,quality:80,maxUpscale:1.2},TINY:{size:0,quality:80,maxUpscale:1.4}},j={HIGH:"HIGH",MEDIUM:"MEDIUM",LOW:"LOW",TINY:"TINY"};return{alignTypes:d,alignTypesMap:e,transformTypes:c,fittingTypes:b,htmlTag:f,usmType:g,defaultUSM:h,imageQuality:j,imageQualityMap:i,API_VERSION:a}}),define("imageClientApi/helpers/imageServiceUtils",["lodash","imageClientApi/helpers/imageServiceConstants"],function(a,b){"use strict";function c(){return d("objectFit")}function d(a){return a in document.documentElement.style}function e(b){var c=["png","jpeg","jpg","wix_ico_mp","wix_mp"];return a.includes(c,l(b).toLowerCase())}function f(c,d,e){var f={message:"ok",valid:!0};return d&&!j(d.id)||(f={message:'missing or empty "src"',valid:!1}),e||(f={message:'missing or empty "target"',valid:!1}),a.includes(b.fittingTypes,c)||(f={message:'missing or empty "fittingType"',valid:!1}),f}function g(a){return e(a)&&!i(a)}function h(b){return a.includes(["jpg","jpeg"],l(b))}function i(a){return/(^https?)|(^data)/.test(a)}function j(a){return!a||!a.trim()||"none"===a.toLowerCase()}function k(a){var b=/\/(.*?)$/.exec(a);return b&&b.length?b[1]:a}function l(a){var b=/[.]([^.]+)$/.exec(a);return b&&/[.]([^.]+)$/.exec(a)[1]||""}function m(a,b,c,d){return Math.min(c/a,d/b)}function n(a,b,c,d){return Math.max(c/a,d/b)}function o(a,c,d,e,f){var g;return g=f===b.transformTypes.FILL?n(a,c,d,e):f===b.transformTypes.FIT?m(a,c,d,e):1}function p(a,c,d,e){var f=s(d),g={width:0,height:0,scaleFactor:0,cssUpscaleNeeded:!1},h=o(a,c,d.width*f,d.height*f,e),i=v(a,c);if(h>i){switch(e){case b.transformTypes.FILL:g.width=d.width*f*(i/h),g.height=d.height*f*(i/h);break;case b.transformTypes.FIT:g.width=a*i,g.height=c*i}g.scaleFactor=i,g.cssUpscaleNeeded=!0}else{switch(e){case b.transformTypes.FILL:g.width=d.width*f,g.height=d.height*f;break;case b.transformTypes.FIT:g.width=a*h,g.height=c*h}g.scaleFactor=h,g.cssUpscaleNeeded=!1}return g}function q(a,c,d){var e,f;switch(d){case b.alignTypes.CENTER:e=Math.max(0,(a.width-c.width)/2),f=Math.max(0,(a.height-c.height)/2);break;case b.alignTypes.TOP:e=Math.max(0,(a.width-c.width)/2),f=0;break;case b.alignTypes.TOP_LEFT:e=0,f=0;break;case b.alignTypes.TOP_RIGHT:e=Math.max(0,a.width-c.width),f=0;break;case b.alignTypes.BOTTOM:e=Math.max(0,(a.width-c.width)/2),f=Math.max(0,a.height-c.height);break;case b.alignTypes.BOTTOM_LEFT:e=0,f=Math.max(0,a.height-c.height);break;case b.alignTypes.BOTTOM_RIGHT:e=Math.max(0,a.width-c.width),f=Math.max(0,a.height-c.height);break;case b.alignTypes.LEFT:e=0,f=Math.max(0,(a.height-c.height)/2);break;case b.alignTypes.RIGHT:e=Math.max(0,a.width-c.width),f=Math.max(0,(a.height-c.height)/2)}return{x:a.x?a.x+e:e,y:a.y?a.y+f:f,width:Math.min(a.width,c.width),height:Math.min(a.height,c.height)}}function r(a,b){var c=Math.max(0,Math.min(a.width,b.x+b.width)-Math.max(0,b.x)),d=Math.max(0,Math.min(a.height,b.y+b.height)-Math.max(0,b.y)),e=c&&d&&(a.width!==c||a.height!==d);return e?{x:Math.max(0,b.x),y:Math.max(0,b.y),width:c,height:d}:null}function s(a){return a.pixelAspectRatio||1}function t(a){return b.alignTypesMap[a.alignment]||b.alignTypesMap[b.alignTypes.CENTER]}function u(a,c){return b.imageQualityMap[w(a,c)].quality}function v(a,c){return b.imageQualityMap[w(a,c)].maxUpscale}function w(a,c){var d=a*c;return d>b.imageQualityMap[b.imageQuality.HIGH].size?b.imageQuality.HIGH:d>b.imageQualityMap[b.imageQuality.MEDIUM].size?b.imageQuality.MEDIUM:d>b.imageQualityMap[b.imageQuality.LOW].size?b.imageQuality.LOW:b.imageQuality.TINY}function x(a,b,c,d,e){var f=o(a,b,c,d,e);return{width:Math.round(a*f),height:Math.round(b*f)}}return{isPropertySupported:d,isImageTransformApplicable:g,isValidRequest:f,isTypeSupported:e,isJPG:h,doesBrowserSupportObjectFit:c,getFileExtension:l,getFileName:k,getAlignedRect:q,getOverlappingRect:r,getFitScaleFactor:m,getFillScaleFactor:n,getScaleFactor:o,getCalculatedTransformedData:p,getPixelAspectRatio:s,getAlignment:t,getPreferredImageQuality:u,getPreferredUpscaleFactor:v,getDimension:x}}),define("imageClientApi/helpers/imageTransformParts",["lodash","imageClientApi/helpers/imageServiceConstants","imageClientApi/helpers/imageServiceUtils"],function(a,b,c){"use strict";function d(d,l,m){var n,o={src:{id:l.id,width:l.width,height:l.height,isCropped:!1},fittingType:d,parts:[]};if(!c.isImageTransformApplicable(l.id))return o;switch(l.crop&&(n=c.getOverlappingRect(l,l.crop),n&&(o.src.width=n.width,o.src.height=n.height,o.src.cropped=!0,o.parts.push(h(n)))),d){case b.fittingTypes.SCALE_TO_FIT:case b.fittingTypes.LEGACY_FIT_WIDTH:case b.fittingTypes.LEGACY_FIT_HEIGHT:case b.fittingTypes.LEGACY_FULL:case b.fittingTypes.FIT_AND_TILE:case b.fittingTypes.LEGACY_BG_FIT_AND_TILE:case b.fittingTypes.LEGACY_BG_FIT_AND_TILE_HORIZONTAL:case b.fittingTypes.LEGACY_BG_FIT_AND_TILE_VERTICAL:case b.fittingTypes.LEGACY_BG_NORMAL:o.parts.push(e(o,m));break;case b.fittingTypes.SCALE_TO_FILL:o.parts.push(f(o,m));break;case b.fittingTypes.STRETCH:o.parts.push(g(o,m));break;case b.fittingTypes.TILE_HORIZONTAL:case b.fittingTypes.TILE_VERTICAL:case b.fittingTypes.TILE:case b.fittingTypes.LEGACY_ORIGINAL_SIZE:case b.fittingTypes.ORIGINAL_SIZE:n=c.getAlignedRect(o.src,m,m.alignment),o.src.isCropped?(a.assign(o.parts[0],n),o.src.width=n.width,o.src.height=n.height):o.parts.push(h(n));break;case b.fittingTypes.LEGACY_STRIP_TILE_HORIZONTAL:case b.fittingTypes.LEGACY_STRIP_TILE_VERTICAL:case b.fittingTypes.LEGACY_STRIP_TILE:case b.fittingTypes.LEGACY_STRIP_ORIGINAL_SIZE:o.parts.push(k(m));break;case b.fittingTypes.LEGACY_STRIP_SCALE_TO_FIT:case b.fittingTypes.LEGACY_STRIP_FIT_AND_TILE:o.parts.push(i(m));break;case b.fittingTypes.LEGACY_STRIP_SCALE_TO_FILL:o.parts.push(j(m))}return o}function e(a,d){var e=c.getCalculatedTransformedData(a.src.width,a.src.height,d,b.transformTypes.FIT);return{transformType:b.transformTypes.FILL,width:Math.round(e.width),height:Math.round(e.height),alignment:b.alignTypesMap.center,upscale:e.scaleFactor>1?",lg_1":"",forceUSM:!1,scaleFactor:e.scaleFactor,cssUpscaleNeeded:e.cssUpscaleNeeded}}function f(a,d){var e=c.getCalculatedTransformedData(a.src.width,a.src.height,d,b.transformTypes.FILL);return{transformType:b.transformTypes.FILL,width:Math.round(e.width),height:Math.round(e.height),alignment:c.getAlignment(d),upscale:e.scaleFactor>1?",lg_1":"",forceUSM:!1,scaleFactor:e.scaleFactor,cssUpscaleNeeded:e.cssUpscaleNeeded}}function g(d,f){var g=c.getScaleFactor(d.src.width,d.src.height,f.width,f.height,b.transformTypes.FILL),h=a.cloneDeep(f);return h.width=d.src.width*g,h.height=d.src.height*g,e(d,h)}function h(a){return{transformType:b.transformTypes.CROP,x:Math.round(a.x),y:Math.round(a.y),width:Math.round(a.width),height:Math.round(a.height),upscale:"",forceUSM:!1,scaleFactor:1,cssUpscaleNeeded:!1}}function i(a){return{transformType:b.transformTypes.FIT,width:Math.round(a.width),height:Math.round(a.height),upscale:"",forceUSM:!0,scaleFactor:1,cssUpscaleNeeded:!1}}function j(a){return{transformType:b.transformTypes.FILL,width:Math.round(a.width),height:Math.round(a.height),alignment:c.getAlignment(a),upscale:"",forceUSM:!0,scaleFactor:1,cssUpscaleNeeded:!1}}function k(a){return{transformType:b.transformTypes.LEGACY_CROP,width:Math.round(a.width),height:Math.round(a.height),alignment:c.getAlignment(a),upscale:"",forceUSM:!1,scaleFactor:1,cssUpscaleNeeded:!1}}return{getParsedRequest:d}}),define("imageClientApi/helpers/imageTransformFilters",["lodash","imageClientApi/helpers/imageServiceConstants","imageClientApi/helpers/imageServiceUtils"],function(a,b,c){"use strict";function d(a,b){return b=b||{},{quality:f(a,b),unSharpMask:g(a,b),progressive:e(b)}}function e(a){a=a||{};var b=a.progressive!==!1;return b?"":",bl"}function f(b,d){d=d||{};var e=a.last(b.parts),f="";if(c.isJPG(b.src.id)){var g=c.getPreferredImageQuality(e.width,e.height);f=d.quality&&d.quality>=0&&d.quality<=100?d.quality:g}return f?",q_"+f.toFixed(0):""}function g(a,c){c=c||{},c.unsharpMask=c.unsharpMask||{};var e,d=c.unsharpMaskType||b.usmType.DYNAMIC;return i(c.unsharpMask)?e=d===b.usmType.DYNAMIC?k(a,c.unsharpMask):{radius:c.unsharpMask.radius,amount:c.unsharpMask.amount,threshold:c.unsharpMask.threshold}:j(c.unsharpMask)||(e=k(a,b.defaultUSM)),e?",usm_"+l(e.radius,2)+"_"+l(e.amount,2)+"_"+l(e.threshold,2):""}function h(b){var c=a.last(b.parts),d=c.scaleFactor>=1;return!d||c.forceUSM}function i(b){var c=!a.isUndefined(b.radius)&&b.radius>=.1&&b.radius<=500,d=!a.isUndefined(b.amount)&&b.amount>=0&&b.amount<=10,e=!a.isUndefined(b.threshold)&&b.threshold>=0&&b.threshold<=255;return c&&d&&e}function j(a){return 0===a.radius&&0===a.amount&&0===a.threshold}function k(a,b){return h(a)?b:null}function l(b,c){return a.round(b,c).toFixed(c)}return{getTransformFilters:d}}),define("imageClientApi/engines/transforms",["lodash","imageClientApi/helpers/imageServiceConstants","imageClientApi/helpers/imageServiceUtils","imageClientApi/helpers/imageTransformFilters"],function(a,b,c,d){"use strict";function j(j,k){var l="";if(a.isEmpty(j.parts))return j.src.id;a.forEach(j.parts,function(a){switch(a.transformType){case b.transformTypes.CROP:l+=g(a);break;case b.transformTypes.LEGACY_CROP:l+=h(a);break;case b.transformTypes.FIT:l+=e(a);break;case b.transformTypes.FILL:l+=f(a)}});var m=i(d.getTransformFilters(j,k));return j.src.id+"/"+b.API_VERSION+l+m+"/"+c.getFileName(j.src.id)}var e=a.template("/fit/w_${width},h_${height}${upscale}"),f=a.template("/fill/w_${width},h_${height},al_${alignment}${upscale}"),g=a.template("/crop/x_${x},y_${y},w_${width},h_${height}"),h=a.template("/crop/w_${width},h_${height},al_${alignment}"),i=a.template("${quality}${unSharpMask}${progressive}");return{getImageURI:j}}),define("imageClientApi/engines/attributes/backgroundAttributes",["lodash","imageClientApi/helpers/imageServiceConstants"],function(a,b){"use strict";function c(a,c){var d={css:{container:{}}},e=d.css,f=b.alignTypes,g=a.fittingType,h=b.fittingTypes;switch(g){case h.ORIGINAL_SIZE:case h.LEGACY_ORIGINAL_SIZE:case h.LEGACY_STRIP_ORIGINAL_SIZE:e.container.backgroundSize="auto",e.container.backgroundRepeat="no-repeat";break;case h.SCALE_TO_FIT:case h.LEGACY_STRIP_SCALE_TO_FIT:e.container.backgroundSize="contain",e.container.backgroundRepeat="no-repeat";break;case h.STRETCH:e.container.backgroundSize="100% 100%",e.container.backgroundRepeat="no-repeat";break;case h.SCALE_TO_FILL:case h.LEGACY_STRIP_SCALE_TO_FILL:e.container.backgroundSize="cover",e.container.backgroundRepeat="no-repeat";break;case h.TILE_HORIZONTAL:case h.LEGACY_STRIP_TILE_HORIZONTAL:e.container.backgroundSize="auto",e.container.backgroundRepeat="repeat-x";break;case h.TILE_VERTICAL:case h.LEGACY_STRIP_TILE_VERTICAL:e.container.backgroundSize="auto",e.container.backgroundRepeat="repeat-y";break;case h.TILE:case h.LEGACY_STRIP_TILE:e.container.backgroundSize="auto",e.container.backgroundRepeat="repeat";break;case h.FIT_AND_TILE:case h.LEGACY_STRIP_FIT_AND_TILE:e.container.backgroundSize="contain",e.container.backgroundRepeat="repeat";break;case h.LEGACY_BG_FIT_AND_TILE:e.container.backgroundSize="auto",e.container.backgroundRepeat="repeat";break;case h.LEGACY_BG_FIT_AND_TILE_HORIZONTAL:e.container.backgroundSize="auto",e.container.backgroundRepeat="repeat-x";break;case h.LEGACY_BG_FIT_AND_TILE_VERTICAL:e.container.backgroundSize="auto",e.container.backgroundRepeat="repeat-y";break;case h.LEGACY_BG_NORMAL:e.container.backgroundSize="auto",e.container.backgroundRepeat="no-repeat"}switch(c.alignment){case f.CENTER:e.container.backgroundPosition="center center";break;case f.LEFT:e.container.backgroundPosition="left center";break;case f.RIGHT:e.container.backgroundPosition="right center";break;case f.TOP:e.container.backgroundPosition="center top";break;case f.BOTTOM:e.container.backgroundPosition="center bottom";break;case f.TOP_RIGHT:e.container.backgroundPosition="right top";break;case f.TOP_LEFT:e.container.backgroundPosition="left top";break;case f.BOTTOM_RIGHT:e.container.backgroundPosition="right bottom";break;case f.BOTTOM_LEFT:e.container.backgroundPosition="left bottom"}return d}return{get:c}}),define("imageClientApi/engines/attributes/imgAttributes",["lodash","imageClientApi/helpers/imageServiceConstants"],function(a,b){"use strict";function c(a,c){var d={css:{container:{},img:{}}},e=d.css,f=a.fittingType,g=b.fittingTypes;switch(e.container.position="relative",f){case g.ORIGINAL_SIZE:case g.LEGACY_ORIGINAL_SIZE:e.img.width=a.src.width,e.img.height=a.src.height,e.img.objectFit="none";break;case g.SCALE_TO_FIT:case g.LEGACY_FIT_WIDTH:case g.LEGACY_FIT_HEIGHT:case g.LEGACY_FULL:e.img.width=c.width,e.img.height=c.height,e.img.objectFit="contain";break;case g.STRETCH:e.img.width=c.width,e.img.height=c.height,e.img.objectFit="fill";break;case g.SCALE_TO_FILL:e.img.width=c.width,e.img.height=c.height,e.img.objectFit="cover"}return d}return{get:c}}),define("imageClientApi/engines/attributes/SVGAttributes",["lodash","imageClientApi/helpers/imageServiceConstants","imageClientApi/helpers/imageServiceUtils"],function(a,b,c){"use strict";function d(a,d){var l,e={css:{container:{}},attr:{container:{},img:{}}},f=e.css,g=e.attr,h=a.fittingType,i=b.fittingTypes,j=a.src.width,k=a.src.height;switch(f.container.position="relative",h){case i.ORIGINAL_SIZE:case i.LEGACY_ORIGINAL_SIZE:g.img.width=a.src.width,g.img.height=a.src.height,g.img.x="50%",g.img.y="50%",g.img.transform="translate("+-a.src.width/2+","+-a.src.height/2+")",g.img.preserveAspectRatio="xMidYMid slice";break;case i.SCALE_TO_FIT:case i.LEGACY_FIT_WIDTH:case i.LEGACY_FIT_HEIGHT:case i.LEGACY_FULL:l=c.getDimension(j,k,d.width,d.height,b.transformTypes.FIT),g.img.width="100%",g.img.height="100%",g.img.transform="",g.img.preserveAspectRatio="";break;case i.STRETCH:g.img.width=d.width,g.img.height=d.height,g.img.x=0,g.img.y=0,g.img.transform="",g.img.preserveAspectRatio="none";break;case i.SCALE_TO_FILL:c.isImageTransformApplicable(a.src.id)?(g.img.width=d.width,g.img.height=d.height):(l=c.getDimension(j,k,d.width,d.height,b.transformTypes.FILL),g.img.width=l.width,g.img.height=l.height),g.img.x=0,g.img.y=0,g.img.transform="",g.img.preserveAspectRatio="xMidYMid slice"}return g.container.width=d.width,g.container.height=d.height,g.container.viewBox=[0,0,d.width,d.height].join(" "),e}return{get:d}}),define("imageClientApi/engines/attributes/imgPolyfillAttributes",["lodash","imageClientApi/helpers/imageServiceConstants","imageClientApi/helpers/imageServiceUtils"],function(a,b,c){"use strict";function d(d,e){var l,f={css:{container:{},img:{}}},g=f.css,h=d.fittingType,i=b.fittingTypes,j=d.src.width,k=d.src.height;switch(g.img.display="block",g.container.position="relative",h){case i.ORIGINAL_SIZE:case i.LEGACY_ORIGINAL_SIZE:g.img.width=d.src.width,g.img.height=d.src.height;break;case i.SCALE_TO_FIT:case i.LEGACY_FIT_WIDTH:case i.LEGACY_FIT_HEIGHT:case i.LEGACY_FULL:l=c.getDimension(j,k,e.width,e.height,b.transformTypes.FIT),a.assign(g.img,l);break;case i.STRETCH:g.img.width=e.width,g.img.height=e.height;break;case i.SCALE_TO_FILL:c.isImageTransformApplicable(d.src.id)?(g.img.width=e.width,g.img.height=e.height):(l=c.getDimension(j,k,e.width,e.height,b.transformTypes.FILL),a.assign(g.img,l),g.container.overflow="hidden")}if(g.img.width!==e.width||g.img.height!==e.height){var m=Math.round((e.height-g.img.height)/2),n=Math.round((e.width-g.img.width)/2);switch(h){case i.ORIGINAL_SIZE:case i.LEGACY_ORIGINAL_SIZE:g.img.marginTop=m,g.img.marginLeft=n;break;case i.SCALE_TO_FIT:case i.LEGACY_FIT_WIDTH:case i.LEGACY_FIT_HEIGHT:case i.LEGACY_FULL:e.width/j>e.height/k?g.img.marginLeft=n:g.img.marginTop=m;break;case i.SCALE_TO_FILL:e.width/j>e.height/k?g.img.marginTop=m:g.img.marginLeft=n}}return f}return{get:d}}),define("imageClientApi/engines/attributes",["lodash","imageClientApi/helpers/imageServiceConstants","imageClientApi/helpers/imageServiceUtils","imageClientApi/engines/attributes/backgroundAttributes","imageClientApi/engines/attributes/imgAttributes","imageClientApi/engines/attributes/SVGAttributes","imageClientApi/engines/attributes/imgPolyfillAttributes"],function(a,b,c,d,e,f,g){"use strict";function h(a,h){var i;return i=h.htmlTag===b.htmlTag.BG?d:h.htmlTag===b.htmlTag.SVG?f:c.doesBrowserSupportObjectFit()?e:g,i.get(a,h)}return{getAttributes:h}}),define("imageClientApi",["lodash","imageClientApi/helpers/imageServiceConstants","imageClientApi/helpers/imageServiceUtils","imageClientApi/helpers/imageTransformParts","imageClientApi/engines/transforms","imageClientApi/engines/attributes"],function(a,b,c,d,e,f){"use strict";function g(b,g,h,i){var j={},k=c.isValidRequest(b,g,h);if(!k.valid)return{uri:"",css:{img:{},container:{}},attr:{img:{},container:{}}};var l=d.getParsedRequest(b,g,h);return j.uri=e.getImageURI(l,i),a.assign(j,f.getAttributes(l,h)),j}return{doesBrowserSupportObjectFit:c.doesBrowserSupportObjectFit,getData:g,fittingTypes:b.fittingTypes,alignTypes:b.alignTypes,htmlTag:b.htmlTag,unsharpMaskType:b.usmType}});