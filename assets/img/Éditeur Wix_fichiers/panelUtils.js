define("panelUtils/mixins/linkColorPickerMixin",["react","lodash"],function(a,b){"use strict";function c(a){return a?{top:a.top+72+"px",left:a.left-12+"px"}:null}function d(a,b){if(b)return b;var d=c(a);return d||{top:null,left:null}}return{contextTypes:{panelMeasures:a.PropTypes.object},componentDidMount:function(){if(!b.isFunction(this.getEditorAPI))throw new Error("You must use editorAPIMixin to use the linkStyleMixin")},componentWillUpdate:function(a,c,e){var f=this.context.panelMeasures&&this.context.panelMeasures.designPanel,g=e.panelMeasures&&e.panelMeasures.designPanel;if(f&&g&&!b.isEqual(f,g)){var h=d(g);this.getEditorAPI().panelManager.updatePanelProps("panels.toolPanels.colorPicker.colorPickerPanel",{top:h.top,left:h.left})}},openColorPicker:function(a,b,c,e,f,g,h){var i=this.getEditorAPI(),j=this.context.panelMeasures&&this.context.panelMeasures.designPanel,k=d(j,e);i.panelManager.openPanel("panels.toolPanels.colorPicker.colorPickerPanel",{value:b,onChange:a,onClose:h,siteCustomColors:i.theme.colors.getCustomUsedInSkins(),sessionStorage:i.userPreferences.session,history:g!==!1?i.history:null,palettePresets:c?i.theme.colors.getColorPresets():null,updateSitePalette:c?this.updateSitePalette:null,previewOnHover:f,top:k.top,left:k.left},!0)},updateSitePalette:function(a){var b=this.getEditorAPI();b.theme.colors.update(a)},resolveColor:function(a){return this.getEditorAPI().theme.colors.render(a)}}}),define("panelUtils/mixins/linkStyleMixin",["lodash","styles","experiment"],function(a,b,c){"use strict";function g(b,c){var e=this.getEditorAPI(),f=c.style,g=d.getStyleForSkin(e,b,this.cachedStylePropertiesForSkins[b]);d.mergeSharedColorProperties(e,g.properties,f.properties,b,c.skin);var h=a.cloneDeep(c);return a.assign(h.style,g),h.skin=b,h}function h(b){return a.includes(f,b)}function i(b,e,f,g){var h=a.cloneDeep(b),i=h.style;"object"==typeof f?(i.properties[e]=f.value,i.propertiesSource&&(i.propertiesSource[e]=f.source)):(i.properties[e]=f,i.propertiesSource&&(i.propertiesSource[e]=d.getPropertySource(f))),c.isOpen("boxSlideShow")?this.getEditorAPI().components.style.update(a.first(this.props.selectedComponent),h):this.getEditorAPI().theme.styles.update(h.id,h,g),this.isMounted()&&this.setState({styleDataItem:h})}function j(a){return this.getEditorAPI().theme.styles.get(a)}function k(b,c,d){var f=c.style.properties[d];return a.isUndefined(f)?e.getSkinParamDefaultValue(b,c.skin,d):f}var d=b.advancedStyle.styleUtil,e=b.advancedStyle.advancedStyleDataUtil,f=["TEXT_COLOR","COLOR","BG_COLOR","BORDER_COLOR"];return{componentDidMount:function(){if(!a.isFunction(this.getEditorAPI))throw new Error("You must use editorAPIMixin to use the linkStyleMixin")},getInitialState:function(){return this.cachedStylePropertiesForSkins={},{styleId:this.props.styleId,styleDataItem:j.call(this,this.props.styleId)}},linkStyleParam:function(b,c){if(a.includes(c,"COLOR_ALPHA"))return this.linkColorAlphaWithMutator(b);var d=this.state.styleDataItem,e=this.getEditorAPI(),f=k(e,d,b);return{value:f,requestChange:function(a){i.call(this,this.state.styleDataItem,b,a,h(c))}.bind(this)}},linkColorAlphaWithMutator:function(a){var b="alpha-"+a,c=this.state.styleDataItem,d=this.getEditorAPI(),e=k(d,c,b),f=k(d,c,a);return{value:{color:f,alpha:e},requestChange:function(c){var e=c.alpha,f=c.color;k(d,this.state.styleDataItem,b)!==e?i.call(this,this.state.styleDataItem,b,e):i.call(this,this.state.styleDataItem,a,f,!0)}.bind(this)}},cacheStylePropertiesForSkin:function(a,b){this.cachedStylePropertiesForSkins[a]=b},changeSkin:function(a){var b=this.getEditorAPI().theme.styles.get(this.props.styleId);if(a!==b.skin){var c=g.call(this,a,b);this.cacheStylePropertiesForSkin(b.skin,b.style.properties),this.getEditorAPI().theme.styles.update(this.props.styleId,c),this.setState({styleDataItem:c})}}}}),define("panelUtils",["panelUtils/mixins/linkColorPickerMixin","panelUtils/mixins/linkStyleMixin"],function(a,b){"use strict";return{linkColorPickerMixin:a,linkStyleMixin:b}});